
2019-12-02 09:11:23,038 p=20651 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/new-project/elb/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Jun 20 2019, 20:27:34) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]
2019-12-02 09:11:23,038 p=20651 u=root |  Using /home/centos/new-project/elb/ansible.cfg as config file
2019-12-02 09:11:23,046 p=20651 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2019-12-02 09:11:23,046 p=20651 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2019-12-02 09:11:23,046 p=20651 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2019-12-02 09:11:23,050 p=20651 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2019-12-02 09:11:23,051 p=20651 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2019-12-02 09:11:23,491 p=20651 u=root |  statically imported: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml
2019-12-02 09:11:23,496 p=20651 u=root |  statically imported: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/ec2_facts.yml
2019-12-02 09:11:23,501 p=20651 u=root |  statically imported: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/emqtt-network-elb.yml
2019-12-02 09:11:23,507 p=20651 u=root |  statically imported: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml
2019-12-02 09:11:23,511 p=20651 u=root |  statically imported: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/ec2_facts.yml
2019-12-02 09:11:23,515 p=20651 u=root |  statically imported: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/emqtt-network-elb.yml
2019-12-02 09:11:23,577 p=20651 u=root |  PLAYBOOK: elb-create.yml *****************************************************************************************************************************************************************************************************
2019-12-02 09:11:23,577 p=20651 u=root |  1 plays in elb-create.yml
2019-12-02 09:11:23,608 p=20651 u=root |  PLAY [Create cs-dafa all EC2 vHost] ******************************************************************************************************************************************************************************************
2019-12-02 09:11:23,637 p=20651 u=root |  TASK [Gathering Facts] *******************************************************************************************************************************************************************************************************
2019-12-02 09:11:23,637 p=20651 u=root |  task path: /home/centos/new-project/elb/elb-create.yml:3
2019-12-02 09:11:23,649 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:23,649 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:23,657 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277883.65-247306104910694 `" && echo ansible-tmp-1575277883.65-247306104910694="` echo /root/.ansible/tmp/ansible-tmp-1575277883.65-247306104910694 `" ) && sleep 0'
2019-12-02 09:11:24,046 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2019-12-02 09:11:24,047 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpfC5LyK TO /root/.ansible/tmp/ansible-tmp-1575277883.65-247306104910694/AnsiballZ_setup.py
2019-12-02 09:11:24,048 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277883.65-247306104910694/ /root/.ansible/tmp/ansible-tmp-1575277883.65-247306104910694/AnsiballZ_setup.py && sleep 0'
2019-12-02 09:11:24,056 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277883.65-247306104910694/AnsiballZ_setup.py && sleep 0'
2019-12-02 09:11:24,468 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277883.65-247306104910694/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:24,501 p=20651 u=root |  ok: [localhost]
2019-12-02 09:11:24,502 p=20651 u=root |  META: ran handlers
2019-12-02 09:11:24,520 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:24,520 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:2
2019-12-02 09:11:24,552 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml for localhost
2019-12-02 09:11:24,573 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC facts] ************************************************************************************************************************************************************************************
2019-12-02 09:11:24,573 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:11:24,590 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:24,590 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:24,598 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277884.59-243365726739746 `" && echo ansible-tmp-1575277884.59-243365726739746="` echo /root/.ansible/tmp/ansible-tmp-1575277884.59-243365726739746 `" ) && sleep 0'
2019-12-02 09:11:24,823 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:11:24,823 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpMxxv1q TO /root/.ansible/tmp/ansible-tmp-1575277884.59-243365726739746/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:11:24,824 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277884.59-243365726739746/ /root/.ansible/tmp/ansible-tmp-1575277884.59-243365726739746/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:24,833 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277884.59-243365726739746/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:25,767 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277884.59-243365726739746/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:25,780 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:25,798 p=20651 u=root |  TASK [ec2.elb_application_lb : set fact: VPC ID] *****************************************************************************************************************************************************************************
2019-12-02 09:11:25,798 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:11:25,818 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:11:25,835 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC subnet facts] *****************************************************************************************************************************************************************************
2019-12-02 09:11:25,835 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:11:25,852 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:25,852 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:25,861 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277885.85-257217849477616 `" && echo ansible-tmp-1575277885.85-257217849477616="` echo /root/.ansible/tmp/ansible-tmp-1575277885.85-257217849477616 `" ) && sleep 0'
2019-12-02 09:11:26,081 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:11:26,081 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmptwrBvS TO /root/.ansible/tmp/ansible-tmp-1575277885.85-257217849477616/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:11:26,082 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277885.85-257217849477616/ /root/.ansible/tmp/ansible-tmp-1575277885.85-257217849477616/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:26,091 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277885.85-257217849477616/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:26,804 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277885.85-257217849477616/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:26,821 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 238, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 238, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 238, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:26,838 p=20651 u=root |  TASK [ec2.elb_application_lb : register just the IDs for each of the groups] *************************************************************************************************************************************************
2019-12-02 09:11:26,839 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:11:26,858 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:26,876 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:26,876 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:3
2019-12-02 09:11:26,916 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml for localhost
2019-12-02 09:11:26,937 p=20651 u=root |  TASK [ec2.elb_application_lb : emqtt capture instance facts] *****************************************************************************************************************************************************************
2019-12-02 09:11:26,938 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:3
2019-12-02 09:11:26,957 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:26,957 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:26,965 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277886.96-198113952310918 `" && echo ansible-tmp-1575277886.96-198113952310918="` echo /root/.ansible/tmp/ansible-tmp-1575277886.96-198113952310918 `" ) && sleep 0'
2019-12-02 09:11:27,195 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:27,195 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpCOup2B TO /root/.ansible/tmp/ansible-tmp-1575277886.96-198113952310918/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:27,196 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277886.96-198113952310918/ /root/.ansible/tmp/ansible-tmp-1575277886.96-198113952310918/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:27,205 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277886.96-198113952310918/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:27,985 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277886.96-198113952310918/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:28,006 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:28,023 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:28,023 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:12
2019-12-02 09:11:28,046 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:28,066 p=20651 u=root |  TASK [ec2.elb_application_lb : operation capture instance facts] *************************************************************************************************************************************************************
2019-12-02 09:11:28,066 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:16
2019-12-02 09:11:28,084 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:28,085 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:28,093 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277888.08-193995958728009 `" && echo ansible-tmp-1575277888.08-193995958728009="` echo /root/.ansible/tmp/ansible-tmp-1575277888.08-193995958728009 `" ) && sleep 0'
2019-12-02 09:11:28,105 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:28,106 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmplcRiX4 TO /root/.ansible/tmp/ansible-tmp-1575277888.08-193995958728009/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:28,107 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277888.08-193995958728009/ /root/.ansible/tmp/ansible-tmp-1575277888.08-193995958728009/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:28,115 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277888.08-193995958728009/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:28,873 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277888.08-193995958728009/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:28,892 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:21:28+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-056e3802dce5fe04f"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-032969a062e87ea24", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:21:27+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "54.254.169.82"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:21:27+00:00", 
                        "attachment_id": "eni-attach-0c97c475cb97c3d3f", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:38:9f:dd:07:f6", 
                    "network_interface_id": "eni-002b8c4fdbaa64e48", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.161", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "54.254.169.82"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.161"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.161", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "54.254.169.82", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-operation", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-operation*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:28,910 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:28,910 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:25
2019-12-02 09:11:28,930 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "operation_instance_ids": [
            "i-032969a062e87ea24"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:28,948 p=20651 u=root |  TASK [ec2.elb_application_lb : superbackend capture instance facts] **********************************************************************************************************************************************************
2019-12-02 09:11:28,948 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:29
2019-12-02 09:11:28,968 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:28,968 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:28,976 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277888.97-262052497100487 `" && echo ansible-tmp-1575277888.97-262052497100487="` echo /root/.ansible/tmp/ansible-tmp-1575277888.97-262052497100487 `" ) && sleep 0'
2019-12-02 09:11:28,988 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:28,988 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpjoj89Q TO /root/.ansible/tmp/ansible-tmp-1575277888.97-262052497100487/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:28,989 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277888.97-262052497100487/ /root/.ansible/tmp/ansible-tmp-1575277888.97-262052497100487/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:28,998 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277888.97-262052497100487/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:29,724 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277888.97-262052497100487/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:29,744 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:25:38+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-07c30c903b3b956f3"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-08873cd4dde4bdb89", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:25:37+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.74.221.142"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:25:37+00:00", 
                        "attachment_id": "eni-attach-0ce268eae67c7d171", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:f8:7f:1b:f6:32", 
                    "network_interface_id": "eni-023ce40193236c997", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.118", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.74.221.142"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.118"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.118", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.74.221.142", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-superbackend", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-superbackend*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:29,762 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:29,762 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:38
2019-12-02 09:11:29,782 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "superbackend_instance_ids": [
            "i-08873cd4dde4bdb89"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:29,800 p=20651 u=root |  TASK [ec2.elb_application_lb : merchant capture instance facts] **************************************************************************************************************************************************************
2019-12-02 09:11:29,800 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:42
2019-12-02 09:11:29,819 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:29,819 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:29,828 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277889.82-218493535526248 `" && echo ansible-tmp-1575277889.82-218493535526248="` echo /root/.ansible/tmp/ansible-tmp-1575277889.82-218493535526248 `" ) && sleep 0'
2019-12-02 09:11:29,839 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:29,840 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpy8lk9H TO /root/.ansible/tmp/ansible-tmp-1575277889.82-218493535526248/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:29,841 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277889.82-218493535526248/ /root/.ansible/tmp/ansible-tmp-1575277889.82-218493535526248/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:29,849 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277889.82-218493535526248/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:30,583 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277889.82-218493535526248/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:30,603 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:26:13+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-03c23ed308dded2cb"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0bee7737f8f0bb7f2", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:26:12+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "18.141.110.124"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:26:12+00:00", 
                        "attachment_id": "eni-attach-03742ad9f98428ee8", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "0a:53:aa:a3:0e:c0", 
                    "network_interface_id": "eni-0695e3526c1b803ff", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.12.223", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "18.141.110.124"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.12.223"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0dc11d7821eeda12c", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1c", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.12.223", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "18.141.110.124", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Name": "M100-merchant", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-merchant*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:30,620 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:30,620 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:51
2019-12-02 09:11:30,641 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "merchant_instance_ids": [
            "i-0bee7737f8f0bb7f2"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:30,659 p=20651 u=root |  TASK [ec2.elb_application_lb : zuul capture instance facts] ******************************************************************************************************************************************************************
2019-12-02 09:11:30,659 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:55
2019-12-02 09:11:30,678 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:30,679 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:30,687 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277890.68-167683671788386 `" && echo ansible-tmp-1575277890.68-167683671788386="` echo /root/.ansible/tmp/ansible-tmp-1575277890.68-167683671788386 `" ) && sleep 0'
2019-12-02 09:11:30,699 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:30,700 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpL8FyVg TO /root/.ansible/tmp/ansible-tmp-1575277890.68-167683671788386/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:30,701 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277890.68-167683671788386/ /root/.ansible/tmp/ansible-tmp-1575277890.68-167683671788386/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:30,709 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277890.68-167683671788386/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:31,476 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277890.68-167683671788386/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:31,495 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T15:18:01+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0667d48e918774329"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0a9fbb5c635714db8", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T15:18:00+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.77.73.12"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T15:18:00+00:00", 
                        "attachment_id": "eni-attach-0a58646ed352b963c", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0b0d63d52658d996b", 
                            "group_name": "M100-zuul-all"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:50:43:81:29:48", 
                    "network_interface_id": "eni-06614c24c3bef6e43", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.162", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.77.73.12"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.162"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.162", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.77.73.12", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0b0d63d52658d996b", 
                    "group_name": "M100-zuul-all"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-zuul", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-zuul*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:31,513 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:31,513 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:64
2019-12-02 09:11:31,533 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "zuul_instance_ids": [
            "i-0a9fbb5c635714db8"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:31,550 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:31,551 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:6
2019-12-02 09:11:31,597 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml for localhost
2019-12-02 09:11:31,624 p=20651 u=root |  TASK [ec2.elb_application_lb : Get WS SG ID] *********************************************************************************************************************************************************************************
2019-12-02 09:11:31,624 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:2
2019-12-02 09:11:31,643 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:31,644 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:31,652 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277891.64-242003338938025 `" && echo ansible-tmp-1575277891.64-242003338938025="` echo /root/.ansible/tmp/ansible-tmp-1575277891.64-242003338938025 `" ) && sleep 0'
2019-12-02 09:11:31,880 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2019-12-02 09:11:31,880 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmplLXr0O TO /root/.ansible/tmp/ansible-tmp-1575277891.64-242003338938025/AnsiballZ_ec2_group_facts.py
2019-12-02 09:11:31,881 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277891.64-242003338938025/ /root/.ansible/tmp/ansible-tmp-1575277891.64-242003338938025/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:11:31,890 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277891.64-242003338938025/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:11:32,601 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277891.64-242003338938025/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:32,617 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M100-elb-80-443-all", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-077aa45a93c882e1f", 
            "group_name": "M100-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "607624181858", 
            "tags": {
                "Environment": "M100-elb-80-443-all", 
                "Name": "M100-elb-80-443-all"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:32,634 p=20651 u=root |  TASK [ec2.elb_application_lb : list of ws all the security group id.] ********************************************************************************************************************************************************
2019-12-02 09:11:32,634 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:10
2019-12-02 09:11:32,664 p=20651 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M100-elb-80-443-all', u'Name': u'M100-elb-80-443-all'}, u'group_name': u'M100-elb-80-443-all', u'vpc_id': u'vpc-0d32a5f9af5d2e04f', u'group_id': u'sg-077aa45a93c882e1f', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'607624181858'}) => {
    "ansible_facts": {
        "sg_ws_id": "sg-077aa45a93c882e1f"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-077aa45a93c882e1f", 
        "group_name": "M100-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "607624181858", 
        "tags": {
            "Environment": "M100-elb-80-443-all", 
            "Name": "M100-elb-80-443-all"
        }, 
        "vpc_id": "vpc-0d32a5f9af5d2e04f"
    }
}
2019-12-02 09:11:32,682 p=20651 u=root |  TASK [ec2.elb_application_lb : create targets] *******************************************************************************************************************************************************************************
2019-12-02 09:11:32,682 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:15
2019-12-02 09:11:32,713 p=20651 u=root |  ok: [localhost] => (item=i-0552e41cd26afe20a) => {
    "ansible_facts": {
        "targets": [
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }
        ]
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": "i-0552e41cd26afe20a"
}
2019-12-02 09:11:32,731 p=20651 u=root |  TASK [ec2.elb_application_lb : Create WS Websocket target group] *************************************************************************************************************************************************************
2019-12-02 09:11:32,731 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:20
2019-12-02 09:11:32,754 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:32,754 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:32,762 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277892.75-15943034108400 `" && echo ansible-tmp-1575277892.75-15943034108400="` echo /root/.ansible/tmp/ansible-tmp-1575277892.75-15943034108400 `" ) && sleep 0'
2019-12-02 09:11:33,000 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:11:33,001 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpKv444F TO /root/.ansible/tmp/ansible-tmp-1575277892.75-15943034108400/AnsiballZ_elb_target_group.py
2019-12-02 09:11:33,002 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277892.75-15943034108400/ /root/.ansible/tmp/ansible-tmp-1575277892.75-15943034108400/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:11:33,011 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277892.75-15943034108400/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:11:33,888 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277892.75-15943034108400/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:33,904 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_path": "/", 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "HTTP", 
    "health_check_timeout_seconds": 5, 
    "healthy_threshold_count": 5, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": "/mqtt/status", 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-wsmq01", 
            "port": 80, 
            "profile": null, 
            "protocol": "http", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": "200", 
            "tags": {
                "env": "M100-mqtt01-8083"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "load_balancing_algorithm_type": "round_robin", 
    "matcher": {
        "http_code": "200"
    }, 
    "port": 80, 
    "protocol": "HTTP", 
    "slow_start_duration_seconds": "0", 
    "stickiness_enabled": "false", 
    "stickiness_lb_cookie_duration_seconds": "86400", 
    "stickiness_type": "lb_cookie", 
    "tags": {
        "env": "M100-mqtt01-8083"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq01/9093f3cd09fb867e", 
    "target_group_name": "M100-wsmq01", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 2, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:11:33,922 p=20651 u=root |  TASK [ec2.elb_application_lb : Create an ELB Application Load Balancer and attach EMQ-WS listener] ***************************************************************************************************************************
2019-12-02 09:11:33,922 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:39
2019-12-02 09:11:33,948 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:33,949 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:33,957 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277893.95-165499117741166 `" && echo ansible-tmp-1575277893.95-165499117741166="` echo /root/.ansible/tmp/ansible-tmp-1575277893.95-165499117741166 `" ) && sleep 0'
2019-12-02 09:11:34,208 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_application_lb.py
2019-12-02 09:11:34,209 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpm6CTbX TO /root/.ansible/tmp/ansible-tmp-1575277893.95-165499117741166/AnsiballZ_elb_application_lb.py
2019-12-02 09:11:34,210 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277893.95-165499117741166/ /root/.ansible/tmp/ansible-tmp-1575277893.95-165499117741166/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:11:34,218 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277893.95-165499117741166/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:11:36,212 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277893.95-165499117741166/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:36,230 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }
    ], 
    "canonical_hosted_zone_id": "Z1LMS91P8CMLE5", 
    "changed": true, 
    "created_time": "2019-12-02T09:11:35.420000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-wsmq01-1823836152.ap-southeast-1.elb.amazonaws.com", 
    "idle_timeout_timeout_seconds": "600", 
    "invocation": {
        "module_args": {
            "access_logs_enabled": null, 
            "access_logs_s3_bucket": null, 
            "access_logs_s3_prefix": null, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "http2": null, 
            "idle_timeout": 600, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq01/9093f3cd09fb867e", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 80, 
                    "Protocol": "HTTP", 
                    "Rules": [
                        {
                            "Actions": [
                                {
                                    "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq01/9093f3cd09fb867e", 
                                    "Type": "forward"
                                }
                            ], 
                            "Conditions": [
                                {
                                    "Field": "path-pattern", 
                                    "Values": [
                                        "/mqtt/status"
                                    ]
                                }
                            ], 
                            "Priority": "1"
                        }
                    ], 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-wsmq01", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_rules": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_groups": [
                "sg-077aa45a93c882e1f"
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-wsmq01"
            }, 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq01/9093f3cd09fb867e", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/app/M100-wsmq01/b4e15d19b66ba268/4ff034afc88c4bfc", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-wsmq01/b4e15d19b66ba268", 
            "port": 80, 
            "protocol": "HTTP", 
            "rules": [
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq01/9093f3cd09fb867e", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [
                        {
                            "field": "path-pattern", 
                            "path_pattern_config": {
                                "values": [
                                    "/mqtt/status"
                                ]
                            }, 
                            "values": [
                                "/mqtt/status"
                            ]
                        }
                    ], 
                    "is_default": false, 
                    "priority": "1", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-wsmq01/b4e15d19b66ba268/4ff034afc88c4bfc/a5696da1ded6f017"
                }, 
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq01/9093f3cd09fb867e", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [], 
                    "is_default": true, 
                    "priority": "default", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-wsmq01/b4e15d19b66ba268/4ff034afc88c4bfc/531ca70bac703937"
                }
            ]
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-wsmq01/b4e15d19b66ba268", 
    "load_balancer_name": "M100-wsmq01", 
    "routing_http2_enabled": "true", 
    "routing_http_drop_invalid_header_fields_enabled": "false", 
    "scheme": "internet-facing", 
    "security_groups": [
        "sg-077aa45a93c882e1f"
    ], 
    "state": {
        "code": "provisioning"
    }, 
    "tags": {
        "env": "M100-wsmq01"
    }, 
    "type": "application", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:11:36,247 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:36,248 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:9
2019-12-02 09:11:36,312 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:36,330 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:36,330 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:12
2019-12-02 09:11:36,393 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:36,442 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:36,442 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:15
2019-12-02 09:11:36,460 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:36,478 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:36,478 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:18
2019-12-02 09:11:36,495 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:36,512 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:36,513 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:2
2019-12-02 09:11:36,545 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml for localhost
2019-12-02 09:11:36,566 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC facts] ************************************************************************************************************************************************************************************
2019-12-02 09:11:36,566 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:11:36,583 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:36,584 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:36,592 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277896.58-148712995990838 `" && echo ansible-tmp-1575277896.58-148712995990838="` echo /root/.ansible/tmp/ansible-tmp-1575277896.58-148712995990838 `" ) && sleep 0'
2019-12-02 09:11:36,604 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:11:36,604 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpVjGwIw TO /root/.ansible/tmp/ansible-tmp-1575277896.58-148712995990838/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:11:36,605 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277896.58-148712995990838/ /root/.ansible/tmp/ansible-tmp-1575277896.58-148712995990838/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:36,613 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277896.58-148712995990838/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:37,431 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277896.58-148712995990838/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:37,445 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:37,463 p=20651 u=root |  TASK [ec2.elb_application_lb : set fact: VPC ID] *****************************************************************************************************************************************************************************
2019-12-02 09:11:37,463 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:11:37,481 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:11:37,499 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC subnet facts] *****************************************************************************************************************************************************************************
2019-12-02 09:11:37,499 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:11:37,517 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:37,517 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:37,525 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277897.52-230472242815686 `" && echo ansible-tmp-1575277897.52-230472242815686="` echo /root/.ansible/tmp/ansible-tmp-1575277897.52-230472242815686 `" ) && sleep 0'
2019-12-02 09:11:37,537 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:11:37,538 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpgyTVht TO /root/.ansible/tmp/ansible-tmp-1575277897.52-230472242815686/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:11:37,539 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277897.52-230472242815686/ /root/.ansible/tmp/ansible-tmp-1575277897.52-230472242815686/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:37,546 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277897.52-230472242815686/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:38,234 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277897.52-230472242815686/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:38,250 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 238, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 238, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 238, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:38,268 p=20651 u=root |  TASK [ec2.elb_application_lb : register just the IDs for each of the groups] *************************************************************************************************************************************************
2019-12-02 09:11:38,268 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:11:38,289 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:38,307 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:38,307 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:3
2019-12-02 09:11:38,344 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml for localhost
2019-12-02 09:11:38,366 p=20651 u=root |  TASK [ec2.elb_application_lb : emqtt capture instance facts] *****************************************************************************************************************************************************************
2019-12-02 09:11:38,366 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:3
2019-12-02 09:11:38,385 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:38,386 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:38,394 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277898.39-258464225869993 `" && echo ansible-tmp-1575277898.39-258464225869993="` echo /root/.ansible/tmp/ansible-tmp-1575277898.39-258464225869993 `" ) && sleep 0'
2019-12-02 09:11:38,406 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:38,407 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp4GlF6S TO /root/.ansible/tmp/ansible-tmp-1575277898.39-258464225869993/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:38,408 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277898.39-258464225869993/ /root/.ansible/tmp/ansible-tmp-1575277898.39-258464225869993/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:38,416 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277898.39-258464225869993/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:39,101 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277898.39-258464225869993/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:39,120 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:39,138 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:39,138 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:12
2019-12-02 09:11:39,158 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:39,176 p=20651 u=root |  TASK [ec2.elb_application_lb : operation capture instance facts] *************************************************************************************************************************************************************
2019-12-02 09:11:39,177 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:16
2019-12-02 09:11:39,195 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:39,196 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:39,204 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277899.2-175660513403588 `" && echo ansible-tmp-1575277899.2-175660513403588="` echo /root/.ansible/tmp/ansible-tmp-1575277899.2-175660513403588 `" ) && sleep 0'
2019-12-02 09:11:39,216 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:39,217 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpgp76RR TO /root/.ansible/tmp/ansible-tmp-1575277899.2-175660513403588/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:39,218 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277899.2-175660513403588/ /root/.ansible/tmp/ansible-tmp-1575277899.2-175660513403588/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:39,226 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277899.2-175660513403588/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:39,919 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277899.2-175660513403588/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:39,939 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:21:28+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-056e3802dce5fe04f"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-032969a062e87ea24", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:21:27+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "54.254.169.82"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:21:27+00:00", 
                        "attachment_id": "eni-attach-0c97c475cb97c3d3f", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:38:9f:dd:07:f6", 
                    "network_interface_id": "eni-002b8c4fdbaa64e48", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.161", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "54.254.169.82"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.161"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.161", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "54.254.169.82", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-operation", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-operation*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:39,957 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:39,957 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:25
2019-12-02 09:11:39,977 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "operation_instance_ids": [
            "i-032969a062e87ea24"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:39,995 p=20651 u=root |  TASK [ec2.elb_application_lb : superbackend capture instance facts] **********************************************************************************************************************************************************
2019-12-02 09:11:39,995 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:29
2019-12-02 09:11:40,019 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:40,019 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:40,028 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277900.02-149237480629479 `" && echo ansible-tmp-1575277900.02-149237480629479="` echo /root/.ansible/tmp/ansible-tmp-1575277900.02-149237480629479 `" ) && sleep 0'
2019-12-02 09:11:40,040 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:40,041 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpYIgw0I TO /root/.ansible/tmp/ansible-tmp-1575277900.02-149237480629479/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:40,041 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277900.02-149237480629479/ /root/.ansible/tmp/ansible-tmp-1575277900.02-149237480629479/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:40,050 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277900.02-149237480629479/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:40,740 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277900.02-149237480629479/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:40,759 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:25:38+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-07c30c903b3b956f3"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-08873cd4dde4bdb89", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:25:37+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.74.221.142"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:25:37+00:00", 
                        "attachment_id": "eni-attach-0ce268eae67c7d171", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:f8:7f:1b:f6:32", 
                    "network_interface_id": "eni-023ce40193236c997", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.118", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.74.221.142"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.118"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.118", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.74.221.142", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-superbackend", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-superbackend*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:40,779 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:40,779 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:38
2019-12-02 09:11:40,799 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "superbackend_instance_ids": [
            "i-08873cd4dde4bdb89"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:40,817 p=20651 u=root |  TASK [ec2.elb_application_lb : merchant capture instance facts] **************************************************************************************************************************************************************
2019-12-02 09:11:40,817 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:42
2019-12-02 09:11:40,837 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:40,838 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:40,846 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277900.84-58606604493860 `" && echo ansible-tmp-1575277900.84-58606604493860="` echo /root/.ansible/tmp/ansible-tmp-1575277900.84-58606604493860 `" ) && sleep 0'
2019-12-02 09:11:40,859 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:40,860 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpDP8ZQ8 TO /root/.ansible/tmp/ansible-tmp-1575277900.84-58606604493860/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:40,861 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277900.84-58606604493860/ /root/.ansible/tmp/ansible-tmp-1575277900.84-58606604493860/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:40,870 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277900.84-58606604493860/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:41,564 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277900.84-58606604493860/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:41,583 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:26:13+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-03c23ed308dded2cb"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0bee7737f8f0bb7f2", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:26:12+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "18.141.110.124"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:26:12+00:00", 
                        "attachment_id": "eni-attach-03742ad9f98428ee8", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "0a:53:aa:a3:0e:c0", 
                    "network_interface_id": "eni-0695e3526c1b803ff", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.12.223", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "18.141.110.124"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.12.223"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0dc11d7821eeda12c", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1c", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.12.223", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "18.141.110.124", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Name": "M100-merchant", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-merchant*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:41,601 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:41,601 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:51
2019-12-02 09:11:41,622 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "merchant_instance_ids": [
            "i-0bee7737f8f0bb7f2"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:41,640 p=20651 u=root |  TASK [ec2.elb_application_lb : zuul capture instance facts] ******************************************************************************************************************************************************************
2019-12-02 09:11:41,640 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:55
2019-12-02 09:11:41,660 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:41,660 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:41,668 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277901.66-218471378729068 `" && echo ansible-tmp-1575277901.66-218471378729068="` echo /root/.ansible/tmp/ansible-tmp-1575277901.66-218471378729068 `" ) && sleep 0'
2019-12-02 09:11:41,681 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:41,682 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmplO68Rl TO /root/.ansible/tmp/ansible-tmp-1575277901.66-218471378729068/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:41,683 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277901.66-218471378729068/ /root/.ansible/tmp/ansible-tmp-1575277901.66-218471378729068/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:41,692 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277901.66-218471378729068/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:42,393 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277901.66-218471378729068/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:42,413 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T15:18:01+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0667d48e918774329"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0a9fbb5c635714db8", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T15:18:00+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.77.73.12"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T15:18:00+00:00", 
                        "attachment_id": "eni-attach-0a58646ed352b963c", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0b0d63d52658d996b", 
                            "group_name": "M100-zuul-all"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:50:43:81:29:48", 
                    "network_interface_id": "eni-06614c24c3bef6e43", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.162", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.77.73.12"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.162"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.162", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.77.73.12", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0b0d63d52658d996b", 
                    "group_name": "M100-zuul-all"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-zuul", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-zuul*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:42,430 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:42,431 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:64
2019-12-02 09:11:42,453 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "zuul_instance_ids": [
            "i-0a9fbb5c635714db8"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:42,470 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:42,470 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:6
2019-12-02 09:11:42,513 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml for localhost
2019-12-02 09:11:42,539 p=20651 u=root |  TASK [ec2.elb_application_lb : Get WS SG ID] *********************************************************************************************************************************************************************************
2019-12-02 09:11:42,539 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:2
2019-12-02 09:11:42,559 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:42,560 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:42,568 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277902.56-17632528667207 `" && echo ansible-tmp-1575277902.56-17632528667207="` echo /root/.ansible/tmp/ansible-tmp-1575277902.56-17632528667207 `" ) && sleep 0'
2019-12-02 09:11:42,580 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2019-12-02 09:11:42,580 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp_vLxD8 TO /root/.ansible/tmp/ansible-tmp-1575277902.56-17632528667207/AnsiballZ_ec2_group_facts.py
2019-12-02 09:11:42,581 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277902.56-17632528667207/ /root/.ansible/tmp/ansible-tmp-1575277902.56-17632528667207/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:11:42,590 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277902.56-17632528667207/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:11:43,262 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277902.56-17632528667207/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:43,277 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M100-elb-80-443-all", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-077aa45a93c882e1f", 
            "group_name": "M100-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "607624181858", 
            "tags": {
                "Environment": "M100-elb-80-443-all", 
                "Name": "M100-elb-80-443-all"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:43,295 p=20651 u=root |  TASK [ec2.elb_application_lb : list of ws all the security group id.] ********************************************************************************************************************************************************
2019-12-02 09:11:43,295 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:10
2019-12-02 09:11:43,326 p=20651 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M100-elb-80-443-all', u'Name': u'M100-elb-80-443-all'}, u'group_name': u'M100-elb-80-443-all', u'vpc_id': u'vpc-0d32a5f9af5d2e04f', u'group_id': u'sg-077aa45a93c882e1f', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'607624181858'}) => {
    "ansible_facts": {
        "sg_ws_id": "sg-077aa45a93c882e1f"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-077aa45a93c882e1f", 
        "group_name": "M100-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "607624181858", 
        "tags": {
            "Environment": "M100-elb-80-443-all", 
            "Name": "M100-elb-80-443-all"
        }, 
        "vpc_id": "vpc-0d32a5f9af5d2e04f"
    }
}
2019-12-02 09:11:43,344 p=20651 u=root |  TASK [ec2.elb_application_lb : create targets] *******************************************************************************************************************************************************************************
2019-12-02 09:11:43,344 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:15
2019-12-02 09:11:43,372 p=20651 u=root |  ok: [localhost] => (item=i-0552e41cd26afe20a) => {
    "ansible_facts": {
        "targets": [
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }
        ]
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": "i-0552e41cd26afe20a"
}
2019-12-02 09:11:43,390 p=20651 u=root |  TASK [ec2.elb_application_lb : Create WS Websocket target group] *************************************************************************************************************************************************************
2019-12-02 09:11:43,390 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:20
2019-12-02 09:11:43,414 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:43,414 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:43,422 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277903.41-106541581428160 `" && echo ansible-tmp-1575277903.41-106541581428160="` echo /root/.ansible/tmp/ansible-tmp-1575277903.41-106541581428160 `" ) && sleep 0'
2019-12-02 09:11:43,435 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:11:43,436 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpplExbB TO /root/.ansible/tmp/ansible-tmp-1575277903.41-106541581428160/AnsiballZ_elb_target_group.py
2019-12-02 09:11:43,436 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277903.41-106541581428160/ /root/.ansible/tmp/ansible-tmp-1575277903.41-106541581428160/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:11:43,445 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277903.41-106541581428160/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:11:44,278 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277903.41-106541581428160/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:44,294 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_path": "/", 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "HTTP", 
    "health_check_timeout_seconds": 5, 
    "healthy_threshold_count": 5, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": "/mqtt/status", 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-wsmq02", 
            "port": 80, 
            "profile": null, 
            "protocol": "http", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": "200", 
            "tags": {
                "env": "M100-mqtt02-8083"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "load_balancing_algorithm_type": "round_robin", 
    "matcher": {
        "http_code": "200"
    }, 
    "port": 80, 
    "protocol": "HTTP", 
    "slow_start_duration_seconds": "0", 
    "stickiness_enabled": "false", 
    "stickiness_lb_cookie_duration_seconds": "86400", 
    "stickiness_type": "lb_cookie", 
    "tags": {
        "env": "M100-mqtt02-8083"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq02/2df88734c7218c34", 
    "target_group_name": "M100-wsmq02", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 2, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:11:44,312 p=20651 u=root |  TASK [ec2.elb_application_lb : Create an ELB Application Load Balancer and attach EMQ-WS listener] ***************************************************************************************************************************
2019-12-02 09:11:44,312 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ws.yml:39
2019-12-02 09:11:44,337 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:44,337 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:44,346 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277904.34-23028048971904 `" && echo ansible-tmp-1575277904.34-23028048971904="` echo /root/.ansible/tmp/ansible-tmp-1575277904.34-23028048971904 `" ) && sleep 0'
2019-12-02 09:11:44,359 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_application_lb.py
2019-12-02 09:11:44,360 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpQkLSye TO /root/.ansible/tmp/ansible-tmp-1575277904.34-23028048971904/AnsiballZ_elb_application_lb.py
2019-12-02 09:11:44,361 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277904.34-23028048971904/ /root/.ansible/tmp/ansible-tmp-1575277904.34-23028048971904/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:11:44,369 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277904.34-23028048971904/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:11:46,399 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277904.34-23028048971904/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:46,414 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }
    ], 
    "canonical_hosted_zone_id": "Z1LMS91P8CMLE5", 
    "changed": true, 
    "created_time": "2019-12-02T09:11:45.610000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-wsmq02-1282664841.ap-southeast-1.elb.amazonaws.com", 
    "idle_timeout_timeout_seconds": "600", 
    "invocation": {
        "module_args": {
            "access_logs_enabled": null, 
            "access_logs_s3_bucket": null, 
            "access_logs_s3_prefix": null, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "http2": null, 
            "idle_timeout": 600, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq02/2df88734c7218c34", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 80, 
                    "Protocol": "HTTP", 
                    "Rules": [
                        {
                            "Actions": [
                                {
                                    "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq02/2df88734c7218c34", 
                                    "Type": "forward"
                                }
                            ], 
                            "Conditions": [
                                {
                                    "Field": "path-pattern", 
                                    "Values": [
                                        "/mqtt/status"
                                    ]
                                }
                            ], 
                            "Priority": "1"
                        }
                    ], 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-wsmq02", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_rules": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_groups": [
                "sg-077aa45a93c882e1f"
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-wsmq02"
            }, 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq02/2df88734c7218c34", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/app/M100-wsmq02/b608e75771344d82/c2e23e593f323b2c", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-wsmq02/b608e75771344d82", 
            "port": 80, 
            "protocol": "HTTP", 
            "rules": [
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq02/2df88734c7218c34", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [
                        {
                            "field": "path-pattern", 
                            "path_pattern_config": {
                                "values": [
                                    "/mqtt/status"
                                ]
                            }, 
                            "values": [
                                "/mqtt/status"
                            ]
                        }
                    ], 
                    "is_default": false, 
                    "priority": "1", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-wsmq02/b608e75771344d82/c2e23e593f323b2c/f501a19e3a860bbb"
                }, 
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-wsmq02/2df88734c7218c34", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [], 
                    "is_default": true, 
                    "priority": "default", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-wsmq02/b608e75771344d82/c2e23e593f323b2c/f2498fde4f5bc449"
                }
            ]
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-wsmq02/b608e75771344d82", 
    "load_balancer_name": "M100-wsmq02", 
    "routing_http2_enabled": "true", 
    "routing_http_drop_invalid_header_fields_enabled": "false", 
    "scheme": "internet-facing", 
    "security_groups": [
        "sg-077aa45a93c882e1f"
    ], 
    "state": {
        "code": "provisioning"
    }, 
    "tags": {
        "env": "M100-wsmq02"
    }, 
    "type": "application", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:11:46,432 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:46,432 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:9
2019-12-02 09:11:46,449 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:46,467 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:46,467 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:12
2019-12-02 09:11:46,486 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:46,504 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:46,504 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:15
2019-12-02 09:11:46,522 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:46,539 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:46,539 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:18
2019-12-02 09:11:46,558 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:46,576 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:46,576 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:2
2019-12-02 09:11:46,611 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml for localhost
2019-12-02 09:11:46,631 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC facts] ************************************************************************************************************************************************************************************
2019-12-02 09:11:46,631 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:11:46,649 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:46,649 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:46,658 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277906.65-166604786158549 `" && echo ansible-tmp-1575277906.65-166604786158549="` echo /root/.ansible/tmp/ansible-tmp-1575277906.65-166604786158549 `" ) && sleep 0'
2019-12-02 09:11:46,670 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:11:46,671 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpCZn7R1 TO /root/.ansible/tmp/ansible-tmp-1575277906.65-166604786158549/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:11:46,672 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277906.65-166604786158549/ /root/.ansible/tmp/ansible-tmp-1575277906.65-166604786158549/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:46,681 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277906.65-166604786158549/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:47,607 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277906.65-166604786158549/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:47,622 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:47,639 p=20651 u=root |  TASK [ec2.elb_application_lb : set fact: VPC ID] *****************************************************************************************************************************************************************************
2019-12-02 09:11:47,640 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:11:47,660 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:11:47,678 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC subnet facts] *****************************************************************************************************************************************************************************
2019-12-02 09:11:47,678 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:11:47,696 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:47,696 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:47,704 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277907.7-143724182977499 `" && echo ansible-tmp-1575277907.7-143724182977499="` echo /root/.ansible/tmp/ansible-tmp-1575277907.7-143724182977499 `" ) && sleep 0'
2019-12-02 09:11:47,716 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:11:47,717 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpdXK76s TO /root/.ansible/tmp/ansible-tmp-1575277907.7-143724182977499/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:11:47,718 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277907.7-143724182977499/ /root/.ansible/tmp/ansible-tmp-1575277907.7-143724182977499/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:47,727 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277907.7-143724182977499/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:48,432 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277907.7-143724182977499/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:48,448 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 238, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 237, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 237, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:48,466 p=20651 u=root |  TASK [ec2.elb_application_lb : register just the IDs for each of the groups] *************************************************************************************************************************************************
2019-12-02 09:11:48,467 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:11:48,487 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:48,504 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:48,504 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:3
2019-12-02 09:11:48,541 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml for localhost
2019-12-02 09:11:48,563 p=20651 u=root |  TASK [ec2.elb_application_lb : emqtt capture instance facts] *****************************************************************************************************************************************************************
2019-12-02 09:11:48,563 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:3
2019-12-02 09:11:48,583 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:48,583 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:48,592 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277908.58-260110512062247 `" && echo ansible-tmp-1575277908.58-260110512062247="` echo /root/.ansible/tmp/ansible-tmp-1575277908.58-260110512062247 `" ) && sleep 0'
2019-12-02 09:11:48,604 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:48,604 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmphJnj7Z TO /root/.ansible/tmp/ansible-tmp-1575277908.58-260110512062247/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:48,605 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277908.58-260110512062247/ /root/.ansible/tmp/ansible-tmp-1575277908.58-260110512062247/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:48,614 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277908.58-260110512062247/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:49,368 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277908.58-260110512062247/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:49,388 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:49,406 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:49,407 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:12
2019-12-02 09:11:49,428 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:49,446 p=20651 u=root |  TASK [ec2.elb_application_lb : operation capture instance facts] *************************************************************************************************************************************************************
2019-12-02 09:11:49,446 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:16
2019-12-02 09:11:49,465 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:49,466 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:49,474 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277909.47-252899338625569 `" && echo ansible-tmp-1575277909.47-252899338625569="` echo /root/.ansible/tmp/ansible-tmp-1575277909.47-252899338625569 `" ) && sleep 0'
2019-12-02 09:11:49,486 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:49,487 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpq2e6C3 TO /root/.ansible/tmp/ansible-tmp-1575277909.47-252899338625569/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:49,487 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277909.47-252899338625569/ /root/.ansible/tmp/ansible-tmp-1575277909.47-252899338625569/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:49,496 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277909.47-252899338625569/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:50,246 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277909.47-252899338625569/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:50,266 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:21:28+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-056e3802dce5fe04f"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-032969a062e87ea24", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:21:27+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "54.254.169.82"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:21:27+00:00", 
                        "attachment_id": "eni-attach-0c97c475cb97c3d3f", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:38:9f:dd:07:f6", 
                    "network_interface_id": "eni-002b8c4fdbaa64e48", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.161", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "54.254.169.82"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.161"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.161", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "54.254.169.82", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-operation", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-operation*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:50,284 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:50,284 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:25
2019-12-02 09:11:50,304 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "operation_instance_ids": [
            "i-032969a062e87ea24"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:50,322 p=20651 u=root |  TASK [ec2.elb_application_lb : superbackend capture instance facts] **********************************************************************************************************************************************************
2019-12-02 09:11:50,322 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:29
2019-12-02 09:11:50,342 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:50,342 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:50,350 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277910.34-187631562470542 `" && echo ansible-tmp-1575277910.34-187631562470542="` echo /root/.ansible/tmp/ansible-tmp-1575277910.34-187631562470542 `" ) && sleep 0'
2019-12-02 09:11:50,363 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:50,363 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpLe_as_ TO /root/.ansible/tmp/ansible-tmp-1575277910.34-187631562470542/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:50,364 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277910.34-187631562470542/ /root/.ansible/tmp/ansible-tmp-1575277910.34-187631562470542/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:50,373 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277910.34-187631562470542/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:51,099 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277910.34-187631562470542/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:51,119 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:25:38+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-07c30c903b3b956f3"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-08873cd4dde4bdb89", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:25:37+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.74.221.142"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:25:37+00:00", 
                        "attachment_id": "eni-attach-0ce268eae67c7d171", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:f8:7f:1b:f6:32", 
                    "network_interface_id": "eni-023ce40193236c997", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.118", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.74.221.142"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.118"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.118", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.74.221.142", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-superbackend", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-superbackend*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:51,137 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:51,137 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:38
2019-12-02 09:11:51,158 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "superbackend_instance_ids": [
            "i-08873cd4dde4bdb89"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:51,176 p=20651 u=root |  TASK [ec2.elb_application_lb : merchant capture instance facts] **************************************************************************************************************************************************************
2019-12-02 09:11:51,176 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:42
2019-12-02 09:11:51,195 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:51,196 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:51,204 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277911.2-135303452623656 `" && echo ansible-tmp-1575277911.2-135303452623656="` echo /root/.ansible/tmp/ansible-tmp-1575277911.2-135303452623656 `" ) && sleep 0'
2019-12-02 09:11:51,215 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:51,216 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpgTyyg3 TO /root/.ansible/tmp/ansible-tmp-1575277911.2-135303452623656/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:51,217 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277911.2-135303452623656/ /root/.ansible/tmp/ansible-tmp-1575277911.2-135303452623656/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:51,225 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277911.2-135303452623656/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:51,940 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277911.2-135303452623656/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:51,959 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:26:13+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-03c23ed308dded2cb"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0bee7737f8f0bb7f2", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:26:12+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "18.141.110.124"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:26:12+00:00", 
                        "attachment_id": "eni-attach-03742ad9f98428ee8", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "0a:53:aa:a3:0e:c0", 
                    "network_interface_id": "eni-0695e3526c1b803ff", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.12.223", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "18.141.110.124"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.12.223"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0dc11d7821eeda12c", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1c", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.12.223", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "18.141.110.124", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Name": "M100-merchant", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-merchant*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:51,977 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:51,977 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:51
2019-12-02 09:11:51,998 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "merchant_instance_ids": [
            "i-0bee7737f8f0bb7f2"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:52,016 p=20651 u=root |  TASK [ec2.elb_application_lb : zuul capture instance facts] ******************************************************************************************************************************************************************
2019-12-02 09:11:52,016 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:55
2019-12-02 09:11:52,040 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:52,040 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:52,048 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277912.04-243706089264979 `" && echo ansible-tmp-1575277912.04-243706089264979="` echo /root/.ansible/tmp/ansible-tmp-1575277912.04-243706089264979 `" ) && sleep 0'
2019-12-02 09:11:52,061 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:52,061 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp17Ef51 TO /root/.ansible/tmp/ansible-tmp-1575277912.04-243706089264979/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:52,062 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277912.04-243706089264979/ /root/.ansible/tmp/ansible-tmp-1575277912.04-243706089264979/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:52,071 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277912.04-243706089264979/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:52,798 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277912.04-243706089264979/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:52,818 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T15:18:01+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0667d48e918774329"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0a9fbb5c635714db8", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T15:18:00+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.77.73.12"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T15:18:00+00:00", 
                        "attachment_id": "eni-attach-0a58646ed352b963c", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0b0d63d52658d996b", 
                            "group_name": "M100-zuul-all"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:50:43:81:29:48", 
                    "network_interface_id": "eni-06614c24c3bef6e43", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.162", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.77.73.12"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.162"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.162", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.77.73.12", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0b0d63d52658d996b", 
                    "group_name": "M100-zuul-all"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-zuul", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-zuul*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:52,839 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:52,839 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:64
2019-12-02 09:11:52,859 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "zuul_instance_ids": [
            "i-0a9fbb5c635714db8"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:52,877 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:52,877 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:6
2019-12-02 09:11:52,896 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:52,915 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:52,915 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:9
2019-12-02 09:11:52,958 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/operation.yml for localhost
2019-12-02 09:11:52,985 p=20651 u=root |  TASK [ec2.elb_application_lb : Get operation SG ID] **************************************************************************************************************************************************************************
2019-12-02 09:11:52,986 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/operation.yml:2
2019-12-02 09:11:53,005 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:53,005 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:53,014 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277913.0-1032213272014 `" && echo ansible-tmp-1575277913.0-1032213272014="` echo /root/.ansible/tmp/ansible-tmp-1575277913.0-1032213272014 `" ) && sleep 0'
2019-12-02 09:11:53,027 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2019-12-02 09:11:53,027 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpQJB0FB TO /root/.ansible/tmp/ansible-tmp-1575277913.0-1032213272014/AnsiballZ_ec2_group_facts.py
2019-12-02 09:11:53,028 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277913.0-1032213272014/ /root/.ansible/tmp/ansible-tmp-1575277913.0-1032213272014/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:11:53,037 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277913.0-1032213272014/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:11:53,739 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277913.0-1032213272014/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:53,754 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M100-office-access", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 and 443 to the user", 
            "group_id": "sg-0dfc30b802934c471", 
            "group_name": "M100-office-access", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "open private allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "open private allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "607624181858", 
            "tags": {
                "Environment": "M100-office-access", 
                "Name": "M100-office-access"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:53,772 p=20651 u=root |  TASK [ec2.elb_application_lb : list of operation all the security group id.] *************************************************************************************************************************************************
2019-12-02 09:11:53,772 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/operation.yml:10
2019-12-02 09:11:53,803 p=20651 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'open private allow all on port 80', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'open private allow all on port 443', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 and 443 to the user', u'tags': {u'Environment': u'M100-office-access', u'Name': u'M100-office-access'}, u'group_name': u'M100-office-access', u'vpc_id': u'vpc-0d32a5f9af5d2e04f', u'group_id': u'sg-0dfc30b802934c471', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'607624181858'}) => {
    "ansible_facts": {
        "sg_operation_id": "sg-0dfc30b802934c471"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 and 443 to the user", 
        "group_id": "sg-0dfc30b802934c471", 
        "group_name": "M100-office-access", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "open private allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "open private allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "607624181858", 
        "tags": {
            "Environment": "M100-office-access", 
            "Name": "M100-office-access"
        }, 
        "vpc_id": "vpc-0d32a5f9af5d2e04f"
    }
}
2019-12-02 09:11:53,821 p=20651 u=root |  TASK [ec2.elb_application_lb : create targets] *******************************************************************************************************************************************************************************
2019-12-02 09:11:53,821 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/operation.yml:15
2019-12-02 09:11:53,849 p=20651 u=root |  ok: [localhost] => (item=i-032969a062e87ea24) => {
    "ansible_facts": {
        "targets": [
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-032969a062e87ea24", 
                "Port": 8125
            }
        ]
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": "i-032969a062e87ea24"
}
2019-12-02 09:11:53,867 p=20651 u=root |  TASK [ec2.elb_application_lb : Create operation target group] ****************************************************************************************************************************************************************
2019-12-02 09:11:53,867 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/operation.yml:20
2019-12-02 09:11:53,891 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:53,892 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:53,900 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277913.89-243930311663407 `" && echo ansible-tmp-1575277913.89-243930311663407="` echo /root/.ansible/tmp/ansible-tmp-1575277913.89-243930311663407 `" ) && sleep 0'
2019-12-02 09:11:53,912 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:11:53,913 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp3rmbX0 TO /root/.ansible/tmp/ansible-tmp-1575277913.89-243930311663407/AnsiballZ_elb_target_group.py
2019-12-02 09:11:53,913 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277913.89-243930311663407/ /root/.ansible/tmp/ansible-tmp-1575277913.89-243930311663407/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:11:53,922 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277913.89-243930311663407/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:11:54,857 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277913.89-243930311663407/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:54,874 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_path": "/", 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "HTTP", 
    "health_check_timeout_seconds": 5, 
    "healthy_threshold_count": 5, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": "/", 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-operation", 
            "port": 80, 
            "profile": null, 
            "protocol": "http", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": "200", 
            "tags": {
                "env": "M100-operation"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-032969a062e87ea24", 
                    "Port": 8125
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "load_balancing_algorithm_type": "round_robin", 
    "matcher": {
        "http_code": "200"
    }, 
    "port": 80, 
    "protocol": "HTTP", 
    "slow_start_duration_seconds": "0", 
    "stickiness_enabled": "false", 
    "stickiness_lb_cookie_duration_seconds": "86400", 
    "stickiness_type": "lb_cookie", 
    "tags": {
        "env": "M100-operation"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-operation/32d19260551d321f", 
    "target_group_name": "M100-operation", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 2, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:11:54,892 p=20651 u=root |  TASK [ec2.elb_application_lb : Create an ELB Application Load Balancer and attach operation listener] ************************************************************************************************************************
2019-12-02 09:11:54,892 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/operation.yml:36
2019-12-02 09:11:54,916 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:54,917 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:54,925 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277914.92-125543197361853 `" && echo ansible-tmp-1575277914.92-125543197361853="` echo /root/.ansible/tmp/ansible-tmp-1575277914.92-125543197361853 `" ) && sleep 0'
2019-12-02 09:11:54,936 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_application_lb.py
2019-12-02 09:11:54,937 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpxwzi7T TO /root/.ansible/tmp/ansible-tmp-1575277914.92-125543197361853/AnsiballZ_elb_application_lb.py
2019-12-02 09:11:54,937 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277914.92-125543197361853/ /root/.ansible/tmp/ansible-tmp-1575277914.92-125543197361853/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:11:54,945 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277914.92-125543197361853/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:11:57,052 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277914.92-125543197361853/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:57,069 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }
    ], 
    "canonical_hosted_zone_id": "Z1LMS91P8CMLE5", 
    "changed": true, 
    "created_time": "2019-12-02T09:11:56.260000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-operation-1900343638.ap-southeast-1.elb.amazonaws.com", 
    "idle_timeout_timeout_seconds": "600", 
    "invocation": {
        "module_args": {
            "access_logs_enabled": null, 
            "access_logs_s3_bucket": null, 
            "access_logs_s3_prefix": null, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "http2": null, 
            "idle_timeout": 600, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-operation/32d19260551d321f", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 80, 
                    "Protocol": "HTTP", 
                    "Rules": [
                        {
                            "Actions": [
                                {
                                    "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-operation/32d19260551d321f", 
                                    "Type": "forward"
                                }
                            ], 
                            "Conditions": [
                                {
                                    "Field": "path-pattern", 
                                    "Values": [
                                        "/"
                                    ]
                                }
                            ], 
                            "Priority": "1"
                        }
                    ], 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-operation", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_rules": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_groups": [
                "sg-0dfc30b802934c471"
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-operation"
            }, 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-operation/32d19260551d321f", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/app/M100-operation/c288eefdac74f821/20353970ecc471d0", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-operation/c288eefdac74f821", 
            "port": 80, 
            "protocol": "HTTP", 
            "rules": [
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-operation/32d19260551d321f", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [
                        {
                            "field": "path-pattern", 
                            "path_pattern_config": {
                                "values": [
                                    "/"
                                ]
                            }, 
                            "values": [
                                "/"
                            ]
                        }
                    ], 
                    "is_default": false, 
                    "priority": "1", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-operation/c288eefdac74f821/20353970ecc471d0/d61c92dd08e12e0a"
                }, 
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-operation/32d19260551d321f", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [], 
                    "is_default": true, 
                    "priority": "default", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-operation/c288eefdac74f821/20353970ecc471d0/a1afb79f2ea1ceb1"
                }
            ]
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-operation/c288eefdac74f821", 
    "load_balancer_name": "M100-operation", 
    "routing_http2_enabled": "true", 
    "routing_http_drop_invalid_header_fields_enabled": "false", 
    "scheme": "internet-facing", 
    "security_groups": [
        "sg-0dfc30b802934c471"
    ], 
    "state": {
        "code": "provisioning"
    }, 
    "tags": {
        "env": "M100-operation"
    }, 
    "type": "application", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:11:57,087 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:57,087 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:12
2019-12-02 09:11:57,106 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:57,124 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:57,124 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:15
2019-12-02 09:11:57,143 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:57,161 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:57,162 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:18
2019-12-02 09:11:57,179 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:11:57,198 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:57,198 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:2
2019-12-02 09:11:57,233 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml for localhost
2019-12-02 09:11:57,254 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC facts] ************************************************************************************************************************************************************************************
2019-12-02 09:11:57,254 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:11:57,272 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:57,272 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:57,281 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277917.27-64410139238192 `" && echo ansible-tmp-1575277917.27-64410139238192="` echo /root/.ansible/tmp/ansible-tmp-1575277917.27-64410139238192 `" ) && sleep 0'
2019-12-02 09:11:57,294 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:11:57,294 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmporBYAp TO /root/.ansible/tmp/ansible-tmp-1575277917.27-64410139238192/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:11:57,295 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277917.27-64410139238192/ /root/.ansible/tmp/ansible-tmp-1575277917.27-64410139238192/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:57,304 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277917.27-64410139238192/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:11:58,155 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277917.27-64410139238192/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:58,169 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:58,187 p=20651 u=root |  TASK [ec2.elb_application_lb : set fact: VPC ID] *****************************************************************************************************************************************************************************
2019-12-02 09:11:58,188 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:11:58,211 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:11:58,229 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC subnet facts] *****************************************************************************************************************************************************************************
2019-12-02 09:11:58,229 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:11:58,251 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:58,251 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:58,260 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277918.25-235148159115262 `" && echo ansible-tmp-1575277918.25-235148159115262="` echo /root/.ansible/tmp/ansible-tmp-1575277918.25-235148159115262 `" ) && sleep 0'
2019-12-02 09:11:58,272 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:11:58,272 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpesGXfR TO /root/.ansible/tmp/ansible-tmp-1575277918.25-235148159115262/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:11:58,273 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277918.25-235148159115262/ /root/.ansible/tmp/ansible-tmp-1575277918.25-235148159115262/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:58,281 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277918.25-235148159115262/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:11:59,011 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277918.25-235148159115262/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:59,030 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 237, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 237, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 236, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:11:59,048 p=20651 u=root |  TASK [ec2.elb_application_lb : register just the IDs for each of the groups] *************************************************************************************************************************************************
2019-12-02 09:11:59,048 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:11:59,069 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:59,087 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:11:59,088 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:3
2019-12-02 09:11:59,126 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml for localhost
2019-12-02 09:11:59,149 p=20651 u=root |  TASK [ec2.elb_application_lb : emqtt capture instance facts] *****************************************************************************************************************************************************************
2019-12-02 09:11:59,149 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:3
2019-12-02 09:11:59,168 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:11:59,168 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:11:59,176 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277919.17-178399925034269 `" && echo ansible-tmp-1575277919.17-178399925034269="` echo /root/.ansible/tmp/ansible-tmp-1575277919.17-178399925034269 `" ) && sleep 0'
2019-12-02 09:11:59,189 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:11:59,189 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpCrk_5H TO /root/.ansible/tmp/ansible-tmp-1575277919.17-178399925034269/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:11:59,190 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277919.17-178399925034269/ /root/.ansible/tmp/ansible-tmp-1575277919.17-178399925034269/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:59,198 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277919.17-178399925034269/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:11:59,921 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277919.17-178399925034269/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:11:59,941 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:11:59,959 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:11:59,959 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:12
2019-12-02 09:11:59,979 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:11:59,997 p=20651 u=root |  TASK [ec2.elb_application_lb : operation capture instance facts] *************************************************************************************************************************************************************
2019-12-02 09:11:59,997 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:16
2019-12-02 09:12:00,020 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:00,020 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:00,032 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277920.02-190997353702509 `" && echo ansible-tmp-1575277920.02-190997353702509="` echo /root/.ansible/tmp/ansible-tmp-1575277920.02-190997353702509 `" ) && sleep 0'
2019-12-02 09:12:00,046 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:00,047 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpdhz5St TO /root/.ansible/tmp/ansible-tmp-1575277920.02-190997353702509/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:00,048 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277920.02-190997353702509/ /root/.ansible/tmp/ansible-tmp-1575277920.02-190997353702509/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:00,057 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277920.02-190997353702509/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:00,808 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277920.02-190997353702509/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:00,829 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:21:28+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-056e3802dce5fe04f"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-032969a062e87ea24", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:21:27+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "54.254.169.82"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:21:27+00:00", 
                        "attachment_id": "eni-attach-0c97c475cb97c3d3f", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:38:9f:dd:07:f6", 
                    "network_interface_id": "eni-002b8c4fdbaa64e48", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.161", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "54.254.169.82"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.161"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.161", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "54.254.169.82", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-operation", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-operation*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:00,846 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:00,846 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:25
2019-12-02 09:12:00,869 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "operation_instance_ids": [
            "i-032969a062e87ea24"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:00,887 p=20651 u=root |  TASK [ec2.elb_application_lb : superbackend capture instance facts] **********************************************************************************************************************************************************
2019-12-02 09:12:00,887 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:29
2019-12-02 09:12:00,906 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:00,906 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:00,915 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277920.91-128060369063339 `" && echo ansible-tmp-1575277920.91-128060369063339="` echo /root/.ansible/tmp/ansible-tmp-1575277920.91-128060369063339 `" ) && sleep 0'
2019-12-02 09:12:00,926 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:00,927 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp_w0MFS TO /root/.ansible/tmp/ansible-tmp-1575277920.91-128060369063339/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:00,928 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277920.91-128060369063339/ /root/.ansible/tmp/ansible-tmp-1575277920.91-128060369063339/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:00,936 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277920.91-128060369063339/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:01,670 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277920.91-128060369063339/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:01,690 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:25:38+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-07c30c903b3b956f3"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-08873cd4dde4bdb89", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:25:37+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.74.221.142"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:25:37+00:00", 
                        "attachment_id": "eni-attach-0ce268eae67c7d171", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:f8:7f:1b:f6:32", 
                    "network_interface_id": "eni-023ce40193236c997", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.118", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.74.221.142"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.118"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.118", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.74.221.142", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-superbackend", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-superbackend*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:01,708 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:01,708 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:38
2019-12-02 09:12:01,730 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "superbackend_instance_ids": [
            "i-08873cd4dde4bdb89"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:01,748 p=20651 u=root |  TASK [ec2.elb_application_lb : merchant capture instance facts] **************************************************************************************************************************************************************
2019-12-02 09:12:01,748 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:42
2019-12-02 09:12:01,769 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:01,769 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:01,777 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277921.77-192993988743580 `" && echo ansible-tmp-1575277921.77-192993988743580="` echo /root/.ansible/tmp/ansible-tmp-1575277921.77-192993988743580 `" ) && sleep 0'
2019-12-02 09:12:01,789 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:01,790 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpgbeJ_q TO /root/.ansible/tmp/ansible-tmp-1575277921.77-192993988743580/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:01,791 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277921.77-192993988743580/ /root/.ansible/tmp/ansible-tmp-1575277921.77-192993988743580/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:01,799 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277921.77-192993988743580/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:02,526 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277921.77-192993988743580/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:02,546 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:26:13+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-03c23ed308dded2cb"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0bee7737f8f0bb7f2", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:26:12+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "18.141.110.124"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:26:12+00:00", 
                        "attachment_id": "eni-attach-03742ad9f98428ee8", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "0a:53:aa:a3:0e:c0", 
                    "network_interface_id": "eni-0695e3526c1b803ff", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.12.223", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "18.141.110.124"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.12.223"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0dc11d7821eeda12c", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1c", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.12.223", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "18.141.110.124", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Name": "M100-merchant", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-merchant*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:02,563 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:02,564 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:51
2019-12-02 09:12:02,584 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "merchant_instance_ids": [
            "i-0bee7737f8f0bb7f2"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:02,602 p=20651 u=root |  TASK [ec2.elb_application_lb : zuul capture instance facts] ******************************************************************************************************************************************************************
2019-12-02 09:12:02,602 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:55
2019-12-02 09:12:02,621 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:02,621 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:02,630 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277922.62-26593146440879 `" && echo ansible-tmp-1575277922.62-26593146440879="` echo /root/.ansible/tmp/ansible-tmp-1575277922.62-26593146440879 `" ) && sleep 0'
2019-12-02 09:12:02,642 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:02,642 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpSIZaci TO /root/.ansible/tmp/ansible-tmp-1575277922.62-26593146440879/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:02,643 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277922.62-26593146440879/ /root/.ansible/tmp/ansible-tmp-1575277922.62-26593146440879/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:02,651 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277922.62-26593146440879/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:03,404 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277922.62-26593146440879/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:03,424 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T15:18:01+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0667d48e918774329"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0a9fbb5c635714db8", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T15:18:00+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.77.73.12"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T15:18:00+00:00", 
                        "attachment_id": "eni-attach-0a58646ed352b963c", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0b0d63d52658d996b", 
                            "group_name": "M100-zuul-all"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:50:43:81:29:48", 
                    "network_interface_id": "eni-06614c24c3bef6e43", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.162", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.77.73.12"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.162"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.162", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.77.73.12", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0b0d63d52658d996b", 
                    "group_name": "M100-zuul-all"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-zuul", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-zuul*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:03,442 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:03,442 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:64
2019-12-02 09:12:03,463 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "zuul_instance_ids": [
            "i-0a9fbb5c635714db8"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:03,481 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:03,481 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:6
2019-12-02 09:12:03,499 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:03,518 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:03,518 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:9
2019-12-02 09:12:03,536 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:03,554 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:03,554 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:12
2019-12-02 09:12:03,604 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/superbackend.yml for localhost
2019-12-02 09:12:03,630 p=20651 u=root |  TASK [ec2.elb_application_lb : Get superbackend SG ID] ***********************************************************************************************************************************************************************
2019-12-02 09:12:03,630 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/superbackend.yml:2
2019-12-02 09:12:03,650 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:03,651 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:03,659 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277923.65-36162464874633 `" && echo ansible-tmp-1575277923.65-36162464874633="` echo /root/.ansible/tmp/ansible-tmp-1575277923.65-36162464874633 `" ) && sleep 0'
2019-12-02 09:12:03,671 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2019-12-02 09:12:03,672 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpcSMw1p TO /root/.ansible/tmp/ansible-tmp-1575277923.65-36162464874633/AnsiballZ_ec2_group_facts.py
2019-12-02 09:12:03,673 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277923.65-36162464874633/ /root/.ansible/tmp/ansible-tmp-1575277923.65-36162464874633/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:03,682 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277923.65-36162464874633/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:04,390 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277923.65-36162464874633/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:04,405 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M100-office-access", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 and 443 to the user", 
            "group_id": "sg-0dfc30b802934c471", 
            "group_name": "M100-office-access", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "open private allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "open private allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "607624181858", 
            "tags": {
                "Environment": "M100-office-access", 
                "Name": "M100-office-access"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:04,424 p=20651 u=root |  TASK [ec2.elb_application_lb : list of superbackend all the security group id.] **********************************************************************************************************************************************
2019-12-02 09:12:04,424 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/superbackend.yml:10
2019-12-02 09:12:04,455 p=20651 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'open private allow all on port 80', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'open private allow all on port 443', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 and 443 to the user', u'tags': {u'Environment': u'M100-office-access', u'Name': u'M100-office-access'}, u'group_name': u'M100-office-access', u'vpc_id': u'vpc-0d32a5f9af5d2e04f', u'group_id': u'sg-0dfc30b802934c471', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'607624181858'}) => {
    "ansible_facts": {
        "sg_superbackend_id": "sg-0dfc30b802934c471"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 and 443 to the user", 
        "group_id": "sg-0dfc30b802934c471", 
        "group_name": "M100-office-access", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "open private allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "open private allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "607624181858", 
        "tags": {
            "Environment": "M100-office-access", 
            "Name": "M100-office-access"
        }, 
        "vpc_id": "vpc-0d32a5f9af5d2e04f"
    }
}
2019-12-02 09:12:04,475 p=20651 u=root |  TASK [ec2.elb_application_lb : create targets] *******************************************************************************************************************************************************************************
2019-12-02 09:12:04,475 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/superbackend.yml:15
2019-12-02 09:12:04,504 p=20651 u=root |  ok: [localhost] => (item=i-08873cd4dde4bdb89) => {
    "ansible_facts": {
        "targets": [
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-032969a062e87ea24", 
                "Port": 8125
            }, 
            {
                "Id": "i-08873cd4dde4bdb89", 
                "Port": 8992
            }
        ]
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": "i-08873cd4dde4bdb89"
}
2019-12-02 09:12:04,523 p=20651 u=root |  TASK [ec2.elb_application_lb : Create superbackend Websocket target group] ***************************************************************************************************************************************************
2019-12-02 09:12:04,523 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/superbackend.yml:20
2019-12-02 09:12:04,547 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:04,547 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:04,555 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277924.55-151800694430044 `" && echo ansible-tmp-1575277924.55-151800694430044="` echo /root/.ansible/tmp/ansible-tmp-1575277924.55-151800694430044 `" ) && sleep 0'
2019-12-02 09:12:04,568 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:12:04,569 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpfnrzUj TO /root/.ansible/tmp/ansible-tmp-1575277924.55-151800694430044/AnsiballZ_elb_target_group.py
2019-12-02 09:12:04,570 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277924.55-151800694430044/ /root/.ansible/tmp/ansible-tmp-1575277924.55-151800694430044/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:04,579 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277924.55-151800694430044/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:05,504 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277924.55-151800694430044/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:05,521 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_path": "/", 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "HTTP", 
    "health_check_timeout_seconds": 5, 
    "healthy_threshold_count": 5, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": "/", 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-superbackend", 
            "port": 80, 
            "profile": null, 
            "protocol": "http", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": "200", 
            "tags": {
                "env": "M100-superbackend"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-032969a062e87ea24", 
                    "Port": 8125
                }, 
                {
                    "Id": "i-08873cd4dde4bdb89", 
                    "Port": 8992
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "load_balancing_algorithm_type": "round_robin", 
    "matcher": {
        "http_code": "200"
    }, 
    "port": 80, 
    "protocol": "HTTP", 
    "slow_start_duration_seconds": "0", 
    "stickiness_enabled": "false", 
    "stickiness_lb_cookie_duration_seconds": "86400", 
    "stickiness_type": "lb_cookie", 
    "tags": {
        "env": "M100-superbackend"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-superbackend/2ba74d3e76066ec1", 
    "target_group_name": "M100-superbackend", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 2, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:05,539 p=20651 u=root |  TASK [ec2.elb_application_lb : Create an ELB Application Load Balancer and attach superbackend listener] *********************************************************************************************************************
2019-12-02 09:12:05,539 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/superbackend.yml:36
2019-12-02 09:12:05,564 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:05,564 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:05,573 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277925.56-30210183711262 `" && echo ansible-tmp-1575277925.56-30210183711262="` echo /root/.ansible/tmp/ansible-tmp-1575277925.56-30210183711262 `" ) && sleep 0'
2019-12-02 09:12:05,584 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_application_lb.py
2019-12-02 09:12:05,585 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp5Oix_P TO /root/.ansible/tmp/ansible-tmp-1575277925.56-30210183711262/AnsiballZ_elb_application_lb.py
2019-12-02 09:12:05,586 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277925.56-30210183711262/ /root/.ansible/tmp/ansible-tmp-1575277925.56-30210183711262/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:05,594 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277925.56-30210183711262/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:07,638 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277925.56-30210183711262/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:07,657 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }
    ], 
    "canonical_hosted_zone_id": "Z1LMS91P8CMLE5", 
    "changed": true, 
    "created_time": "2019-12-02T09:12:06.850000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-superbackend-916140165.ap-southeast-1.elb.amazonaws.com", 
    "idle_timeout_timeout_seconds": "600", 
    "invocation": {
        "module_args": {
            "access_logs_enabled": null, 
            "access_logs_s3_bucket": null, 
            "access_logs_s3_prefix": null, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "http2": null, 
            "idle_timeout": 600, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-superbackend/2ba74d3e76066ec1", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 80, 
                    "Protocol": "HTTP", 
                    "Rules": [
                        {
                            "Actions": [
                                {
                                    "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-superbackend/2ba74d3e76066ec1", 
                                    "Type": "forward"
                                }
                            ], 
                            "Conditions": [
                                {
                                    "Field": "path-pattern", 
                                    "Values": [
                                        "/"
                                    ]
                                }
                            ], 
                            "Priority": "1"
                        }
                    ], 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-superbackend", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_rules": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_groups": [
                "sg-0dfc30b802934c471"
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-superbackend"
            }, 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-superbackend/2ba74d3e76066ec1", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/app/M100-superbackend/115967391bce0f6f/d07477ed437651c3", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-superbackend/115967391bce0f6f", 
            "port": 80, 
            "protocol": "HTTP", 
            "rules": [
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-superbackend/2ba74d3e76066ec1", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [
                        {
                            "field": "path-pattern", 
                            "path_pattern_config": {
                                "values": [
                                    "/"
                                ]
                            }, 
                            "values": [
                                "/"
                            ]
                        }
                    ], 
                    "is_default": false, 
                    "priority": "1", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-superbackend/115967391bce0f6f/d07477ed437651c3/986d688967e3212b"
                }, 
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-superbackend/2ba74d3e76066ec1", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [], 
                    "is_default": true, 
                    "priority": "default", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-superbackend/115967391bce0f6f/d07477ed437651c3/9830ed942b48b5b5"
                }
            ]
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-superbackend/115967391bce0f6f", 
    "load_balancer_name": "M100-superbackend", 
    "routing_http2_enabled": "true", 
    "routing_http_drop_invalid_header_fields_enabled": "false", 
    "scheme": "internet-facing", 
    "security_groups": [
        "sg-0dfc30b802934c471"
    ], 
    "state": {
        "code": "provisioning"
    }, 
    "tags": {
        "env": "M100-superbackend"
    }, 
    "type": "application", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:07,675 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:07,675 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:15
2019-12-02 09:12:07,694 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:07,713 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:07,713 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:18
2019-12-02 09:12:07,732 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:07,750 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:07,751 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:2
2019-12-02 09:12:07,784 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml for localhost
2019-12-02 09:12:07,805 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC facts] ************************************************************************************************************************************************************************************
2019-12-02 09:12:07,805 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:12:07,823 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:07,823 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:07,832 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277927.82-2286074620001 `" && echo ansible-tmp-1575277927.82-2286074620001="` echo /root/.ansible/tmp/ansible-tmp-1575277927.82-2286074620001 `" ) && sleep 0'
2019-12-02 09:12:07,844 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:12:07,844 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpdRXDKL TO /root/.ansible/tmp/ansible-tmp-1575277927.82-2286074620001/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:12:07,845 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277927.82-2286074620001/ /root/.ansible/tmp/ansible-tmp-1575277927.82-2286074620001/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:07,854 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277927.82-2286074620001/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:08,759 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277927.82-2286074620001/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:08,773 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:08,791 p=20651 u=root |  TASK [ec2.elb_application_lb : set fact: VPC ID] *****************************************************************************************************************************************************************************
2019-12-02 09:12:08,791 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:12:08,811 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:12:08,830 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC subnet facts] *****************************************************************************************************************************************************************************
2019-12-02 09:12:08,830 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:12:08,848 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:08,848 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:08,856 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277928.85-104177587487058 `" && echo ansible-tmp-1575277928.85-104177587487058="` echo /root/.ansible/tmp/ansible-tmp-1575277928.85-104177587487058 `" ) && sleep 0'
2019-12-02 09:12:08,868 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:12:08,868 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpnWjkYU TO /root/.ansible/tmp/ansible-tmp-1575277928.85-104177587487058/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:12:08,869 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277928.85-104177587487058/ /root/.ansible/tmp/ansible-tmp-1575277928.85-104177587487058/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:08,878 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277928.85-104177587487058/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:09,593 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277928.85-104177587487058/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:09,610 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 236, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 237, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 235, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:09,628 p=20651 u=root |  TASK [ec2.elb_application_lb : register just the IDs for each of the groups] *************************************************************************************************************************************************
2019-12-02 09:12:09,628 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:12:09,649 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:09,667 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:09,667 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:3
2019-12-02 09:12:09,705 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml for localhost
2019-12-02 09:12:09,729 p=20651 u=root |  TASK [ec2.elb_application_lb : emqtt capture instance facts] *****************************************************************************************************************************************************************
2019-12-02 09:12:09,730 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:3
2019-12-02 09:12:09,750 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:09,750 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:09,759 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277929.75-52046592865884 `" && echo ansible-tmp-1575277929.75-52046592865884="` echo /root/.ansible/tmp/ansible-tmp-1575277929.75-52046592865884 `" ) && sleep 0'
2019-12-02 09:12:09,770 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:09,771 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpYqyWc4 TO /root/.ansible/tmp/ansible-tmp-1575277929.75-52046592865884/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:09,772 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277929.75-52046592865884/ /root/.ansible/tmp/ansible-tmp-1575277929.75-52046592865884/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:09,781 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277929.75-52046592865884/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:10,544 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277929.75-52046592865884/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:10,565 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:10,582 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:10,583 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:12
2019-12-02 09:12:10,604 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:10,623 p=20651 u=root |  TASK [ec2.elb_application_lb : operation capture instance facts] *************************************************************************************************************************************************************
2019-12-02 09:12:10,623 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:16
2019-12-02 09:12:10,642 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:10,643 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:10,651 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277930.64-233601682085558 `" && echo ansible-tmp-1575277930.64-233601682085558="` echo /root/.ansible/tmp/ansible-tmp-1575277930.64-233601682085558 `" ) && sleep 0'
2019-12-02 09:12:10,662 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:10,663 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpX0C03h TO /root/.ansible/tmp/ansible-tmp-1575277930.64-233601682085558/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:10,664 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277930.64-233601682085558/ /root/.ansible/tmp/ansible-tmp-1575277930.64-233601682085558/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:10,672 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277930.64-233601682085558/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:11,418 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277930.64-233601682085558/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:11,438 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:21:28+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-056e3802dce5fe04f"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-032969a062e87ea24", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:21:27+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "54.254.169.82"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:21:27+00:00", 
                        "attachment_id": "eni-attach-0c97c475cb97c3d3f", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:38:9f:dd:07:f6", 
                    "network_interface_id": "eni-002b8c4fdbaa64e48", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.161", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "54.254.169.82"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.161"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.161", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "54.254.169.82", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-operation", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-operation*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:11,456 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:11,457 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:25
2019-12-02 09:12:11,477 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "operation_instance_ids": [
            "i-032969a062e87ea24"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:11,495 p=20651 u=root |  TASK [ec2.elb_application_lb : superbackend capture instance facts] **********************************************************************************************************************************************************
2019-12-02 09:12:11,495 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:29
2019-12-02 09:12:11,516 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:11,516 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:11,525 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277931.52-107831482188767 `" && echo ansible-tmp-1575277931.52-107831482188767="` echo /root/.ansible/tmp/ansible-tmp-1575277931.52-107831482188767 `" ) && sleep 0'
2019-12-02 09:12:11,537 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:11,538 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmphBE8Qf TO /root/.ansible/tmp/ansible-tmp-1575277931.52-107831482188767/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:11,539 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277931.52-107831482188767/ /root/.ansible/tmp/ansible-tmp-1575277931.52-107831482188767/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:11,548 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277931.52-107831482188767/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:12,280 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277931.52-107831482188767/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:12,300 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:25:38+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-07c30c903b3b956f3"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-08873cd4dde4bdb89", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:25:37+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.74.221.142"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:25:37+00:00", 
                        "attachment_id": "eni-attach-0ce268eae67c7d171", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:f8:7f:1b:f6:32", 
                    "network_interface_id": "eni-023ce40193236c997", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.118", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.74.221.142"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.118"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.118", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.74.221.142", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-superbackend", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-superbackend*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:12,318 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:12,318 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:38
2019-12-02 09:12:12,339 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "superbackend_instance_ids": [
            "i-08873cd4dde4bdb89"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:12,358 p=20651 u=root |  TASK [ec2.elb_application_lb : merchant capture instance facts] **************************************************************************************************************************************************************
2019-12-02 09:12:12,358 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:42
2019-12-02 09:12:12,377 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:12,377 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:12,386 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277932.38-78313812335762 `" && echo ansible-tmp-1575277932.38-78313812335762="` echo /root/.ansible/tmp/ansible-tmp-1575277932.38-78313812335762 `" ) && sleep 0'
2019-12-02 09:12:12,398 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:12,399 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp02VScZ TO /root/.ansible/tmp/ansible-tmp-1575277932.38-78313812335762/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:12,399 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277932.38-78313812335762/ /root/.ansible/tmp/ansible-tmp-1575277932.38-78313812335762/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:12,408 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277932.38-78313812335762/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:13,132 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277932.38-78313812335762/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:13,151 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:26:13+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-03c23ed308dded2cb"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0bee7737f8f0bb7f2", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:26:12+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "18.141.110.124"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:26:12+00:00", 
                        "attachment_id": "eni-attach-03742ad9f98428ee8", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "0a:53:aa:a3:0e:c0", 
                    "network_interface_id": "eni-0695e3526c1b803ff", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.12.223", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "18.141.110.124"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.12.223"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0dc11d7821eeda12c", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1c", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.12.223", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "18.141.110.124", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Name": "M100-merchant", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-merchant*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:13,169 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:13,169 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:51
2019-12-02 09:12:13,190 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "merchant_instance_ids": [
            "i-0bee7737f8f0bb7f2"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:13,208 p=20651 u=root |  TASK [ec2.elb_application_lb : zuul capture instance facts] ******************************************************************************************************************************************************************
2019-12-02 09:12:13,208 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:55
2019-12-02 09:12:13,228 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:13,229 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:13,237 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277933.23-152805044370023 `" && echo ansible-tmp-1575277933.23-152805044370023="` echo /root/.ansible/tmp/ansible-tmp-1575277933.23-152805044370023 `" ) && sleep 0'
2019-12-02 09:12:13,249 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:13,250 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpOrtcBz TO /root/.ansible/tmp/ansible-tmp-1575277933.23-152805044370023/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:13,251 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277933.23-152805044370023/ /root/.ansible/tmp/ansible-tmp-1575277933.23-152805044370023/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:13,259 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277933.23-152805044370023/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:14,001 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277933.23-152805044370023/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:14,021 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T15:18:01+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0667d48e918774329"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0a9fbb5c635714db8", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T15:18:00+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.77.73.12"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T15:18:00+00:00", 
                        "attachment_id": "eni-attach-0a58646ed352b963c", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0b0d63d52658d996b", 
                            "group_name": "M100-zuul-all"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:50:43:81:29:48", 
                    "network_interface_id": "eni-06614c24c3bef6e43", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.162", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.77.73.12"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.162"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.162", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.77.73.12", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0b0d63d52658d996b", 
                    "group_name": "M100-zuul-all"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-zuul", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-zuul*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:14,039 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:14,039 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:64
2019-12-02 09:12:14,059 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "zuul_instance_ids": [
            "i-0a9fbb5c635714db8"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:14,077 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:14,077 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:6
2019-12-02 09:12:14,096 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:14,114 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:14,114 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:9
2019-12-02 09:12:14,132 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:14,150 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:14,150 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:12
2019-12-02 09:12:14,169 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:14,187 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:14,187 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:15
2019-12-02 09:12:14,230 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/merchant.yml for localhost
2019-12-02 09:12:14,258 p=20651 u=root |  TASK [ec2.elb_application_lb : Get merchant SG ID] ***************************************************************************************************************************************************************************
2019-12-02 09:12:14,258 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/merchant.yml:2
2019-12-02 09:12:14,279 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:14,279 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:14,287 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277934.28-200847218554060 `" && echo ansible-tmp-1575277934.28-200847218554060="` echo /root/.ansible/tmp/ansible-tmp-1575277934.28-200847218554060 `" ) && sleep 0'
2019-12-02 09:12:14,300 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2019-12-02 09:12:14,300 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpbsaxIe TO /root/.ansible/tmp/ansible-tmp-1575277934.28-200847218554060/AnsiballZ_ec2_group_facts.py
2019-12-02 09:12:14,301 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277934.28-200847218554060/ /root/.ansible/tmp/ansible-tmp-1575277934.28-200847218554060/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:14,310 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277934.28-200847218554060/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:15,019 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277934.28-200847218554060/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:15,036 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M100-elb-80-443-all", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-077aa45a93c882e1f", 
            "group_name": "M100-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "607624181858", 
            "tags": {
                "Environment": "M100-elb-80-443-all", 
                "Name": "M100-elb-80-443-all"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:15,054 p=20651 u=root |  TASK [ec2.elb_application_lb : list of merchant all the security group id.] **************************************************************************************************************************************************
2019-12-02 09:12:15,054 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/merchant.yml:10
2019-12-02 09:12:15,087 p=20651 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M100-elb-80-443-all', u'Name': u'M100-elb-80-443-all'}, u'group_name': u'M100-elb-80-443-all', u'vpc_id': u'vpc-0d32a5f9af5d2e04f', u'group_id': u'sg-077aa45a93c882e1f', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'607624181858'}) => {
    "ansible_facts": {
        "sg_merchant_id": "sg-077aa45a93c882e1f"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-077aa45a93c882e1f", 
        "group_name": "M100-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "607624181858", 
        "tags": {
            "Environment": "M100-elb-80-443-all", 
            "Name": "M100-elb-80-443-all"
        }, 
        "vpc_id": "vpc-0d32a5f9af5d2e04f"
    }
}
2019-12-02 09:12:15,106 p=20651 u=root |  TASK [ec2.elb_application_lb : create targets] *******************************************************************************************************************************************************************************
2019-12-02 09:12:15,106 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/merchant.yml:15
2019-12-02 09:12:15,134 p=20651 u=root |  ok: [localhost] => (item=i-0bee7737f8f0bb7f2) => {
    "ansible_facts": {
        "targets": [
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-032969a062e87ea24", 
                "Port": 8125
            }, 
            {
                "Id": "i-08873cd4dde4bdb89", 
                "Port": 8992
            }, 
            {
                "Id": "i-0bee7737f8f0bb7f2", 
                "Port": 8991
            }
        ]
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": "i-0bee7737f8f0bb7f2"
}
2019-12-02 09:12:15,154 p=20651 u=root |  TASK [ec2.elb_application_lb : Create merchant target group] *****************************************************************************************************************************************************************
2019-12-02 09:12:15,154 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/merchant.yml:20
2019-12-02 09:12:15,180 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:15,180 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:15,189 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277935.18-165287034105423 `" && echo ansible-tmp-1575277935.18-165287034105423="` echo /root/.ansible/tmp/ansible-tmp-1575277935.18-165287034105423 `" ) && sleep 0'
2019-12-02 09:12:15,202 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:12:15,203 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpde5SbV TO /root/.ansible/tmp/ansible-tmp-1575277935.18-165287034105423/AnsiballZ_elb_target_group.py
2019-12-02 09:12:15,204 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277935.18-165287034105423/ /root/.ansible/tmp/ansible-tmp-1575277935.18-165287034105423/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:15,212 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277935.18-165287034105423/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:16,151 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277935.18-165287034105423/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:16,168 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_path": "/", 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "HTTP", 
    "health_check_timeout_seconds": 5, 
    "healthy_threshold_count": 5, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": "/", 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-merchant", 
            "port": 80, 
            "profile": null, 
            "protocol": "http", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": "200", 
            "tags": {
                "env": "M100-merchant"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-032969a062e87ea24", 
                    "Port": 8125
                }, 
                {
                    "Id": "i-08873cd4dde4bdb89", 
                    "Port": 8992
                }, 
                {
                    "Id": "i-0bee7737f8f0bb7f2", 
                    "Port": 8991
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "load_balancing_algorithm_type": "round_robin", 
    "matcher": {
        "http_code": "200"
    }, 
    "port": 80, 
    "protocol": "HTTP", 
    "slow_start_duration_seconds": "0", 
    "stickiness_enabled": "false", 
    "stickiness_lb_cookie_duration_seconds": "86400", 
    "stickiness_type": "lb_cookie", 
    "tags": {
        "env": "M100-merchant"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-merchant/21ce69d5dcf1dfea", 
    "target_group_name": "M100-merchant", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 2, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:16,186 p=20651 u=root |  TASK [ec2.elb_application_lb : Create an ELB Application Load Balancer and attach merchant listener] *************************************************************************************************************************
2019-12-02 09:12:16,186 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/merchant.yml:36
2019-12-02 09:12:16,211 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:16,211 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:16,220 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277936.21-135384665792501 `" && echo ansible-tmp-1575277936.21-135384665792501="` echo /root/.ansible/tmp/ansible-tmp-1575277936.21-135384665792501 `" ) && sleep 0'
2019-12-02 09:12:16,233 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_application_lb.py
2019-12-02 09:12:16,233 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp3Sd4if TO /root/.ansible/tmp/ansible-tmp-1575277936.21-135384665792501/AnsiballZ_elb_application_lb.py
2019-12-02 09:12:16,234 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277936.21-135384665792501/ /root/.ansible/tmp/ansible-tmp-1575277936.21-135384665792501/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:16,243 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277936.21-135384665792501/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:18,197 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277936.21-135384665792501/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:18,213 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }
    ], 
    "canonical_hosted_zone_id": "Z1LMS91P8CMLE5", 
    "changed": true, 
    "created_time": "2019-12-02T09:12:17.400000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-merchant-1584971915.ap-southeast-1.elb.amazonaws.com", 
    "idle_timeout_timeout_seconds": "600", 
    "invocation": {
        "module_args": {
            "access_logs_enabled": null, 
            "access_logs_s3_bucket": null, 
            "access_logs_s3_prefix": null, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "http2": null, 
            "idle_timeout": 600, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-merchant/21ce69d5dcf1dfea", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 80, 
                    "Protocol": "HTTP", 
                    "Rules": [
                        {
                            "Actions": [
                                {
                                    "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-merchant/21ce69d5dcf1dfea", 
                                    "Type": "forward"
                                }
                            ], 
                            "Conditions": [
                                {
                                    "Field": "path-pattern", 
                                    "Values": [
                                        "/"
                                    ]
                                }
                            ], 
                            "Priority": "1"
                        }
                    ], 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-merchant", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_rules": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_groups": [
                "sg-077aa45a93c882e1f"
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-merchant"
            }, 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-merchant/21ce69d5dcf1dfea", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/app/M100-merchant/2b768e630c3896e9/fd0838299e8d0761", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-merchant/2b768e630c3896e9", 
            "port": 80, 
            "protocol": "HTTP", 
            "rules": [
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-merchant/21ce69d5dcf1dfea", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [
                        {
                            "field": "path-pattern", 
                            "path_pattern_config": {
                                "values": [
                                    "/"
                                ]
                            }, 
                            "values": [
                                "/"
                            ]
                        }
                    ], 
                    "is_default": false, 
                    "priority": "1", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-merchant/2b768e630c3896e9/fd0838299e8d0761/5880c05937799a37"
                }, 
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-merchant/21ce69d5dcf1dfea", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [], 
                    "is_default": true, 
                    "priority": "default", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-merchant/2b768e630c3896e9/fd0838299e8d0761/66c3a9f837044253"
                }
            ]
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-merchant/2b768e630c3896e9", 
    "load_balancer_name": "M100-merchant", 
    "routing_http2_enabled": "true", 
    "routing_http_drop_invalid_header_fields_enabled": "false", 
    "scheme": "internet-facing", 
    "security_groups": [
        "sg-077aa45a93c882e1f"
    ], 
    "state": {
        "code": "provisioning"
    }, 
    "tags": {
        "env": "M100-merchant"
    }, 
    "type": "application", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:18,231 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:18,231 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:18
2019-12-02 09:12:18,250 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:18,268 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:18,268 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:2
2019-12-02 09:12:18,301 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml for localhost
2019-12-02 09:12:18,322 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC facts] ************************************************************************************************************************************************************************************
2019-12-02 09:12:18,322 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:12:18,341 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:18,341 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:18,349 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277938.34-99932849130963 `" && echo ansible-tmp-1575277938.34-99932849130963="` echo /root/.ansible/tmp/ansible-tmp-1575277938.34-99932849130963 `" ) && sleep 0'
2019-12-02 09:12:18,362 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:12:18,363 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpaFq0PJ TO /root/.ansible/tmp/ansible-tmp-1575277938.34-99932849130963/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:12:18,364 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277938.34-99932849130963/ /root/.ansible/tmp/ansible-tmp-1575277938.34-99932849130963/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:18,372 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277938.34-99932849130963/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:19,192 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277938.34-99932849130963/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:19,206 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:19,225 p=20651 u=root |  TASK [ec2.elb_application_lb : set fact: VPC ID] *****************************************************************************************************************************************************************************
2019-12-02 09:12:19,225 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:12:19,244 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:12:19,261 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC subnet facts] *****************************************************************************************************************************************************************************
2019-12-02 09:12:19,262 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:12:19,280 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:19,281 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:19,289 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277939.28-159252108747707 `" && echo ansible-tmp-1575277939.28-159252108747707="` echo /root/.ansible/tmp/ansible-tmp-1575277939.28-159252108747707 `" ) && sleep 0'
2019-12-02 09:12:19,301 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:12:19,302 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpInKypq TO /root/.ansible/tmp/ansible-tmp-1575277939.28-159252108747707/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:12:19,303 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277939.28-159252108747707/ /root/.ansible/tmp/ansible-tmp-1575277939.28-159252108747707/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:19,311 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277939.28-159252108747707/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:19,994 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277939.28-159252108747707/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:20,013 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 236, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 237, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 235, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:20,031 p=20651 u=root |  TASK [ec2.elb_application_lb : register just the IDs for each of the groups] *************************************************************************************************************************************************
2019-12-02 09:12:20,031 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:12:20,053 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:20,071 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:20,071 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:3
2019-12-02 09:12:20,110 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml for localhost
2019-12-02 09:12:20,132 p=20651 u=root |  TASK [ec2.elb_application_lb : emqtt capture instance facts] *****************************************************************************************************************************************************************
2019-12-02 09:12:20,132 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:3
2019-12-02 09:12:20,151 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:20,151 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:20,160 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277940.15-215655434966119 `" && echo ansible-tmp-1575277940.15-215655434966119="` echo /root/.ansible/tmp/ansible-tmp-1575277940.15-215655434966119 `" ) && sleep 0'
2019-12-02 09:12:20,177 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:20,178 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp3SMWPK TO /root/.ansible/tmp/ansible-tmp-1575277940.15-215655434966119/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:20,179 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277940.15-215655434966119/ /root/.ansible/tmp/ansible-tmp-1575277940.15-215655434966119/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:20,188 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277940.15-215655434966119/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:20,935 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277940.15-215655434966119/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:20,955 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:20,975 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:20,976 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:12
2019-12-02 09:12:20,997 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:21,015 p=20651 u=root |  TASK [ec2.elb_application_lb : operation capture instance facts] *************************************************************************************************************************************************************
2019-12-02 09:12:21,015 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:16
2019-12-02 09:12:21,036 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:21,037 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:21,046 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277941.04-233738410164623 `" && echo ansible-tmp-1575277941.04-233738410164623="` echo /root/.ansible/tmp/ansible-tmp-1575277941.04-233738410164623 `" ) && sleep 0'
2019-12-02 09:12:21,058 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:21,059 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp0xipBW TO /root/.ansible/tmp/ansible-tmp-1575277941.04-233738410164623/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:21,060 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277941.04-233738410164623/ /root/.ansible/tmp/ansible-tmp-1575277941.04-233738410164623/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:21,069 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277941.04-233738410164623/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:21,802 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277941.04-233738410164623/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:21,823 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:21:28+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-056e3802dce5fe04f"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-032969a062e87ea24", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:21:27+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "54.254.169.82"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:21:27+00:00", 
                        "attachment_id": "eni-attach-0c97c475cb97c3d3f", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:38:9f:dd:07:f6", 
                    "network_interface_id": "eni-002b8c4fdbaa64e48", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.161", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "54.254.169.82"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.161"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.161", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "54.254.169.82", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-operation", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-operation*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:21,840 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:21,840 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:25
2019-12-02 09:12:21,863 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "operation_instance_ids": [
            "i-032969a062e87ea24"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:21,881 p=20651 u=root |  TASK [ec2.elb_application_lb : superbackend capture instance facts] **********************************************************************************************************************************************************
2019-12-02 09:12:21,881 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:29
2019-12-02 09:12:21,902 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:21,902 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:21,911 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277941.9-7017726910036 `" && echo ansible-tmp-1575277941.9-7017726910036="` echo /root/.ansible/tmp/ansible-tmp-1575277941.9-7017726910036 `" ) && sleep 0'
2019-12-02 09:12:21,923 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:21,923 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpcnbNiU TO /root/.ansible/tmp/ansible-tmp-1575277941.9-7017726910036/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:21,924 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277941.9-7017726910036/ /root/.ansible/tmp/ansible-tmp-1575277941.9-7017726910036/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:21,933 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277941.9-7017726910036/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:22,664 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277941.9-7017726910036/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:22,685 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:25:38+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-07c30c903b3b956f3"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-08873cd4dde4bdb89", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:25:37+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.74.221.142"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:25:37+00:00", 
                        "attachment_id": "eni-attach-0ce268eae67c7d171", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:f8:7f:1b:f6:32", 
                    "network_interface_id": "eni-023ce40193236c997", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.118", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.74.221.142"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.118"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.118", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.74.221.142", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-superbackend", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-superbackend*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:22,702 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:22,703 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:38
2019-12-02 09:12:22,724 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "superbackend_instance_ids": [
            "i-08873cd4dde4bdb89"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:22,743 p=20651 u=root |  TASK [ec2.elb_application_lb : merchant capture instance facts] **************************************************************************************************************************************************************
2019-12-02 09:12:22,743 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:42
2019-12-02 09:12:22,762 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:22,763 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:22,772 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277942.76-180021966623228 `" && echo ansible-tmp-1575277942.76-180021966623228="` echo /root/.ansible/tmp/ansible-tmp-1575277942.76-180021966623228 `" ) && sleep 0'
2019-12-02 09:12:22,784 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:22,785 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpi826PP TO /root/.ansible/tmp/ansible-tmp-1575277942.76-180021966623228/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:22,786 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277942.76-180021966623228/ /root/.ansible/tmp/ansible-tmp-1575277942.76-180021966623228/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:22,795 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277942.76-180021966623228/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:23,504 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277942.76-180021966623228/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:23,524 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:26:13+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-03c23ed308dded2cb"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0bee7737f8f0bb7f2", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:26:12+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "18.141.110.124"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:26:12+00:00", 
                        "attachment_id": "eni-attach-03742ad9f98428ee8", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "0a:53:aa:a3:0e:c0", 
                    "network_interface_id": "eni-0695e3526c1b803ff", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.12.223", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "18.141.110.124"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.12.223"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0dc11d7821eeda12c", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1c", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.12.223", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "18.141.110.124", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Name": "M100-merchant", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-merchant*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:23,542 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:23,542 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:51
2019-12-02 09:12:23,562 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "merchant_instance_ids": [
            "i-0bee7737f8f0bb7f2"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:23,580 p=20651 u=root |  TASK [ec2.elb_application_lb : zuul capture instance facts] ******************************************************************************************************************************************************************
2019-12-02 09:12:23,580 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:55
2019-12-02 09:12:23,600 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:23,601 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:23,609 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277943.6-41133117372666 `" && echo ansible-tmp-1575277943.6-41133117372666="` echo /root/.ansible/tmp/ansible-tmp-1575277943.6-41133117372666 `" ) && sleep 0'
2019-12-02 09:12:23,621 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:23,621 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp4_69eX TO /root/.ansible/tmp/ansible-tmp-1575277943.6-41133117372666/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:23,622 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277943.6-41133117372666/ /root/.ansible/tmp/ansible-tmp-1575277943.6-41133117372666/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:23,630 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277943.6-41133117372666/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:24,384 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277943.6-41133117372666/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:24,404 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T15:18:01+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0667d48e918774329"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0a9fbb5c635714db8", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T15:18:00+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.77.73.12"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T15:18:00+00:00", 
                        "attachment_id": "eni-attach-0a58646ed352b963c", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0b0d63d52658d996b", 
                            "group_name": "M100-zuul-all"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:50:43:81:29:48", 
                    "network_interface_id": "eni-06614c24c3bef6e43", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.162", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.77.73.12"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.162"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.162", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.77.73.12", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0b0d63d52658d996b", 
                    "group_name": "M100-zuul-all"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-zuul", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-zuul*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:24,422 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:24,422 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:64
2019-12-02 09:12:24,443 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "zuul_instance_ids": [
            "i-0a9fbb5c635714db8"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:24,462 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:24,462 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:6
2019-12-02 09:12:24,480 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:24,497 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:24,498 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:9
2019-12-02 09:12:24,516 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:24,534 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:24,534 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:12
2019-12-02 09:12:24,552 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:24,570 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:24,570 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:15
2019-12-02 09:12:24,589 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:24,607 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:24,607 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:18
2019-12-02 09:12:24,651 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml for localhost
2019-12-02 09:12:24,677 p=20651 u=root |  TASK [ec2.elb_application_lb : Get appgw SG ID] ******************************************************************************************************************************************************************************
2019-12-02 09:12:24,677 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:2
2019-12-02 09:12:24,697 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:24,697 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:24,705 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277944.7-196479251769367 `" && echo ansible-tmp-1575277944.7-196479251769367="` echo /root/.ansible/tmp/ansible-tmp-1575277944.7-196479251769367 `" ) && sleep 0'
2019-12-02 09:12:24,717 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2019-12-02 09:12:24,718 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpuWe2RI TO /root/.ansible/tmp/ansible-tmp-1575277944.7-196479251769367/AnsiballZ_ec2_group_facts.py
2019-12-02 09:12:24,719 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277944.7-196479251769367/ /root/.ansible/tmp/ansible-tmp-1575277944.7-196479251769367/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:24,728 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277944.7-196479251769367/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:25,476 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277944.7-196479251769367/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:25,497 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M100-elb-80-443-all", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-077aa45a93c882e1f", 
            "group_name": "M100-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "607624181858", 
            "tags": {
                "Environment": "M100-elb-80-443-all", 
                "Name": "M100-elb-80-443-all"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:25,514 p=20651 u=root |  TASK [ec2.elb_application_lb : list of appgw all the security group id.] *****************************************************************************************************************************************************
2019-12-02 09:12:25,515 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:10
2019-12-02 09:12:25,552 p=20651 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M100-elb-80-443-all', u'Name': u'M100-elb-80-443-all'}, u'group_name': u'M100-elb-80-443-all', u'vpc_id': u'vpc-0d32a5f9af5d2e04f', u'group_id': u'sg-077aa45a93c882e1f', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'607624181858'}) => {
    "ansible_facts": {
        "sg_appgw_id": "sg-077aa45a93c882e1f"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-077aa45a93c882e1f", 
        "group_name": "M100-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "607624181858", 
        "tags": {
            "Environment": "M100-elb-80-443-all", 
            "Name": "M100-elb-80-443-all"
        }, 
        "vpc_id": "vpc-0d32a5f9af5d2e04f"
    }
}
2019-12-02 09:12:25,571 p=20651 u=root |  TASK [ec2.elb_application_lb : create targets] *******************************************************************************************************************************************************************************
2019-12-02 09:12:25,571 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:15
2019-12-02 09:12:25,600 p=20651 u=root |  ok: [localhost] => (item=i-0a9fbb5c635714db8) => {
    "ansible_facts": {
        "targets": [
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-032969a062e87ea24", 
                "Port": 8125
            }, 
            {
                "Id": "i-08873cd4dde4bdb89", 
                "Port": 8992
            }, 
            {
                "Id": "i-0bee7737f8f0bb7f2", 
                "Port": 8991
            }, 
            {
                "Id": "i-0a9fbb5c635714db8", 
                "Port": 8800
            }
        ]
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": "i-0a9fbb5c635714db8"
}
2019-12-02 09:12:25,619 p=20651 u=root |  TASK [ec2.elb_application_lb : Create appgw target group] ********************************************************************************************************************************************************************
2019-12-02 09:12:25,619 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:20
2019-12-02 09:12:25,645 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:25,645 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:25,653 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277945.64-151166101546392 `" && echo ansible-tmp-1575277945.64-151166101546392="` echo /root/.ansible/tmp/ansible-tmp-1575277945.64-151166101546392 `" ) && sleep 0'
2019-12-02 09:12:25,666 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:12:25,667 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp9xwRZg TO /root/.ansible/tmp/ansible-tmp-1575277945.64-151166101546392/AnsiballZ_elb_target_group.py
2019-12-02 09:12:25,668 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277945.64-151166101546392/ /root/.ansible/tmp/ansible-tmp-1575277945.64-151166101546392/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:25,676 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277945.64-151166101546392/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:26,669 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277945.64-151166101546392/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:26,687 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_path": "/", 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "HTTP", 
    "health_check_timeout_seconds": 5, 
    "healthy_threshold_count": 5, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": "/actuator/info", 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-appgw01", 
            "port": 80, 
            "profile": null, 
            "protocol": "http", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": "200", 
            "tags": {
                "env": "M100-appgw01"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-032969a062e87ea24", 
                    "Port": 8125
                }, 
                {
                    "Id": "i-08873cd4dde4bdb89", 
                    "Port": 8992
                }, 
                {
                    "Id": "i-0bee7737f8f0bb7f2", 
                    "Port": 8991
                }, 
                {
                    "Id": "i-0a9fbb5c635714db8", 
                    "Port": 8800
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "load_balancing_algorithm_type": "round_robin", 
    "matcher": {
        "http_code": "200"
    }, 
    "port": 80, 
    "protocol": "HTTP", 
    "slow_start_duration_seconds": "0", 
    "stickiness_enabled": "false", 
    "stickiness_lb_cookie_duration_seconds": "86400", 
    "stickiness_type": "lb_cookie", 
    "tags": {
        "env": "M100-appgw01"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw01/a79e36b9a62145a0", 
    "target_group_name": "M100-appgw01", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 2, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:26,704 p=20651 u=root |  TASK [ec2.elb_application_lb : Create an ELB Application Load Balancer and attach appgw listener] ****************************************************************************************************************************
2019-12-02 09:12:26,704 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:36
2019-12-02 09:12:26,729 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:26,729 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:26,737 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277946.73-126009743099356 `" && echo ansible-tmp-1575277946.73-126009743099356="` echo /root/.ansible/tmp/ansible-tmp-1575277946.73-126009743099356 `" ) && sleep 0'
2019-12-02 09:12:26,750 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_application_lb.py
2019-12-02 09:12:26,751 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpKM1yYD TO /root/.ansible/tmp/ansible-tmp-1575277946.73-126009743099356/AnsiballZ_elb_application_lb.py
2019-12-02 09:12:26,752 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277946.73-126009743099356/ /root/.ansible/tmp/ansible-tmp-1575277946.73-126009743099356/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:26,761 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277946.73-126009743099356/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:28,695 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277946.73-126009743099356/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:28,711 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }
    ], 
    "canonical_hosted_zone_id": "Z1LMS91P8CMLE5", 
    "changed": true, 
    "created_time": "2019-12-02T09:12:27.890000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-appgw01-1124730091.ap-southeast-1.elb.amazonaws.com", 
    "idle_timeout_timeout_seconds": "600", 
    "invocation": {
        "module_args": {
            "access_logs_enabled": null, 
            "access_logs_s3_bucket": null, 
            "access_logs_s3_prefix": null, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "http2": null, 
            "idle_timeout": 600, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw01/a79e36b9a62145a0", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 80, 
                    "Protocol": "HTTP", 
                    "Rules": [
                        {
                            "Actions": [
                                {
                                    "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw01/a79e36b9a62145a0", 
                                    "Type": "forward"
                                }
                            ], 
                            "Conditions": [
                                {
                                    "Field": "path-pattern", 
                                    "Values": [
                                        "/actuator/info"
                                    ]
                                }
                            ], 
                            "Priority": "1"
                        }
                    ], 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-appgw01", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_rules": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_groups": [
                "sg-077aa45a93c882e1f"
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-appgw01"
            }, 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw01/a79e36b9a62145a0", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/app/M100-appgw01/e82bf8c51472fed1/7d6e12150c8a5d51", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-appgw01/e82bf8c51472fed1", 
            "port": 80, 
            "protocol": "HTTP", 
            "rules": [
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw01/a79e36b9a62145a0", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [
                        {
                            "field": "path-pattern", 
                            "path_pattern_config": {
                                "values": [
                                    "/actuator/info"
                                ]
                            }, 
                            "values": [
                                "/actuator/info"
                            ]
                        }
                    ], 
                    "is_default": false, 
                    "priority": "1", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-appgw01/e82bf8c51472fed1/7d6e12150c8a5d51/0f31d89e082c76fa"
                }, 
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw01/a79e36b9a62145a0", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [], 
                    "is_default": true, 
                    "priority": "default", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-appgw01/e82bf8c51472fed1/7d6e12150c8a5d51/6d9aebb876ce3aa9"
                }
            ]
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-appgw01/e82bf8c51472fed1", 
    "load_balancer_name": "M100-appgw01", 
    "routing_http2_enabled": "true", 
    "routing_http_drop_invalid_header_fields_enabled": "false", 
    "scheme": "internet-facing", 
    "security_groups": [
        "sg-077aa45a93c882e1f"
    ], 
    "state": {
        "code": "provisioning"
    }, 
    "tags": {
        "env": "M100-appgw01"
    }, 
    "type": "application", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:28,728 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:28,729 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:2
2019-12-02 09:12:28,762 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml for localhost
2019-12-02 09:12:28,782 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC facts] ************************************************************************************************************************************************************************************
2019-12-02 09:12:28,782 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:12:28,802 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:28,802 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:28,810 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277948.8-255484054164630 `" && echo ansible-tmp-1575277948.8-255484054164630="` echo /root/.ansible/tmp/ansible-tmp-1575277948.8-255484054164630 `" ) && sleep 0'
2019-12-02 09:12:28,823 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:12:28,824 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmprp42Nf TO /root/.ansible/tmp/ansible-tmp-1575277948.8-255484054164630/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:12:28,825 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277948.8-255484054164630/ /root/.ansible/tmp/ansible-tmp-1575277948.8-255484054164630/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:28,833 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277948.8-255484054164630/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:29,746 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277948.8-255484054164630/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:29,761 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:29,778 p=20651 u=root |  TASK [ec2.elb_application_lb : set fact: VPC ID] *****************************************************************************************************************************************************************************
2019-12-02 09:12:29,779 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:12:29,799 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:12:29,817 p=20651 u=root |  TASK [ec2.elb_application_lb : VPC subnet facts] *****************************************************************************************************************************************************************************
2019-12-02 09:12:29,817 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:12:29,835 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:29,836 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:29,845 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277949.84-248751274574480 `" && echo ansible-tmp-1575277949.84-248751274574480="` echo /root/.ansible/tmp/ansible-tmp-1575277949.84-248751274574480 `" ) && sleep 0'
2019-12-02 09:12:29,857 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:12:29,858 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpHsg1s4 TO /root/.ansible/tmp/ansible-tmp-1575277949.84-248751274574480/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:12:29,859 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277949.84-248751274574480/ /root/.ansible/tmp/ansible-tmp-1575277949.84-248751274574480/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:29,868 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277949.84-248751274574480/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:30,663 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277949.84-248751274574480/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:30,680 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 235, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 237, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 233, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:30,698 p=20651 u=root |  TASK [ec2.elb_application_lb : register just the IDs for each of the groups] *************************************************************************************************************************************************
2019-12-02 09:12:30,698 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:12:30,720 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:30,739 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:30,739 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:3
2019-12-02 09:12:30,777 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml for localhost
2019-12-02 09:12:30,800 p=20651 u=root |  TASK [ec2.elb_application_lb : emqtt capture instance facts] *****************************************************************************************************************************************************************
2019-12-02 09:12:30,800 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:3
2019-12-02 09:12:30,820 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:30,820 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:30,829 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277950.82-185351391593961 `" && echo ansible-tmp-1575277950.82-185351391593961="` echo /root/.ansible/tmp/ansible-tmp-1575277950.82-185351391593961 `" ) && sleep 0'
2019-12-02 09:12:30,841 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:30,842 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpAvD5WV TO /root/.ansible/tmp/ansible-tmp-1575277950.82-185351391593961/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:30,843 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277950.82-185351391593961/ /root/.ansible/tmp/ansible-tmp-1575277950.82-185351391593961/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:30,852 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277950.82-185351391593961/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:31,601 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277950.82-185351391593961/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:31,621 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:31,639 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:31,639 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:12
2019-12-02 09:12:31,660 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:31,678 p=20651 u=root |  TASK [ec2.elb_application_lb : operation capture instance facts] *************************************************************************************************************************************************************
2019-12-02 09:12:31,679 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:16
2019-12-02 09:12:31,698 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:31,699 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:31,707 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277951.7-5557993753821 `" && echo ansible-tmp-1575277951.7-5557993753821="` echo /root/.ansible/tmp/ansible-tmp-1575277951.7-5557993753821 `" ) && sleep 0'
2019-12-02 09:12:31,719 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:31,720 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp8oFRzW TO /root/.ansible/tmp/ansible-tmp-1575277951.7-5557993753821/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:31,720 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277951.7-5557993753821/ /root/.ansible/tmp/ansible-tmp-1575277951.7-5557993753821/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:31,729 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277951.7-5557993753821/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:32,460 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277951.7-5557993753821/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:32,480 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:21:28+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-056e3802dce5fe04f"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-032969a062e87ea24", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:21:27+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "54.254.169.82"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:21:27+00:00", 
                        "attachment_id": "eni-attach-0c97c475cb97c3d3f", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:38:9f:dd:07:f6", 
                    "network_interface_id": "eni-002b8c4fdbaa64e48", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.161", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "54.254.169.82"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.161"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-161.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.161", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-54-254-169-82.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "54.254.169.82", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-operation", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-operation*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:32,498 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:32,498 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:25
2019-12-02 09:12:32,519 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "operation_instance_ids": [
            "i-032969a062e87ea24"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:32,538 p=20651 u=root |  TASK [ec2.elb_application_lb : superbackend capture instance facts] **********************************************************************************************************************************************************
2019-12-02 09:12:32,538 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:29
2019-12-02 09:12:32,557 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:32,557 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:32,571 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277952.56-89263195209488 `" && echo ansible-tmp-1575277952.56-89263195209488="` echo /root/.ansible/tmp/ansible-tmp-1575277952.56-89263195209488 `" ) && sleep 0'
2019-12-02 09:12:32,583 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:32,584 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpW6Ggxr TO /root/.ansible/tmp/ansible-tmp-1575277952.56-89263195209488/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:32,585 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277952.56-89263195209488/ /root/.ansible/tmp/ansible-tmp-1575277952.56-89263195209488/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:32,594 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277952.56-89263195209488/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:33,300 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277952.56-89263195209488/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:33,320 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:25:38+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-07c30c903b3b956f3"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-08873cd4dde4bdb89", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:25:37+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.74.221.142"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:25:37+00:00", 
                        "attachment_id": "eni-attach-0ce268eae67c7d171", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "02:f8:7f:1b:f6:32", 
                    "network_interface_id": "eni-023ce40193236c997", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.11.118", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.74.221.142"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.11.118"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0c9066766b02a3c8a", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1b", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-11-118.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.11.118", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-74-221-142.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.74.221.142", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Name": "M100-superbackend", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-superbackend*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:33,341 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:33,341 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:38
2019-12-02 09:12:33,362 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "superbackend_instance_ids": [
            "i-08873cd4dde4bdb89"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:33,380 p=20651 u=root |  TASK [ec2.elb_application_lb : merchant capture instance facts] **************************************************************************************************************************************************************
2019-12-02 09:12:33,381 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:42
2019-12-02 09:12:33,401 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:33,402 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:33,410 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277953.4-220830651983662 `" && echo ansible-tmp-1575277953.4-220830651983662="` echo /root/.ansible/tmp/ansible-tmp-1575277953.4-220830651983662 `" ) && sleep 0'
2019-12-02 09:12:33,422 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:33,423 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpVjVENV TO /root/.ansible/tmp/ansible-tmp-1575277953.4-220830651983662/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:33,423 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277953.4-220830651983662/ /root/.ansible/tmp/ansible-tmp-1575277953.4-220830651983662/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:33,432 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277953.4-220830651983662/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:34,154 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277953.4-220830651983662/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:34,175 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:26:13+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-03c23ed308dded2cb"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0bee7737f8f0bb7f2", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:26:12+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "18.141.110.124"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:26:12+00:00", 
                        "attachment_id": "eni-attach-03742ad9f98428ee8", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "0a:53:aa:a3:0e:c0", 
                    "network_interface_id": "eni-0695e3526c1b803ff", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.12.223", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "18.141.110.124"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.12.223"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-0dc11d7821eeda12c", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1c", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-12-223.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.12.223", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-18-141-110-124.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "18.141.110.124", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Name": "M100-merchant", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-merchant*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:34,192 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:34,193 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:51
2019-12-02 09:12:34,215 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "merchant_instance_ids": [
            "i-0bee7737f8f0bb7f2"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:34,233 p=20651 u=root |  TASK [ec2.elb_application_lb : zuul capture instance facts] ******************************************************************************************************************************************************************
2019-12-02 09:12:34,233 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:55
2019-12-02 09:12:34,253 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:34,254 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:34,262 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277954.25-118252710146967 `" && echo ansible-tmp-1575277954.25-118252710146967="` echo /root/.ansible/tmp/ansible-tmp-1575277954.25-118252710146967 `" ) && sleep 0'
2019-12-02 09:12:34,274 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:34,275 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpCKhrFJ TO /root/.ansible/tmp/ansible-tmp-1575277954.25-118252710146967/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:34,276 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277954.25-118252710146967/ /root/.ansible/tmp/ansible-tmp-1575277954.25-118252710146967/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:34,284 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277954.25-118252710146967/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:35,024 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277954.25-118252710146967/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:35,046 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T15:18:01+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0667d48e918774329"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0a9fbb5c635714db8", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T15:18:00+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.77.73.12"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T15:18:00+00:00", 
                        "attachment_id": "eni-attach-0a58646ed352b963c", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0b0d63d52658d996b", 
                            "group_name": "M100-zuul-all"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:50:43:81:29:48", 
                    "network_interface_id": "eni-06614c24c3bef6e43", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.162", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.77.73.12"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.162"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-162.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.162", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-77-73-12.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.77.73.12", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0b0d63d52658d996b", 
                    "group_name": "M100-zuul-all"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-zuul", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-zuul*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:35,064 p=20651 u=root |  TASK [ec2.elb_application_lb : set facts: instance IDs] **********************************************************************************************************************************************************************
2019-12-02 09:12:35,064 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/ec2_facts.yml:64
2019-12-02 09:12:35,086 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "zuul_instance_ids": [
            "i-0a9fbb5c635714db8"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:35,105 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:35,105 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:6
2019-12-02 09:12:35,124 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:35,142 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:35,142 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:9
2019-12-02 09:12:35,163 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:35,181 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:35,181 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:12
2019-12-02 09:12:35,200 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:35,220 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:35,220 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:15
2019-12-02 09:12:35,239 p=20651 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2019-12-02 09:12:35,257 p=20651 u=root |  TASK [ec2.elb_application_lb : include_tasks] ********************************************************************************************************************************************************************************
2019-12-02 09:12:35,257 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/main.yml:18
2019-12-02 09:12:35,301 p=20651 u=root |  included: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml for localhost
2019-12-02 09:12:35,327 p=20651 u=root |  TASK [ec2.elb_application_lb : Get appgw SG ID] ******************************************************************************************************************************************************************************
2019-12-02 09:12:35,328 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:2
2019-12-02 09:12:35,347 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:35,348 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:35,356 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277955.35-258789836715958 `" && echo ansible-tmp-1575277955.35-258789836715958="` echo /root/.ansible/tmp/ansible-tmp-1575277955.35-258789836715958 `" ) && sleep 0'
2019-12-02 09:12:35,369 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2019-12-02 09:12:35,369 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpVkWs5j TO /root/.ansible/tmp/ansible-tmp-1575277955.35-258789836715958/AnsiballZ_ec2_group_facts.py
2019-12-02 09:12:35,370 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277955.35-258789836715958/ /root/.ansible/tmp/ansible-tmp-1575277955.35-258789836715958/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:35,379 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277955.35-258789836715958/AnsiballZ_ec2_group_facts.py && sleep 0'
2019-12-02 09:12:36,132 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277955.35-258789836715958/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:36,147 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M100-elb-80-443-all", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-077aa45a93c882e1f", 
            "group_name": "M100-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "607624181858", 
            "tags": {
                "Environment": "M100-elb-80-443-all", 
                "Name": "M100-elb-80-443-all"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:36,165 p=20651 u=root |  TASK [ec2.elb_application_lb : list of appgw all the security group id.] *****************************************************************************************************************************************************
2019-12-02 09:12:36,165 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:10
2019-12-02 09:12:36,197 p=20651 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M100-elb-80-443-all', u'Name': u'M100-elb-80-443-all'}, u'group_name': u'M100-elb-80-443-all', u'vpc_id': u'vpc-0d32a5f9af5d2e04f', u'group_id': u'sg-077aa45a93c882e1f', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'607624181858'}) => {
    "ansible_facts": {
        "sg_appgw_id": "sg-077aa45a93c882e1f"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-077aa45a93c882e1f", 
        "group_name": "M100-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "607624181858", 
        "tags": {
            "Environment": "M100-elb-80-443-all", 
            "Name": "M100-elb-80-443-all"
        }, 
        "vpc_id": "vpc-0d32a5f9af5d2e04f"
    }
}
2019-12-02 09:12:36,216 p=20651 u=root |  TASK [ec2.elb_application_lb : create targets] *******************************************************************************************************************************************************************************
2019-12-02 09:12:36,216 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:15
2019-12-02 09:12:36,246 p=20651 u=root |  ok: [localhost] => (item=i-0a9fbb5c635714db8) => {
    "ansible_facts": {
        "targets": [
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-0552e41cd26afe20a", 
                "Port": 8083
            }, 
            {
                "Id": "i-032969a062e87ea24", 
                "Port": 8125
            }, 
            {
                "Id": "i-08873cd4dde4bdb89", 
                "Port": 8992
            }, 
            {
                "Id": "i-0bee7737f8f0bb7f2", 
                "Port": 8991
            }, 
            {
                "Id": "i-0a9fbb5c635714db8", 
                "Port": 8800
            }, 
            {
                "Id": "i-0a9fbb5c635714db8", 
                "Port": 8800
            }
        ]
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": "i-0a9fbb5c635714db8"
}
2019-12-02 09:12:36,264 p=20651 u=root |  TASK [ec2.elb_application_lb : Create appgw target group] ********************************************************************************************************************************************************************
2019-12-02 09:12:36,265 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:20
2019-12-02 09:12:36,289 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:36,290 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:36,298 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277956.29-87272746203971 `" && echo ansible-tmp-1575277956.29-87272746203971="` echo /root/.ansible/tmp/ansible-tmp-1575277956.29-87272746203971 `" ) && sleep 0'
2019-12-02 09:12:36,310 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:12:36,310 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpnEpo07 TO /root/.ansible/tmp/ansible-tmp-1575277956.29-87272746203971/AnsiballZ_elb_target_group.py
2019-12-02 09:12:36,311 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277956.29-87272746203971/ /root/.ansible/tmp/ansible-tmp-1575277956.29-87272746203971/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:36,320 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277956.29-87272746203971/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:37,305 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277956.29-87272746203971/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:37,323 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_path": "/", 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "HTTP", 
    "health_check_timeout_seconds": 5, 
    "healthy_threshold_count": 5, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": "/actuator/info", 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-appgw02", 
            "port": 80, 
            "profile": null, 
            "protocol": "http", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": "200", 
            "tags": {
                "env": "M100-appgw02"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 8083
                }, 
                {
                    "Id": "i-032969a062e87ea24", 
                    "Port": 8125
                }, 
                {
                    "Id": "i-08873cd4dde4bdb89", 
                    "Port": 8992
                }, 
                {
                    "Id": "i-0bee7737f8f0bb7f2", 
                    "Port": 8991
                }, 
                {
                    "Id": "i-0a9fbb5c635714db8", 
                    "Port": 8800
                }, 
                {
                    "Id": "i-0a9fbb5c635714db8", 
                    "Port": 8800
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "load_balancing_algorithm_type": "round_robin", 
    "matcher": {
        "http_code": "200"
    }, 
    "port": 80, 
    "protocol": "HTTP", 
    "slow_start_duration_seconds": "0", 
    "stickiness_enabled": "false", 
    "stickiness_lb_cookie_duration_seconds": "86400", 
    "stickiness_type": "lb_cookie", 
    "tags": {
        "env": "M100-appgw02"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw02/04c05f3eafab9567", 
    "target_group_name": "M100-appgw02", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 2, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:37,340 p=20651 u=root |  TASK [ec2.elb_application_lb : Create an ELB Application Load Balancer and attach appgw listener] ****************************************************************************************************************************
2019-12-02 09:12:37,341 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_application_lb/tasks/appgw.yml:36
2019-12-02 09:12:37,365 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:37,365 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:37,373 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277957.36-280851054033713 `" && echo ansible-tmp-1575277957.36-280851054033713="` echo /root/.ansible/tmp/ansible-tmp-1575277957.36-280851054033713 `" ) && sleep 0'
2019-12-02 09:12:37,385 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_application_lb.py
2019-12-02 09:12:37,386 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpcynrfC TO /root/.ansible/tmp/ansible-tmp-1575277957.36-280851054033713/AnsiballZ_elb_application_lb.py
2019-12-02 09:12:37,387 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277957.36-280851054033713/ /root/.ansible/tmp/ansible-tmp-1575277957.36-280851054033713/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:37,395 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277957.36-280851054033713/AnsiballZ_elb_application_lb.py && sleep 0'
2019-12-02 09:12:39,482 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277957.36-280851054033713/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:39,504 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }
    ], 
    "canonical_hosted_zone_id": "Z1LMS91P8CMLE5", 
    "changed": true, 
    "created_time": "2019-12-02T09:12:38.710000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-appgw02-322020729.ap-southeast-1.elb.amazonaws.com", 
    "idle_timeout_timeout_seconds": "600", 
    "invocation": {
        "module_args": {
            "access_logs_enabled": null, 
            "access_logs_s3_bucket": null, 
            "access_logs_s3_prefix": null, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "http2": null, 
            "idle_timeout": 600, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw02/04c05f3eafab9567", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 80, 
                    "Protocol": "HTTP", 
                    "Rules": [
                        {
                            "Actions": [
                                {
                                    "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw02/04c05f3eafab9567", 
                                    "Type": "forward"
                                }
                            ], 
                            "Conditions": [
                                {
                                    "Field": "path-pattern", 
                                    "Values": [
                                        "/actuator/info"
                                    ]
                                }
                            ], 
                            "Priority": "1"
                        }
                    ], 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-appgw02", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_rules": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_groups": [
                "sg-077aa45a93c882e1f"
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-appgw02"
            }, 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw02/04c05f3eafab9567", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/app/M100-appgw02/a8c33168e4609889/21030954956caa1a", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-appgw02/a8c33168e4609889", 
            "port": 80, 
            "protocol": "HTTP", 
            "rules": [
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw02/04c05f3eafab9567", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [
                        {
                            "field": "path-pattern", 
                            "path_pattern_config": {
                                "values": [
                                    "/actuator/info"
                                ]
                            }, 
                            "values": [
                                "/actuator/info"
                            ]
                        }
                    ], 
                    "is_default": false, 
                    "priority": "1", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-appgw02/a8c33168e4609889/21030954956caa1a/46d89a5ede14a0d9"
                }, 
                {
                    "actions": [
                        {
                            "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-appgw02/04c05f3eafab9567", 
                            "type": "forward"
                        }
                    ], 
                    "conditions": [], 
                    "is_default": true, 
                    "priority": "default", 
                    "rule_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener-rule/app/M100-appgw02/a8c33168e4609889/21030954956caa1a/184dba067703017b"
                }
            ]
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/app/M100-appgw02/a8c33168e4609889", 
    "load_balancer_name": "M100-appgw02", 
    "routing_http2_enabled": "true", 
    "routing_http_drop_invalid_header_fields_enabled": "false", 
    "scheme": "internet-facing", 
    "security_groups": [
        "sg-077aa45a93c882e1f"
    ], 
    "state": {
        "code": "provisioning"
    }, 
    "tags": {
        "env": "M100-appgw02"
    }, 
    "type": "application", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:39,522 p=20651 u=root |  TASK [ec2.elb_network_lb : VPC facts] ****************************************************************************************************************************************************************************************
2019-12-02 09:12:39,522 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:12:39,545 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:39,546 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:39,554 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277959.54-112519088084119 `" && echo ansible-tmp-1575277959.54-112519088084119="` echo /root/.ansible/tmp/ansible-tmp-1575277959.54-112519088084119 `" ) && sleep 0'
2019-12-02 09:12:39,566 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:12:39,567 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpeT9hlL TO /root/.ansible/tmp/ansible-tmp-1575277959.54-112519088084119/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:12:39,568 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277959.54-112519088084119/ /root/.ansible/tmp/ansible-tmp-1575277959.54-112519088084119/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:39,576 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277959.54-112519088084119/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:12:40,541 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277959.54-112519088084119/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:40,555 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:40,573 p=20651 u=root |  TASK [ec2.elb_network_lb : set fact: VPC ID] *********************************************************************************************************************************************************************************
2019-12-02 09:12:40,573 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:12:40,597 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:12:40,618 p=20651 u=root |  TASK [ec2.elb_network_lb : VPC subnet facts] *********************************************************************************************************************************************************************************
2019-12-02 09:12:40,618 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:12:40,637 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:40,638 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:40,647 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277960.64-152162847761953 `" && echo ansible-tmp-1575277960.64-152162847761953="` echo /root/.ansible/tmp/ansible-tmp-1575277960.64-152162847761953 `" ) && sleep 0'
2019-12-02 09:12:40,659 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:12:40,660 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpB7xQEq TO /root/.ansible/tmp/ansible-tmp-1575277960.64-152162847761953/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:12:40,661 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277960.64-152162847761953/ /root/.ansible/tmp/ansible-tmp-1575277960.64-152162847761953/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:40,670 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277960.64-152162847761953/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:12:41,518 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277960.64-152162847761953/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:41,535 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 233, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 236, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 232, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:12:41,600 p=20651 u=root |  TASK [ec2.elb_network_lb : register just the IDs for each of the groups] *****************************************************************************************************************************************************
2019-12-02 09:12:41,600 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:12:41,622 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:41,640 p=20651 u=root |  TASK [ec2.elb_network_lb : capture instance facts] ***************************************************************************************************************************************************************************
2019-12-02 09:12:41,640 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/ec2_facts.yml:3
2019-12-02 09:12:41,662 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:41,662 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:41,672 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277961.66-4954970909408 `" && echo ansible-tmp-1575277961.66-4954970909408="` echo /root/.ansible/tmp/ansible-tmp-1575277961.66-4954970909408 `" ) && sleep 0'
2019-12-02 09:12:41,685 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:12:41,685 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmptn_W6D TO /root/.ansible/tmp/ansible-tmp-1575277961.66-4954970909408/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:12:41,686 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277961.66-4954970909408/ /root/.ansible/tmp/ansible-tmp-1575277961.66-4954970909408/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:41,695 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277961.66-4954970909408/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:12:42,473 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277961.66-4954970909408/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:42,494 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:12:42,512 p=20651 u=root |  TASK [ec2.elb_network_lb : set facts: instance IDs] **************************************************************************************************************************************************************************
2019-12-02 09:12:42,512 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/ec2_facts.yml:12
2019-12-02 09:12:42,535 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:12:42,554 p=20651 u=root |  TASK [ec2.elb_network_lb : Create MQ-1883 target group] **********************************************************************************************************************************************************************
2019-12-02 09:12:42,554 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/emqtt-network-elb.yml:2
2019-12-02 09:12:42,576 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:42,576 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:42,585 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277962.58-228259125669810 `" && echo ansible-tmp-1575277962.58-228259125669810="` echo /root/.ansible/tmp/ansible-tmp-1575277962.58-228259125669810 `" ) && sleep 0'
2019-12-02 09:12:42,598 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:12:42,598 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp8FDnJC TO /root/.ansible/tmp/ansible-tmp-1575277962.58-228259125669810/AnsiballZ_elb_target_group.py
2019-12-02 09:12:42,599 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277962.58-228259125669810/ /root/.ansible/tmp/ansible-tmp-1575277962.58-228259125669810/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:42,608 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277962.58-228259125669810/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:12:43,551 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277962.58-228259125669810/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:12:43,568 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "TCP", 
    "health_check_timeout_seconds": 10, 
    "healthy_threshold_count": 3, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": null, 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-MQ-1883-01", 
            "port": 1883, 
            "profile": null, 
            "protocol": "tcp", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": null, 
            "tags": {
                "env": "M100-MQ-1883-01"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 1883
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "port": 1883, 
    "protocol": "TCP", 
    "proxy_protocol_v2_enabled": "false", 
    "tags": {
        "env": "M100-MQ-1883-01"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-MQ-1883-01/52778235bf5ba4e3", 
    "target_group_name": "M100-MQ-1883-01", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 3, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:12:43,586 p=20651 u=root |  TASK [ec2.elb_network_lb : Create MQ Network Load Balancer] ******************************************************************************************************************************************************************
2019-12-02 09:12:43,586 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/emqtt-network-elb.yml:34
2019-12-02 09:12:43,612 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:12:43,612 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:12:43,621 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575277963.61-169912452721225 `" && echo ansible-tmp-1575277963.61-169912452721225="` echo /root/.ansible/tmp/ansible-tmp-1575277963.61-169912452721225 `" ) && sleep 0'
2019-12-02 09:12:43,836 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_network_lb.py
2019-12-02 09:12:43,836 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp_QBYBh TO /root/.ansible/tmp/ansible-tmp-1575277963.61-169912452721225/AnsiballZ_elb_network_lb.py
2019-12-02 09:12:43,837 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575277963.61-169912452721225/ /root/.ansible/tmp/ansible-tmp-1575277963.61-169912452721225/AnsiballZ_elb_network_lb.py && sleep 0'
2019-12-02 09:12:43,847 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575277963.61-169912452721225/AnsiballZ_elb_network_lb.py && sleep 0'
2019-12-02 09:15:00,592 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575277963.61-169912452721225/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:15:00,607 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }
    ], 
    "canonical_hosted_zone_id": "ZKVM4W9LS7TM", 
    "changed": true, 
    "created_time": "2019-12-02T09:12:44.838000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-EMQTT-01-97df321285bef713.elb.ap-southeast-1.amazonaws.com", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "cross_zone_load_balancing": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-MQ-1883-01/52778235bf5ba4e3", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 1883, 
                    "Protocol": "TCP", 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-EMQTT-01", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_token": null, 
            "state": "present", 
            "subnet_mappings": null, 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-MQ-1883-01"
            }, 
            "validate_certs": true, 
            "wait": true, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-MQ-1883-01/52778235bf5ba4e3", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/net/M100-EMQTT-01/97df321285bef713/6bd288dd8840111c", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/net/M100-EMQTT-01/97df321285bef713", 
            "port": 1883, 
            "protocol": "TCP"
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/net/M100-EMQTT-01/97df321285bef713", 
    "load_balancer_name": "M100-EMQTT-01", 
    "load_balancing_cross_zone_enabled": "false", 
    "scheme": "internet-facing", 
    "state": {
        "code": "active"
    }, 
    "tags": {
        "env": "M100-MQ-1883-01"
    }, 
    "type": "network", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:15:00,625 p=20651 u=root |  TASK [ec2.elb_network_lb : VPC facts] ****************************************************************************************************************************************************************************************
2019-12-02 09:15:00,626 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:3
2019-12-02 09:15:00,645 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:15:00,645 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:15:00,654 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575278100.64-238572024752249 `" && echo ansible-tmp-1575278100.64-238572024752249="` echo /root/.ansible/tmp/ansible-tmp-1575278100.64-238572024752249 `" ) && sleep 0'
2019-12-02 09:15:00,667 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2019-12-02 09:15:00,668 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp24nr9E TO /root/.ansible/tmp/ansible-tmp-1575278100.64-238572024752249/AnsiballZ_ec2_vpc_net_facts.py
2019-12-02 09:15:00,669 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575278100.64-238572024752249/ /root/.ansible/tmp/ansible-tmp-1575278100.64-238572024752249/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:15:00,678 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575278100.64-238572024752249/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2019-12-02 09:15:01,637 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575278100.64-238572024752249/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:15:01,652 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M100"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.100.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0e916b6cfafbdb3c4", 
                    "cidr_block": "10.100.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-6a07350d", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0d32a5f9af5d2e04f", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:15:01,671 p=20651 u=root |  TASK [ec2.elb_network_lb : set fact: VPC ID] *********************************************************************************************************************************************************************************
2019-12-02 09:15:01,671 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:10
2019-12-02 09:15:01,693 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "elb_vpc_id": "vpc-0d32a5f9af5d2e04f"
    }, 
    "changed": false
}
2019-12-02 09:15:01,711 p=20651 u=root |  TASK [ec2.elb_network_lb : VPC subnet facts] *********************************************************************************************************************************************************************************
2019-12-02 09:15:01,712 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:15
2019-12-02 09:15:01,731 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:15:01,731 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:15:01,740 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575278101.73-216893972630740 `" && echo ansible-tmp-1575278101.73-216893972630740="` echo /root/.ansible/tmp/ansible-tmp-1575278101.73-216893972630740 `" ) && sleep 0'
2019-12-02 09:15:01,753 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2019-12-02 09:15:01,754 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpGhXKl5 TO /root/.ansible/tmp/ansible-tmp-1575278101.73-216893972630740/AnsiballZ_ec2_vpc_subnet_facts.py
2019-12-02 09:15:01,755 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575278101.73-216893972630740/ /root/.ansible/tmp/ansible-tmp-1575278101.73-216893972630740/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:15:01,764 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575278101.73-216893972630740/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2019-12-02 09:15:02,506 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575278101.73-216893972630740/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:15:02,523 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 231, 
            "cidr_block": "10.100.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0c9066766b02a3c8a", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0c9066766b02a3c8a", 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 233, 
            "cidr_block": "10.100.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0dc11d7821eeda12c", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-0dc11d7821eeda12c", 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 230, 
            "cidr_block": "10.100.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-04e4e500b3c89f6df", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "607624181858", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:607624181858:subnet/subnet-04e4e500b3c89f6df", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Environment": "M100", 
                "Name": "M100_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ]
}
2019-12-02 09:15:02,541 p=20651 u=root |  TASK [ec2.elb_network_lb : register just the IDs for each of the groups] *****************************************************************************************************************************************************
2019-12-02 09:15:02,541 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/vpc_subnet_facts.yml:22
2019-12-02 09:15:02,563 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-04e4e500b3c89f6df", 
            "subnet-0c9066766b02a3c8a", 
            "subnet-0dc11d7821eeda12c"
        ]
    }, 
    "changed": false
}
2019-12-02 09:15:02,581 p=20651 u=root |  TASK [ec2.elb_network_lb : capture instance facts] ***************************************************************************************************************************************************************************
2019-12-02 09:15:02,581 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/ec2_facts.yml:3
2019-12-02 09:15:02,602 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:15:02,602 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:15:02,611 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575278102.6-132742125994306 `" && echo ansible-tmp-1575278102.6-132742125994306="` echo /root/.ansible/tmp/ansible-tmp-1575278102.6-132742125994306 `" ) && sleep 0'
2019-12-02 09:15:02,625 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_instance_facts.py
2019-12-02 09:15:02,626 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpQYeosV TO /root/.ansible/tmp/ansible-tmp-1575278102.6-132742125994306/AnsiballZ_ec2_instance_facts.py
2019-12-02 09:15:02,627 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575278102.6-132742125994306/ /root/.ansible/tmp/ansible-tmp-1575278102.6-132742125994306/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:15:02,636 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575278102.6-132742125994306/AnsiballZ_ec2_instance_facts.py && sleep 0'
2019-12-02 09:15:03,484 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575278102.6-132742125994306/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:15:03,506 p=20651 u=root |  ok: [localhost] => {
    "changed": false, 
    "instances": [
        {
            "ami_launch_index": 0, 
            "architecture": "x86_64", 
            "block_device_mappings": [
                {
                    "device_name": "/dev/sda1", 
                    "ebs": {
                        "attach_time": "2019-12-01T13:24:59+00:00", 
                        "delete_on_termination": false, 
                        "status": "attached", 
                        "volume_id": "vol-0e29b2102f679db8d"
                    }
                }
            ], 
            "capacity_reservation_specification": {
                "capacity_reservation_preference": "open"
            }, 
            "client_token": "", 
            "cpu_options": {
                "core_count": 1, 
                "threads_per_core": 1
            }, 
            "ebs_optimized": false, 
            "ena_support": true, 
            "hibernation_options": {
                "configured": false
            }, 
            "hypervisor": "xen", 
            "image_id": "ami-06daab519b29cfef0", 
            "instance_id": "i-0552e41cd26afe20a", 
            "instance_type": "t2.micro", 
            "key_name": "m100-ssh", 
            "launch_time": "2019-12-01T13:24:58+00:00", 
            "monitoring": {
                "state": "enabled"
            }, 
            "network_interfaces": [
                {
                    "association": {
                        "ip_owner_id": "607624181858", 
                        "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                        "public_ip": "52.221.133.10"
                    }, 
                    "attachment": {
                        "attach_time": "2019-12-01T13:24:58+00:00", 
                        "attachment_id": "eni-attach-0968c8eb081a01231", 
                        "delete_on_termination": true, 
                        "device_index": 0, 
                        "status": "attached"
                    }, 
                    "description": "", 
                    "groups": [
                        {
                            "group_id": "sg-030d9da95bf063699", 
                            "group_name": "M100-ssh"
                        }, 
                        {
                            "group_id": "sg-0ab15df69faaf9346", 
                            "group_name": "M100-emqtt"
                        }, 
                        {
                            "group_id": "sg-050c75180f5084f76", 
                            "group_name": "M100-all"
                        }
                    ], 
                    "interface_type": "interface", 
                    "ipv6_addresses": [], 
                    "mac_address": "06:d6:21:10:65:4e", 
                    "network_interface_id": "eni-0865c9b421f0b07b1", 
                    "owner_id": "607624181858", 
                    "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                    "private_ip_address": "10.100.10.107", 
                    "private_ip_addresses": [
                        {
                            "association": {
                                "ip_owner_id": "607624181858", 
                                "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
                                "public_ip": "52.221.133.10"
                            }, 
                            "primary": true, 
                            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
                            "private_ip_address": "10.100.10.107"
                        }
                    ], 
                    "source_dest_check": true, 
                    "status": "in-use", 
                    "subnet_id": "subnet-04e4e500b3c89f6df", 
                    "vpc_id": "vpc-0d32a5f9af5d2e04f"
                }
            ], 
            "placement": {
                "availability_zone": "ap-southeast-1a", 
                "group_name": "", 
                "tenancy": "default"
            }, 
            "private_dns_name": "ip-10-100-10-107.ap-southeast-1.compute.internal", 
            "private_ip_address": "10.100.10.107", 
            "product_codes": [
                {
                    "product_code_id": "aw0evgkw8e5c1q413zgy5pjce", 
                    "product_code_type": "marketplace"
                }
            ], 
            "public_dns_name": "ec2-52-221-133-10.ap-southeast-1.compute.amazonaws.com", 
            "public_ip_address": "52.221.133.10", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "security_groups": [
                {
                    "group_id": "sg-030d9da95bf063699", 
                    "group_name": "M100-ssh"
                }, 
                {
                    "group_id": "sg-0ab15df69faaf9346", 
                    "group_name": "M100-emqtt"
                }, 
                {
                    "group_id": "sg-050c75180f5084f76", 
                    "group_name": "M100-all"
                }
            ], 
            "source_dest_check": true, 
            "state": {
                "code": 16, 
                "name": "running"
            }, 
            "state_transition_reason": "", 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "tags": {
                "Name": "M100-emqtt3.2", 
                "env": "M100"
            }, 
            "virtualization_type": "hvm", 
            "vpc_id": "vpc-0d32a5f9af5d2e04f"
        }
    ], 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "instance-state-name": [
                    "running"
                ], 
                "tag:Name": "M100-emqtt*", 
                "vpc-id": "vpc-0d32a5f9af5d2e04f"
            }, 
            "instance_ids": [], 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }
}
2019-12-02 09:15:03,524 p=20651 u=root |  TASK [ec2.elb_network_lb : set facts: instance IDs] **************************************************************************************************************************************************************************
2019-12-02 09:15:03,524 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/ec2_facts.yml:12
2019-12-02 09:15:03,545 p=20651 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "emqtt_instance_ids": [
            "i-0552e41cd26afe20a"
        ]
    }, 
    "changed": false
}
2019-12-02 09:15:03,564 p=20651 u=root |  TASK [ec2.elb_network_lb : Create MQ-1883 target group] **********************************************************************************************************************************************************************
2019-12-02 09:15:03,564 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/emqtt-network-elb.yml:2
2019-12-02 09:15:03,586 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:15:03,586 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:15:03,595 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575278103.59-28676804748025 `" && echo ansible-tmp-1575278103.59-28676804748025="` echo /root/.ansible/tmp/ansible-tmp-1575278103.59-28676804748025 `" ) && sleep 0'
2019-12-02 09:15:03,607 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_target_group.py
2019-12-02 09:15:03,608 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmpOaf4Vd TO /root/.ansible/tmp/ansible-tmp-1575278103.59-28676804748025/AnsiballZ_elb_target_group.py
2019-12-02 09:15:03,609 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575278103.59-28676804748025/ /root/.ansible/tmp/ansible-tmp-1575278103.59-28676804748025/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:15:03,618 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575278103.59-28676804748025/AnsiballZ_elb_target_group.py && sleep 0'
2019-12-02 09:15:04,521 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575278103.59-28676804748025/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:15:04,538 p=20651 u=root |  changed: [localhost] => {
    "changed": true, 
    "deregistration_delay_timeout_seconds": "300", 
    "health_check_enabled": true, 
    "health_check_interval_seconds": 30, 
    "health_check_port": "traffic-port", 
    "health_check_protocol": "TCP", 
    "health_check_timeout_seconds": 10, 
    "healthy_threshold_count": 3, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "deregistration_delay_timeout": null, 
            "ec2_url": null, 
            "health_check_interval": null, 
            "health_check_path": null, 
            "health_check_port": null, 
            "health_check_protocol": null, 
            "health_check_timeout": null, 
            "healthy_threshold_count": null, 
            "modify_targets": true, 
            "name": "M100-MQ-1883-02", 
            "port": 1883, 
            "profile": null, 
            "protocol": "tcp", 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "stickiness_enabled": null, 
            "stickiness_lb_cookie_duration": null, 
            "stickiness_type": "lb_cookie", 
            "successful_response_codes": null, 
            "tags": {
                "env": "M100-MQ-1883-02"
            }, 
            "target_type": "instance", 
            "targets": [
                {
                    "Id": "i-0552e41cd26afe20a", 
                    "Port": 1883
                }
            ], 
            "unhealthy_threshold_count": null, 
            "validate_certs": true, 
            "vpc_id": "vpc-0d32a5f9af5d2e04f", 
            "wait": false, 
            "wait_timeout": 200
        }
    }, 
    "load_balancer_arns": [], 
    "port": 1883, 
    "protocol": "TCP", 
    "proxy_protocol_v2_enabled": "false", 
    "tags": {
        "env": "M100-MQ-1883-02"
    }, 
    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-MQ-1883-02/8d80eeff0f647602", 
    "target_group_name": "M100-MQ-1883-02", 
    "target_type": "instance", 
    "unhealthy_threshold_count": 3, 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:15:04,556 p=20651 u=root |  TASK [ec2.elb_network_lb : Create MQ Network Load Balancer] ******************************************************************************************************************************************************************
2019-12-02 09:15:04,556 p=20651 u=root |  task path: /home/centos/new-project/elb/roles/ec2.elb_network_lb/tasks/emqtt-network-elb.yml:34
2019-12-02 09:15:04,581 p=20651 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2019-12-02 09:15:04,581 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2019-12-02 09:15:04,590 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1575278104.58-159640036172118 `" && echo ansible-tmp-1575278104.58-159640036172118="` echo /root/.ansible/tmp/ansible-tmp-1575278104.58-159640036172118 `" ) && sleep 0'
2019-12-02 09:15:04,602 p=20651 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/elb_network_lb.py
2019-12-02 09:15:04,603 p=20651 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20651OCqGB2/tmp3jhbPF TO /root/.ansible/tmp/ansible-tmp-1575278104.58-159640036172118/AnsiballZ_elb_network_lb.py
2019-12-02 09:15:04,604 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1575278104.58-159640036172118/ /root/.ansible/tmp/ansible-tmp-1575278104.58-159640036172118/AnsiballZ_elb_network_lb.py && sleep 0'
2019-12-02 09:15:04,613 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1575278104.58-159640036172118/AnsiballZ_elb_network_lb.py && sleep 0'
2019-12-02 09:17:21,396 p=20651 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1575278104.58-159640036172118/ > /dev/null 2>&1 && sleep 0'
2019-12-02 09:17:21,411 p=20651 u=root |  changed: [localhost] => {
    "access_logs_s3_bucket": "", 
    "access_logs_s3_enabled": "false", 
    "access_logs_s3_prefix": "", 
    "availability_zones": [
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0dc11d7821eeda12c", 
            "zone_name": "ap-southeast-1c"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-0c9066766b02a3c8a", 
            "zone_name": "ap-southeast-1b"
        }, 
        {
            "load_balancer_addresses": [], 
            "subnet_id": "subnet-04e4e500b3c89f6df", 
            "zone_name": "ap-southeast-1a"
        }
    ], 
    "canonical_hosted_zone_id": "ZKVM4W9LS7TM", 
    "changed": true, 
    "created_time": "2019-12-02T09:15:05.621000+00:00", 
    "deletion_protection_enabled": "true", 
    "dns_name": "M100-EMQTT-02-d20b5754dafdbd32.elb.ap-southeast-1.amazonaws.com", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "cross_zone_load_balancing": null, 
            "debug_botocore_endpoint_logs": false, 
            "deletion_protection": true, 
            "ec2_url": null, 
            "listeners": [
                {
                    "Certificates": null, 
                    "DefaultActions": [
                        {
                            "TargetGroupArn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-MQ-1883-02/8d80eeff0f647602", 
                            "Type": "forward"
                        }
                    ], 
                    "Port": 1883, 
                    "Protocol": "TCP", 
                    "SslPolicy": null
                }
            ], 
            "name": "M100-EMQTT-02", 
            "profile": null, 
            "purge_listeners": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "scheme": "internet-facing", 
            "security_token": null, 
            "state": "present", 
            "subnet_mappings": null, 
            "subnets": [
                "subnet-04e4e500b3c89f6df", 
                "subnet-0c9066766b02a3c8a", 
                "subnet-0dc11d7821eeda12c"
            ], 
            "tags": {
                "env": "M100-MQ-1883-02"
            }, 
            "validate_certs": true, 
            "wait": true, 
            "wait_timeout": null
        }
    }, 
    "ip_address_type": "ipv4", 
    "listeners": [
        {
            "default_actions": [
                {
                    "target_group_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:targetgroup/M100-MQ-1883-02/8d80eeff0f647602", 
                    "type": "forward"
                }
            ], 
            "listener_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:listener/net/M100-EMQTT-02/d20b5754dafdbd32/d2238f2698381df5", 
            "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/net/M100-EMQTT-02/d20b5754dafdbd32", 
            "port": 1883, 
            "protocol": "TCP"
        }
    ], 
    "load_balancer_arn": "arn:aws:elasticloadbalancing:ap-southeast-1:607624181858:loadbalancer/net/M100-EMQTT-02/d20b5754dafdbd32", 
    "load_balancer_name": "M100-EMQTT-02", 
    "load_balancing_cross_zone_enabled": "false", 
    "scheme": "internet-facing", 
    "state": {
        "code": "active"
    }, 
    "tags": {
        "env": "M100-MQ-1883-02"
    }, 
    "type": "network", 
    "vpc_id": "vpc-0d32a5f9af5d2e04f"
}
2019-12-02 09:17:21,412 p=20651 u=root |  META: ran handlers
2019-12-02 09:17:21,412 p=20651 u=root |  META: ran handlers
2019-12-02 09:17:21,414 p=20651 u=root |  PLAY RECAP *******************************************************************************************************************************************************************************************************************
2019-12-02 09:17:21,414 p=20651 u=root |  localhost                  : ok=171  changed=18   unreachable=0    failed=0    skipped=28   rescued=0    ignored=0   
