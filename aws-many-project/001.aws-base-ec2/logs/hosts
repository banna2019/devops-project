
2020-01-08 20:09:34,792 p=10450 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-08 20:09:34,792 p=10450 u=root |  Using /home/centos/aws-project/001.aws-base-ec2/ansible.cfg as config file
2020-01-08 20:09:34,800 p=10450 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-08 20:09:34,800 p=10450 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-08 20:09:34,800 p=10450 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-08 20:09:34,804 p=10450 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-08 20:09:34,806 p=10450 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-08 20:09:35,039 p=10450 u=root |   [WARNING]: While constructing a mapping from /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/defaults/main.yml, line 3, column 1, found a
duplicate dict key (security_merchant). Using last defined value only.

2020-01-08 20:09:35,048 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml
2020-01-08 20:09:35,194 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml
2020-01-08 20:09:35,203 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/merchant-sg.yml
2020-01-08 20:09:35,208 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/backend-acl-sg.yml
2020-01-08 20:09:35,216 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml
2020-01-08 20:09:35,221 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml
2020-01-08 20:09:35,231 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/merchant-sg.yml
2020-01-08 20:09:35,234 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/backend-acl-sg.yml
2020-01-08 20:09:35,242 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml
2020-01-08 20:09:35,248 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml
2020-01-08 20:09:35,256 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/merchant-sg.yml
2020-01-08 20:09:35,260 p=10450 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/backend-acl-sg.yml
2020-01-08 20:09:35,321 p=10450 u=root |  PLAYBOOK: 03-01.bianyuan.yml *******************************************************************************************************************************
2020-01-08 20:09:35,321 p=10450 u=root |  1 plays in 03-01.bianyuan.yml
2020-01-08 20:09:35,350 p=10450 u=root |  PLAY [Create ec2 instance] *********************************************************************************************************************************
2020-01-08 20:09:35,383 p=10450 u=root |  TASK [Gathering Facts] *************************************************************************************************************************************
2020-01-08 20:09:35,383 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/03-01.bianyuan.yml:2
2020-01-08 20:09:35,394 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:35,394 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:35,402 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485375.39-106638271270793 `" && echo ansible-tmp-1578485375.39-106638271270793="` echo /root/.ansible/tmp/ansible-tmp-1578485375.39-106638271270793 `" ) && sleep 0'
2020-01-08 20:09:35,787 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-08 20:09:35,787 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpCbcXu9 TO /root/.ansible/tmp/ansible-tmp-1578485375.39-106638271270793/AnsiballZ_setup.py
2020-01-08 20:09:35,788 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485375.39-106638271270793/ /root/.ansible/tmp/ansible-tmp-1578485375.39-106638271270793/AnsiballZ_setup.py && sleep 0'
2020-01-08 20:09:35,797 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485375.39-106638271270793/AnsiballZ_setup.py && sleep 0'
2020-01-08 20:09:36,358 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485375.39-106638271270793/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:36,428 p=10450 u=root |  ok: [localhost]
2020-01-08 20:09:36,429 p=10450 u=root |  META: ran handlers
2020-01-08 20:09:36,471 p=10450 u=root |  TASK [ec2_dege : VPC facts] ********************************************************************************************************************************
2020-01-08 20:09:36,471 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:3
2020-01-08 20:09:36,486 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:36,487 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:36,495 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485376.49-145864087948096 `" && echo ansible-tmp-1578485376.49-145864087948096="` echo /root/.ansible/tmp/ansible-tmp-1578485376.49-145864087948096 `" ) && sleep 0'
2020-01-08 20:09:36,726 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-08 20:09:36,727 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpOV95qV TO /root/.ansible/tmp/ansible-tmp-1578485376.49-145864087948096/AnsiballZ_ec2_vpc_net_facts.py
2020-01-08 20:09:36,727 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485376.49-145864087948096/ /root/.ansible/tmp/ansible-tmp-1578485376.49-145864087948096/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:09:36,736 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485376.49-145864087948096/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:09:37,587 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485376.49-145864087948096/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:37,601 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M120"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.120.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0171dc4355afb2d57", 
                    "cidr_block": "10.120.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f1e92296", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-025e5ea3271f91941", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:09:37,641 p=10450 u=root |  TASK [ec2_dege : set fact: VPC ID] *************************************************************************************************************************
2020-01-08 20:09:37,641 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:10
2020-01-08 20:09:37,659 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-025e5ea3271f91941"
    }, 
    "changed": false
}
2020-01-08 20:09:37,698 p=10450 u=root |  TASK [ec2_dege : VPC subnet facts] *************************************************************************************************************************
2020-01-08 20:09:37,699 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:15
2020-01-08 20:09:37,715 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:37,715 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:37,724 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485377.71-263069304384119 `" && echo ansible-tmp-1578485377.71-263069304384119="` echo /root/.ansible/tmp/ansible-tmp-1578485377.71-263069304384119 `" ) && sleep 0'
2020-01-08 20:09:37,958 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-08 20:09:37,958 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmp5zMFy2 TO /root/.ansible/tmp/ansible-tmp-1578485377.71-263069304384119/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-08 20:09:37,959 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485377.71-263069304384119/ /root/.ansible/tmp/ansible-tmp-1578485377.71-263069304384119/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:09:37,968 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485377.71-263069304384119/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:09:38,670 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485377.71-263069304384119/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:38,687 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-025e5ea3271f91941"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 229, 
            "cidr_block": "10.120.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a44bb4344c1a9e38", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-0a44bb4344c1a9e38", 
            "subnet_id": "subnet-0a44bb4344c1a9e38", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 231, 
            "cidr_block": "10.120.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-088c7b9e0c3425f92", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-088c7b9e0c3425f92", 
            "subnet_id": "subnet-088c7b9e0c3425f92", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 228, 
            "cidr_block": "10.120.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-05f2241d9964e4798", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-05f2241d9964e4798", 
            "subnet_id": "subnet-05f2241d9964e4798", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:09:38,726 p=10450 u=root |  TASK [ec2_dege : register just the IDs for each of the groups] *********************************************************************************************
2020-01-08 20:09:38,726 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:22
2020-01-08 20:09:38,744 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-05f2241d9964e4798", 
            "subnet-088c7b9e0c3425f92", 
            "subnet-0a44bb4344c1a9e38"
        ]
    }, 
    "changed": false
}
2020-01-08 20:09:38,784 p=10450 u=root |  TASK [ec2_dege : Create a new EC2 key] *********************************************************************************************************************
2020-01-08 20:09:38,784 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:2
2020-01-08 20:09:38,801 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:38,801 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:38,809 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485378.8-87992161404601 `" && echo ansible-tmp-1578485378.8-87992161404601="` echo /root/.ansible/tmp/ansible-tmp-1578485378.8-87992161404601 `" ) && sleep 0'
2020-01-08 20:09:39,044 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-08 20:09:39,044 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpkx7q6r TO /root/.ansible/tmp/ansible-tmp-1578485378.8-87992161404601/AnsiballZ_ec2_key.py
2020-01-08 20:09:39,045 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485378.8-87992161404601/ /root/.ansible/tmp/ansible-tmp-1578485378.8-87992161404601/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:09:39,054 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485378.8-87992161404601/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:09:39,693 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485378.8-87992161404601/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:39,706 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "hk-Production-ssh", 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "38:84:37:c8:39:3a:31:b7:e5:2a:30:c1:26:8c:fe:ea:03:e8:41:92", 
        "name": "hk-Production-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-08 20:09:39,745 p=10450 u=root |  TASK [ec2_dege : Check directory exists or not.] ***********************************************************************************************************
2020-01-08 20:09:39,745 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:8
2020-01-08 20:09:39,760 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:39,761 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:39,769 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485379.76-220380657125592 `" && echo ansible-tmp-1578485379.76-220380657125592="` echo /root/.ansible/tmp/ansible-tmp-1578485379.76-220380657125592 `" ) && sleep 0'
2020-01-08 20:09:39,982 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:09:39,982 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpvpG5Ha TO /root/.ansible/tmp/ansible-tmp-1578485379.76-220380657125592/AnsiballZ_stat.py
2020-01-08 20:09:39,983 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485379.76-220380657125592/ /root/.ansible/tmp/ansible-tmp-1578485379.76-220380657125592/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:39,992 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485379.76-220380657125592/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:40,096 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485379.76-220380657125592/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:40,111 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578365002.1148942, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484375.395159, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578484375.395159, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 63, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:09:40,151 p=10450 u=root |  TASK [ec2_dege : Make private key Dir] *********************************************************************************************************************
2020-01-08 20:09:40,151 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:12
2020-01-08 20:09:40,167 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:09:40,207 p=10450 u=root |  TASK [ec2_dege : Save private key] *************************************************************************************************************************
2020-01-08 20:09:40,207 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:16
2020-01-08 20:09:40,224 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:09:40,263 p=10450 u=root |  TASK [ec2_dege : Check directory  inventory exists or not.] ************************************************************************************************
2020-01-08 20:09:40,263 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:20
2020-01-08 20:09:40,278 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:40,279 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:40,287 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485380.28-83134311685710 `" && echo ansible-tmp-1578485380.28-83134311685710="` echo /root/.ansible/tmp/ansible-tmp-1578485380.28-83134311685710 `" ) && sleep 0'
2020-01-08 20:09:40,298 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:09:40,298 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpv5DL0_ TO /root/.ansible/tmp/ansible-tmp-1578485380.28-83134311685710/AnsiballZ_stat.py
2020-01-08 20:09:40,299 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485380.28-83134311685710/ /root/.ansible/tmp/ansible-tmp-1578485380.28-83134311685710/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:40,307 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485380.28-83134311685710/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:40,408 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485380.28-83134311685710/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:40,423 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578484712.476196, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484731.6280844, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578484731.6280844, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 44, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:09:40,463 p=10450 u=root |  TASK [ec2_dege : Make private key Dir] *********************************************************************************************************************
2020-01-08 20:09:40,463 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:24
2020-01-08 20:09:40,479 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:09:40,519 p=10450 u=root |  TASK [ec2_dege : Check File exists or not] *****************************************************************************************************************
2020-01-08 20:09:40,520 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:28
2020-01-08 20:09:40,535 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:40,535 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:40,544 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485380.53-176273443728380 `" && echo ansible-tmp-1578485380.53-176273443728380="` echo /root/.ansible/tmp/ansible-tmp-1578485380.53-176273443728380 `" ) && sleep 0'
2020-01-08 20:09:40,554 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:09:40,555 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpQP1z2m TO /root/.ansible/tmp/ansible-tmp-1578485380.53-176273443728380/AnsiballZ_stat.py
2020-01-08 20:09:40,555 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485380.53-176273443728380/ /root/.ansible/tmp/ansible-tmp-1578485380.53-176273443728380/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:40,563 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485380.53-176273443728380/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:40,656 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485380.53-176273443728380/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:40,670 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "exists": false
    }
}
2020-01-08 20:09:40,710 p=10450 u=root |  TASK [ec2_dege : Create file if does not exist] ************************************************************************************************************
2020-01-08 20:09:40,710 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:32
2020-01-08 20:09:40,728 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:40,728 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:40,737 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485380.73-9510695519504 `" && echo ansible-tmp-1578485380.73-9510695519504="` echo /root/.ansible/tmp/ansible-tmp-1578485380.73-9510695519504 `" ) && sleep 0'
2020-01-08 20:09:40,963 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2020-01-08 20:09:40,963 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpYB6UH4 TO /root/.ansible/tmp/ansible-tmp-1578485380.73-9510695519504/AnsiballZ_file.py
2020-01-08 20:09:40,964 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485380.73-9510695519504/ /root/.ansible/tmp/ansible-tmp-1578485380.73-9510695519504/AnsiballZ_file.py && sleep 0'
2020-01-08 20:09:40,973 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485380.73-9510695519504/AnsiballZ_file.py && sleep 0'
2020-01-08 20:09:41,074 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485380.73-9510695519504/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:41,087 p=10450 u=root |  changed: [localhost] => {
    "changed": true, 
    "dest": "/home/centos/aws-project/.inventory/hk_hosts", 
    "diff": {
        "after": {
            "atime": 1578485381.065002, 
            "mode": "0755", 
            "mtime": 1578485381.065002, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts", 
            "state": "touch"
        }, 
        "before": {
            "atime": 1578485381.0633023, 
            "mode": "0644", 
            "mtime": 1578485381.0633023, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts", 
            "state": "absent"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "_diff_peek": null, 
            "_original_basename": null, 
            "access_time": null, 
            "access_time_format": "%Y%m%d%H%M.%S", 
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "directory_mode": null, 
            "follow": true, 
            "force": false, 
            "group": "root", 
            "mode": "0755", 
            "modification_time": null, 
            "modification_time_format": "%Y%m%d%H%M.%S", 
            "owner": "root", 
            "path": "/home/centos/aws-project/.inventory/hk_hosts", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "touch", 
            "unsafe_writes": null
        }
    }, 
    "mode": "0755", 
    "owner": "root", 
    "size": 0, 
    "state": "file", 
    "uid": 0
}
2020-01-08 20:09:41,127 p=10450 u=root |  TASK [ec2_dege : Check instances File exists or not] *******************************************************************************************************
2020-01-08 20:09:41,127 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:36
2020-01-08 20:09:41,143 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:41,143 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:41,152 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485381.14-159376914603176 `" && echo ansible-tmp-1578485381.14-159376914603176="` echo /root/.ansible/tmp/ansible-tmp-1578485381.14-159376914603176 `" ) && sleep 0'
2020-01-08 20:09:41,164 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:09:41,164 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpdVl0nh TO /root/.ansible/tmp/ansible-tmp-1578485381.14-159376914603176/AnsiballZ_stat.py
2020-01-08 20:09:41,165 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485381.14-159376914603176/ /root/.ansible/tmp/ansible-tmp-1578485381.14-159376914603176/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:41,173 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485381.14-159376914603176/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:09:41,266 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485381.14-159376914603176/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:41,279 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "exists": false
    }
}
2020-01-08 20:09:41,318 p=10450 u=root |  TASK [ec2_dege : Create instances file if does not exist] **************************************************************************************************
2020-01-08 20:09:41,318 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:40
2020-01-08 20:09:41,337 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:41,337 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:41,346 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485381.34-144173586397947 `" && echo ansible-tmp-1578485381.34-144173586397947="` echo /root/.ansible/tmp/ansible-tmp-1578485381.34-144173586397947 `" ) && sleep 0'
2020-01-08 20:09:41,357 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2020-01-08 20:09:41,357 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpVQT_Hi TO /root/.ansible/tmp/ansible-tmp-1578485381.34-144173586397947/AnsiballZ_file.py
2020-01-08 20:09:41,358 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485381.34-144173586397947/ /root/.ansible/tmp/ansible-tmp-1578485381.34-144173586397947/AnsiballZ_file.py && sleep 0'
2020-01-08 20:09:41,367 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485381.34-144173586397947/AnsiballZ_file.py && sleep 0'
2020-01-08 20:09:41,467 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485381.34-144173586397947/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:41,480 p=10450 u=root |  changed: [localhost] => {
    "changed": true, 
    "dest": "/home/centos/aws-project/.inventory/hk_instances", 
    "diff": {
        "after": {
            "atime": 1578485381.457796, 
            "mode": "0755", 
            "mtime": 1578485381.457796, 
            "path": "/home/centos/aws-project/.inventory/hk_instances", 
            "state": "touch"
        }, 
        "before": {
            "atime": 1578485381.4563, 
            "mode": "0644", 
            "mtime": 1578485381.4563, 
            "path": "/home/centos/aws-project/.inventory/hk_instances", 
            "state": "absent"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "_diff_peek": null, 
            "_original_basename": null, 
            "access_time": null, 
            "access_time_format": "%Y%m%d%H%M.%S", 
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "directory_mode": null, 
            "follow": true, 
            "force": false, 
            "group": "root", 
            "mode": "0755", 
            "modification_time": null, 
            "modification_time_format": "%Y%m%d%H%M.%S", 
            "owner": "root", 
            "path": "/home/centos/aws-project/.inventory/hk_instances", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "touch", 
            "unsafe_writes": null
        }
    }, 
    "mode": "0755", 
    "owner": "root", 
    "size": 0, 
    "state": "file", 
    "uid": 0
}
2020-01-08 20:09:41,519 p=10450 u=root |  TASK [ec2_dege : provision 8081 port security group] *******************************************************************************************************
2020-01-08 20:09:41,519 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/merchant-sg.yml:3
2020-01-08 20:09:41,543 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:41,543 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:41,552 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485381.54-56293420057001 `" && echo ansible-tmp-1578485381.54-56293420057001="` echo /root/.ansible/tmp/ansible-tmp-1578485381.54-56293420057001 `" ) && sleep 0'
2020-01-08 20:09:41,859 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-08 20:09:41,860 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmplItO53 TO /root/.ansible/tmp/ansible-tmp-1578485381.54-56293420057001/AnsiballZ_ec2_group.py
2020-01-08 20:09:41,861 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485381.54-56293420057001/ /root/.ansible/tmp/ansible-tmp-1578485381.54-56293420057001/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:09:41,870 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485381.54-56293420057001/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:09:44,060 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485381.54-56293420057001/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:44,076 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "description": "opens port merchant to the user", 
    "group_id": "sg-04026c02f1e6abeed", 
    "group_name": "M120-hk-merchant", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port merchant to the user", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M120-hk-merchant", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "rules": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "from_port": "8081", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 8081", 
                    "to_port": "8081"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M120-hk-merchant", 
                "Name": "M120-hk-merchant"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 8081, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "description": "allow all on port 8081"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 8081, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M120-hk-merchant", 
        "Name": "M120-hk-merchant"
    }, 
    "vpc_id": "vpc-025e5ea3271f91941"
}
2020-01-08 20:09:44,119 p=10450 u=root |  TASK [ec2_dege : provision backend  7880 and 7881 and 7882 all security group] *****************************************************************************
2020-01-08 20:09:44,119 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/backend-acl-sg.yml:3
2020-01-08 20:09:44,137 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:44,137 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:44,146 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485384.14-208011992293259 `" && echo ansible-tmp-1578485384.14-208011992293259="` echo /root/.ansible/tmp/ansible-tmp-1578485384.14-208011992293259 `" ) && sleep 0'
2020-01-08 20:09:44,157 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-08 20:09:44,158 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpJPKRxs TO /root/.ansible/tmp/ansible-tmp-1578485384.14-208011992293259/AnsiballZ_ec2_group.py
2020-01-08 20:09:44,159 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485384.14-208011992293259/ /root/.ansible/tmp/ansible-tmp-1578485384.14-208011992293259/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:09:44,167 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485384.14-208011992293259/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:09:46,268 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485384.14-208011992293259/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:46,286 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "description": "opens port 7880 7881 7882 to the world", 
    "group_id": "sg-09d79c3889b2c530a", 
    "group_name": "M120-backend-acl", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port 7880 7881 7882 to the world", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M120-backend-acl", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "rules": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7880", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7880", 
                    "to_port": "7880"
                }, 
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7881", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7881", 
                    "to_port": "7881"
                }, 
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7882", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7882", 
                    "to_port": "7882"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M120-backend-acl", 
                "Name": "M120-backend-acl"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 7882, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7882"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7882, 
            "user_id_group_pairs": []
        }, 
        {
            "from_port": 7881, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7881"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7881, 
            "user_id_group_pairs": []
        }, 
        {
            "from_port": 7880, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7880"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7880, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M120-backend-acl", 
        "Name": "M120-backend-acl"
    }, 
    "vpc_id": "vpc-025e5ea3271f91941"
}
2020-01-08 20:09:46,326 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:09:46,326 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:7
2020-01-08 20:09:46,342 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:09:46,382 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:09:46,382 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:10
2020-01-08 20:09:46,457 p=10450 u=root |  included: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml for localhost
2020-01-08 20:09:46,504 p=10450 u=root |  TASK [ec2_dege : Get SSH SG ID] ****************************************************************************************************************************
2020-01-08 20:09:46,505 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:2
2020-01-08 20:09:46,522 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:46,522 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:46,531 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485386.52-90206295018772 `" && echo ansible-tmp-1578485386.52-90206295018772="` echo /root/.ansible/tmp/ansible-tmp-1578485386.52-90206295018772 `" ) && sleep 0'
2020-01-08 20:09:46,765 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:09:46,765 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpVUVzsS TO /root/.ansible/tmp/ansible-tmp-1578485386.52-90206295018772/AnsiballZ_ec2_group_facts.py
2020-01-08 20:09:46,766 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485386.52-90206295018772/ /root/.ansible/tmp/ansible-tmp-1578485386.52-90206295018772/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:46,775 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485386.52-90206295018772/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:47,458 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485386.52-90206295018772/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:47,473 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-ssh"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port ssh to the user", 
            "group_id": "sg-066bafabf3e4021cc", 
            "group_name": "M120-ssh", 
            "ip_permissions": [
                {
                    "from_port": 22, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 22"
                        }, 
                        {
                            "cidr_ip": "52.221.224.212/32"
                        }, 
                        {
                            "cidr_ip": "103.136.108.78/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 22, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-ssh", 
                "Name": "M120-ssh"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:09:47,513 p=10450 u=root |  TASK [ec2_dege : list of ssh the security group id.] *******************************************************************************************************
2020-01-08 20:09:47,513 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:9
2020-01-08 20:09:47,541 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow all on port 22', u'cidr_ip': u'154.197.29.34/32'}, {u'cidr_ip': u'52.221.224.212/32'}, {u'cidr_ip': u'103.136.108.78/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port ssh to the user', u'tags': {u'Environment': u'M120-ssh', u'Name': u'M120-ssh'}, u'group_name': u'M120-ssh', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-066bafabf3e4021cc', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ssh_id": "sg-066bafabf3e4021cc"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port ssh to the user", 
        "group_id": "sg-066bafabf3e4021cc", 
        "group_name": "M120-ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 22"
                    }, 
                    {
                        "cidr_ip": "52.221.224.212/32"
                    }, 
                    {
                        "cidr_ip": "103.136.108.78/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-ssh", 
            "Name": "M120-ssh"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:09:47,581 p=10450 u=root |  TASK [ec2_dege : Get ALL SG ID] ****************************************************************************************************************************
2020-01-08 20:09:47,582 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:14
2020-01-08 20:09:47,599 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:47,599 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:47,607 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485387.6-175740134631549 `" && echo ansible-tmp-1578485387.6-175740134631549="` echo /root/.ansible/tmp/ansible-tmp-1578485387.6-175740134631549 `" ) && sleep 0'
2020-01-08 20:09:47,618 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:09:47,619 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpBcuYwD TO /root/.ansible/tmp/ansible-tmp-1578485387.6-175740134631549/AnsiballZ_ec2_group_facts.py
2020-01-08 20:09:47,620 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485387.6-175740134631549/ /root/.ansible/tmp/ansible-tmp-1578485387.6-175740134631549/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:47,628 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485387.6-175740134631549/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:48,309 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485387.6-175740134631549/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:48,324 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-004a004e0482c5105", 
            "group_name": "M120-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.120.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-all", 
                "Name": "M120-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:09:48,363 p=10450 u=root |  TASK [ec2_dege : list of all the security group id.] *******************************************************************************************************
2020-01-08 20:09:48,363 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:21
2020-01-08 20:09:48,391 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.120.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M120-all', u'Name': u'M120-all'}, u'group_name': u'M120-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-004a004e0482c5105', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-004a004e0482c5105"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-004a004e0482c5105", 
        "group_name": "M120-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.120.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-all", 
            "Name": "M120-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:09:48,432 p=10450 u=root |  TASK [ec2_dege : Get ELB SG ID] ****************************************************************************************************************************
2020-01-08 20:09:48,432 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:26
2020-01-08 20:09:48,451 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:48,451 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:48,460 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485388.45-150271426291449 `" && echo ansible-tmp-1578485388.45-150271426291449="` echo /root/.ansible/tmp/ansible-tmp-1578485388.45-150271426291449 `" ) && sleep 0'
2020-01-08 20:09:48,471 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:09:48,472 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpbNHwA_ TO /root/.ansible/tmp/ansible-tmp-1578485388.45-150271426291449/AnsiballZ_ec2_group_facts.py
2020-01-08 20:09:48,473 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485388.45-150271426291449/ /root/.ansible/tmp/ansible-tmp-1578485388.45-150271426291449/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:48,481 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485388.45-150271426291449/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:49,151 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485388.45-150271426291449/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:49,165 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-elb-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0d6810116d46f5ac2", 
            "group_name": "M120-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-elb-80-443-all", 
                "Name": "M120-elb-80-443-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:09:49,205 p=10450 u=root |  TASK [ec2_dege : list of 80 443 the security group id.] ****************************************************************************************************
2020-01-08 20:09:49,205 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:33
2020-01-08 20:09:49,237 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M120-elb-80-443-all', u'Name': u'M120-elb-80-443-all'}, u'group_name': u'M120-elb-80-443-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-0d6810116d46f5ac2', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_80_443_id": "sg-0d6810116d46f5ac2"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0d6810116d46f5ac2", 
        "group_name": "M120-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-elb-80-443-all", 
            "Name": "M120-elb-80-443-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:09:49,280 p=10450 u=root |  TASK [ec2_dege : Get MERCHANT SG ID] ***********************************************************************************************************************
2020-01-08 20:09:49,280 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:38
2020-01-08 20:09:49,299 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:49,299 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:49,308 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485389.3-13291202913458 `" && echo ansible-tmp-1578485389.3-13291202913458="` echo /root/.ansible/tmp/ansible-tmp-1578485389.3-13291202913458 `" ) && sleep 0'
2020-01-08 20:09:49,319 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:09:49,319 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmps9l2Md TO /root/.ansible/tmp/ansible-tmp-1578485389.3-13291202913458/AnsiballZ_ec2_group_facts.py
2020-01-08 20:09:49,320 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485389.3-13291202913458/ /root/.ansible/tmp/ansible-tmp-1578485389.3-13291202913458/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:49,328 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485389.3-13291202913458/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:49,988 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485389.3-13291202913458/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:50,002 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-hk-merchant"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port merchant to the user", 
            "group_id": "sg-04026c02f1e6abeed", 
            "group_name": "M120-hk-merchant", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-hk-merchant", 
                "Name": "M120-hk-merchant"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:09:50,042 p=10450 u=root |  TASK [ec2_dege : list of 8081 the security group id.] ******************************************************************************************************
2020-01-08 20:09:50,043 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:45
2020-01-08 20:09:50,070 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port merchant to the user', u'tags': {u'Environment': u'M120-hk-merchant', u'Name': u'M120-hk-merchant'}, u'group_name': u'M120-hk-merchant', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-04026c02f1e6abeed', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_merchant_id": "sg-04026c02f1e6abeed"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port merchant to the user", 
        "group_id": "sg-04026c02f1e6abeed", 
        "group_name": "M120-hk-merchant", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-hk-merchant", 
            "Name": "M120-hk-merchant"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:09:50,110 p=10450 u=root |  TASK [ec2_dege : Get BACKEND SG ID] ************************************************************************************************************************
2020-01-08 20:09:50,111 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:50
2020-01-08 20:09:50,129 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:50,129 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:50,138 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485390.13-189071605397077 `" && echo ansible-tmp-1578485390.13-189071605397077="` echo /root/.ansible/tmp/ansible-tmp-1578485390.13-189071605397077 `" ) && sleep 0'
2020-01-08 20:09:50,150 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:09:50,150 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpO4cR8U TO /root/.ansible/tmp/ansible-tmp-1578485390.13-189071605397077/AnsiballZ_ec2_group_facts.py
2020-01-08 20:09:50,151 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485390.13-189071605397077/ /root/.ansible/tmp/ansible-tmp-1578485390.13-189071605397077/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:50,160 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485390.13-189071605397077/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:09:50,832 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485390.13-189071605397077/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:09:50,849 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-backend-acl"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-09d79c3889b2c530a", 
            "group_name": "M120-backend-acl", 
            "ip_permissions": [
                {
                    "from_port": 7882, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7882"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7882, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 7881, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7881"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7881, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-backend-acl", 
                "Name": "M120-backend-acl"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:09:50,887 p=10450 u=root |  TASK [ec2_dege : list of 7880 7881 the security group id.] *************************************************************************************************
2020-01-08 20:09:50,888 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:57
2020-01-08 20:09:50,919 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7882, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7882, u'ip_ranges': [{u'description': u'allow all on port 7882', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 7881, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7881, u'ip_ranges': [{u'description': u'allow all on port 7881', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M120-backend-acl', u'Name': u'M120-backend-acl'}, u'group_name': u'M120-backend-acl', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-09d79c3889b2c530a', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_backend_acl_id": "sg-09d79c3889b2c530a"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-09d79c3889b2c530a", 
        "group_name": "M120-backend-acl", 
        "ip_permissions": [
            {
                "from_port": 7882, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7882"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7882, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 7881, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7881"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7881, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-backend-acl", 
            "Name": "M120-backend-acl"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:09:50,959 p=10450 u=root |  TASK [ec2_dege : Provision ec2 instance] *******************************************************************************************************************
2020-01-08 20:09:50,959 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:62
2020-01-08 20:09:50,989 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:09:50,989 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:09:50,998 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485390.99-220866842179123 `" && echo ansible-tmp-1578485390.99-220866842179123="` echo /root/.ansible/tmp/ansible-tmp-1578485390.99-220866842179123 `" ) && sleep 0'
2020-01-08 20:09:51,256 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2.py
2020-01-08 20:09:51,257 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmp18e7eN TO /root/.ansible/tmp/ansible-tmp-1578485390.99-220866842179123/AnsiballZ_ec2.py
2020-01-08 20:09:51,257 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485390.99-220866842179123/ /root/.ansible/tmp/ansible-tmp-1578485390.99-220866842179123/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:09:51,267 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485390.99-220866842179123/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:10:03,512 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485390.99-220866842179123/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:03,533 p=10450 u=root |  changed: [localhost] => {
    "changed": true, 
    "instance_ids": [
        "i-0ae0a3461a0f56c3c"
    ], 
    "instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-00651a997193a2045"
                }
            }, 
            "dns_name": "ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-04026c02f1e6abeed": "M120-hk-merchant", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-09d79c3889b2c530a": "M120-backend-acl", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-0ae0a3461a0f56c3c", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "launch_time": "2020-01-08T12:09:52.000Z", 
            "placement": "ap-southeast-1a", 
            "private_dns_name": "ip-10-120-10-113.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.10.113", 
            "public_dns_name": "ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.250.3.197", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-edge-backend-service", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ], 
    "invocation": {
        "module_args": {
            "assign_public_ip": true, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "count": 1, 
            "count_tag": {
                "Name": "M120-edge-backend-service"
            }, 
            "debug_botocore_endpoint_logs": false, 
            "ebs_optimized": false, 
            "ec2_url": null, 
            "exact_count": 1, 
            "group": null, 
            "group_id": [
                "sg-066bafabf3e4021cc", 
                "sg-004a004e0482c5105", 
                "sg-0d6810116d46f5ac2", 
                "sg-04026c02f1e6abeed", 
                "sg-09d79c3889b2c530a"
            ], 
            "id": null, 
            "image": "ami-0208d16fd11190da6", 
            "instance_ids": null, 
            "instance_initiated_shutdown_behavior": "stop", 
            "instance_profile_name": "", 
            "instance_tags": {
                "Name": "M120-edge-backend-service", 
                "env": ""
            }, 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "monitoring": true, 
            "network_interfaces": null, 
            "placement_group": null, 
            "private_ip": null, 
            "profile": null, 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "source_dest_check": null, 
            "spot_launch_group": null, 
            "spot_price": null, 
            "spot_type": "one-time", 
            "spot_wait_timeout": 600, 
            "state": "present", 
            "tenancy": "default", 
            "termination_protection": true, 
            "user_data": null, 
            "validate_certs": true, 
            "volumes": [
                {
                    "delete_on_termination": false, 
                    "device_name": "/dev/sda1", 
                    "volume_size": 50, 
                    "volume_type": "gp2"
                }
            ], 
            "vpc_subnet_id": "subnet-05f2241d9964e4798", 
            "wait": true, 
            "wait_timeout": 300, 
            "zone": null
        }
    }, 
    "tagged_instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-00651a997193a2045"
                }
            }, 
            "dns_name": "ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-04026c02f1e6abeed": "M120-hk-merchant", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-09d79c3889b2c530a": "M120-backend-acl", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-0ae0a3461a0f56c3c", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "launch_time": "2020-01-08T12:09:52.000Z", 
            "placement": "ap-southeast-1a", 
            "private_dns_name": "ip-10-120-10-113.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.10.113", 
            "public_dns_name": "ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.250.3.197", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-edge-backend-service", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ]
}
2020-01-08 20:10:03,572 p=10450 u=root |  TASK [ec2_dege : create EIP] *******************************************************************************************************************************
2020-01-08 20:10:03,572 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:93
2020-01-08 20:10:03,589 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:03,590 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:03,598 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485403.59-222636156493337 `" && echo ansible-tmp-1578485403.59-222636156493337="` echo /root/.ansible/tmp/ansible-tmp-1578485403.59-222636156493337 `" ) && sleep 0'
2020-01-08 20:10:03,832 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:10:03,833 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpUVDKOy TO /root/.ansible/tmp/ansible-tmp-1578485403.59-222636156493337/AnsiballZ_ec2_eip.py
2020-01-08 20:10:03,833 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485403.59-222636156493337/ /root/.ansible/tmp/ansible-tmp-1578485403.59-222636156493337/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:03,843 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485403.59-222636156493337/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:04,278 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485403.59-222636156493337/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:04,291 p=10450 u=root |  changed: [localhost] => {
    "allocation_id": "eipalloc-09a8b10032379c21d", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": null, 
            "ec2_url": null, 
            "in_vpc": false, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": null, 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": false, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "public_ip": "18.140.155.59"
}
2020-01-08 20:10:04,331 p=10450 u=root |  TASK [ec2_dege : set eip fact] *****************************************************************************************************************************
2020-01-08 20:10:04,331 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:98
2020-01-08 20:10:04,348 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "eip": "18.140.155.59"
    }, 
    "changed": false
}
2020-01-08 20:10:04,388 p=10450 u=root |  TASK [ec2_dege : Assign EIP address for web instances] *****************************************************************************************************
2020-01-08 20:10:04,388 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:102
2020-01-08 20:10:04,412 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:04,412 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:04,421 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485404.41-226231014753455 `" && echo ansible-tmp-1578485404.41-226231014753455="` echo /root/.ansible/tmp/ansible-tmp-1578485404.41-226231014753455 `" ) && sleep 0'
2020-01-08 20:10:04,432 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:10:04,433 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpkrAuRN TO /root/.ansible/tmp/ansible-tmp-1578485404.41-226231014753455/AnsiballZ_ec2_eip.py
2020-01-08 20:10:04,434 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485404.41-226231014753455/ /root/.ansible/tmp/ansible-tmp-1578485404.41-226231014753455/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:04,442 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485404.41-226231014753455/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:05,395 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485404.41-226231014753455/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:05,414 p=10450 u=root |  changed: [localhost] => (item={u'ramdisk': None, u'kernel': None, u'root_device_type': u'ebs', u'private_dns_name': u'ip-10-120-10-113.ap-southeast-1.compute.internal', u'block_device_mapping': {u'/dev/sda1': {u'status': u'attached', u'delete_on_termination': False, u'volume_id': u'vol-00651a997193a2045'}}, u'key_name': u'hk-Production-ssh', u'public_ip': u'13.250.3.197', u'image_id': u'ami-0208d16fd11190da6', u'tenancy': u'default', u'private_ip': u'10.120.10.113', u'groups': {u'sg-066bafabf3e4021cc': u'M120-ssh', u'sg-09d79c3889b2c530a': u'M120-backend-acl', u'sg-004a004e0482c5105': u'M120-all', u'sg-04026c02f1e6abeed': u'M120-hk-merchant', u'sg-0d6810116d46f5ac2': u'M120-elb-80-443-all'}, u'public_dns_name': u'ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com', u'state_code': 16, u'id': u'i-0ae0a3461a0f56c3c', u'tags': {u'Name': u'M120-edge-backend-service', u'env': u''}, u'placement': u'ap-southeast-1a', u'ami_launch_index': u'0', u'dns_name': u'ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com', u'region': u'ap-southeast-1', u'ebs_optimized': False, u'launch_time': u'2020-01-08T12:09:52.000Z', u'instance_type': u't3.small', u'state': u'running', u'architecture': u'x86_64', u'hypervisor': u'xen', u'virtualization_type': u'hvm', u'root_device_name': u'/dev/sda1'}) => {
    "allocation_id": "eipalloc-09a8b10032379c21d", 
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": "i-0ae0a3461a0f56c3c", 
            "ec2_url": null, 
            "in_vpc": true, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": "18.140.155.59", 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": true, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "ami_launch_index": "0", 
        "architecture": "x86_64", 
        "block_device_mapping": {
            "/dev/sda1": {
                "delete_on_termination": false, 
                "status": "attached", 
                "volume_id": "vol-00651a997193a2045"
            }
        }, 
        "dns_name": "ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com", 
        "ebs_optimized": false, 
        "groups": {
            "sg-004a004e0482c5105": "M120-all", 
            "sg-04026c02f1e6abeed": "M120-hk-merchant", 
            "sg-066bafabf3e4021cc": "M120-ssh", 
            "sg-09d79c3889b2c530a": "M120-backend-acl", 
            "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
        }, 
        "hypervisor": "xen", 
        "id": "i-0ae0a3461a0f56c3c", 
        "image_id": "ami-0208d16fd11190da6", 
        "instance_type": "t3.small", 
        "kernel": null, 
        "key_name": "hk-Production-ssh", 
        "launch_time": "2020-01-08T12:09:52.000Z", 
        "placement": "ap-southeast-1a", 
        "private_dns_name": "ip-10-120-10-113.ap-southeast-1.compute.internal", 
        "private_ip": "10.120.10.113", 
        "public_dns_name": "ec2-13-250-3-197.ap-southeast-1.compute.amazonaws.com", 
        "public_ip": "13.250.3.197", 
        "ramdisk": null, 
        "region": "ap-southeast-1", 
        "root_device_name": "/dev/sda1", 
        "root_device_type": "ebs", 
        "state": "running", 
        "state_code": 16, 
        "tags": {
            "Name": "M120-edge-backend-service", 
            "env": ""
        }, 
        "tenancy": "default", 
        "virtualization_type": "hvm"
    }, 
    "public_ip": "18.140.155.59"
}
2020-01-08 20:10:05,458 p=10450 u=root |  TASK [ec2_dege : Configure hostname in "/home/centos/aws-project"] *****************************************************************************************
2020-01-08 20:10:05,458 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:112
2020-01-08 20:10:05,478 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:05,479 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:05,487 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485405.48-21270335970154 `" && echo ansible-tmp-1578485405.48-21270335970154="` echo /root/.ansible/tmp/ansible-tmp-1578485405.48-21270335970154 `" ) && sleep 0'
2020-01-08 20:10:05,705 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:10:05,705 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpckbAjN TO /root/.ansible/tmp/ansible-tmp-1578485405.48-21270335970154/AnsiballZ_lineinfile.py
2020-01-08 20:10:05,706 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485405.48-21270335970154/ /root/.ansible/tmp/ansible-tmp-1578485405.48-21270335970154/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:05,716 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485405.48-21270335970154/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:05,812 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485405.48-21270335970154/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:05,825 p=10450 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hk_hosts (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hk_hosts (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hk_hosts (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hk_hosts (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hk_hosts", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "[M120-edge-backend-service]\n18.140.155.59 ansible_ssh_user=centos ansible_ssh_private_key_file=/home/centos/aws-project/.keys/hk-Production-ssh\n", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts", 
            "regexp": "M120-edge-backend-service", 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:10:05,865 p=10450 u=root |  TASK [ec2_dege : set pip fact] *****************************************************************************************************************************
2020-01-08 20:10:05,865 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:119
2020-01-08 20:10:05,883 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "pip": [
            "10.120.10.113"
        ]
    }, 
    "changed": false
}
2020-01-08 20:10:05,925 p=10450 u=root |  TASK [ec2_dege : Configure instances messages in "/home/centos/aws-project"] *******************************************************************************
2020-01-08 20:10:05,925 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-merchant.yml:123
2020-01-08 20:10:05,944 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:05,945 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:05,953 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485405.94-30151042770200 `" && echo ansible-tmp-1578485405.94-30151042770200="` echo /root/.ansible/tmp/ansible-tmp-1578485405.94-30151042770200 `" ) && sleep 0'
2020-01-08 20:10:05,964 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:10:05,965 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpNwyIAK TO /root/.ansible/tmp/ansible-tmp-1578485405.94-30151042770200/AnsiballZ_lineinfile.py
2020-01-08 20:10:05,966 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485405.94-30151042770200/ /root/.ansible/tmp/ansible-tmp-1578485405.94-30151042770200/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:05,973 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485405.94-30151042770200/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:06,068 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485405.94-30151042770200/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:06,081 p=10450 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hk_instances (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hk_instances (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hk_instances (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hk_instances (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hk_instances", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "{ \"hostname\": \"M120-edge-backend-service\",\"public_ip\": \"18.140.155.59\",\"private_ip\": \"10.120.10.113\",\"application_name\": \\[ \"[u'merchant_6hao', u'share_agent_6hao', u'agent_6hao', u'share_site_agent_6hao']\" \\] }", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hk_instances", 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:10:06,120 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:10:06,120 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:13
2020-01-08 20:10:06,137 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:06,176 p=10450 u=root |  TASK [ec2_dege : VPC facts] ********************************************************************************************************************************
2020-01-08 20:10:06,177 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:3
2020-01-08 20:10:06,193 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:06,193 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:06,202 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485406.19-178451846829692 `" && echo ansible-tmp-1578485406.19-178451846829692="` echo /root/.ansible/tmp/ansible-tmp-1578485406.19-178451846829692 `" ) && sleep 0'
2020-01-08 20:10:06,214 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-08 20:10:06,215 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpgXiWoK TO /root/.ansible/tmp/ansible-tmp-1578485406.19-178451846829692/AnsiballZ_ec2_vpc_net_facts.py
2020-01-08 20:10:06,215 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485406.19-178451846829692/ /root/.ansible/tmp/ansible-tmp-1578485406.19-178451846829692/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:10:06,224 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485406.19-178451846829692/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:10:07,091 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485406.19-178451846829692/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:07,105 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M120"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.120.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0171dc4355afb2d57", 
                    "cidr_block": "10.120.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f1e92296", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-025e5ea3271f91941", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:07,145 p=10450 u=root |  TASK [ec2_dege : set fact: VPC ID] *************************************************************************************************************************
2020-01-08 20:10:07,145 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:10
2020-01-08 20:10:07,168 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-025e5ea3271f91941"
    }, 
    "changed": false
}
2020-01-08 20:10:07,211 p=10450 u=root |  TASK [ec2_dege : VPC subnet facts] *************************************************************************************************************************
2020-01-08 20:10:07,211 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:15
2020-01-08 20:10:07,227 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:07,227 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:07,236 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485407.23-223530940194757 `" && echo ansible-tmp-1578485407.23-223530940194757="` echo /root/.ansible/tmp/ansible-tmp-1578485407.23-223530940194757 `" ) && sleep 0'
2020-01-08 20:10:07,248 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-08 20:10:07,248 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpOeeOOs TO /root/.ansible/tmp/ansible-tmp-1578485407.23-223530940194757/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-08 20:10:07,250 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485407.23-223530940194757/ /root/.ansible/tmp/ansible-tmp-1578485407.23-223530940194757/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:10:07,259 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485407.23-223530940194757/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:10:07,964 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485407.23-223530940194757/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:07,981 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-025e5ea3271f91941"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 229, 
            "cidr_block": "10.120.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a44bb4344c1a9e38", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-0a44bb4344c1a9e38", 
            "subnet_id": "subnet-0a44bb4344c1a9e38", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 231, 
            "cidr_block": "10.120.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-088c7b9e0c3425f92", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-088c7b9e0c3425f92", 
            "subnet_id": "subnet-088c7b9e0c3425f92", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 227, 
            "cidr_block": "10.120.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-05f2241d9964e4798", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-05f2241d9964e4798", 
            "subnet_id": "subnet-05f2241d9964e4798", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:08,022 p=10450 u=root |  TASK [ec2_dege : register just the IDs for each of the groups] *********************************************************************************************
2020-01-08 20:10:08,022 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:22
2020-01-08 20:10:08,041 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-05f2241d9964e4798", 
            "subnet-088c7b9e0c3425f92", 
            "subnet-0a44bb4344c1a9e38"
        ]
    }, 
    "changed": false
}
2020-01-08 20:10:08,081 p=10450 u=root |  TASK [ec2_dege : Create a new EC2 key] *********************************************************************************************************************
2020-01-08 20:10:08,082 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:2
2020-01-08 20:10:08,099 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:08,099 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:08,108 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485408.1-7063739907489 `" && echo ansible-tmp-1578485408.1-7063739907489="` echo /root/.ansible/tmp/ansible-tmp-1578485408.1-7063739907489 `" ) && sleep 0'
2020-01-08 20:10:08,120 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-08 20:10:08,121 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpzASgDx TO /root/.ansible/tmp/ansible-tmp-1578485408.1-7063739907489/AnsiballZ_ec2_key.py
2020-01-08 20:10:08,122 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485408.1-7063739907489/ /root/.ansible/tmp/ansible-tmp-1578485408.1-7063739907489/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:10:08,131 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485408.1-7063739907489/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:10:08,794 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485408.1-7063739907489/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:08,807 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "hk-Production-ssh", 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "38:84:37:c8:39:3a:31:b7:e5:2a:30:c1:26:8c:fe:ea:03:e8:41:92", 
        "name": "hk-Production-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-08 20:10:08,848 p=10450 u=root |  TASK [ec2_dege : Check directory exists or not.] ***********************************************************************************************************
2020-01-08 20:10:08,848 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:8
2020-01-08 20:10:08,865 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:08,865 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:08,874 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485408.86-169470980115227 `" && echo ansible-tmp-1578485408.86-169470980115227="` echo /root/.ansible/tmp/ansible-tmp-1578485408.86-169470980115227 `" ) && sleep 0'
2020-01-08 20:10:08,886 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:08,887 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpgMgI50 TO /root/.ansible/tmp/ansible-tmp-1578485408.86-169470980115227/AnsiballZ_stat.py
2020-01-08 20:10:08,888 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485408.86-169470980115227/ /root/.ansible/tmp/ansible-tmp-1578485408.86-169470980115227/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:08,897 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485408.86-169470980115227/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:09,000 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485408.86-169470980115227/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:09,018 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578365002.1148942, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484375.395159, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578484375.395159, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 63, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:09,057 p=10450 u=root |  TASK [ec2_dege : Make private key Dir] *********************************************************************************************************************
2020-01-08 20:10:09,057 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:12
2020-01-08 20:10:09,075 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:09,115 p=10450 u=root |  TASK [ec2_dege : Save private key] *************************************************************************************************************************
2020-01-08 20:10:09,115 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:16
2020-01-08 20:10:09,132 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:09,172 p=10450 u=root |  TASK [ec2_dege : Check directory  inventory exists or not.] ************************************************************************************************
2020-01-08 20:10:09,172 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:20
2020-01-08 20:10:09,188 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:09,189 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:09,198 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485409.19-45964628470193 `" && echo ansible-tmp-1578485409.19-45964628470193="` echo /root/.ansible/tmp/ansible-tmp-1578485409.19-45964628470193 `" ) && sleep 0'
2020-01-08 20:10:09,209 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:09,210 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpAjIUpp TO /root/.ansible/tmp/ansible-tmp-1578485409.19-45964628470193/AnsiballZ_stat.py
2020-01-08 20:10:09,211 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485409.19-45964628470193/ /root/.ansible/tmp/ansible-tmp-1578485409.19-45964628470193/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:09,219 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485409.19-45964628470193/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:09,324 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485409.19-45964628470193/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:09,341 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578484712.476196, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578485406.0591567, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578485406.0591567, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 80, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:09,381 p=10450 u=root |  TASK [ec2_dege : Make private key Dir] *********************************************************************************************************************
2020-01-08 20:10:09,381 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:24
2020-01-08 20:10:09,398 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:09,437 p=10450 u=root |  TASK [ec2_dege : Check File exists or not] *****************************************************************************************************************
2020-01-08 20:10:09,438 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:28
2020-01-08 20:10:09,454 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:09,455 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:09,463 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485409.45-80892201616418 `" && echo ansible-tmp-1578485409.45-80892201616418="` echo /root/.ansible/tmp/ansible-tmp-1578485409.45-80892201616418 `" ) && sleep 0'
2020-01-08 20:10:09,475 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:09,475 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpKwjR2M TO /root/.ansible/tmp/ansible-tmp-1578485409.45-80892201616418/AnsiballZ_stat.py
2020-01-08 20:10:09,476 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485409.45-80892201616418/ /root/.ansible/tmp/ansible-tmp-1578485409.45-80892201616418/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:09,485 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485409.45-80892201616418/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:09,592 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485409.45-80892201616418/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:09,607 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578485405.8031583, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "a8b474094f8a3c4b1446528e023c35c298ffa3be", 
        "ctime": 1578485405.8031583, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4350555, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485405.8031583, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 145, 
        "uid": 0, 
        "version": "323726817", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:09,648 p=10450 u=root |  TASK [ec2_dege : Create file if does not exist] ************************************************************************************************************
2020-01-08 20:10:09,648 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:32
2020-01-08 20:10:09,665 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:09,705 p=10450 u=root |  TASK [ec2_dege : Check instances File exists or not] *******************************************************************************************************
2020-01-08 20:10:09,706 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:36
2020-01-08 20:10:09,721 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:09,722 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:09,731 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485409.72-110528040206296 `" && echo ansible-tmp-1578485409.72-110528040206296="` echo /root/.ansible/tmp/ansible-tmp-1578485409.72-110528040206296 `" ) && sleep 0'
2020-01-08 20:10:09,743 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:09,743 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmp4n9h3F TO /root/.ansible/tmp/ansible-tmp-1578485409.72-110528040206296/AnsiballZ_stat.py
2020-01-08 20:10:09,744 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485409.72-110528040206296/ /root/.ansible/tmp/ansible-tmp-1578485409.72-110528040206296/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:09,753 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485409.72-110528040206296/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:09,859 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485409.72-110528040206296/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:09,875 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578485406.0591567, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "bdee1dae7775a6e64aa5c92d31e9b8be2a3d88c3", 
        "ctime": 1578485406.0591567, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4350556, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485406.0591567, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 212, 
        "uid": 0, 
        "version": "18446744072743284141", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:09,915 p=10450 u=root |  TASK [ec2_dege : Create instances file if does not exist] **************************************************************************************************
2020-01-08 20:10:09,915 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:40
2020-01-08 20:10:09,931 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:09,971 p=10450 u=root |  TASK [ec2_dege : provision 8081 port security group] *******************************************************************************************************
2020-01-08 20:10:09,971 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/merchant-sg.yml:3
2020-01-08 20:10:09,991 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:09,991 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:10,000 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485409.99-245057030753375 `" && echo ansible-tmp-1578485409.99-245057030753375="` echo /root/.ansible/tmp/ansible-tmp-1578485409.99-245057030753375 `" ) && sleep 0'
2020-01-08 20:10:10,014 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-08 20:10:10,014 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpPKVP1i TO /root/.ansible/tmp/ansible-tmp-1578485409.99-245057030753375/AnsiballZ_ec2_group.py
2020-01-08 20:10:10,015 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485409.99-245057030753375/ /root/.ansible/tmp/ansible-tmp-1578485409.99-245057030753375/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:10,025 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485409.99-245057030753375/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:12,204 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485409.99-245057030753375/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:12,221 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "description": "opens port merchant to the user", 
    "group_id": "sg-04026c02f1e6abeed", 
    "group_name": "M120-hk-merchant", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port merchant to the user", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M120-hk-merchant", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "rules": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "from_port": "8081", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 8081", 
                    "to_port": "8081"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M120-hk-merchant", 
                "Name": "M120-hk-merchant"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 8081, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "description": "allow all on port 8081"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 8081, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M120-hk-merchant", 
        "Name": "M120-hk-merchant"
    }, 
    "vpc_id": "vpc-025e5ea3271f91941"
}
2020-01-08 20:10:12,260 p=10450 u=root |  TASK [ec2_dege : provision backend  7880 and 7881 and 7882 all security group] *****************************************************************************
2020-01-08 20:10:12,261 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/backend-acl-sg.yml:3
2020-01-08 20:10:12,279 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:12,280 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:12,289 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485412.28-128205289551827 `" && echo ansible-tmp-1578485412.28-128205289551827="` echo /root/.ansible/tmp/ansible-tmp-1578485412.28-128205289551827 `" ) && sleep 0'
2020-01-08 20:10:12,301 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-08 20:10:12,302 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpFjuhhE TO /root/.ansible/tmp/ansible-tmp-1578485412.28-128205289551827/AnsiballZ_ec2_group.py
2020-01-08 20:10:12,302 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485412.28-128205289551827/ /root/.ansible/tmp/ansible-tmp-1578485412.28-128205289551827/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:12,312 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485412.28-128205289551827/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:14,403 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485412.28-128205289551827/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:14,422 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "description": "opens port 7880 7881 7882 to the world", 
    "group_id": "sg-09d79c3889b2c530a", 
    "group_name": "M120-backend-acl", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port 7880 7881 7882 to the world", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M120-backend-acl", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "rules": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7880", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7880", 
                    "to_port": "7880"
                }, 
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7881", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7881", 
                    "to_port": "7881"
                }, 
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7882", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7882", 
                    "to_port": "7882"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M120-backend-acl", 
                "Name": "M120-backend-acl"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 7882, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7882"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7882, 
            "user_id_group_pairs": []
        }, 
        {
            "from_port": 7881, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7881"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7881, 
            "user_id_group_pairs": []
        }, 
        {
            "from_port": 7880, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7880"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7880, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M120-backend-acl", 
        "Name": "M120-backend-acl"
    }, 
    "vpc_id": "vpc-025e5ea3271f91941"
}
2020-01-08 20:10:14,462 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:10:14,462 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:7
2020-01-08 20:10:14,484 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:14,527 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:10:14,527 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:10
2020-01-08 20:10:14,544 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:14,622 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:10:14,622 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:13
2020-01-08 20:10:14,693 p=10450 u=root |  included: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml for localhost
2020-01-08 20:10:14,741 p=10450 u=root |  TASK [ec2_dege : Get SSH SG ID] ****************************************************************************************************************************
2020-01-08 20:10:14,742 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:2
2020-01-08 20:10:14,759 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:14,760 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:14,769 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485414.76-37757221282574 `" && echo ansible-tmp-1578485414.76-37757221282574="` echo /root/.ansible/tmp/ansible-tmp-1578485414.76-37757221282574 `" ) && sleep 0'
2020-01-08 20:10:14,780 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:10:14,781 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpeHJbAu TO /root/.ansible/tmp/ansible-tmp-1578485414.76-37757221282574/AnsiballZ_ec2_group_facts.py
2020-01-08 20:10:14,782 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485414.76-37757221282574/ /root/.ansible/tmp/ansible-tmp-1578485414.76-37757221282574/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:14,791 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485414.76-37757221282574/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:15,474 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485414.76-37757221282574/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:15,489 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-ssh"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port ssh to the user", 
            "group_id": "sg-066bafabf3e4021cc", 
            "group_name": "M120-ssh", 
            "ip_permissions": [
                {
                    "from_port": 22, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 22"
                        }, 
                        {
                            "cidr_ip": "52.221.224.212/32"
                        }, 
                        {
                            "cidr_ip": "103.136.108.78/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 22, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-ssh", 
                "Name": "M120-ssh"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:15,529 p=10450 u=root |  TASK [ec2_dege : list of ssh the security group id.] *******************************************************************************************************
2020-01-08 20:10:15,530 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:9
2020-01-08 20:10:15,558 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow all on port 22', u'cidr_ip': u'154.197.29.34/32'}, {u'cidr_ip': u'52.221.224.212/32'}, {u'cidr_ip': u'103.136.108.78/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port ssh to the user', u'tags': {u'Environment': u'M120-ssh', u'Name': u'M120-ssh'}, u'group_name': u'M120-ssh', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-066bafabf3e4021cc', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ssh_id": "sg-066bafabf3e4021cc"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port ssh to the user", 
        "group_id": "sg-066bafabf3e4021cc", 
        "group_name": "M120-ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 22"
                    }, 
                    {
                        "cidr_ip": "52.221.224.212/32"
                    }, 
                    {
                        "cidr_ip": "103.136.108.78/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-ssh", 
            "Name": "M120-ssh"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:10:15,598 p=10450 u=root |  TASK [ec2_dege : Get ALL SG ID] ****************************************************************************************************************************
2020-01-08 20:10:15,598 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:14
2020-01-08 20:10:15,617 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:15,617 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:15,626 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485415.62-183649136631155 `" && echo ansible-tmp-1578485415.62-183649136631155="` echo /root/.ansible/tmp/ansible-tmp-1578485415.62-183649136631155 `" ) && sleep 0'
2020-01-08 20:10:15,638 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:10:15,638 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmphto7jm TO /root/.ansible/tmp/ansible-tmp-1578485415.62-183649136631155/AnsiballZ_ec2_group_facts.py
2020-01-08 20:10:15,639 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485415.62-183649136631155/ /root/.ansible/tmp/ansible-tmp-1578485415.62-183649136631155/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:15,647 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485415.62-183649136631155/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:16,317 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485415.62-183649136631155/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:16,332 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-004a004e0482c5105", 
            "group_name": "M120-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.120.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-all", 
                "Name": "M120-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:16,371 p=10450 u=root |  TASK [ec2_dege : list of all the security group id.] *******************************************************************************************************
2020-01-08 20:10:16,371 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:21
2020-01-08 20:10:16,400 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.120.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M120-all', u'Name': u'M120-all'}, u'group_name': u'M120-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-004a004e0482c5105', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-004a004e0482c5105"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-004a004e0482c5105", 
        "group_name": "M120-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.120.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-all", 
            "Name": "M120-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:10:16,440 p=10450 u=root |  TASK [ec2_dege : Get ELB SG ID] ****************************************************************************************************************************
2020-01-08 20:10:16,440 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:26
2020-01-08 20:10:16,458 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:16,459 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:16,467 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485416.46-277926197529568 `" && echo ansible-tmp-1578485416.46-277926197529568="` echo /root/.ansible/tmp/ansible-tmp-1578485416.46-277926197529568 `" ) && sleep 0'
2020-01-08 20:10:16,479 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:10:16,480 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpL6x5qV TO /root/.ansible/tmp/ansible-tmp-1578485416.46-277926197529568/AnsiballZ_ec2_group_facts.py
2020-01-08 20:10:16,481 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485416.46-277926197529568/ /root/.ansible/tmp/ansible-tmp-1578485416.46-277926197529568/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:16,489 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485416.46-277926197529568/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:17,163 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485416.46-277926197529568/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:17,178 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-elb-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0d6810116d46f5ac2", 
            "group_name": "M120-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-elb-80-443-all", 
                "Name": "M120-elb-80-443-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:17,218 p=10450 u=root |  TASK [ec2_dege : list of 80 443 the security group id.] ****************************************************************************************************
2020-01-08 20:10:17,218 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:33
2020-01-08 20:10:17,248 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M120-elb-80-443-all', u'Name': u'M120-elb-80-443-all'}, u'group_name': u'M120-elb-80-443-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-0d6810116d46f5ac2', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_80_443_id": "sg-0d6810116d46f5ac2"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0d6810116d46f5ac2", 
        "group_name": "M120-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-elb-80-443-all", 
            "Name": "M120-elb-80-443-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:10:17,288 p=10450 u=root |  TASK [ec2_dege : Get BACKEND SG ID] ************************************************************************************************************************
2020-01-08 20:10:17,288 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:38
2020-01-08 20:10:17,306 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:17,306 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:17,315 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485417.31-72408259200056 `" && echo ansible-tmp-1578485417.31-72408259200056="` echo /root/.ansible/tmp/ansible-tmp-1578485417.31-72408259200056 `" ) && sleep 0'
2020-01-08 20:10:17,326 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:10:17,327 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpgi5oga TO /root/.ansible/tmp/ansible-tmp-1578485417.31-72408259200056/AnsiballZ_ec2_group_facts.py
2020-01-08 20:10:17,328 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485417.31-72408259200056/ /root/.ansible/tmp/ansible-tmp-1578485417.31-72408259200056/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:17,336 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485417.31-72408259200056/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:18,006 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485417.31-72408259200056/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:18,023 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-backend-acl"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-09d79c3889b2c530a", 
            "group_name": "M120-backend-acl", 
            "ip_permissions": [
                {
                    "from_port": 7882, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7882"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7882, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 7881, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7881"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7881, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-backend-acl", 
                "Name": "M120-backend-acl"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:18,062 p=10450 u=root |  TASK [ec2_dege : list of 7880 7881 the security group id.] *************************************************************************************************
2020-01-08 20:10:18,062 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:45
2020-01-08 20:10:18,099 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7882, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7882, u'ip_ranges': [{u'description': u'allow all on port 7882', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 7881, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7881, u'ip_ranges': [{u'description': u'allow all on port 7881', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M120-backend-acl', u'Name': u'M120-backend-acl'}, u'group_name': u'M120-backend-acl', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-09d79c3889b2c530a', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_backend_acl_id": "sg-09d79c3889b2c530a"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-09d79c3889b2c530a", 
        "group_name": "M120-backend-acl", 
        "ip_permissions": [
            {
                "from_port": 7882, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7882"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7882, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 7881, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7881"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7881, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-backend-acl", 
            "Name": "M120-backend-acl"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:10:18,139 p=10450 u=root |  TASK [ec2_dege : Provision ec2 instance] *******************************************************************************************************************
2020-01-08 20:10:18,140 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:50
2020-01-08 20:10:18,169 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:18,169 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:18,178 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485418.17-172296974898392 `" && echo ansible-tmp-1578485418.17-172296974898392="` echo /root/.ansible/tmp/ansible-tmp-1578485418.17-172296974898392 `" ) && sleep 0'
2020-01-08 20:10:18,190 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2.py
2020-01-08 20:10:18,190 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpQ1RV6D TO /root/.ansible/tmp/ansible-tmp-1578485418.17-172296974898392/AnsiballZ_ec2.py
2020-01-08 20:10:18,191 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485418.17-172296974898392/ /root/.ansible/tmp/ansible-tmp-1578485418.17-172296974898392/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:10:18,200 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485418.17-172296974898392/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:10:30,450 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485418.17-172296974898392/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:30,471 p=10450 u=root |  changed: [localhost] => {
    "changed": true, 
    "instance_ids": [
        "i-070a1b83007907b1a"
    ], 
    "instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-0c1440ca6a59d31ce"
                }
            }, 
            "dns_name": "ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-09d79c3889b2c530a": "M120-backend-acl", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-070a1b83007907b1a", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "launch_time": "2020-01-08T12:10:19.000Z", 
            "placement": "ap-southeast-1b", 
            "private_dns_name": "ip-10-120-11-168.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.11.168", 
            "public_dns_name": "ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.250.55.212", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-edge-download-service", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ], 
    "invocation": {
        "module_args": {
            "assign_public_ip": true, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "count": 1, 
            "count_tag": {
                "Name": "M120-edge-download-service"
            }, 
            "debug_botocore_endpoint_logs": false, 
            "ebs_optimized": false, 
            "ec2_url": null, 
            "exact_count": 1, 
            "group": null, 
            "group_id": [
                "sg-066bafabf3e4021cc", 
                "sg-004a004e0482c5105", 
                "sg-0d6810116d46f5ac2", 
                "sg-09d79c3889b2c530a"
            ], 
            "id": null, 
            "image": "ami-0208d16fd11190da6", 
            "instance_ids": null, 
            "instance_initiated_shutdown_behavior": "stop", 
            "instance_profile_name": "", 
            "instance_tags": {
                "Name": "M120-edge-download-service", 
                "env": ""
            }, 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "monitoring": true, 
            "network_interfaces": null, 
            "placement_group": null, 
            "private_ip": null, 
            "profile": null, 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "source_dest_check": null, 
            "spot_launch_group": null, 
            "spot_price": null, 
            "spot_type": "one-time", 
            "spot_wait_timeout": 600, 
            "state": "present", 
            "tenancy": "default", 
            "termination_protection": true, 
            "user_data": null, 
            "validate_certs": true, 
            "volumes": [
                {
                    "delete_on_termination": false, 
                    "device_name": "/dev/sda1", 
                    "volume_size": 50, 
                    "volume_type": "gp2"
                }
            ], 
            "vpc_subnet_id": "subnet-088c7b9e0c3425f92", 
            "wait": true, 
            "wait_timeout": 300, 
            "zone": null
        }
    }, 
    "tagged_instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-0c1440ca6a59d31ce"
                }
            }, 
            "dns_name": "ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-09d79c3889b2c530a": "M120-backend-acl", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-070a1b83007907b1a", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "launch_time": "2020-01-08T12:10:19.000Z", 
            "placement": "ap-southeast-1b", 
            "private_dns_name": "ip-10-120-11-168.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.11.168", 
            "public_dns_name": "ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.250.55.212", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-edge-download-service", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ]
}
2020-01-08 20:10:30,510 p=10450 u=root |  TASK [ec2_dege : create EIP] *******************************************************************************************************************************
2020-01-08 20:10:30,511 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:80
2020-01-08 20:10:30,527 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:30,527 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:30,536 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485430.53-189154855407699 `" && echo ansible-tmp-1578485430.53-189154855407699="` echo /root/.ansible/tmp/ansible-tmp-1578485430.53-189154855407699 `" ) && sleep 0'
2020-01-08 20:10:30,548 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:10:30,548 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpFIcPKU TO /root/.ansible/tmp/ansible-tmp-1578485430.53-189154855407699/AnsiballZ_ec2_eip.py
2020-01-08 20:10:30,549 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485430.53-189154855407699/ /root/.ansible/tmp/ansible-tmp-1578485430.53-189154855407699/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:30,557 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485430.53-189154855407699/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:30,978 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485430.53-189154855407699/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:30,991 p=10450 u=root |  changed: [localhost] => {
    "allocation_id": "eipalloc-0f6126abec70bdea2", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": null, 
            "ec2_url": null, 
            "in_vpc": false, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": null, 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": false, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "public_ip": "52.76.65.2"
}
2020-01-08 20:10:31,031 p=10450 u=root |  TASK [ec2_dege : set eip fact] *****************************************************************************************************************************
2020-01-08 20:10:31,032 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:85
2020-01-08 20:10:31,049 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "eip": "52.76.65.2"
    }, 
    "changed": false
}
2020-01-08 20:10:31,089 p=10450 u=root |  TASK [ec2_dege : Assign EIP address for web instances] *****************************************************************************************************
2020-01-08 20:10:31,089 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:89
2020-01-08 20:10:31,113 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:31,113 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:31,122 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485431.11-111306775665225 `" && echo ansible-tmp-1578485431.11-111306775665225="` echo /root/.ansible/tmp/ansible-tmp-1578485431.11-111306775665225 `" ) && sleep 0'
2020-01-08 20:10:31,133 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:10:31,134 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmppdvyJo TO /root/.ansible/tmp/ansible-tmp-1578485431.11-111306775665225/AnsiballZ_ec2_eip.py
2020-01-08 20:10:31,134 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485431.11-111306775665225/ /root/.ansible/tmp/ansible-tmp-1578485431.11-111306775665225/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:31,143 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485431.11-111306775665225/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:32,067 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485431.11-111306775665225/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:32,087 p=10450 u=root |  changed: [localhost] => (item={u'ramdisk': None, u'kernel': None, u'root_device_type': u'ebs', u'private_dns_name': u'ip-10-120-11-168.ap-southeast-1.compute.internal', u'block_device_mapping': {u'/dev/sda1': {u'status': u'attached', u'delete_on_termination': False, u'volume_id': u'vol-0c1440ca6a59d31ce'}}, u'key_name': u'hk-Production-ssh', u'public_ip': u'13.250.55.212', u'image_id': u'ami-0208d16fd11190da6', u'tenancy': u'default', u'private_ip': u'10.120.11.168', u'groups': {u'sg-066bafabf3e4021cc': u'M120-ssh', u'sg-09d79c3889b2c530a': u'M120-backend-acl', u'sg-004a004e0482c5105': u'M120-all', u'sg-0d6810116d46f5ac2': u'M120-elb-80-443-all'}, u'public_dns_name': u'ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com', u'state_code': 16, u'id': u'i-070a1b83007907b1a', u'tags': {u'Name': u'M120-edge-download-service', u'env': u''}, u'placement': u'ap-southeast-1b', u'ami_launch_index': u'0', u'dns_name': u'ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com', u'region': u'ap-southeast-1', u'ebs_optimized': False, u'launch_time': u'2020-01-08T12:10:19.000Z', u'instance_type': u't3.small', u'state': u'running', u'architecture': u'x86_64', u'hypervisor': u'xen', u'virtualization_type': u'hvm', u'root_device_name': u'/dev/sda1'}) => {
    "allocation_id": "eipalloc-0f6126abec70bdea2", 
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": "i-070a1b83007907b1a", 
            "ec2_url": null, 
            "in_vpc": true, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": "52.76.65.2", 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": true, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "ami_launch_index": "0", 
        "architecture": "x86_64", 
        "block_device_mapping": {
            "/dev/sda1": {
                "delete_on_termination": false, 
                "status": "attached", 
                "volume_id": "vol-0c1440ca6a59d31ce"
            }
        }, 
        "dns_name": "ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com", 
        "ebs_optimized": false, 
        "groups": {
            "sg-004a004e0482c5105": "M120-all", 
            "sg-066bafabf3e4021cc": "M120-ssh", 
            "sg-09d79c3889b2c530a": "M120-backend-acl", 
            "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
        }, 
        "hypervisor": "xen", 
        "id": "i-070a1b83007907b1a", 
        "image_id": "ami-0208d16fd11190da6", 
        "instance_type": "t3.small", 
        "kernel": null, 
        "key_name": "hk-Production-ssh", 
        "launch_time": "2020-01-08T12:10:19.000Z", 
        "placement": "ap-southeast-1b", 
        "private_dns_name": "ip-10-120-11-168.ap-southeast-1.compute.internal", 
        "private_ip": "10.120.11.168", 
        "public_dns_name": "ec2-13-250-55-212.ap-southeast-1.compute.amazonaws.com", 
        "public_ip": "13.250.55.212", 
        "ramdisk": null, 
        "region": "ap-southeast-1", 
        "root_device_name": "/dev/sda1", 
        "root_device_type": "ebs", 
        "state": "running", 
        "state_code": 16, 
        "tags": {
            "Name": "M120-edge-download-service", 
            "env": ""
        }, 
        "tenancy": "default", 
        "virtualization_type": "hvm"
    }, 
    "public_ip": "52.76.65.2"
}
2020-01-08 20:10:32,131 p=10450 u=root |  TASK [ec2_dege : Configure hostname in "/home/centos/aws-project"] *****************************************************************************************
2020-01-08 20:10:32,131 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:99
2020-01-08 20:10:32,152 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:32,152 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:32,161 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485432.15-115202033554546 `" && echo ansible-tmp-1578485432.15-115202033554546="` echo /root/.ansible/tmp/ansible-tmp-1578485432.15-115202033554546 `" ) && sleep 0'
2020-01-08 20:10:32,173 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:10:32,173 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpJ5EAqP TO /root/.ansible/tmp/ansible-tmp-1578485432.15-115202033554546/AnsiballZ_lineinfile.py
2020-01-08 20:10:32,174 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485432.15-115202033554546/ /root/.ansible/tmp/ansible-tmp-1578485432.15-115202033554546/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:32,183 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485432.15-115202033554546/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:32,284 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485432.15-115202033554546/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:32,297 p=10450 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hk_hosts (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hk_hosts (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hk_hosts (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hk_hosts (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hk_hosts", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "[M120-edge-download-service]\n52.76.65.2 ansible_ssh_user=centos ansible_ssh_private_key_file=/home/centos/aws-project/.keys/hk-Production-ssh\n", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts", 
            "regexp": "M120-edge-download-service", 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:10:32,337 p=10450 u=root |  TASK [ec2_dege : set pip fact] *****************************************************************************************************************************
2020-01-08 20:10:32,337 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:106
2020-01-08 20:10:32,356 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "pip": [
            "10.120.11.168"
        ]
    }, 
    "changed": false
}
2020-01-08 20:10:32,397 p=10450 u=root |  TASK [ec2_dege : Configure instances messages in "/home/centos/aws-project"] *******************************************************************************
2020-01-08 20:10:32,398 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances-backend.yml:110
2020-01-08 20:10:32,417 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:32,418 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:32,427 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485432.42-31219591123444 `" && echo ansible-tmp-1578485432.42-31219591123444="` echo /root/.ansible/tmp/ansible-tmp-1578485432.42-31219591123444 `" ) && sleep 0'
2020-01-08 20:10:32,439 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:10:32,440 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpGSZhae TO /root/.ansible/tmp/ansible-tmp-1578485432.42-31219591123444/AnsiballZ_lineinfile.py
2020-01-08 20:10:32,441 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485432.42-31219591123444/ /root/.ansible/tmp/ansible-tmp-1578485432.42-31219591123444/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:32,449 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485432.42-31219591123444/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:32,546 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485432.42-31219591123444/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:32,558 p=10450 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hk_instances (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hk_instances (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hk_instances (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hk_instances (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hk_instances", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "{ \"hostname\": \"M120-edge-download-service\",\"public_ip\": \"52.76.65.2\",\"private_ip\": \"10.120.11.168\",\"application_name\": \\[ \"[u'download_site_6hao', u'customer_6hao']\" \\] }", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hk_instances", 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:10:32,598 p=10450 u=root |  TASK [ec2_dege : VPC facts] ********************************************************************************************************************************
2020-01-08 20:10:32,599 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:3
2020-01-08 20:10:32,615 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:32,615 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:32,624 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485432.62-69495923448916 `" && echo ansible-tmp-1578485432.62-69495923448916="` echo /root/.ansible/tmp/ansible-tmp-1578485432.62-69495923448916 `" ) && sleep 0'
2020-01-08 20:10:32,636 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-08 20:10:32,636 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpV07qI7 TO /root/.ansible/tmp/ansible-tmp-1578485432.62-69495923448916/AnsiballZ_ec2_vpc_net_facts.py
2020-01-08 20:10:32,637 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485432.62-69495923448916/ /root/.ansible/tmp/ansible-tmp-1578485432.62-69495923448916/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:10:32,645 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485432.62-69495923448916/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:10:33,492 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485432.62-69495923448916/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:33,507 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M120"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.120.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0171dc4355afb2d57", 
                    "cidr_block": "10.120.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f1e92296", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-025e5ea3271f91941", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:33,547 p=10450 u=root |  TASK [ec2_dege : set fact: VPC ID] *************************************************************************************************************************
2020-01-08 20:10:33,547 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:10
2020-01-08 20:10:33,565 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-025e5ea3271f91941"
    }, 
    "changed": false
}
2020-01-08 20:10:33,605 p=10450 u=root |  TASK [ec2_dege : VPC subnet facts] *************************************************************************************************************************
2020-01-08 20:10:33,606 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:15
2020-01-08 20:10:33,622 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:33,623 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:33,632 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485433.62-5453787846545 `" && echo ansible-tmp-1578485433.62-5453787846545="` echo /root/.ansible/tmp/ansible-tmp-1578485433.62-5453787846545 `" ) && sleep 0'
2020-01-08 20:10:33,644 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-08 20:10:33,644 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpjv53gI TO /root/.ansible/tmp/ansible-tmp-1578485433.62-5453787846545/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-08 20:10:33,645 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485433.62-5453787846545/ /root/.ansible/tmp/ansible-tmp-1578485433.62-5453787846545/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:10:33,654 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485433.62-5453787846545/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:10:34,349 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485433.62-5453787846545/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:34,366 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-025e5ea3271f91941"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 229, 
            "cidr_block": "10.120.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a44bb4344c1a9e38", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-0a44bb4344c1a9e38", 
            "subnet_id": "subnet-0a44bb4344c1a9e38", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 230, 
            "cidr_block": "10.120.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-088c7b9e0c3425f92", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-088c7b9e0c3425f92", 
            "subnet_id": "subnet-088c7b9e0c3425f92", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 227, 
            "cidr_block": "10.120.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-05f2241d9964e4798", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-05f2241d9964e4798", 
            "subnet_id": "subnet-05f2241d9964e4798", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:34,406 p=10450 u=root |  TASK [ec2_dege : register just the IDs for each of the groups] *********************************************************************************************
2020-01-08 20:10:34,406 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/vpc_subnet_facts.yml:22
2020-01-08 20:10:34,426 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-05f2241d9964e4798", 
            "subnet-088c7b9e0c3425f92", 
            "subnet-0a44bb4344c1a9e38"
        ]
    }, 
    "changed": false
}
2020-01-08 20:10:34,466 p=10450 u=root |  TASK [ec2_dege : Create a new EC2 key] *********************************************************************************************************************
2020-01-08 20:10:34,466 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:2
2020-01-08 20:10:34,483 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:34,483 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:34,492 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485434.48-21575287334736 `" && echo ansible-tmp-1578485434.48-21575287334736="` echo /root/.ansible/tmp/ansible-tmp-1578485434.48-21575287334736 `" ) && sleep 0'
2020-01-08 20:10:34,503 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-08 20:10:34,503 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmp3syssI TO /root/.ansible/tmp/ansible-tmp-1578485434.48-21575287334736/AnsiballZ_ec2_key.py
2020-01-08 20:10:34,504 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485434.48-21575287334736/ /root/.ansible/tmp/ansible-tmp-1578485434.48-21575287334736/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:10:34,512 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485434.48-21575287334736/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:10:35,179 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485434.48-21575287334736/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:35,192 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "hk-Production-ssh", 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "38:84:37:c8:39:3a:31:b7:e5:2a:30:c1:26:8c:fe:ea:03:e8:41:92", 
        "name": "hk-Production-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-08 20:10:35,231 p=10450 u=root |  TASK [ec2_dege : Check directory exists or not.] ***********************************************************************************************************
2020-01-08 20:10:35,232 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:8
2020-01-08 20:10:35,253 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:35,254 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:35,262 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485435.25-110268433670020 `" && echo ansible-tmp-1578485435.25-110268433670020="` echo /root/.ansible/tmp/ansible-tmp-1578485435.25-110268433670020 `" ) && sleep 0'
2020-01-08 20:10:35,273 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:35,274 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpTVHJwN TO /root/.ansible/tmp/ansible-tmp-1578485435.25-110268433670020/AnsiballZ_stat.py
2020-01-08 20:10:35,275 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485435.25-110268433670020/ /root/.ansible/tmp/ansible-tmp-1578485435.25-110268433670020/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:35,283 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485435.25-110268433670020/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:35,384 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485435.25-110268433670020/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:35,400 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578365002.1148942, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484375.395159, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578484375.395159, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 63, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:35,443 p=10450 u=root |  TASK [ec2_dege : Make private key Dir] *********************************************************************************************************************
2020-01-08 20:10:35,443 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:12
2020-01-08 20:10:35,461 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:35,500 p=10450 u=root |  TASK [ec2_dege : Save private key] *************************************************************************************************************************
2020-01-08 20:10:35,500 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:16
2020-01-08 20:10:35,517 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:35,556 p=10450 u=root |  TASK [ec2_dege : Check directory  inventory exists or not.] ************************************************************************************************
2020-01-08 20:10:35,556 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:20
2020-01-08 20:10:35,573 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:35,573 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:35,582 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485435.57-156935764195619 `" && echo ansible-tmp-1578485435.57-156935764195619="` echo /root/.ansible/tmp/ansible-tmp-1578485435.57-156935764195619 `" ) && sleep 0'
2020-01-08 20:10:35,593 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:35,594 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmp4dZorN TO /root/.ansible/tmp/ansible-tmp-1578485435.57-156935764195619/AnsiballZ_stat.py
2020-01-08 20:10:35,594 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485435.57-156935764195619/ /root/.ansible/tmp/ansible-tmp-1578485435.57-156935764195619/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:35,603 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485435.57-156935764195619/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:35,706 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485435.57-156935764195619/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:35,722 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578484712.476196, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578485432.5360026, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578485432.5360026, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 80, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:35,762 p=10450 u=root |  TASK [ec2_dege : Make private key Dir] *********************************************************************************************************************
2020-01-08 20:10:35,762 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:24
2020-01-08 20:10:35,779 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:35,820 p=10450 u=root |  TASK [ec2_dege : Check File exists or not] *****************************************************************************************************************
2020-01-08 20:10:35,820 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:28
2020-01-08 20:10:35,837 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:35,837 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:35,846 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485435.84-19462495751084 `" && echo ansible-tmp-1578485435.84-19462495751084="` echo /root/.ansible/tmp/ansible-tmp-1578485435.84-19462495751084 `" ) && sleep 0'
2020-01-08 20:10:35,857 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:35,858 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpYSuVu3 TO /root/.ansible/tmp/ansible-tmp-1578485435.84-19462495751084/AnsiballZ_stat.py
2020-01-08 20:10:35,858 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485435.84-19462495751084/ /root/.ansible/tmp/ansible-tmp-1578485435.84-19462495751084/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:35,866 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485435.84-19462495751084/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:35,972 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485435.84-19462495751084/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:35,988 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578485432.274004, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "528d4e6591123bcbea9cbfc7975f7f99ff9bf2b8", 
        "ctime": 1578485432.274004, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4716665, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485432.274004, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 288, 
        "uid": 0, 
        "version": "1249437994", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:36,029 p=10450 u=root |  TASK [ec2_dege : Create file if does not exist] ************************************************************************************************************
2020-01-08 20:10:36,029 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:32
2020-01-08 20:10:36,047 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:36,087 p=10450 u=root |  TASK [ec2_dege : Check instances File exists or not] *******************************************************************************************************
2020-01-08 20:10:36,087 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:36
2020-01-08 20:10:36,103 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:36,103 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:36,112 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485436.1-163023385834402 `" && echo ansible-tmp-1578485436.1-163023385834402="` echo /root/.ansible/tmp/ansible-tmp-1578485436.1-163023385834402 `" ) && sleep 0'
2020-01-08 20:10:36,123 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:10:36,124 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpJRQ2TV TO /root/.ansible/tmp/ansible-tmp-1578485436.1-163023385834402/AnsiballZ_stat.py
2020-01-08 20:10:36,125 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485436.1-163023385834402/ /root/.ansible/tmp/ansible-tmp-1578485436.1-163023385834402/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:36,134 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485436.1-163023385834402/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:10:36,242 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485436.1-163023385834402/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:36,258 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578485432.5360026, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "0167d4ca7500dab6d3deccbd0495dfcbba9efec4", 
        "ctime": 1578485432.5360026, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4724384, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485432.5360026, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 383, 
        "uid": 0, 
        "version": "1730587703", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:10:36,297 p=10450 u=root |  TASK [ec2_dege : Create instances file if does not exist] **************************************************************************************************
2020-01-08 20:10:36,297 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/creata_keys.yml:40
2020-01-08 20:10:36,316 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:36,357 p=10450 u=root |  TASK [ec2_dege : provision 8081 port security group] *******************************************************************************************************
2020-01-08 20:10:36,357 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/merchant-sg.yml:3
2020-01-08 20:10:36,376 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:36,376 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:36,385 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485436.38-270849532245768 `" && echo ansible-tmp-1578485436.38-270849532245768="` echo /root/.ansible/tmp/ansible-tmp-1578485436.38-270849532245768 `" ) && sleep 0'
2020-01-08 20:10:36,397 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-08 20:10:36,398 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpLDNTed TO /root/.ansible/tmp/ansible-tmp-1578485436.38-270849532245768/AnsiballZ_ec2_group.py
2020-01-08 20:10:36,399 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485436.38-270849532245768/ /root/.ansible/tmp/ansible-tmp-1578485436.38-270849532245768/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:36,407 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485436.38-270849532245768/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:38,562 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485436.38-270849532245768/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:38,577 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "description": "opens port merchant to the user", 
    "group_id": "sg-04026c02f1e6abeed", 
    "group_name": "M120-hk-merchant", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port merchant to the user", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M120-hk-merchant", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "rules": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "from_port": "8081", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 8081", 
                    "to_port": "8081"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M120-hk-merchant", 
                "Name": "M120-hk-merchant"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 8081, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "description": "allow all on port 8081"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 8081, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M120-hk-merchant", 
        "Name": "M120-hk-merchant"
    }, 
    "vpc_id": "vpc-025e5ea3271f91941"
}
2020-01-08 20:10:38,617 p=10450 u=root |  TASK [ec2_dege : provision backend  7880 and 7881 and 7882 all security group] *****************************************************************************
2020-01-08 20:10:38,617 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/backend-acl-sg.yml:3
2020-01-08 20:10:38,636 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:38,636 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:38,645 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485438.64-5454735760195 `" && echo ansible-tmp-1578485438.64-5454735760195="` echo /root/.ansible/tmp/ansible-tmp-1578485438.64-5454735760195 `" ) && sleep 0'
2020-01-08 20:10:38,657 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-08 20:10:38,658 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpiLAvMc TO /root/.ansible/tmp/ansible-tmp-1578485438.64-5454735760195/AnsiballZ_ec2_group.py
2020-01-08 20:10:38,659 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485438.64-5454735760195/ /root/.ansible/tmp/ansible-tmp-1578485438.64-5454735760195/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:38,667 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485438.64-5454735760195/AnsiballZ_ec2_group.py && sleep 0'
2020-01-08 20:10:40,765 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485438.64-5454735760195/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:40,784 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "description": "opens port 7880 7881 7882 to the world", 
    "group_id": "sg-09d79c3889b2c530a", 
    "group_name": "M120-backend-acl", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port 7880 7881 7882 to the world", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M120-backend-acl", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-southeast-1", 
            "rules": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7880", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7880", 
                    "to_port": "7880"
                }, 
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7881", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7881", 
                    "to_port": "7881"
                }, 
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7882", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7882", 
                    "to_port": "7882"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M120-backend-acl", 
                "Name": "M120-backend-acl"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 7882, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7882"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7882, 
            "user_id_group_pairs": []
        }, 
        {
            "from_port": 7881, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7881"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7881, 
            "user_id_group_pairs": []
        }, 
        {
            "from_port": 7880, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7880"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7880, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M120-backend-acl", 
        "Name": "M120-backend-acl"
    }, 
    "vpc_id": "vpc-025e5ea3271f91941"
}
2020-01-08 20:10:40,823 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:10:40,823 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:7
2020-01-08 20:10:40,893 p=10450 u=root |  included: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml for localhost
2020-01-08 20:10:40,944 p=10450 u=root |  TASK [ec2_dege : Get SSH SG ID] ****************************************************************************************************************************
2020-01-08 20:10:40,944 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:2
2020-01-08 20:10:40,963 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:40,963 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:40,972 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485440.96-174435805834934 `" && echo ansible-tmp-1578485440.96-174435805834934="` echo /root/.ansible/tmp/ansible-tmp-1578485440.96-174435805834934 `" ) && sleep 0'
2020-01-08 20:10:40,983 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:10:40,984 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpCaQDQh TO /root/.ansible/tmp/ansible-tmp-1578485440.96-174435805834934/AnsiballZ_ec2_group_facts.py
2020-01-08 20:10:40,985 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485440.96-174435805834934/ /root/.ansible/tmp/ansible-tmp-1578485440.96-174435805834934/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:40,994 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485440.96-174435805834934/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:41,665 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485440.96-174435805834934/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:41,681 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-ssh"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port ssh to the user", 
            "group_id": "sg-066bafabf3e4021cc", 
            "group_name": "M120-ssh", 
            "ip_permissions": [
                {
                    "from_port": 22, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 22"
                        }, 
                        {
                            "cidr_ip": "52.221.224.212/32"
                        }, 
                        {
                            "cidr_ip": "103.136.108.78/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 22, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-ssh", 
                "Name": "M120-ssh"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:41,720 p=10450 u=root |  TASK [ec2_dege : list of ssh the security group id.] *******************************************************************************************************
2020-01-08 20:10:41,720 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:9
2020-01-08 20:10:41,749 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow all on port 22', u'cidr_ip': u'154.197.29.34/32'}, {u'cidr_ip': u'52.221.224.212/32'}, {u'cidr_ip': u'103.136.108.78/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port ssh to the user', u'tags': {u'Environment': u'M120-ssh', u'Name': u'M120-ssh'}, u'group_name': u'M120-ssh', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-066bafabf3e4021cc', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ssh_id": "sg-066bafabf3e4021cc"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port ssh to the user", 
        "group_id": "sg-066bafabf3e4021cc", 
        "group_name": "M120-ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 22"
                    }, 
                    {
                        "cidr_ip": "52.221.224.212/32"
                    }, 
                    {
                        "cidr_ip": "103.136.108.78/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-ssh", 
            "Name": "M120-ssh"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:10:41,790 p=10450 u=root |  TASK [ec2_dege : Get ALL SG ID] ****************************************************************************************************************************
2020-01-08 20:10:41,790 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:14
2020-01-08 20:10:41,809 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:41,809 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:41,818 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485441.81-144898145726602 `" && echo ansible-tmp-1578485441.81-144898145726602="` echo /root/.ansible/tmp/ansible-tmp-1578485441.81-144898145726602 `" ) && sleep 0'
2020-01-08 20:10:41,829 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:10:41,830 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmp30aRfa TO /root/.ansible/tmp/ansible-tmp-1578485441.81-144898145726602/AnsiballZ_ec2_group_facts.py
2020-01-08 20:10:41,831 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485441.81-144898145726602/ /root/.ansible/tmp/ansible-tmp-1578485441.81-144898145726602/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:41,839 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485441.81-144898145726602/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:42,501 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485441.81-144898145726602/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:42,516 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-004a004e0482c5105", 
            "group_name": "M120-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.120.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-all", 
                "Name": "M120-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:42,556 p=10450 u=root |  TASK [ec2_dege : list of all the security group id.] *******************************************************************************************************
2020-01-08 20:10:42,556 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:21
2020-01-08 20:10:42,586 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.120.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M120-all', u'Name': u'M120-all'}, u'group_name': u'M120-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-004a004e0482c5105', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-004a004e0482c5105"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-004a004e0482c5105", 
        "group_name": "M120-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.120.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-all", 
            "Name": "M120-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:10:42,626 p=10450 u=root |  TASK [ec2_dege : Get ELB SG ID] ****************************************************************************************************************************
2020-01-08 20:10:42,626 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:26
2020-01-08 20:10:42,644 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:42,645 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:42,654 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485442.64-280121436389750 `" && echo ansible-tmp-1578485442.64-280121436389750="` echo /root/.ansible/tmp/ansible-tmp-1578485442.64-280121436389750 `" ) && sleep 0'
2020-01-08 20:10:42,665 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:10:42,666 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpmK129U TO /root/.ansible/tmp/ansible-tmp-1578485442.64-280121436389750/AnsiballZ_ec2_group_facts.py
2020-01-08 20:10:42,667 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485442.64-280121436389750/ /root/.ansible/tmp/ansible-tmp-1578485442.64-280121436389750/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:42,675 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485442.64-280121436389750/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:10:43,341 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485442.64-280121436389750/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:43,356 p=10450 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-elb-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0d6810116d46f5ac2", 
            "group_name": "M120-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-elb-80-443-all", 
                "Name": "M120-elb-80-443-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:10:43,396 p=10450 u=root |  TASK [ec2_dege : list of 80 443 the security group id.] ****************************************************************************************************
2020-01-08 20:10:43,396 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:33
2020-01-08 20:10:43,425 p=10450 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M120-elb-80-443-all', u'Name': u'M120-elb-80-443-all'}, u'group_name': u'M120-elb-80-443-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-0d6810116d46f5ac2', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_80_443_id": "sg-0d6810116d46f5ac2"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0d6810116d46f5ac2", 
        "group_name": "M120-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-elb-80-443-all", 
            "Name": "M120-elb-80-443-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:10:43,466 p=10450 u=root |  TASK [ec2_dege : Provision ec2 instance] *******************************************************************************************************************
2020-01-08 20:10:43,466 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:38
2020-01-08 20:10:43,495 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:43,495 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:43,504 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485443.5-97775216475106 `" && echo ansible-tmp-1578485443.5-97775216475106="` echo /root/.ansible/tmp/ansible-tmp-1578485443.5-97775216475106 `" ) && sleep 0'
2020-01-08 20:10:43,516 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2.py
2020-01-08 20:10:43,517 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmp5WIOae TO /root/.ansible/tmp/ansible-tmp-1578485443.5-97775216475106/AnsiballZ_ec2.py
2020-01-08 20:10:43,518 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485443.5-97775216475106/ /root/.ansible/tmp/ansible-tmp-1578485443.5-97775216475106/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:10:43,526 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485443.5-97775216475106/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:10:55,642 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485443.5-97775216475106/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:55,663 p=10450 u=root |  changed: [localhost] => {
    "changed": true, 
    "instance_ids": [
        "i-0719defd7e66c2161"
    ], 
    "instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-06badc75426a0e673"
                }
            }, 
            "dns_name": "ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-0719defd7e66c2161", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "launch_time": "2020-01-08T12:10:44.000Z", 
            "placement": "ap-southeast-1c", 
            "private_dns_name": "ip-10-120-12-53.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.12.53", 
            "public_dns_name": "ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.251.60.134", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-edge-h5", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ], 
    "invocation": {
        "module_args": {
            "assign_public_ip": true, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "count": 1, 
            "count_tag": {
                "Name": "M120-edge-h5"
            }, 
            "debug_botocore_endpoint_logs": false, 
            "ebs_optimized": false, 
            "ec2_url": null, 
            "exact_count": 1, 
            "group": null, 
            "group_id": [
                "sg-066bafabf3e4021cc", 
                "sg-004a004e0482c5105", 
                "sg-0d6810116d46f5ac2"
            ], 
            "id": null, 
            "image": "ami-0208d16fd11190da6", 
            "instance_ids": null, 
            "instance_initiated_shutdown_behavior": "stop", 
            "instance_profile_name": "", 
            "instance_tags": {
                "Name": "M120-edge-h5", 
                "env": ""
            }, 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "monitoring": true, 
            "network_interfaces": null, 
            "placement_group": null, 
            "private_ip": null, 
            "profile": null, 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "source_dest_check": null, 
            "spot_launch_group": null, 
            "spot_price": null, 
            "spot_type": "one-time", 
            "spot_wait_timeout": 600, 
            "state": "present", 
            "tenancy": "default", 
            "termination_protection": true, 
            "user_data": null, 
            "validate_certs": true, 
            "volumes": [
                {
                    "delete_on_termination": false, 
                    "device_name": "/dev/sda1", 
                    "volume_size": 50, 
                    "volume_type": "gp2"
                }
            ], 
            "vpc_subnet_id": "subnet-0a44bb4344c1a9e38", 
            "wait": true, 
            "wait_timeout": 300, 
            "zone": null
        }
    }, 
    "tagged_instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-06badc75426a0e673"
                }
            }, 
            "dns_name": "ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-0719defd7e66c2161", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "hk-Production-ssh", 
            "launch_time": "2020-01-08T12:10:44.000Z", 
            "placement": "ap-southeast-1c", 
            "private_dns_name": "ip-10-120-12-53.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.12.53", 
            "public_dns_name": "ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.251.60.134", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-edge-h5", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ]
}
2020-01-08 20:10:55,702 p=10450 u=root |  TASK [ec2_dege : create EIP] *******************************************************************************************************************************
2020-01-08 20:10:55,702 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:67
2020-01-08 20:10:55,719 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:55,719 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:55,728 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485455.72-202786664756866 `" && echo ansible-tmp-1578485455.72-202786664756866="` echo /root/.ansible/tmp/ansible-tmp-1578485455.72-202786664756866 `" ) && sleep 0'
2020-01-08 20:10:55,741 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:10:55,741 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpI63JYn TO /root/.ansible/tmp/ansible-tmp-1578485455.72-202786664756866/AnsiballZ_ec2_eip.py
2020-01-08 20:10:55,742 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485455.72-202786664756866/ /root/.ansible/tmp/ansible-tmp-1578485455.72-202786664756866/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:55,752 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485455.72-202786664756866/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:56,189 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485455.72-202786664756866/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:56,202 p=10450 u=root |  changed: [localhost] => {
    "allocation_id": "eipalloc-00f205fe902b95c56", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": null, 
            "ec2_url": null, 
            "in_vpc": false, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": null, 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": false, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "public_ip": "54.169.49.247"
}
2020-01-08 20:10:56,242 p=10450 u=root |  TASK [ec2_dege : set eip fact] *****************************************************************************************************************************
2020-01-08 20:10:56,242 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:72
2020-01-08 20:10:56,260 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "eip": "54.169.49.247"
    }, 
    "changed": false
}
2020-01-08 20:10:56,300 p=10450 u=root |  TASK [ec2_dege : Assign EIP address for web instances] *****************************************************************************************************
2020-01-08 20:10:56,300 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:76
2020-01-08 20:10:56,323 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:56,324 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:56,332 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485456.32-92401337416076 `" && echo ansible-tmp-1578485456.32-92401337416076="` echo /root/.ansible/tmp/ansible-tmp-1578485456.32-92401337416076 `" ) && sleep 0'
2020-01-08 20:10:56,344 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:10:56,344 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpjnLfQu TO /root/.ansible/tmp/ansible-tmp-1578485456.32-92401337416076/AnsiballZ_ec2_eip.py
2020-01-08 20:10:56,345 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485456.32-92401337416076/ /root/.ansible/tmp/ansible-tmp-1578485456.32-92401337416076/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:56,353 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485456.32-92401337416076/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:10:57,248 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485456.32-92401337416076/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:57,266 p=10450 u=root |  changed: [localhost] => (item={u'ramdisk': None, u'kernel': None, u'root_device_type': u'ebs', u'private_dns_name': u'ip-10-120-12-53.ap-southeast-1.compute.internal', u'block_device_mapping': {u'/dev/sda1': {u'status': u'attached', u'delete_on_termination': False, u'volume_id': u'vol-06badc75426a0e673'}}, u'key_name': u'hk-Production-ssh', u'public_ip': u'13.251.60.134', u'image_id': u'ami-0208d16fd11190da6', u'tenancy': u'default', u'private_ip': u'10.120.12.53', u'groups': {u'sg-066bafabf3e4021cc': u'M120-ssh', u'sg-004a004e0482c5105': u'M120-all', u'sg-0d6810116d46f5ac2': u'M120-elb-80-443-all'}, u'public_dns_name': u'ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com', u'state_code': 16, u'id': u'i-0719defd7e66c2161', u'tags': {u'Name': u'M120-edge-h5', u'env': u''}, u'placement': u'ap-southeast-1c', u'ami_launch_index': u'0', u'dns_name': u'ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com', u'region': u'ap-southeast-1', u'ebs_optimized': False, u'launch_time': u'2020-01-08T12:10:44.000Z', u'instance_type': u't3.small', u'state': u'running', u'architecture': u'x86_64', u'hypervisor': u'xen', u'virtualization_type': u'hvm', u'root_device_name': u'/dev/sda1'}) => {
    "allocation_id": "eipalloc-00f205fe902b95c56", 
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": "i-0719defd7e66c2161", 
            "ec2_url": null, 
            "in_vpc": true, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": "54.169.49.247", 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": true, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "ami_launch_index": "0", 
        "architecture": "x86_64", 
        "block_device_mapping": {
            "/dev/sda1": {
                "delete_on_termination": false, 
                "status": "attached", 
                "volume_id": "vol-06badc75426a0e673"
            }
        }, 
        "dns_name": "ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com", 
        "ebs_optimized": false, 
        "groups": {
            "sg-004a004e0482c5105": "M120-all", 
            "sg-066bafabf3e4021cc": "M120-ssh", 
            "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
        }, 
        "hypervisor": "xen", 
        "id": "i-0719defd7e66c2161", 
        "image_id": "ami-0208d16fd11190da6", 
        "instance_type": "t3.small", 
        "kernel": null, 
        "key_name": "hk-Production-ssh", 
        "launch_time": "2020-01-08T12:10:44.000Z", 
        "placement": "ap-southeast-1c", 
        "private_dns_name": "ip-10-120-12-53.ap-southeast-1.compute.internal", 
        "private_ip": "10.120.12.53", 
        "public_dns_name": "ec2-13-251-60-134.ap-southeast-1.compute.amazonaws.com", 
        "public_ip": "13.251.60.134", 
        "ramdisk": null, 
        "region": "ap-southeast-1", 
        "root_device_name": "/dev/sda1", 
        "root_device_type": "ebs", 
        "state": "running", 
        "state_code": 16, 
        "tags": {
            "Name": "M120-edge-h5", 
            "env": ""
        }, 
        "tenancy": "default", 
        "virtualization_type": "hvm"
    }, 
    "public_ip": "54.169.49.247"
}
2020-01-08 20:10:57,310 p=10450 u=root |  TASK [ec2_dege : Configure hostname in "/home/centos/aws-project"] *****************************************************************************************
2020-01-08 20:10:57,310 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:86
2020-01-08 20:10:57,332 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:57,332 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:57,341 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485457.33-91694097384455 `" && echo ansible-tmp-1578485457.33-91694097384455="` echo /root/.ansible/tmp/ansible-tmp-1578485457.33-91694097384455 `" ) && sleep 0'
2020-01-08 20:10:57,354 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:10:57,354 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpqrN4_7 TO /root/.ansible/tmp/ansible-tmp-1578485457.33-91694097384455/AnsiballZ_lineinfile.py
2020-01-08 20:10:57,355 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485457.33-91694097384455/ /root/.ansible/tmp/ansible-tmp-1578485457.33-91694097384455/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:57,364 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485457.33-91694097384455/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:57,462 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485457.33-91694097384455/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:57,475 p=10450 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hk_hosts (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hk_hosts (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hk_hosts (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hk_hosts (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hk_hosts", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "[M120-edge-h5]\n54.169.49.247 ansible_ssh_user=centos ansible_ssh_private_key_file=/home/centos/aws-project/.keys/hk-Production-ssh\n", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts", 
            "regexp": "M120-edge-h5", 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:10:57,516 p=10450 u=root |  TASK [ec2_dege : set pip fact] *****************************************************************************************************************************
2020-01-08 20:10:57,516 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:93
2020-01-08 20:10:57,535 p=10450 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "pip": [
            "10.120.12.53"
        ]
    }, 
    "changed": false
}
2020-01-08 20:10:57,577 p=10450 u=root |  TASK [ec2_dege : Configure instances messages in "/home/centos/aws-project"] *******************************************************************************
2020-01-08 20:10:57,578 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/instances.yml:97
2020-01-08 20:10:57,598 p=10450 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:10:57,598 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:10:57,607 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578485457.6-236084643931247 `" && echo ansible-tmp-1578485457.6-236084643931247="` echo /root/.ansible/tmp/ansible-tmp-1578485457.6-236084643931247 `" ) && sleep 0'
2020-01-08 20:10:57,618 p=10450 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:10:57,619 p=10450 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-10450Vhygr7/tmpI8uYHq TO /root/.ansible/tmp/ansible-tmp-1578485457.6-236084643931247/AnsiballZ_lineinfile.py
2020-01-08 20:10:57,619 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578485457.6-236084643931247/ /root/.ansible/tmp/ansible-tmp-1578485457.6-236084643931247/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:57,628 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578485457.6-236084643931247/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:10:57,724 p=10450 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578485457.6-236084643931247/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:10:57,737 p=10450 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hk_instances (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hk_instances (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hk_instances (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hk_instances (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hk_instances", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "{ \"hostname\": \"M120-edge-h5\",\"public_ip\": \"54.169.49.247\",\"private_ip\": \"10.120.12.53\",\"application_name\": \\[ \"[u'H5_6hao']\" \\] }", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hk_instances", 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:10:57,777 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:10:57,777 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:10
2020-01-08 20:10:57,800 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:57,844 p=10450 u=root |  TASK [ec2_dege : include_tasks] ****************************************************************************************************************************
2020-01-08 20:10:57,844 p=10450 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2_dege/tasks/main.yml:13
2020-01-08 20:10:57,861 p=10450 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:10:57,862 p=10450 u=root |  META: ran handlers
2020-01-08 20:10:57,862 p=10450 u=root |  META: ran handlers
2020-01-08 20:10:57,864 p=10450 u=root |  PLAY RECAP *************************************************************************************************************************************************
2020-01-08 20:10:57,864 p=10450 u=root |  localhost                  : ok=84   changed=17   unreachable=0    failed=0    skipped=19   rescued=0    ignored=0   
2020-01-08 20:27:15,921 p=17757 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-08 20:27:15,921 p=17757 u=root |  Using /home/centos/aws-project/001.aws-base-ec2/ansible.cfg as config file
2020-01-08 20:27:15,929 p=17757 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-08 20:27:15,929 p=17757 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-08 20:27:15,930 p=17757 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-08 20:27:15,933 p=17757 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-08 20:27:15,935 p=17757 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-08 20:27:16,183 p=17757 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-08 20:27:16,335 p=17757 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-08 20:27:16,398 p=17757 u=root |  PLAYBOOK: 03.ec2.yml ***************************************************************************************************************************************
2020-01-08 20:27:16,398 p=17757 u=root |  1 plays in 03.ec2.yml
2020-01-08 20:27:16,427 p=17757 u=root |  PLAY [Create ec2 instance] *********************************************************************************************************************************
2020-01-08 20:27:16,443 p=17757 u=root |  TASK [Gathering Facts] *************************************************************************************************************************************
2020-01-08 20:27:16,443 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/03.ec2.yml:2
2020-01-08 20:27:16,454 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:16,454 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:16,463 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486436.45-219531031097990 `" && echo ansible-tmp-1578486436.45-219531031097990="` echo /root/.ansible/tmp/ansible-tmp-1578486436.45-219531031097990 `" ) && sleep 0'
2020-01-08 20:27:16,833 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-08 20:27:16,834 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmp01Uyeg TO /root/.ansible/tmp/ansible-tmp-1578486436.45-219531031097990/AnsiballZ_setup.py
2020-01-08 20:27:16,835 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486436.45-219531031097990/ /root/.ansible/tmp/ansible-tmp-1578486436.45-219531031097990/AnsiballZ_setup.py && sleep 0'
2020-01-08 20:27:16,844 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486436.45-219531031097990/AnsiballZ_setup.py && sleep 0'
2020-01-08 20:27:17,402 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486436.45-219531031097990/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:17,472 p=17757 u=root |  ok: [localhost]
2020-01-08 20:27:17,473 p=17757 u=root |  META: ran handlers
2020-01-08 20:27:17,513 p=17757 u=root |  TASK [ec2 : Create a new EC2 key] **************************************************************************************************************************
2020-01-08 20:27:17,513 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-08 20:27:17,529 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:17,529 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:17,538 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486437.53-62435838924290 `" && echo ansible-tmp-1578486437.53-62435838924290="` echo /root/.ansible/tmp/ansible-tmp-1578486437.53-62435838924290 `" ) && sleep 0'
2020-01-08 20:27:17,771 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-08 20:27:17,772 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpyrA5nI TO /root/.ansible/tmp/ansible-tmp-1578486437.53-62435838924290/AnsiballZ_ec2_key.py
2020-01-08 20:27:17,773 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486437.53-62435838924290/ /root/.ansible/tmp/ansible-tmp-1578486437.53-62435838924290/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:27:17,782 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486437.53-62435838924290/AnsiballZ_ec2_key.py && sleep 0'
2020-01-08 20:27:18,448 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486437.53-62435838924290/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:18,461 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m120-ssh", 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "18:72:64:17:3a:93:86:df:16:f0:2d:61:ed:f9:b1:2f:aa:fe:62:eb", 
        "name": "m120-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-08 20:27:18,500 p=17757 u=root |  TASK [ec2 : Check directory exists or not.] ****************************************************************************************************************
2020-01-08 20:27:18,500 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-08 20:27:18,516 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:18,517 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:18,525 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486438.52-168207710977225 `" && echo ansible-tmp-1578486438.52-168207710977225="` echo /root/.ansible/tmp/ansible-tmp-1578486438.52-168207710977225 `" ) && sleep 0'
2020-01-08 20:27:18,732 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:27:18,733 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpZ98LxN TO /root/.ansible/tmp/ansible-tmp-1578486438.52-168207710977225/AnsiballZ_stat.py
2020-01-08 20:27:18,733 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486438.52-168207710977225/ /root/.ansible/tmp/ansible-tmp-1578486438.52-168207710977225/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:18,742 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486438.52-168207710977225/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:18,843 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486438.52-168207710977225/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:18,859 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578365002.1148942, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484375.395159, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578484375.395159, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 63, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:27:18,898 p=17757 u=root |  TASK [ec2 : Make private key Dir] **************************************************************************************************************************
2020-01-08 20:27:18,898 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-08 20:27:18,914 p=17757 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:27:18,954 p=17757 u=root |  TASK [ec2 : Save private key] ******************************************************************************************************************************
2020-01-08 20:27:18,954 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-08 20:27:18,971 p=17757 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:27:19,011 p=17757 u=root |  TASK [ec2 : Check directory  inventory exists or not.] *****************************************************************************************************
2020-01-08 20:27:19,011 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-08 20:27:19,026 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:19,026 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:19,035 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486439.03-251296341232273 `" && echo ansible-tmp-1578486439.03-251296341232273="` echo /root/.ansible/tmp/ansible-tmp-1578486439.03-251296341232273 `" ) && sleep 0'
2020-01-08 20:27:19,045 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:27:19,046 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmp58kcLA TO /root/.ansible/tmp/ansible-tmp-1578486439.03-251296341232273/AnsiballZ_stat.py
2020-01-08 20:27:19,047 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486439.03-251296341232273/ /root/.ansible/tmp/ansible-tmp-1578486439.03-251296341232273/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:19,055 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486439.03-251296341232273/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:19,154 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486439.03-251296341232273/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:19,170 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578485606.6549885, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578486424.1852274, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578486424.1852274, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 80, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-08 20:27:19,209 p=17757 u=root |  TASK [ec2 : Make private key Dir] **************************************************************************************************************************
2020-01-08 20:27:19,209 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-08 20:27:19,225 p=17757 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:27:19,265 p=17757 u=root |  TASK [ec2 : Check File exists or not] **********************************************************************************************************************
2020-01-08 20:27:19,265 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-08 20:27:19,280 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:19,281 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:19,289 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486439.28-168674656762535 `" && echo ansible-tmp-1578486439.28-168674656762535="` echo /root/.ansible/tmp/ansible-tmp-1578486439.28-168674656762535 `" ) && sleep 0'
2020-01-08 20:27:19,300 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:27:19,301 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpxwdTUC TO /root/.ansible/tmp/ansible-tmp-1578486439.28-168674656762535/AnsiballZ_stat.py
2020-01-08 20:27:19,301 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486439.28-168674656762535/ /root/.ansible/tmp/ansible-tmp-1578486439.28-168674656762535/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:19,309 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486439.28-168674656762535/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:19,401 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486439.28-168674656762535/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:19,414 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hosts"
        }
    }, 
    "stat": {
        "exists": false
    }
}
2020-01-08 20:27:19,453 p=17757 u=root |  TASK [ec2 : Create file if does not exist] *****************************************************************************************************************
2020-01-08 20:27:19,453 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-08 20:27:19,474 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:19,474 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:19,483 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486439.47-261125453960153 `" && echo ansible-tmp-1578486439.47-261125453960153="` echo /root/.ansible/tmp/ansible-tmp-1578486439.47-261125453960153 `" ) && sleep 0'
2020-01-08 20:27:19,701 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2020-01-08 20:27:19,702 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpr7jPfF TO /root/.ansible/tmp/ansible-tmp-1578486439.47-261125453960153/AnsiballZ_file.py
2020-01-08 20:27:19,703 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486439.47-261125453960153/ /root/.ansible/tmp/ansible-tmp-1578486439.47-261125453960153/AnsiballZ_file.py && sleep 0'
2020-01-08 20:27:19,712 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486439.47-261125453960153/AnsiballZ_file.py && sleep 0'
2020-01-08 20:27:19,810 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486439.47-261125453960153/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:19,822 p=17757 u=root |  changed: [localhost] => {
    "changed": true, 
    "dest": "/home/centos/aws-project/.inventory/hosts", 
    "diff": {
        "after": {
            "atime": 1578486439.800683, 
            "mode": "0755", 
            "mtime": 1578486439.800683, 
            "path": "/home/centos/aws-project/.inventory/hosts", 
            "state": "touch"
        }, 
        "before": {
            "atime": 1578486439.7991364, 
            "mode": "0644", 
            "mtime": 1578486439.7991364, 
            "path": "/home/centos/aws-project/.inventory/hosts", 
            "state": "absent"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "_diff_peek": null, 
            "_original_basename": null, 
            "access_time": null, 
            "access_time_format": "%Y%m%d%H%M.%S", 
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "directory_mode": null, 
            "follow": true, 
            "force": false, 
            "group": "root", 
            "mode": "0755", 
            "modification_time": null, 
            "modification_time_format": "%Y%m%d%H%M.%S", 
            "owner": "root", 
            "path": "/home/centos/aws-project/.inventory/hosts", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "touch", 
            "unsafe_writes": null
        }
    }, 
    "mode": "0755", 
    "owner": "root", 
    "size": 0, 
    "state": "file", 
    "uid": 0
}
2020-01-08 20:27:19,864 p=17757 u=root |  TASK [ec2 : Check instances File exists or not] ************************************************************************************************************
2020-01-08 20:27:19,864 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-08 20:27:19,879 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:19,880 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:19,888 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486439.88-19422638638229 `" && echo ansible-tmp-1578486439.88-19422638638229="` echo /root/.ansible/tmp/ansible-tmp-1578486439.88-19422638638229 `" ) && sleep 0'
2020-01-08 20:27:19,899 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-08 20:27:19,900 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmp8f7udt TO /root/.ansible/tmp/ansible-tmp-1578486439.88-19422638638229/AnsiballZ_stat.py
2020-01-08 20:27:19,901 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486439.88-19422638638229/ /root/.ansible/tmp/ansible-tmp-1578486439.88-19422638638229/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:19,908 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486439.88-19422638638229/AnsiballZ_stat.py && sleep 0'
2020-01-08 20:27:20,001 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486439.88-19422638638229/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:20,015 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/instances"
        }
    }, 
    "stat": {
        "exists": false
    }
}
2020-01-08 20:27:20,055 p=17757 u=root |  TASK [ec2 : Create instances file if does not exist] *******************************************************************************************************
2020-01-08 20:27:20,055 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-08 20:27:20,073 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:20,073 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:20,082 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486440.07-129410045408422 `" && echo ansible-tmp-1578486440.07-129410045408422="` echo /root/.ansible/tmp/ansible-tmp-1578486440.07-129410045408422 `" ) && sleep 0'
2020-01-08 20:27:20,093 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/file.py
2020-01-08 20:27:20,093 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmprSagEQ TO /root/.ansible/tmp/ansible-tmp-1578486440.07-129410045408422/AnsiballZ_file.py
2020-01-08 20:27:20,094 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486440.07-129410045408422/ /root/.ansible/tmp/ansible-tmp-1578486440.07-129410045408422/AnsiballZ_file.py && sleep 0'
2020-01-08 20:27:20,102 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486440.07-129410045408422/AnsiballZ_file.py && sleep 0'
2020-01-08 20:27:20,200 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486440.07-129410045408422/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:20,213 p=17757 u=root |  changed: [localhost] => {
    "changed": true, 
    "dest": "/home/centos/aws-project/.inventory/instances", 
    "diff": {
        "after": {
            "atime": 1578486440.1914, 
            "mode": "0755", 
            "mtime": 1578486440.1914, 
            "path": "/home/centos/aws-project/.inventory/instances", 
            "state": "touch"
        }, 
        "before": {
            "atime": 1578486440.1901343, 
            "mode": "0644", 
            "mtime": 1578486440.1901343, 
            "path": "/home/centos/aws-project/.inventory/instances", 
            "state": "absent"
        }
    }, 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "_diff_peek": null, 
            "_original_basename": null, 
            "access_time": null, 
            "access_time_format": "%Y%m%d%H%M.%S", 
            "attributes": null, 
            "backup": null, 
            "content": null, 
            "delimiter": null, 
            "directory_mode": null, 
            "follow": true, 
            "force": false, 
            "group": "root", 
            "mode": "0755", 
            "modification_time": null, 
            "modification_time_format": "%Y%m%d%H%M.%S", 
            "owner": "root", 
            "path": "/home/centos/aws-project/.inventory/instances", 
            "recurse": false, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "touch", 
            "unsafe_writes": null
        }
    }, 
    "mode": "0755", 
    "owner": "root", 
    "size": 0, 
    "state": "file", 
    "uid": 0
}
2020-01-08 20:27:20,253 p=17757 u=root |  TASK [ec2 : VPC facts] *************************************************************************************************************************************
2020-01-08 20:27:20,253 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-08 20:27:20,269 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:20,269 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:20,278 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486440.27-160917606630933 `" && echo ansible-tmp-1578486440.27-160917606630933="` echo /root/.ansible/tmp/ansible-tmp-1578486440.27-160917606630933 `" ) && sleep 0'
2020-01-08 20:27:20,507 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-08 20:27:20,507 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpAZGMWM TO /root/.ansible/tmp/ansible-tmp-1578486440.27-160917606630933/AnsiballZ_ec2_vpc_net_facts.py
2020-01-08 20:27:20,508 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486440.27-160917606630933/ /root/.ansible/tmp/ansible-tmp-1578486440.27-160917606630933/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:27:20,517 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486440.27-160917606630933/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-08 20:27:21,372 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486440.27-160917606630933/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:21,386 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M120"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.120.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0171dc4355afb2d57", 
                    "cidr_block": "10.120.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f1e92296", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-025e5ea3271f91941", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:27:21,425 p=17757 u=root |  TASK [ec2 : set fact: VPC ID] ******************************************************************************************************************************
2020-01-08 20:27:21,426 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:10
2020-01-08 20:27:21,444 p=17757 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-025e5ea3271f91941"
    }, 
    "changed": false
}
2020-01-08 20:27:21,483 p=17757 u=root |  TASK [ec2 : VPC subnet facts] ******************************************************************************************************************************
2020-01-08 20:27:21,483 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:15
2020-01-08 20:27:21,499 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:21,500 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:21,508 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486441.5-269408519408412 `" && echo ansible-tmp-1578486441.5-269408519408412="` echo /root/.ansible/tmp/ansible-tmp-1578486441.5-269408519408412 `" ) && sleep 0'
2020-01-08 20:27:21,736 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-08 20:27:21,737 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpc85C_u TO /root/.ansible/tmp/ansible-tmp-1578486441.5-269408519408412/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-08 20:27:21,738 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486441.5-269408519408412/ /root/.ansible/tmp/ansible-tmp-1578486441.5-269408519408412/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:27:21,747 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486441.5-269408519408412/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-08 20:27:22,453 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486441.5-269408519408412/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:22,470 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-025e5ea3271f91941"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 228, 
            "cidr_block": "10.120.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a44bb4344c1a9e38", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-0a44bb4344c1a9e38", 
            "subnet_id": "subnet-0a44bb4344c1a9e38", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 230, 
            "cidr_block": "10.120.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-088c7b9e0c3425f92", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-088c7b9e0c3425f92", 
            "subnet_id": "subnet-088c7b9e0c3425f92", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 227, 
            "cidr_block": "10.120.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-05f2241d9964e4798", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-05f2241d9964e4798", 
            "subnet_id": "subnet-05f2241d9964e4798", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:27:22,509 p=17757 u=root |  TASK [ec2 : register just the IDs for each of the groups] **************************************************************************************************
2020-01-08 20:27:22,509 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:22
2020-01-08 20:27:22,529 p=17757 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-05f2241d9964e4798", 
            "subnet-088c7b9e0c3425f92", 
            "subnet-0a44bb4344c1a9e38"
        ]
    }, 
    "changed": false
}
2020-01-08 20:27:22,568 p=17757 u=root |  TASK [ec2 : include_tasks] *********************************************************************************************************************************
2020-01-08 20:27:22,569 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-08 20:27:22,585 p=17757 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-08 20:27:22,625 p=17757 u=root |  TASK [ec2 : include_tasks] *********************************************************************************************************************************
2020-01-08 20:27:22,625 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-08 20:27:22,696 p=17757 u=root |  included: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-08 20:27:22,742 p=17757 u=root |  TASK [ec2 : Get SSH SG ID] *********************************************************************************************************************************
2020-01-08 20:27:22,742 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-08 20:27:22,760 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:22,760 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:22,769 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486442.76-1176238263737 `" && echo ansible-tmp-1578486442.76-1176238263737="` echo /root/.ansible/tmp/ansible-tmp-1578486442.76-1176238263737 `" ) && sleep 0'
2020-01-08 20:27:23,000 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:27:23,001 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpyyl_VI TO /root/.ansible/tmp/ansible-tmp-1578486442.76-1176238263737/AnsiballZ_ec2_group_facts.py
2020-01-08 20:27:23,002 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486442.76-1176238263737/ /root/.ansible/tmp/ansible-tmp-1578486442.76-1176238263737/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:27:23,011 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486442.76-1176238263737/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:27:23,725 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486442.76-1176238263737/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:23,740 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-ssh"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port ssh to the user", 
            "group_id": "sg-066bafabf3e4021cc", 
            "group_name": "M120-ssh", 
            "ip_permissions": [
                {
                    "from_port": 22, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "103.136.108.78/32"
                        }, 
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 22"
                        }, 
                        {
                            "cidr_ip": "52.221.224.212/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 22, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-ssh", 
                "Name": "M120-ssh"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:27:23,782 p=17757 u=root |  TASK [ec2 : list of ssh the security group id.] ************************************************************************************************************
2020-01-08 20:27:23,782 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-08 20:27:23,810 p=17757 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'cidr_ip': u'103.136.108.78/32'}, {u'description': u'allow all on port 22', u'cidr_ip': u'154.197.29.34/32'}, {u'cidr_ip': u'52.221.224.212/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port ssh to the user', u'tags': {u'Environment': u'M120-ssh', u'Name': u'M120-ssh'}, u'group_name': u'M120-ssh', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-066bafabf3e4021cc', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ssh_id": "sg-066bafabf3e4021cc"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port ssh to the user", 
        "group_id": "sg-066bafabf3e4021cc", 
        "group_name": "M120-ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "103.136.108.78/32"
                    }, 
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 22"
                    }, 
                    {
                        "cidr_ip": "52.221.224.212/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-ssh", 
            "Name": "M120-ssh"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:27:23,849 p=17757 u=root |  TASK [ec2 : Get ALL SG ID] *********************************************************************************************************************************
2020-01-08 20:27:23,850 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-08 20:27:23,868 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:23,868 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:23,877 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486443.87-221239632852187 `" && echo ansible-tmp-1578486443.87-221239632852187="` echo /root/.ansible/tmp/ansible-tmp-1578486443.87-221239632852187 `" ) && sleep 0'
2020-01-08 20:27:23,889 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:27:23,889 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmp8YnS7u TO /root/.ansible/tmp/ansible-tmp-1578486443.87-221239632852187/AnsiballZ_ec2_group_facts.py
2020-01-08 20:27:23,890 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486443.87-221239632852187/ /root/.ansible/tmp/ansible-tmp-1578486443.87-221239632852187/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:27:23,898 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486443.87-221239632852187/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:27:24,574 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486443.87-221239632852187/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:24,590 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-004a004e0482c5105", 
            "group_name": "M120-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.120.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-all", 
                "Name": "M120-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:27:24,628 p=17757 u=root |  TASK [ec2 : list of all the security group id.] ************************************************************************************************************
2020-01-08 20:27:24,628 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-08 20:27:24,656 p=17757 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.120.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M120-all', u'Name': u'M120-all'}, u'group_name': u'M120-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-004a004e0482c5105', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-004a004e0482c5105"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-004a004e0482c5105", 
        "group_name": "M120-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.120.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-all", 
            "Name": "M120-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:27:24,695 p=17757 u=root |  TASK [ec2 : ec2_group_facts] *******************************************************************************************************************************
2020-01-08 20:27:24,695 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-08 20:27:24,713 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:24,713 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:24,722 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486444.71-247928371373564 `" && echo ansible-tmp-1578486444.71-247928371373564="` echo /root/.ansible/tmp/ansible-tmp-1578486444.71-247928371373564 `" ) && sleep 0'
2020-01-08 20:27:24,734 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-08 20:27:24,734 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpQE1aLN TO /root/.ansible/tmp/ansible-tmp-1578486444.71-247928371373564/AnsiballZ_ec2_group_facts.py
2020-01-08 20:27:24,735 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486444.71-247928371373564/ /root/.ansible/tmp/ansible-tmp-1578486444.71-247928371373564/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:27:24,743 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486444.71-247928371373564/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-08 20:27:25,418 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486444.71-247928371373564/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:25,433 p=17757 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-nacos"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8080 to the user", 
            "group_id": "sg-0e9bdb491c4d18471", 
            "group_name": "M120-nacos", 
            "ip_permissions": [
                {
                    "from_port": 8080, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8080"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8080, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-nacos", 
                "Name": "M120-nacos"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-08 20:27:25,472 p=17757 u=root |  TASK [ec2 : list of all the security group id.] ************************************************************************************************************
2020-01-08 20:27:25,473 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:32
2020-01-08 20:27:25,500 p=17757 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8080, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8080, u'ip_ranges': [{u'description': u'allow all on port 8080', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8080 to the user', u'tags': {u'Environment': u'M120-nacos', u'Name': u'M120-nacos'}, u'group_name': u'M120-nacos', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-0e9bdb491c4d18471', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-0e9bdb491c4d18471"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8080 to the user", 
        "group_id": "sg-0e9bdb491c4d18471", 
        "group_name": "M120-nacos", 
        "ip_permissions": [
            {
                "from_port": 8080, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8080"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8080, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-nacos", 
            "Name": "M120-nacos"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-08 20:27:25,542 p=17757 u=root |  TASK [ec2 : Provision ec2 instance] ************************************************************************************************************************
2020-01-08 20:27:25,543 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:37
2020-01-08 20:27:25,570 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:25,571 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:25,579 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486445.57-232742184679685 `" && echo ansible-tmp-1578486445.57-232742184679685="` echo /root/.ansible/tmp/ansible-tmp-1578486445.57-232742184679685 `" ) && sleep 0'
2020-01-08 20:27:25,837 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2.py
2020-01-08 20:27:25,838 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpd0AfKA TO /root/.ansible/tmp/ansible-tmp-1578486445.57-232742184679685/AnsiballZ_ec2.py
2020-01-08 20:27:25,838 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486445.57-232742184679685/ /root/.ansible/tmp/ansible-tmp-1578486445.57-232742184679685/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:27:25,848 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486445.57-232742184679685/AnsiballZ_ec2.py && sleep 0'
2020-01-08 20:27:38,005 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486445.57-232742184679685/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:38,026 p=17757 u=root |  changed: [localhost] => {
    "changed": true, 
    "instance_ids": [
        "i-041700369e7db6985"
    ], 
    "instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-08ce1776efec2053f"
                }
            }, 
            "dns_name": "ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-0e9bdb491c4d18471": "M120-nacos"
            }, 
            "hypervisor": "xen", 
            "id": "i-041700369e7db6985", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "launch_time": "2020-01-08T12:27:27.000Z", 
            "placement": "ap-southeast-1c", 
            "private_dns_name": "ip-10-120-12-102.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.12.102", 
            "public_dns_name": "ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.251.35.248", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-nacos", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ], 
    "invocation": {
        "module_args": {
            "assign_public_ip": true, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "count": 1, 
            "count_tag": {
                "Name": "M120-nacos"
            }, 
            "debug_botocore_endpoint_logs": false, 
            "ebs_optimized": false, 
            "ec2_url": null, 
            "exact_count": 1, 
            "group": null, 
            "group_id": [
                "sg-066bafabf3e4021cc", 
                "sg-004a004e0482c5105", 
                "sg-0e9bdb491c4d18471"
            ], 
            "id": null, 
            "image": "ami-0208d16fd11190da6", 
            "instance_ids": null, 
            "instance_initiated_shutdown_behavior": "stop", 
            "instance_profile_name": "", 
            "instance_tags": {
                "Name": "M120-nacos", 
                "env": ""
            }, 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "monitoring": true, 
            "network_interfaces": null, 
            "placement_group": null, 
            "private_ip": null, 
            "profile": null, 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "source_dest_check": null, 
            "spot_launch_group": null, 
            "spot_price": null, 
            "spot_type": "one-time", 
            "spot_wait_timeout": 600, 
            "state": "present", 
            "tenancy": "default", 
            "termination_protection": true, 
            "user_data": null, 
            "validate_certs": true, 
            "volumes": [
                {
                    "delete_on_termination": false, 
                    "device_name": "/dev/sda1", 
                    "volume_size": 50, 
                    "volume_type": "gp2"
                }
            ], 
            "vpc_subnet_id": "subnet-0a44bb4344c1a9e38", 
            "wait": true, 
            "wait_timeout": 300, 
            "zone": null
        }
    }, 
    "tagged_instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-08ce1776efec2053f"
                }
            }, 
            "dns_name": "ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-0e9bdb491c4d18471": "M120-nacos"
            }, 
            "hypervisor": "xen", 
            "id": "i-041700369e7db6985", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.small", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "launch_time": "2020-01-08T12:27:27.000Z", 
            "placement": "ap-southeast-1c", 
            "private_dns_name": "ip-10-120-12-102.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.12.102", 
            "public_dns_name": "ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "13.251.35.248", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-nacos", 
                "env": ""
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ]
}
2020-01-08 20:27:38,066 p=17757 u=root |  TASK [ec2 : create EIP] ************************************************************************************************************************************
2020-01-08 20:27:38,066 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:66
2020-01-08 20:27:38,082 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:38,082 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:38,091 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486458.08-277551958321726 `" && echo ansible-tmp-1578486458.08-277551958321726="` echo /root/.ansible/tmp/ansible-tmp-1578486458.08-277551958321726 `" ) && sleep 0'
2020-01-08 20:27:38,322 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:27:38,322 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpLH5UP0 TO /root/.ansible/tmp/ansible-tmp-1578486458.08-277551958321726/AnsiballZ_ec2_eip.py
2020-01-08 20:27:38,323 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486458.08-277551958321726/ /root/.ansible/tmp/ansible-tmp-1578486458.08-277551958321726/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:27:38,332 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486458.08-277551958321726/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:27:38,760 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486458.08-277551958321726/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:38,773 p=17757 u=root |  changed: [localhost] => {
    "allocation_id": "eipalloc-0af3660ac2a3a54ae", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": null, 
            "ec2_url": null, 
            "in_vpc": false, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": null, 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": false, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "public_ip": "3.0.27.186"
}
2020-01-08 20:27:38,812 p=17757 u=root |  TASK [ec2 : set eip fact] **********************************************************************************************************************************
2020-01-08 20:27:38,812 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:71
2020-01-08 20:27:38,831 p=17757 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "eip": "3.0.27.186"
    }, 
    "changed": false
}
2020-01-08 20:27:38,869 p=17757 u=root |  TASK [ec2 : Assign EIP address for web instances] **********************************************************************************************************
2020-01-08 20:27:38,869 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:75
2020-01-08 20:27:38,892 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:38,893 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:38,901 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486458.89-228384799003513 `" && echo ansible-tmp-1578486458.89-228384799003513="` echo /root/.ansible/tmp/ansible-tmp-1578486458.89-228384799003513 `" ) && sleep 0'
2020-01-08 20:27:38,913 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-08 20:27:38,913 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpp5B5o4 TO /root/.ansible/tmp/ansible-tmp-1578486458.89-228384799003513/AnsiballZ_ec2_eip.py
2020-01-08 20:27:38,914 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486458.89-228384799003513/ /root/.ansible/tmp/ansible-tmp-1578486458.89-228384799003513/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:27:38,922 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486458.89-228384799003513/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-08 20:27:39,753 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486458.89-228384799003513/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:39,772 p=17757 u=root |  changed: [localhost] => (item={u'ramdisk': None, u'kernel': None, u'root_device_type': u'ebs', u'private_dns_name': u'ip-10-120-12-102.ap-southeast-1.compute.internal', u'block_device_mapping': {u'/dev/sda1': {u'status': u'attached', u'delete_on_termination': False, u'volume_id': u'vol-08ce1776efec2053f'}}, u'key_name': u'm120-ssh', u'public_ip': u'13.251.35.248', u'image_id': u'ami-0208d16fd11190da6', u'tenancy': u'default', u'private_ip': u'10.120.12.102', u'groups': {u'sg-066bafabf3e4021cc': u'M120-ssh', u'sg-0e9bdb491c4d18471': u'M120-nacos', u'sg-004a004e0482c5105': u'M120-all'}, u'public_dns_name': u'ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com', u'state_code': 16, u'id': u'i-041700369e7db6985', u'tags': {u'Name': u'M120-nacos', u'env': u''}, u'placement': u'ap-southeast-1c', u'ami_launch_index': u'0', u'dns_name': u'ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com', u'region': u'ap-southeast-1', u'ebs_optimized': False, u'launch_time': u'2020-01-08T12:27:27.000Z', u'instance_type': u't3.small', u'state': u'running', u'architecture': u'x86_64', u'hypervisor': u'xen', u'virtualization_type': u'hvm', u'root_device_name': u'/dev/sda1'}) => {
    "allocation_id": "eipalloc-0af3660ac2a3a54ae", 
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": "i-041700369e7db6985", 
            "ec2_url": null, 
            "in_vpc": true, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": "3.0.27.186", 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": true, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "ami_launch_index": "0", 
        "architecture": "x86_64", 
        "block_device_mapping": {
            "/dev/sda1": {
                "delete_on_termination": false, 
                "status": "attached", 
                "volume_id": "vol-08ce1776efec2053f"
            }
        }, 
        "dns_name": "ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com", 
        "ebs_optimized": false, 
        "groups": {
            "sg-004a004e0482c5105": "M120-all", 
            "sg-066bafabf3e4021cc": "M120-ssh", 
            "sg-0e9bdb491c4d18471": "M120-nacos"
        }, 
        "hypervisor": "xen", 
        "id": "i-041700369e7db6985", 
        "image_id": "ami-0208d16fd11190da6", 
        "instance_type": "t3.small", 
        "kernel": null, 
        "key_name": "m120-ssh", 
        "launch_time": "2020-01-08T12:27:27.000Z", 
        "placement": "ap-southeast-1c", 
        "private_dns_name": "ip-10-120-12-102.ap-southeast-1.compute.internal", 
        "private_ip": "10.120.12.102", 
        "public_dns_name": "ec2-13-251-35-248.ap-southeast-1.compute.amazonaws.com", 
        "public_ip": "13.251.35.248", 
        "ramdisk": null, 
        "region": "ap-southeast-1", 
        "root_device_name": "/dev/sda1", 
        "root_device_type": "ebs", 
        "state": "running", 
        "state_code": 16, 
        "tags": {
            "Name": "M120-nacos", 
            "env": ""
        }, 
        "tenancy": "default", 
        "virtualization_type": "hvm"
    }, 
    "public_ip": "3.0.27.186"
}
2020-01-08 20:27:39,815 p=17757 u=root |  TASK [ec2 : Configure hostname in "/home/centos/aws-project"] **********************************************************************************************
2020-01-08 20:27:39,816 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:85
2020-01-08 20:27:39,836 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:39,836 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:39,845 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486459.84-444248438653 `" && echo ansible-tmp-1578486459.84-444248438653="` echo /root/.ansible/tmp/ansible-tmp-1578486459.84-444248438653 `" ) && sleep 0'
2020-01-08 20:27:40,060 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:27:40,060 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpVM7XKr TO /root/.ansible/tmp/ansible-tmp-1578486459.84-444248438653/AnsiballZ_lineinfile.py
2020-01-08 20:27:40,061 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486459.84-444248438653/ /root/.ansible/tmp/ansible-tmp-1578486459.84-444248438653/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:27:40,070 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486459.84-444248438653/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:27:40,168 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486459.84-444248438653/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:40,181 p=17757 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hosts (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hosts (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hosts (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hosts (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hosts", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "[M120-nacos]\n3.0.27.186 ansible_ssh_user=centos ansible_ssh_private_key_file=/home/centos/aws-project/.keys/m120-ssh\n", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hosts", 
            "regexp": "M120-nacos", 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:27:40,220 p=17757 u=root |  TASK [ec2 : set pip fact] **********************************************************************************************************************************
2020-01-08 20:27:40,220 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:92
2020-01-08 20:27:40,239 p=17757 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "pip": [
            "10.120.12.102"
        ]
    }, 
    "changed": false
}
2020-01-08 20:27:40,281 p=17757 u=root |  TASK [ec2 : Configure instances messages in "/home/centos/aws-project"] ************************************************************************************
2020-01-08 20:27:40,281 p=17757 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:96
2020-01-08 20:27:40,300 p=17757 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-08 20:27:40,300 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-08 20:27:40,309 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578486460.3-212842867365605 `" && echo ansible-tmp-1578486460.3-212842867365605="` echo /root/.ansible/tmp/ansible-tmp-1578486460.3-212842867365605 `" ) && sleep 0'
2020-01-08 20:27:40,320 p=17757 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-08 20:27:40,320 p=17757 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-17757RLt_Pw/tmpT2YQZo TO /root/.ansible/tmp/ansible-tmp-1578486460.3-212842867365605/AnsiballZ_lineinfile.py
2020-01-08 20:27:40,321 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578486460.3-212842867365605/ /root/.ansible/tmp/ansible-tmp-1578486460.3-212842867365605/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:27:40,329 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578486460.3-212842867365605/AnsiballZ_lineinfile.py && sleep 0'
2020-01-08 20:27:40,426 p=17757 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578486460.3-212842867365605/ > /dev/null 2>&1 && sleep 0'
2020-01-08 20:27:40,440 p=17757 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/instances (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/instances (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/instances (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/instances (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/instances", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "{ \"hostname\": \"M120-nacos\",\"public_ip\": \"3.0.27.186\",\"private_ip\": \"10.120.12.102\",\"application_name\": \\[ \"[u'nacos']\" \\] }", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/instances", 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-08 20:27:40,440 p=17757 u=root |  META: ran handlers
2020-01-08 20:27:40,441 p=17757 u=root |  META: ran handlers
2020-01-08 20:27:40,442 p=17757 u=root |  PLAY RECAP *************************************************************************************************************************************************
2020-01-08 20:27:40,442 p=17757 u=root |  localhost                  : ok=26   changed=7    unreachable=0    failed=0    skipped=4    rescued=0    ignored=0   
2020-01-09 17:14:13,326 p=29139 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-09 17:14:13,327 p=29139 u=root |  Using /home/centos/aws-project/001.aws-base-ec2/ansible.cfg as config file
2020-01-09 17:14:13,335 p=29139 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-09 17:14:13,335 p=29139 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-09 17:14:13,335 p=29139 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-09 17:14:13,339 p=29139 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-09 17:14:13,341 p=29139 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-09 17:14:13,586 p=29139 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-09 17:14:13,747 p=29139 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-09 17:14:13,808 p=29139 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-09 17:14:13,809 p=29139 u=root |  1 plays in 03.ec2.yml
2020-01-09 17:14:13,838 p=29139 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-09 17:14:13,854 p=29139 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-09 17:14:13,854 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/03.ec2.yml:2
2020-01-09 17:14:13,865 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:13,866 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:13,874 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561253.87-10723254214004 `" && echo ansible-tmp-1578561253.87-10723254214004="` echo /root/.ansible/tmp/ansible-tmp-1578561253.87-10723254214004 `" ) && sleep 0'
2020-01-09 17:14:14,255 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-09 17:14:14,255 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpxKUmjF TO /root/.ansible/tmp/ansible-tmp-1578561253.87-10723254214004/AnsiballZ_setup.py
2020-01-09 17:14:14,256 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561253.87-10723254214004/ /root/.ansible/tmp/ansible-tmp-1578561253.87-10723254214004/AnsiballZ_setup.py && sleep 0'
2020-01-09 17:14:14,265 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561253.87-10723254214004/AnsiballZ_setup.py && sleep 0'
2020-01-09 17:14:14,802 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561253.87-10723254214004/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:14,874 p=29139 u=root |  ok: [localhost]
2020-01-09 17:14:14,875 p=29139 u=root |  META: ran handlers
2020-01-09 17:14:14,915 p=29139 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-09 17:14:14,915 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-09 17:14:14,931 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:14,932 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:14,941 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561254.93-157942309538654 `" && echo ansible-tmp-1578561254.93-157942309538654="` echo /root/.ansible/tmp/ansible-tmp-1578561254.93-157942309538654 `" ) && sleep 0'
2020-01-09 17:14:15,188 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-09 17:14:15,188 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpGM_7sW TO /root/.ansible/tmp/ansible-tmp-1578561254.93-157942309538654/AnsiballZ_ec2_key.py
2020-01-09 17:14:15,189 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561254.93-157942309538654/ /root/.ansible/tmp/ansible-tmp-1578561254.93-157942309538654/AnsiballZ_ec2_key.py && sleep 0'
2020-01-09 17:14:15,198 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561254.93-157942309538654/AnsiballZ_ec2_key.py && sleep 0'
2020-01-09 17:14:15,882 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561254.93-157942309538654/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:15,896 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m120-ssh", 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "18:72:64:17:3a:93:86:df:16:f0:2d:61:ed:f9:b1:2f:aa:fe:62:eb", 
        "name": "m120-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-09 17:14:15,935 p=29139 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-09 17:14:15,935 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-09 17:14:15,952 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:15,952 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:15,961 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561255.95-104387436852764 `" && echo ansible-tmp-1578561255.95-104387436852764="` echo /root/.ansible/tmp/ansible-tmp-1578561255.95-104387436852764 `" ) && sleep 0'
2020-01-09 17:14:16,178 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-09 17:14:16,178 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpUTHCRs TO /root/.ansible/tmp/ansible-tmp-1578561255.95-104387436852764/AnsiballZ_stat.py
2020-01-09 17:14:16,179 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561255.95-104387436852764/ /root/.ansible/tmp/ansible-tmp-1578561255.95-104387436852764/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:16,188 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561255.95-104387436852764/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:16,290 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561255.95-104387436852764/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:16,306 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578365002.1148942, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484375.395159, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578484375.395159, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 63, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-09 17:14:16,345 p=29139 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-09 17:14:16,345 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-09 17:14:16,361 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-09 17:14:16,402 p=29139 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-09 17:14:16,402 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-09 17:14:16,418 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-09 17:14:16,458 p=29139 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-09 17:14:16,458 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-09 17:14:16,474 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:16,474 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:16,483 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561256.47-242938391780053 `" && echo ansible-tmp-1578561256.47-242938391780053="` echo /root/.ansible/tmp/ansible-tmp-1578561256.47-242938391780053 `" ) && sleep 0'
2020-01-09 17:14:16,495 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-09 17:14:16,495 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpHVy0XO TO /root/.ansible/tmp/ansible-tmp-1578561256.47-242938391780053/AnsiballZ_stat.py
2020-01-09 17:14:16,497 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561256.47-242938391780053/ /root/.ansible/tmp/ansible-tmp-1578561256.47-242938391780053/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:16,506 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561256.47-242938391780053/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:16,609 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561256.47-242938391780053/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:16,624 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578561230.9076717, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578561229.9406774, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578561229.9406774, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-09 17:14:16,664 p=29139 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-09 17:14:16,664 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-09 17:14:16,680 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-09 17:14:16,720 p=29139 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-09 17:14:16,720 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-09 17:14:16,736 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:16,736 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:16,745 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561256.74-162609333818035 `" && echo ansible-tmp-1578561256.74-162609333818035="` echo /root/.ansible/tmp/ansible-tmp-1578561256.74-162609333818035 `" ) && sleep 0'
2020-01-09 17:14:16,756 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-09 17:14:16,757 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpZa5ET2 TO /root/.ansible/tmp/ansible-tmp-1578561256.74-162609333818035/AnsiballZ_stat.py
2020-01-09 17:14:16,757 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561256.74-162609333818035/ /root/.ansible/tmp/ansible-tmp-1578561256.74-162609333818035/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:16,765 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561256.74-162609333818035/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:16,870 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561256.74-162609333818035/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:16,886 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hosts"
        }
    }, 
    "stat": {
        "atime": 1578486516.5646894, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "unknown", 
        "checksum": "adc83b19e793491b1c6ea0fd8b46cd9f32e592fc", 
        "ctime": 1578561237.576633, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4350555, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "unknown", 
        "mode": "0755", 
        "mtime": 1578561237.576633, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 1, 
        "uid": 0, 
        "version": "18446744072619581168", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-09 17:14:16,925 p=29139 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-09 17:14:16,925 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-09 17:14:16,944 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-09 17:14:16,986 p=29139 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-09 17:14:16,986 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-09 17:14:17,002 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:17,003 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:17,011 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561257.0-216529292130183 `" && echo ansible-tmp-1578561257.0-216529292130183="` echo /root/.ansible/tmp/ansible-tmp-1578561257.0-216529292130183 `" ) && sleep 0'
2020-01-09 17:14:17,023 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-09 17:14:17,023 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpMZt1Wv TO /root/.ansible/tmp/ansible-tmp-1578561257.0-216529292130183/AnsiballZ_stat.py
2020-01-09 17:14:17,024 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561257.0-216529292130183/ /root/.ansible/tmp/ansible-tmp-1578561257.0-216529292130183/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:17,033 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561257.0-216529292130183/AnsiballZ_stat.py && sleep 0'
2020-01-09 17:14:17,136 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561257.0-216529292130183/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:17,151 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/instances"
        }
    }, 
    "stat": {
        "atime": 1578486524.1556454, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "unknown", 
        "checksum": "adc83b19e793491b1c6ea0fd8b46cd9f32e592fc", 
        "ctime": 1578561233.785655, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4350556, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "unknown", 
        "mode": "0755", 
        "mtime": 1578561233.785655, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 1, 
        "uid": 0, 
        "version": "18446744071884781541", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-09 17:14:17,191 p=29139 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-09 17:14:17,191 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-09 17:14:17,208 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-09 17:14:17,248 p=29139 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-09 17:14:17,248 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-09 17:14:17,264 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:17,264 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:17,273 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561257.26-201461876545194 `" && echo ansible-tmp-1578561257.26-201461876545194="` echo /root/.ansible/tmp/ansible-tmp-1578561257.26-201461876545194 `" ) && sleep 0'
2020-01-09 17:14:17,507 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-09 17:14:17,508 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpPSyyA9 TO /root/.ansible/tmp/ansible-tmp-1578561257.26-201461876545194/AnsiballZ_ec2_vpc_net_facts.py
2020-01-09 17:14:17,508 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561257.26-201461876545194/ /root/.ansible/tmp/ansible-tmp-1578561257.26-201461876545194/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-09 17:14:17,517 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561257.26-201461876545194/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-09 17:14:18,384 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561257.26-201461876545194/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:18,397 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M120"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.120.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0171dc4355afb2d57", 
                    "cidr_block": "10.120.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f1e92296", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-025e5ea3271f91941", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-09 17:14:18,437 p=29139 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-09 17:14:18,437 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:10
2020-01-09 17:14:18,456 p=29139 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-025e5ea3271f91941"
    }, 
    "changed": false
}
2020-01-09 17:14:18,495 p=29139 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-09 17:14:18,495 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:15
2020-01-09 17:14:18,512 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:18,512 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:18,521 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561258.51-141453361580020 `" && echo ansible-tmp-1578561258.51-141453361580020="` echo /root/.ansible/tmp/ansible-tmp-1578561258.51-141453361580020 `" ) && sleep 0'
2020-01-09 17:14:18,758 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-09 17:14:18,759 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpU9lWdm TO /root/.ansible/tmp/ansible-tmp-1578561258.51-141453361580020/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-09 17:14:18,760 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561258.51-141453361580020/ /root/.ansible/tmp/ansible-tmp-1578561258.51-141453361580020/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-09 17:14:18,769 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561258.51-141453361580020/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-09 17:14:19,479 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561258.51-141453361580020/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:19,496 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-025e5ea3271f91941"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 227, 
            "cidr_block": "10.120.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a44bb4344c1a9e38", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-0a44bb4344c1a9e38", 
            "subnet_id": "subnet-0a44bb4344c1a9e38", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 230, 
            "cidr_block": "10.120.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-088c7b9e0c3425f92", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-088c7b9e0c3425f92", 
            "subnet_id": "subnet-088c7b9e0c3425f92", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 227, 
            "cidr_block": "10.120.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-05f2241d9964e4798", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-05f2241d9964e4798", 
            "subnet_id": "subnet-05f2241d9964e4798", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-09 17:14:19,535 p=29139 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-09 17:14:19,535 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:22
2020-01-09 17:14:19,554 p=29139 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-05f2241d9964e4798", 
            "subnet-088c7b9e0c3425f92", 
            "subnet-0a44bb4344c1a9e38"
        ]
    }, 
    "changed": false
}
2020-01-09 17:14:19,594 p=29139 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-09 17:14:19,594 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-09 17:14:19,610 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-09 17:14:19,650 p=29139 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-09 17:14:19,650 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-09 17:14:19,721 p=29139 u=root |  included: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-09 17:14:19,767 p=29139 u=root |  TASK [ec2 : Get SSH SG ID] ********************************************************************************************************************************
2020-01-09 17:14:19,768 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-09 17:14:19,785 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:19,785 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:19,794 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561259.78-182947113287814 `" && echo ansible-tmp-1578561259.78-182947113287814="` echo /root/.ansible/tmp/ansible-tmp-1578561259.78-182947113287814 `" ) && sleep 0'
2020-01-09 17:14:20,033 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-09 17:14:20,033 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpJdBl4H TO /root/.ansible/tmp/ansible-tmp-1578561259.78-182947113287814/AnsiballZ_ec2_group_facts.py
2020-01-09 17:14:20,034 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561259.78-182947113287814/ /root/.ansible/tmp/ansible-tmp-1578561259.78-182947113287814/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-09 17:14:20,044 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561259.78-182947113287814/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-09 17:14:20,742 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561259.78-182947113287814/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:20,757 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-ssh"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port ssh to the user", 
            "group_id": "sg-066bafabf3e4021cc", 
            "group_name": "M120-ssh", 
            "ip_permissions": [
                {
                    "from_port": 22, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 22"
                        }, 
                        {
                            "cidr_ip": "52.221.224.212/32"
                        }, 
                        {
                            "cidr_ip": "103.136.108.78/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 22, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-ssh", 
                "Name": "M120-ssh"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-09 17:14:20,799 p=29139 u=root |  TASK [ec2 : list of ssh the security group id.] ***********************************************************************************************************
2020-01-09 17:14:20,799 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-09 17:14:20,827 p=29139 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'description': u'allow all on port 22', u'cidr_ip': u'154.197.29.34/32'}, {u'cidr_ip': u'52.221.224.212/32'}, {u'cidr_ip': u'103.136.108.78/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port ssh to the user', u'tags': {u'Environment': u'M120-ssh', u'Name': u'M120-ssh'}, u'group_name': u'M120-ssh', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-066bafabf3e4021cc', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ssh_id": "sg-066bafabf3e4021cc"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port ssh to the user", 
        "group_id": "sg-066bafabf3e4021cc", 
        "group_name": "M120-ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 22"
                    }, 
                    {
                        "cidr_ip": "52.221.224.212/32"
                    }, 
                    {
                        "cidr_ip": "103.136.108.78/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-ssh", 
            "Name": "M120-ssh"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-09 17:14:20,867 p=29139 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-09 17:14:20,867 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-09 17:14:20,886 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:20,886 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:20,895 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561260.89-170328208081249 `" && echo ansible-tmp-1578561260.89-170328208081249="` echo /root/.ansible/tmp/ansible-tmp-1578561260.89-170328208081249 `" ) && sleep 0'
2020-01-09 17:14:20,907 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-09 17:14:20,907 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmp5kDid5 TO /root/.ansible/tmp/ansible-tmp-1578561260.89-170328208081249/AnsiballZ_ec2_group_facts.py
2020-01-09 17:14:20,908 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561260.89-170328208081249/ /root/.ansible/tmp/ansible-tmp-1578561260.89-170328208081249/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-09 17:14:20,917 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561260.89-170328208081249/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-09 17:14:21,611 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561260.89-170328208081249/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:21,628 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-004a004e0482c5105", 
            "group_name": "M120-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.120.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }, 
                        {
                            "cidr_ip": "154.197.29.34/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-all", 
                "Name": "M120-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-09 17:14:21,667 p=29139 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-09 17:14:21,668 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-09 17:14:21,696 p=29139 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.120.0.0/16'}, {u'cidr_ip': u'154.197.29.34/32'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M120-all', u'Name': u'M120-all'}, u'group_name': u'M120-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-004a004e0482c5105', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-004a004e0482c5105"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-004a004e0482c5105", 
        "group_name": "M120-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.120.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }, 
                    {
                        "cidr_ip": "154.197.29.34/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-all", 
            "Name": "M120-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-09 17:14:21,738 p=29139 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-09 17:14:21,738 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-09 17:14:21,756 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:21,756 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:21,765 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561261.76-70299178144129 `" && echo ansible-tmp-1578561261.76-70299178144129="` echo /root/.ansible/tmp/ansible-tmp-1578561261.76-70299178144129 `" ) && sleep 0'
2020-01-09 17:14:21,777 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-09 17:14:21,777 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpVBqltF TO /root/.ansible/tmp/ansible-tmp-1578561261.76-70299178144129/AnsiballZ_ec2_group_facts.py
2020-01-09 17:14:21,778 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561261.76-70299178144129/ /root/.ansible/tmp/ansible-tmp-1578561261.76-70299178144129/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-09 17:14:21,787 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561261.76-70299178144129/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-09 17:14:22,467 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561261.76-70299178144129/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:22,483 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-elb-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0d6810116d46f5ac2", 
            "group_name": "M120-elb-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-elb-80-443-all", 
                "Name": "M120-elb-80-443-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-09 17:14:22,523 p=29139 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-09 17:14:22,523 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:32
2020-01-09 17:14:22,552 p=29139 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M120-elb-80-443-all', u'Name': u'M120-elb-80-443-all'}, u'group_name': u'M120-elb-80-443-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-0d6810116d46f5ac2', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-0d6810116d46f5ac2"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0d6810116d46f5ac2", 
        "group_name": "M120-elb-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-elb-80-443-all", 
            "Name": "M120-elb-80-443-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-09 17:14:22,593 p=29139 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-09 17:14:22,594 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:37
2020-01-09 17:14:22,622 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:22,622 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:22,630 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561262.62-62286420423509 `" && echo ansible-tmp-1578561262.62-62286420423509="` echo /root/.ansible/tmp/ansible-tmp-1578561262.62-62286420423509 `" ) && sleep 0'
2020-01-09 17:14:22,889 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2.py
2020-01-09 17:14:22,889 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmppPVK02 TO /root/.ansible/tmp/ansible-tmp-1578561262.62-62286420423509/AnsiballZ_ec2.py
2020-01-09 17:14:22,890 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561262.62-62286420423509/ /root/.ansible/tmp/ansible-tmp-1578561262.62-62286420423509/AnsiballZ_ec2.py && sleep 0'
2020-01-09 17:14:22,900 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561262.62-62286420423509/AnsiballZ_ec2.py && sleep 0'
2020-01-09 17:14:35,002 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561262.62-62286420423509/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:35,024 p=29139 u=root |  changed: [localhost] => {
    "changed": true, 
    "instance_ids": [
        "i-0d4bcf3a8e35f1be6"
    ], 
    "instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-078d397e1d4eccf28"
                }
            }, 
            "dns_name": "ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-0d4bcf3a8e35f1be6", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.medium", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "launch_time": "2020-01-09T09:14:24.000Z", 
            "placement": "ap-southeast-1a", 
            "private_dns_name": "ip-10-120-10-233.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.10.233", 
            "public_dns_name": "ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "18.139.2.202", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-jumpserver", 
                "env": "jumpserver"
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ], 
    "invocation": {
        "module_args": {
            "assign_public_ip": true, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "count": 1, 
            "count_tag": {
                "Name": "M120-jumpserver"
            }, 
            "debug_botocore_endpoint_logs": false, 
            "ebs_optimized": false, 
            "ec2_url": null, 
            "exact_count": 1, 
            "group": null, 
            "group_id": [
                "sg-066bafabf3e4021cc", 
                "sg-004a004e0482c5105", 
                "sg-0d6810116d46f5ac2"
            ], 
            "id": null, 
            "image": "ami-0208d16fd11190da6", 
            "instance_ids": null, 
            "instance_initiated_shutdown_behavior": "stop", 
            "instance_profile_name": "", 
            "instance_tags": {
                "Name": "M120-jumpserver", 
                "env": "jumpserver"
            }, 
            "instance_type": "t3.medium", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "monitoring": true, 
            "network_interfaces": null, 
            "placement_group": null, 
            "private_ip": null, 
            "profile": null, 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "source_dest_check": null, 
            "spot_launch_group": null, 
            "spot_price": null, 
            "spot_type": "one-time", 
            "spot_wait_timeout": 600, 
            "state": "present", 
            "tenancy": "default", 
            "termination_protection": true, 
            "user_data": null, 
            "validate_certs": true, 
            "volumes": [
                {
                    "delete_on_termination": false, 
                    "device_name": "/dev/sda1", 
                    "volume_size": 50, 
                    "volume_type": "gp2"
                }
            ], 
            "vpc_subnet_id": "subnet-05f2241d9964e4798", 
            "wait": true, 
            "wait_timeout": 300, 
            "zone": null
        }
    }, 
    "tagged_instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-078d397e1d4eccf28"
                }
            }, 
            "dns_name": "ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh", 
                "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
            }, 
            "hypervisor": "xen", 
            "id": "i-0d4bcf3a8e35f1be6", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3.medium", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "launch_time": "2020-01-09T09:14:24.000Z", 
            "placement": "ap-southeast-1a", 
            "private_dns_name": "ip-10-120-10-233.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.10.233", 
            "public_dns_name": "ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "18.139.2.202", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-jumpserver", 
                "env": "jumpserver"
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ]
}
2020-01-09 17:14:35,063 p=29139 u=root |  TASK [ec2 : create EIP] ***********************************************************************************************************************************
2020-01-09 17:14:35,064 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:66
2020-01-09 17:14:35,080 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:35,080 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:35,090 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561275.08-23855617877048 `" && echo ansible-tmp-1578561275.08-23855617877048="` echo /root/.ansible/tmp/ansible-tmp-1578561275.08-23855617877048 `" ) && sleep 0'
2020-01-09 17:14:35,328 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-09 17:14:35,328 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpRrilhu TO /root/.ansible/tmp/ansible-tmp-1578561275.08-23855617877048/AnsiballZ_ec2_eip.py
2020-01-09 17:14:35,329 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561275.08-23855617877048/ /root/.ansible/tmp/ansible-tmp-1578561275.08-23855617877048/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-09 17:14:35,338 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561275.08-23855617877048/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-09 17:14:35,765 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561275.08-23855617877048/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:35,778 p=29139 u=root |  changed: [localhost] => {
    "allocation_id": "eipalloc-003fb1ffeda64a56f", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": null, 
            "ec2_url": null, 
            "in_vpc": false, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": null, 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": false, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "public_ip": "18.136.91.10"
}
2020-01-09 17:14:35,818 p=29139 u=root |  TASK [ec2 : set eip fact] *********************************************************************************************************************************
2020-01-09 17:14:35,818 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:71
2020-01-09 17:14:35,835 p=29139 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "eip": "18.136.91.10"
    }, 
    "changed": false
}
2020-01-09 17:14:35,874 p=29139 u=root |  TASK [ec2 : Assign EIP address for web instances] *********************************************************************************************************
2020-01-09 17:14:35,875 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:75
2020-01-09 17:14:35,898 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:35,898 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:35,907 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561275.9-233196181755707 `" && echo ansible-tmp-1578561275.9-233196181755707="` echo /root/.ansible/tmp/ansible-tmp-1578561275.9-233196181755707 `" ) && sleep 0'
2020-01-09 17:14:35,918 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-09 17:14:35,919 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpsDIe58 TO /root/.ansible/tmp/ansible-tmp-1578561275.9-233196181755707/AnsiballZ_ec2_eip.py
2020-01-09 17:14:35,919 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561275.9-233196181755707/ /root/.ansible/tmp/ansible-tmp-1578561275.9-233196181755707/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-09 17:14:35,928 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561275.9-233196181755707/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-09 17:14:36,833 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561275.9-233196181755707/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:36,852 p=29139 u=root |  changed: [localhost] => (item={u'ramdisk': None, u'kernel': None, u'root_device_type': u'ebs', u'private_dns_name': u'ip-10-120-10-233.ap-southeast-1.compute.internal', u'block_device_mapping': {u'/dev/sda1': {u'status': u'attached', u'delete_on_termination': False, u'volume_id': u'vol-078d397e1d4eccf28'}}, u'key_name': u'm120-ssh', u'public_ip': u'18.139.2.202', u'image_id': u'ami-0208d16fd11190da6', u'tenancy': u'default', u'private_ip': u'10.120.10.233', u'groups': {u'sg-066bafabf3e4021cc': u'M120-ssh', u'sg-004a004e0482c5105': u'M120-all', u'sg-0d6810116d46f5ac2': u'M120-elb-80-443-all'}, u'public_dns_name': u'ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com', u'state_code': 16, u'id': u'i-0d4bcf3a8e35f1be6', u'tags': {u'Name': u'M120-jumpserver', u'env': u'jumpserver'}, u'placement': u'ap-southeast-1a', u'ami_launch_index': u'0', u'dns_name': u'ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com', u'region': u'ap-southeast-1', u'ebs_optimized': False, u'launch_time': u'2020-01-09T09:14:24.000Z', u'instance_type': u't3.medium', u'state': u'running', u'architecture': u'x86_64', u'hypervisor': u'xen', u'virtualization_type': u'hvm', u'root_device_name': u'/dev/sda1'}) => {
    "allocation_id": "eipalloc-003fb1ffeda64a56f", 
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": "i-0d4bcf3a8e35f1be6", 
            "ec2_url": null, 
            "in_vpc": true, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": "18.136.91.10", 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": true, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "ami_launch_index": "0", 
        "architecture": "x86_64", 
        "block_device_mapping": {
            "/dev/sda1": {
                "delete_on_termination": false, 
                "status": "attached", 
                "volume_id": "vol-078d397e1d4eccf28"
            }
        }, 
        "dns_name": "ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com", 
        "ebs_optimized": false, 
        "groups": {
            "sg-004a004e0482c5105": "M120-all", 
            "sg-066bafabf3e4021cc": "M120-ssh", 
            "sg-0d6810116d46f5ac2": "M120-elb-80-443-all"
        }, 
        "hypervisor": "xen", 
        "id": "i-0d4bcf3a8e35f1be6", 
        "image_id": "ami-0208d16fd11190da6", 
        "instance_type": "t3.medium", 
        "kernel": null, 
        "key_name": "m120-ssh", 
        "launch_time": "2020-01-09T09:14:24.000Z", 
        "placement": "ap-southeast-1a", 
        "private_dns_name": "ip-10-120-10-233.ap-southeast-1.compute.internal", 
        "private_ip": "10.120.10.233", 
        "public_dns_name": "ec2-18-139-2-202.ap-southeast-1.compute.amazonaws.com", 
        "public_ip": "18.139.2.202", 
        "ramdisk": null, 
        "region": "ap-southeast-1", 
        "root_device_name": "/dev/sda1", 
        "root_device_type": "ebs", 
        "state": "running", 
        "state_code": 16, 
        "tags": {
            "Name": "M120-jumpserver", 
            "env": "jumpserver"
        }, 
        "tenancy": "default", 
        "virtualization_type": "hvm"
    }, 
    "public_ip": "18.136.91.10"
}
2020-01-09 17:14:36,895 p=29139 u=root |  TASK [ec2 : Configure hostname in "/home/centos/aws-project"] *********************************************************************************************
2020-01-09 17:14:36,895 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:85
2020-01-09 17:14:36,916 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:36,916 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:36,925 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561276.92-80356906119956 `" && echo ansible-tmp-1578561276.92-80356906119956="` echo /root/.ansible/tmp/ansible-tmp-1578561276.92-80356906119956 `" ) && sleep 0'
2020-01-09 17:14:37,144 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-09 17:14:37,145 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpRDIOVm TO /root/.ansible/tmp/ansible-tmp-1578561276.92-80356906119956/AnsiballZ_lineinfile.py
2020-01-09 17:14:37,146 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561276.92-80356906119956/ /root/.ansible/tmp/ansible-tmp-1578561276.92-80356906119956/AnsiballZ_lineinfile.py && sleep 0'
2020-01-09 17:14:37,155 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561276.92-80356906119956/AnsiballZ_lineinfile.py && sleep 0'
2020-01-09 17:14:37,251 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561276.92-80356906119956/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:37,264 p=29139 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hosts (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hosts (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hosts (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hosts (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hosts", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "[M120-jumpserver]\n18.136.91.10 ansible_ssh_user=centos ansible_ssh_private_key_file=/home/centos/aws-project/.keys/m120-ssh\n", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hosts", 
            "regexp": "M120-jumpserver", 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-09 17:14:37,303 p=29139 u=root |  TASK [ec2 : set pip fact] *********************************************************************************************************************************
2020-01-09 17:14:37,304 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:92
2020-01-09 17:14:37,322 p=29139 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "pip": [
            "10.120.10.233"
        ]
    }, 
    "changed": false
}
2020-01-09 17:14:37,364 p=29139 u=root |  TASK [ec2 : Configure instances messages in "/home/centos/aws-project"] ***********************************************************************************
2020-01-09 17:14:37,364 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances_other_sg.yml:96
2020-01-09 17:14:37,384 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-09 17:14:37,384 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-09 17:14:37,393 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578561277.38-242753244505103 `" && echo ansible-tmp-1578561277.38-242753244505103="` echo /root/.ansible/tmp/ansible-tmp-1578561277.38-242753244505103 `" ) && sleep 0'
2020-01-09 17:14:37,405 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-09 17:14:37,406 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139uAOCRO/tmpwUX4CO TO /root/.ansible/tmp/ansible-tmp-1578561277.38-242753244505103/AnsiballZ_lineinfile.py
2020-01-09 17:14:37,406 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578561277.38-242753244505103/ /root/.ansible/tmp/ansible-tmp-1578561277.38-242753244505103/AnsiballZ_lineinfile.py && sleep 0'
2020-01-09 17:14:37,415 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578561277.38-242753244505103/AnsiballZ_lineinfile.py && sleep 0'
2020-01-09 17:14:37,512 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578561277.38-242753244505103/ > /dev/null 2>&1 && sleep 0'
2020-01-09 17:14:37,525 p=29139 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/instances (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/instances (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/instances (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/instances (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/instances", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "{ \"hostname\": \"M120-jumpserver\",\"public_ip\": \"18.136.91.10\",\"private_ip\": \"10.120.10.233\",\"application_name\": \\[ \"[u'jumpserver']\" \\] }", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/instances", 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-09 17:14:37,526 p=29139 u=root |  META: ran handlers
2020-01-09 17:14:37,527 p=29139 u=root |  META: ran handlers
2020-01-09 17:14:37,528 p=29139 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-09 17:14:37,528 p=29139 u=root |  localhost                  : ok=24   changed=5    unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2020-01-10 20:55:46,279 p=8599 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-10 20:55:46,280 p=8599 u=root |  Using /home/centos/aws-project/001.aws-base-ec2/ansible.cfg as config file
2020-01-10 20:55:46,287 p=8599 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-10 20:55:46,288 p=8599 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-10 20:55:46,288 p=8599 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-10 20:55:46,291 p=8599 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-10 20:55:46,293 p=8599 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-10 20:55:46,531 p=8599 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-10 20:55:46,692 p=8599 u=root |  statically imported: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-10 20:55:46,754 p=8599 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-10 20:55:46,754 p=8599 u=root |  1 plays in 03.ec2.yml
2020-01-10 20:55:46,784 p=8599 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-10 20:55:46,800 p=8599 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-10 20:55:46,800 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/03.ec2.yml:2
2020-01-10 20:55:46,811 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:46,811 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:46,820 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660946.81-135387152620156 `" && echo ansible-tmp-1578660946.81-135387152620156="` echo /root/.ansible/tmp/ansible-tmp-1578660946.81-135387152620156 `" ) && sleep 0'
2020-01-10 20:55:47,193 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-10 20:55:47,194 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpro2Oei TO /root/.ansible/tmp/ansible-tmp-1578660946.81-135387152620156/AnsiballZ_setup.py
2020-01-10 20:55:47,195 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660946.81-135387152620156/ /root/.ansible/tmp/ansible-tmp-1578660946.81-135387152620156/AnsiballZ_setup.py && sleep 0'
2020-01-10 20:55:47,204 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660946.81-135387152620156/AnsiballZ_setup.py && sleep 0'
2020-01-10 20:55:47,816 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660946.81-135387152620156/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:47,887 p=8599 u=root |  ok: [localhost]
2020-01-10 20:55:47,888 p=8599 u=root |  META: ran handlers
2020-01-10 20:55:47,928 p=8599 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-10 20:55:47,928 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-10 20:55:47,944 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:47,944 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:47,953 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660947.94-156558524754340 `" && echo ansible-tmp-1578660947.94-156558524754340="` echo /root/.ansible/tmp/ansible-tmp-1578660947.94-156558524754340 `" ) && sleep 0'
2020-01-10 20:55:48,191 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-10 20:55:48,191 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpYWgChK TO /root/.ansible/tmp/ansible-tmp-1578660947.94-156558524754340/AnsiballZ_ec2_key.py
2020-01-10 20:55:48,192 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660947.94-156558524754340/ /root/.ansible/tmp/ansible-tmp-1578660947.94-156558524754340/AnsiballZ_ec2_key.py && sleep 0'
2020-01-10 20:55:48,201 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660947.94-156558524754340/AnsiballZ_ec2_key.py && sleep 0'
2020-01-10 20:55:48,858 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660947.94-156558524754340/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:48,871 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m120-ssh", 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "18:72:64:17:3a:93:86:df:16:f0:2d:61:ed:f9:b1:2f:aa:fe:62:eb", 
        "name": "m120-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-10 20:55:48,911 p=8599 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-10 20:55:48,911 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-10 20:55:48,927 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:48,927 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:48,936 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660948.93-194878546282970 `" && echo ansible-tmp-1578660948.93-194878546282970="` echo /root/.ansible/tmp/ansible-tmp-1578660948.93-194878546282970 `" ) && sleep 0'
2020-01-10 20:55:49,149 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-10 20:55:49,149 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpEUcKdx TO /root/.ansible/tmp/ansible-tmp-1578660948.93-194878546282970/AnsiballZ_stat.py
2020-01-10 20:55:49,150 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660948.93-194878546282970/ /root/.ansible/tmp/ansible-tmp-1578660948.93-194878546282970/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:49,160 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660948.93-194878546282970/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:49,263 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660948.93-194878546282970/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:49,280 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484375.395159, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578484375.395159, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 63, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-10 20:55:49,319 p=8599 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-10 20:55:49,319 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-10 20:55:49,335 p=8599 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-10 20:55:49,376 p=8599 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-10 20:55:49,376 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-10 20:55:49,392 p=8599 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-10 20:55:49,432 p=8599 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-10 20:55:49,432 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-10 20:55:49,448 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:49,448 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:49,457 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660949.45-240960090634446 `" && echo ansible-tmp-1578660949.45-240960090634446="` echo /root/.ansible/tmp/ansible-tmp-1578660949.45-240960090634446 `" ) && sleep 0'
2020-01-10 20:55:49,469 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-10 20:55:49,469 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpChxir1 TO /root/.ansible/tmp/ansible-tmp-1578660949.45-240960090634446/AnsiballZ_stat.py
2020-01-10 20:55:49,471 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660949.45-240960090634446/ /root/.ansible/tmp/ansible-tmp-1578660949.45-240960090634446/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:49,480 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660949.45-240960090634446/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:49,584 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660949.45-240960090634446/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:49,600 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578646212.5848167, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578585313.294774, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578585313.294774, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-10 20:55:49,640 p=8599 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-10 20:55:49,640 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-10 20:55:49,656 p=8599 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-10 20:55:49,696 p=8599 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-10 20:55:49,697 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-10 20:55:49,713 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:49,713 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:49,722 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660949.71-195630464186857 `" && echo ansible-tmp-1578660949.71-195630464186857="` echo /root/.ansible/tmp/ansible-tmp-1578660949.71-195630464186857 `" ) && sleep 0'
2020-01-10 20:55:49,733 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-10 20:55:49,734 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpDrXB2A TO /root/.ansible/tmp/ansible-tmp-1578660949.71-195630464186857/AnsiballZ_stat.py
2020-01-10 20:55:49,735 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660949.71-195630464186857/ /root/.ansible/tmp/ansible-tmp-1578660949.71-195630464186857/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:49,743 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660949.71-195630464186857/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:49,853 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660949.71-195630464186857/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:49,868 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hosts"
        }
    }, 
    "stat": {
        "atime": 1578585317.8727474, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 16, 
        "charset": "us-ascii", 
        "checksum": "8fa6fb884a005320b4d8b3ab7e30cec0c1216ab8", 
        "ctime": 1578585313.294774, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 9529098, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578585313.291774, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 5773, 
        "uid": 0, 
        "version": "497181858", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-10 20:55:49,908 p=8599 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-10 20:55:49,908 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-10 20:55:49,928 p=8599 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-10 20:55:49,969 p=8599 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-10 20:55:49,969 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-10 20:55:49,985 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:49,986 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:49,994 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660949.99-37340621636980 `" && echo ansible-tmp-1578660949.99-37340621636980="` echo /root/.ansible/tmp/ansible-tmp-1578660949.99-37340621636980 `" ) && sleep 0'
2020-01-10 20:55:50,007 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-10 20:55:50,008 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpfhjArq TO /root/.ansible/tmp/ansible-tmp-1578660949.99-37340621636980/AnsiballZ_stat.py
2020-01-10 20:55:50,008 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660949.99-37340621636980/ /root/.ansible/tmp/ansible-tmp-1578660949.99-37340621636980/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:50,019 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660949.99-37340621636980/AnsiballZ_stat.py && sleep 0'
2020-01-10 20:55:50,129 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660949.99-37340621636980/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:50,143 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/instances"
        }
    }, 
    "stat": {
        "atime": 1578561637.5133133, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "0d918ef46f58f94fa0a8b07adc42e14d1af41e0d", 
        "ctime": 1578561277.5024016, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 6074287, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578561277.5014014, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 137, 
        "uid": 0, 
        "version": "18446744073306987522", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-10 20:55:50,183 p=8599 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-10 20:55:50,183 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-10 20:55:50,199 p=8599 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-10 20:55:50,240 p=8599 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-10 20:55:50,240 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-10 20:55:50,256 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:50,256 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:50,265 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660950.26-88371510549534 `" && echo ansible-tmp-1578660950.26-88371510549534="` echo /root/.ansible/tmp/ansible-tmp-1578660950.26-88371510549534 `" ) && sleep 0'
2020-01-10 20:55:50,497 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-10 20:55:50,498 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpLhgNsR TO /root/.ansible/tmp/ansible-tmp-1578660950.26-88371510549534/AnsiballZ_ec2_vpc_net_facts.py
2020-01-10 20:55:50,498 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660950.26-88371510549534/ /root/.ansible/tmp/ansible-tmp-1578660950.26-88371510549534/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-10 20:55:50,508 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660950.26-88371510549534/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-10 20:55:51,320 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660950.26-88371510549534/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:51,334 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M120"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.120.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0171dc4355afb2d57", 
                    "cidr_block": "10.120.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f1e92296", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-025e5ea3271f91941", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-10 20:55:51,374 p=8599 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-10 20:55:51,374 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:10
2020-01-10 20:55:51,392 p=8599 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-025e5ea3271f91941"
    }, 
    "changed": false
}
2020-01-10 20:55:51,431 p=8599 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-10 20:55:51,432 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:15
2020-01-10 20:55:51,448 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:51,448 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:51,457 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660951.45-225510808807479 `" && echo ansible-tmp-1578660951.45-225510808807479="` echo /root/.ansible/tmp/ansible-tmp-1578660951.45-225510808807479 `" ) && sleep 0'
2020-01-10 20:55:51,687 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-10 20:55:51,688 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpQvrfBw TO /root/.ansible/tmp/ansible-tmp-1578660951.45-225510808807479/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-10 20:55:51,689 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660951.45-225510808807479/ /root/.ansible/tmp/ansible-tmp-1578660951.45-225510808807479/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-10 20:55:51,698 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660951.45-225510808807479/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-10 20:55:52,382 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660951.45-225510808807479/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:52,399 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-025e5ea3271f91941"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1c", 
            "availability_zone_id": "apse1-az3", 
            "available_ip_address_count": 225, 
            "cidr_block": "10.120.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a44bb4344c1a9e38", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-0a44bb4344c1a9e38", 
            "subnet_id": "subnet-0a44bb4344c1a9e38", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1b", 
            "availability_zone_id": "apse1-az2", 
            "available_ip_address_count": 228, 
            "cidr_block": "10.120.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-088c7b9e0c3425f92", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-088c7b9e0c3425f92", 
            "subnet_id": "subnet-088c7b9e0c3425f92", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-southeast-1a", 
            "availability_zone_id": "apse1-az1", 
            "available_ip_address_count": 223, 
            "cidr_block": "10.120.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-05f2241d9964e4798", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-southeast-1:838988372941:subnet/subnet-05f2241d9964e4798", 
            "subnet_id": "subnet-05f2241d9964e4798", 
            "tags": {
                "Environment": "M120", 
                "Name": "M120_ec2_ap-southeast-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-10 20:55:52,438 p=8599 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-10 20:55:52,438 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:22
2020-01-10 20:55:52,457 p=8599 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-05f2241d9964e4798", 
            "subnet-088c7b9e0c3425f92", 
            "subnet-0a44bb4344c1a9e38"
        ]
    }, 
    "changed": false
}
2020-01-10 20:55:52,496 p=8599 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-10 20:55:52,497 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-10 20:55:52,567 p=8599 u=root |  included: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml for localhost
2020-01-10 20:55:52,615 p=8599 u=root |  TASK [ec2 : Get SSH SG ID] ********************************************************************************************************************************
2020-01-10 20:55:52,615 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:2
2020-01-10 20:55:52,632 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:52,633 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:52,641 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660952.63-193402293348767 `" && echo ansible-tmp-1578660952.63-193402293348767="` echo /root/.ansible/tmp/ansible-tmp-1578660952.63-193402293348767 `" ) && sleep 0'
2020-01-10 20:55:52,872 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-10 20:55:52,873 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpBwapfF TO /root/.ansible/tmp/ansible-tmp-1578660952.63-193402293348767/AnsiballZ_ec2_group_facts.py
2020-01-10 20:55:52,873 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660952.63-193402293348767/ /root/.ansible/tmp/ansible-tmp-1578660952.63-193402293348767/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-10 20:55:52,883 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660952.63-193402293348767/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-10 20:55:53,558 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660952.63-193402293348767/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:53,572 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-ssh"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port ssh to the user", 
            "group_id": "sg-066bafabf3e4021cc", 
            "group_name": "M120-ssh", 
            "ip_permissions": [
                {
                    "from_port": 22, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "103.136.108.78/32"
                        }, 
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 22"
                        }, 
                        {
                            "cidr_ip": "52.221.224.212/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 22, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-ssh", 
                "Name": "M120-ssh"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-10 20:55:53,611 p=8599 u=root |  TASK [ec2 : list of ssh the security group id.] ***********************************************************************************************************
2020-01-10 20:55:53,612 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:9
2020-01-10 20:55:53,646 p=8599 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 22, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 22, u'ip_ranges': [{u'cidr_ip': u'103.136.108.78/32'}, {u'description': u'allow all on port 22', u'cidr_ip': u'154.197.29.34/32'}, {u'cidr_ip': u'52.221.224.212/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port ssh to the user', u'tags': {u'Environment': u'M120-ssh', u'Name': u'M120-ssh'}, u'group_name': u'M120-ssh', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-066bafabf3e4021cc', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ssh_id": "sg-066bafabf3e4021cc"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port ssh to the user", 
        "group_id": "sg-066bafabf3e4021cc", 
        "group_name": "M120-ssh", 
        "ip_permissions": [
            {
                "from_port": 22, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "103.136.108.78/32"
                    }, 
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 22"
                    }, 
                    {
                        "cidr_ip": "52.221.224.212/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 22, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-ssh", 
            "Name": "M120-ssh"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-10 20:55:53,685 p=8599 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-10 20:55:53,686 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:14
2020-01-10 20:55:53,707 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:53,708 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:53,716 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660953.71-153608706737336 `" && echo ansible-tmp-1578660953.71-153608706737336="` echo /root/.ansible/tmp/ansible-tmp-1578660953.71-153608706737336 `" ) && sleep 0'
2020-01-10 20:55:53,727 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-10 20:55:53,728 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpTnRWW2 TO /root/.ansible/tmp/ansible-tmp-1578660953.71-153608706737336/AnsiballZ_ec2_group_facts.py
2020-01-10 20:55:53,729 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660953.71-153608706737336/ /root/.ansible/tmp/ansible-tmp-1578660953.71-153608706737336/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-10 20:55:53,737 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660953.71-153608706737336/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-10 20:55:54,417 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660953.71-153608706737336/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:55:54,435 p=8599 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M120-all"
            }, 
            "profile": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-004a004e0482c5105", 
            "group_name": "M120-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.120.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }, 
                        {
                            "cidr_ip": "154.197.29.34/32"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M120-all", 
                "Name": "M120-all"
            }, 
            "vpc_id": "vpc-025e5ea3271f91941"
        }
    ]
}
2020-01-10 20:55:54,474 p=8599 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-10 20:55:54,474 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:21
2020-01-10 20:55:54,502 p=8599 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.120.0.0/16'}, {u'cidr_ip': u'154.197.29.34/32'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M120-all', u'Name': u'M120-all'}, u'group_name': u'M120-all', u'vpc_id': u'vpc-025e5ea3271f91941', u'group_id': u'sg-004a004e0482c5105', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-004a004e0482c5105"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-004a004e0482c5105", 
        "group_name": "M120-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.120.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }, 
                    {
                        "cidr_ip": "154.197.29.34/32"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M120-all", 
            "Name": "M120-all"
        }, 
        "vpc_id": "vpc-025e5ea3271f91941"
    }
}
2020-01-10 20:55:54,542 p=8599 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-10 20:55:54,542 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:26
2020-01-10 20:55:54,570 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:55:54,570 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:55:54,579 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660954.57-222995649166590 `" && echo ansible-tmp-1578660954.57-222995649166590="` echo /root/.ansible/tmp/ansible-tmp-1578660954.57-222995649166590 `" ) && sleep 0'
2020-01-10 20:55:54,844 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2.py
2020-01-10 20:55:54,845 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpKJKh3R TO /root/.ansible/tmp/ansible-tmp-1578660954.57-222995649166590/AnsiballZ_ec2.py
2020-01-10 20:55:54,846 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660954.57-222995649166590/ /root/.ansible/tmp/ansible-tmp-1578660954.57-222995649166590/AnsiballZ_ec2.py && sleep 0'
2020-01-10 20:55:54,855 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660954.57-222995649166590/AnsiballZ_ec2.py && sleep 0'
2020-01-10 20:56:07,080 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660954.57-222995649166590/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:56:07,102 p=8599 u=root |  changed: [localhost] => {
    "changed": true, 
    "instance_ids": [
        "i-02a64aeed3783f50f"
    ], 
    "instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-05788beb8beba733e"
                }
            }, 
            "dns_name": "ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh"
            }, 
            "hypervisor": "xen", 
            "id": "i-02a64aeed3783f50f", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3a.large", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "launch_time": "2020-01-10T12:55:56.000Z", 
            "placement": "ap-southeast-1a", 
            "private_dns_name": "ip-10-120-10-144.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.10.144", 
            "public_dns_name": "ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "54.254.177.175", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-prometheus", 
                "env": "prometheus"
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ], 
    "invocation": {
        "module_args": {
            "assign_public_ip": true, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "count": 1, 
            "count_tag": {
                "Name": "M120-prometheus"
            }, 
            "debug_botocore_endpoint_logs": false, 
            "ebs_optimized": false, 
            "ec2_url": null, 
            "exact_count": 1, 
            "group": null, 
            "group_id": [
                "sg-066bafabf3e4021cc", 
                "sg-004a004e0482c5105"
            ], 
            "id": null, 
            "image": "ami-0208d16fd11190da6", 
            "instance_ids": null, 
            "instance_initiated_shutdown_behavior": "stop", 
            "instance_profile_name": "", 
            "instance_tags": {
                "Name": "M120-prometheus", 
                "env": "prometheus"
            }, 
            "instance_type": "t3a.large", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "monitoring": true, 
            "network_interfaces": null, 
            "placement_group": null, 
            "private_ip": null, 
            "profile": null, 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "security_token": null, 
            "source_dest_check": null, 
            "spot_launch_group": null, 
            "spot_price": null, 
            "spot_type": "one-time", 
            "spot_wait_timeout": 600, 
            "state": "present", 
            "tenancy": "default", 
            "termination_protection": true, 
            "user_data": null, 
            "validate_certs": true, 
            "volumes": [
                {
                    "delete_on_termination": false, 
                    "device_name": "/dev/sda1", 
                    "volume_size": 50, 
                    "volume_type": "gp2"
                }
            ], 
            "vpc_subnet_id": "subnet-05f2241d9964e4798", 
            "wait": true, 
            "wait_timeout": 300, 
            "zone": null
        }
    }, 
    "tagged_instances": [
        {
            "ami_launch_index": "0", 
            "architecture": "x86_64", 
            "block_device_mapping": {
                "/dev/sda1": {
                    "delete_on_termination": false, 
                    "status": "attached", 
                    "volume_id": "vol-05788beb8beba733e"
                }
            }, 
            "dns_name": "ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com", 
            "ebs_optimized": false, 
            "groups": {
                "sg-004a004e0482c5105": "M120-all", 
                "sg-066bafabf3e4021cc": "M120-ssh"
            }, 
            "hypervisor": "xen", 
            "id": "i-02a64aeed3783f50f", 
            "image_id": "ami-0208d16fd11190da6", 
            "instance_type": "t3a.large", 
            "kernel": null, 
            "key_name": "m120-ssh", 
            "launch_time": "2020-01-10T12:55:56.000Z", 
            "placement": "ap-southeast-1a", 
            "private_dns_name": "ip-10-120-10-144.ap-southeast-1.compute.internal", 
            "private_ip": "10.120.10.144", 
            "public_dns_name": "ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com", 
            "public_ip": "54.254.177.175", 
            "ramdisk": null, 
            "region": "ap-southeast-1", 
            "root_device_name": "/dev/sda1", 
            "root_device_type": "ebs", 
            "state": "running", 
            "state_code": 16, 
            "tags": {
                "Name": "M120-prometheus", 
                "env": "prometheus"
            }, 
            "tenancy": "default", 
            "virtualization_type": "hvm"
        }
    ]
}
2020-01-10 20:56:07,141 p=8599 u=root |  TASK [ec2 : create EIP] ***********************************************************************************************************************************
2020-01-10 20:56:07,141 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:54
2020-01-10 20:56:07,158 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:56:07,158 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:56:07,167 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660967.16-37391112352099 `" && echo ansible-tmp-1578660967.16-37391112352099="` echo /root/.ansible/tmp/ansible-tmp-1578660967.16-37391112352099 `" ) && sleep 0'
2020-01-10 20:56:07,410 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-10 20:56:07,410 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpbUobNr TO /root/.ansible/tmp/ansible-tmp-1578660967.16-37391112352099/AnsiballZ_ec2_eip.py
2020-01-10 20:56:07,411 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660967.16-37391112352099/ /root/.ansible/tmp/ansible-tmp-1578660967.16-37391112352099/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-10 20:56:07,420 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660967.16-37391112352099/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-10 20:56:07,861 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660967.16-37391112352099/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:56:07,875 p=8599 u=root |  changed: [localhost] => {
    "allocation_id": "eipalloc-0728e5ab1f0b12b9f", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": null, 
            "ec2_url": null, 
            "in_vpc": false, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": null, 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": false, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "public_ip": "18.141.18.140"
}
2020-01-10 20:56:07,915 p=8599 u=root |  TASK [ec2 : set eip fact] *********************************************************************************************************************************
2020-01-10 20:56:07,915 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:59
2020-01-10 20:56:07,931 p=8599 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "eip": "18.141.18.140"
    }, 
    "changed": false
}
2020-01-10 20:56:07,971 p=8599 u=root |  TASK [ec2 : Assign EIP address for web instances] *********************************************************************************************************
2020-01-10 20:56:07,971 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:63
2020-01-10 20:56:07,995 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:56:07,995 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:56:08,004 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660967.99-103032463521732 `" && echo ansible-tmp-1578660967.99-103032463521732="` echo /root/.ansible/tmp/ansible-tmp-1578660967.99-103032463521732 `" ) && sleep 0'
2020-01-10 20:56:08,017 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_eip.py
2020-01-10 20:56:08,017 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmp35B1n7 TO /root/.ansible/tmp/ansible-tmp-1578660967.99-103032463521732/AnsiballZ_ec2_eip.py
2020-01-10 20:56:08,018 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660967.99-103032463521732/ /root/.ansible/tmp/ansible-tmp-1578660967.99-103032463521732/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-10 20:56:08,027 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660967.99-103032463521732/AnsiballZ_ec2_eip.py && sleep 0'
2020-01-10 20:56:08,919 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660967.99-103032463521732/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:56:08,939 p=8599 u=root |  changed: [localhost] => (item={u'ramdisk': None, u'kernel': None, u'root_device_type': u'ebs', u'private_dns_name': u'ip-10-120-10-144.ap-southeast-1.compute.internal', u'block_device_mapping': {u'/dev/sda1': {u'status': u'attached', u'delete_on_termination': False, u'volume_id': u'vol-05788beb8beba733e'}}, u'key_name': u'm120-ssh', u'public_ip': u'54.254.177.175', u'image_id': u'ami-0208d16fd11190da6', u'tenancy': u'default', u'private_ip': u'10.120.10.144', u'groups': {u'sg-066bafabf3e4021cc': u'M120-ssh', u'sg-004a004e0482c5105': u'M120-all'}, u'public_dns_name': u'ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com', u'state_code': 16, u'id': u'i-02a64aeed3783f50f', u'tags': {u'Name': u'M120-prometheus', u'env': u'prometheus'}, u'placement': u'ap-southeast-1a', u'ami_launch_index': u'0', u'dns_name': u'ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com', u'region': u'ap-southeast-1', u'ebs_optimized': False, u'launch_time': u'2020-01-10T12:55:56.000Z', u'instance_type': u't3a.large', u'state': u'running', u'architecture': u'x86_64', u'hypervisor': u'xen', u'virtualization_type': u'hvm', u'root_device_name': u'/dev/sda1'}) => {
    "allocation_id": "eipalloc-0728e5ab1f0b12b9f", 
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "allow_reassociation": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "device_id": "i-02a64aeed3783f50f", 
            "ec2_url": null, 
            "in_vpc": true, 
            "private_ip_address": null, 
            "profile": null, 
            "public_ip": "18.141.18.140", 
            "region": "ap-southeast-1", 
            "release_on_disassociation": false, 
            "reuse_existing_ip_allowed": true, 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "ami_launch_index": "0", 
        "architecture": "x86_64", 
        "block_device_mapping": {
            "/dev/sda1": {
                "delete_on_termination": false, 
                "status": "attached", 
                "volume_id": "vol-05788beb8beba733e"
            }
        }, 
        "dns_name": "ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com", 
        "ebs_optimized": false, 
        "groups": {
            "sg-004a004e0482c5105": "M120-all", 
            "sg-066bafabf3e4021cc": "M120-ssh"
        }, 
        "hypervisor": "xen", 
        "id": "i-02a64aeed3783f50f", 
        "image_id": "ami-0208d16fd11190da6", 
        "instance_type": "t3a.large", 
        "kernel": null, 
        "key_name": "m120-ssh", 
        "launch_time": "2020-01-10T12:55:56.000Z", 
        "placement": "ap-southeast-1a", 
        "private_dns_name": "ip-10-120-10-144.ap-southeast-1.compute.internal", 
        "private_ip": "10.120.10.144", 
        "public_dns_name": "ec2-54-254-177-175.ap-southeast-1.compute.amazonaws.com", 
        "public_ip": "54.254.177.175", 
        "ramdisk": null, 
        "region": "ap-southeast-1", 
        "root_device_name": "/dev/sda1", 
        "root_device_type": "ebs", 
        "state": "running", 
        "state_code": 16, 
        "tags": {
            "Name": "M120-prometheus", 
            "env": "prometheus"
        }, 
        "tenancy": "default", 
        "virtualization_type": "hvm"
    }, 
    "public_ip": "18.141.18.140"
}
2020-01-10 20:56:08,982 p=8599 u=root |  TASK [ec2 : Configure hostname in "/home/centos/aws-project"] *********************************************************************************************
2020-01-10 20:56:08,982 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:73
2020-01-10 20:56:09,003 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:56:09,003 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:56:09,012 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660969.0-33705125932848 `" && echo ansible-tmp-1578660969.0-33705125932848="` echo /root/.ansible/tmp/ansible-tmp-1578660969.0-33705125932848 `" ) && sleep 0'
2020-01-10 20:56:09,228 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-10 20:56:09,229 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmp3Z9gCW TO /root/.ansible/tmp/ansible-tmp-1578660969.0-33705125932848/AnsiballZ_lineinfile.py
2020-01-10 20:56:09,230 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660969.0-33705125932848/ /root/.ansible/tmp/ansible-tmp-1578660969.0-33705125932848/AnsiballZ_lineinfile.py && sleep 0'
2020-01-10 20:56:09,239 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660969.0-33705125932848/AnsiballZ_lineinfile.py && sleep 0'
2020-01-10 20:56:09,335 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660969.0-33705125932848/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:56:09,348 p=8599 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/hosts (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/hosts (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/hosts (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/hosts (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/hosts", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "[M120-prometheus]\n18.141.18.140 ansible_ssh_user=centos ansible_ssh_private_key_file=/home/centos/aws-project/.keys/m120-ssh\n", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/hosts", 
            "regexp": "M120-prometheus", 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-10 20:56:09,387 p=8599 u=root |  TASK [ec2 : set pip fact] *********************************************************************************************************************************
2020-01-10 20:56:09,388 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:80
2020-01-10 20:56:09,406 p=8599 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "pip": [
            "10.120.10.144"
        ]
    }, 
    "changed": false
}
2020-01-10 20:56:09,448 p=8599 u=root |  TASK [ec2 : Configure instances messages in "/home/centos/aws-project"] ***********************************************************************************
2020-01-10 20:56:09,448 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/instances.yml:84
2020-01-10 20:56:09,468 p=8599 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-10 20:56:09,468 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-10 20:56:09,477 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578660969.47-10111246897347 `" && echo ansible-tmp-1578660969.47-10111246897347="` echo /root/.ansible/tmp/ansible-tmp-1578660969.47-10111246897347 `" ) && sleep 0'
2020-01-10 20:56:09,488 p=8599 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/lineinfile.py
2020-01-10 20:56:09,489 p=8599 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-8599rr20H2/tmpo63RcC TO /root/.ansible/tmp/ansible-tmp-1578660969.47-10111246897347/AnsiballZ_lineinfile.py
2020-01-10 20:56:09,489 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578660969.47-10111246897347/ /root/.ansible/tmp/ansible-tmp-1578660969.47-10111246897347/AnsiballZ_lineinfile.py && sleep 0'
2020-01-10 20:56:09,498 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578660969.47-10111246897347/AnsiballZ_lineinfile.py && sleep 0'
2020-01-10 20:56:09,595 p=8599 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578660969.47-10111246897347/ > /dev/null 2>&1 && sleep 0'
2020-01-10 20:56:09,608 p=8599 u=root |  changed: [localhost] => {
    "backup": "", 
    "changed": true, 
    "diff": [
        {
            "after": "", 
            "after_header": "/home/centos/aws-project/.inventory/instances (content)", 
            "before": "", 
            "before_header": "/home/centos/aws-project/.inventory/instances (content)"
        }, 
        {
            "after_header": "/home/centos/aws-project/.inventory/instances (file attributes)", 
            "before_header": "/home/centos/aws-project/.inventory/instances (file attributes)"
        }
    ], 
    "invocation": {
        "module_args": {
            "attributes": null, 
            "backrefs": false, 
            "backup": false, 
            "content": null, 
            "create": false, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.inventory/instances", 
            "directory_mode": null, 
            "firstmatch": false, 
            "follow": false, 
            "force": null, 
            "group": null, 
            "insertafter": null, 
            "insertbefore": null, 
            "line": "{ \"hostname\": \"M120-prometheus\",\"public_ip\": \"18.141.18.140\",\"private_ip\": \"10.120.10.144\",\"application_name\": \\[ \"[u'prometheus']\" \\] }", 
            "mode": null, 
            "owner": null, 
            "path": "/home/centos/aws-project/.inventory/instances", 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": null, 
            "state": "present", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "msg": "line added"
}
2020-01-10 20:56:09,647 p=8599 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-10 20:56:09,647 p=8599 u=root |  task path: /home/centos/aws-project/001.aws-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-10 20:56:09,664 p=8599 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-10 20:56:09,665 p=8599 u=root |  META: ran handlers
2020-01-10 20:56:09,665 p=8599 u=root |  META: ran handlers
2020-01-10 20:56:09,666 p=8599 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-10 20:56:09,666 p=8599 u=root |  localhost                  : ok=22   changed=5    unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
