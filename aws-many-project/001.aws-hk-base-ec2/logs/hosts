
2020-01-11 20:42:16,058 p=20952 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:42:16,058 p=20952 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:42:16,066 p=20952 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:42:16,067 p=20952 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:42:16,067 p=20952 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:42:16,070 p=20952 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:42:16,072 p=20952 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:42:16,481 p=20952 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:42:16,490 p=20952 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:42:16,498 p=20952 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:42:16,507 p=20952 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:42:16,516 p=20952 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:42:16,579 p=20952 u=root |  PLAYBOOK: 01.vpc-subnet-sg-base.yml ***********************************************************************************************************************
2020-01-11 20:42:16,579 p=20952 u=root |  2 plays in 01.vpc-subnet-sg-base.yml
2020-01-11 20:42:16,609 p=20952 u=root |  PLAY [Create,launch and configure our basic AWS VPC] ******************************************************************************************************
2020-01-11 20:42:16,621 p=20952 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:42:16,621 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:2
2020-01-11 20:42:16,632 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:16,633 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:16,641 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746536.63-111976542629472 `" && echo ansible-tmp-1578746536.63-111976542629472="` echo /root/.ansible/tmp/ansible-tmp-1578746536.63-111976542629472 `" ) && sleep 0'
2020-01-11 20:42:17,029 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:42:17,030 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpWFR58g TO /root/.ansible/tmp/ansible-tmp-1578746536.63-111976542629472/AnsiballZ_setup.py
2020-01-11 20:42:17,031 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746536.63-111976542629472/ /root/.ansible/tmp/ansible-tmp-1578746536.63-111976542629472/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:42:17,040 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746536.63-111976542629472/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:42:17,667 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746536.63-111976542629472/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:17,738 p=20952 u=root |  ok: [localhost]
2020-01-11 20:42:17,739 p=20952 u=root |  META: ran handlers
2020-01-11 20:42:17,779 p=20952 u=root |  TASK [roles/vpc : ensure that the VPC is present] *********************************************************************************************************
2020-01-11 20:42:17,779 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/vpc/tasks/main.yml:4
2020-01-11 20:42:17,796 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:17,797 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:17,805 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746537.8-88328019431501 `" && echo ansible-tmp-1578746537.8-88328019431501="` echo /root/.ansible/tmp/ansible-tmp-1578746537.8-88328019431501 `" ) && sleep 0'
2020-01-11 20:42:18,065 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2020-01-11 20:42:18,066 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpJuMDD5 TO /root/.ansible/tmp/ansible-tmp-1578746537.8-88328019431501/AnsiballZ_ec2_vpc_net.py
2020-01-11 20:42:18,067 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746537.8-88328019431501/ /root/.ansible/tmp/ansible-tmp-1578746537.8-88328019431501/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:42:18,076 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746537.8-88328019431501/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:42:20,443 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746537.8-88328019431501/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:20,458 p=20952 u=root |  changed: [localhost] => {
    "changed": true, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "cidr_block": [
                "10.20.0.0/16"
            ], 
            "debug_botocore_endpoint_logs": false, 
            "dhcp_opts_id": null, 
            "dns_hostnames": true, 
            "dns_support": true, 
            "ec2_url": null, 
            "multi_ok": false, 
            "name": "M20", 
            "profile": null, 
            "purge_cidrs": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "tenancy": "default", 
            "validate_certs": true
        }
    }, 
    "vpc": {
        "cidr_block": "10.20.0.0/16", 
        "cidr_block_association_set": [
            {
                "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                "cidr_block": "10.20.0.0/16", 
                "cidr_block_state": {
                    "state": "associated"
                }
            }
        ], 
        "classic_link_enabled": false, 
        "dhcp_options_id": "dopt-f30bea9a", 
        "id": "vpc-0f5dfc0ae44286535", 
        "instance_tenancy": "default", 
        "is_default": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20"
        }
    }
}
2020-01-11 20:42:20,497 p=20952 u=root |  TASK [roles/subnets : ensure that the subnets are present] ************************************************************************************************
2020-01-11 20:42:20,497 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:4
2020-01-11 20:42:20,525 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:20,525 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:20,534 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746540.53-139416830796605 `" && echo ansible-tmp-1578746540.53-139416830796605="` echo /root/.ansible/tmp/ansible-tmp-1578746540.53-139416830796605 `" ) && sleep 0'
2020-01-11 20:42:20,790 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:42:20,790 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpWvwLxt TO /root/.ansible/tmp/ansible-tmp-1578746540.53-139416830796605/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:42:20,791 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746540.53-139416830796605/ /root/.ansible/tmp/ansible-tmp-1578746540.53-139416830796605/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:42:20,800 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746540.53-139416830796605/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:42:22,495 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746540.53-139416830796605/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:22,512 p=20952 u=root |  changed: [localhost] => (item={u'subnet': u'10.20.10.0/24', u'use': u'ec2', u'az': u'a'}) => {
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1a", 
            "cidr": "10.20.10.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "a", 
        "subnet": "10.20.10.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1a", 
        "availability_zone_id": "ape1-az1", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.10.0/24", 
        "default_for_az": false, 
        "id": "subnet-0a81abe1060a70c59", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1a", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:42:22,520 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:22,529 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746542.52-196966715371744 `" && echo ansible-tmp-1578746542.52-196966715371744="` echo /root/.ansible/tmp/ansible-tmp-1578746542.52-196966715371744 `" ) && sleep 0'
2020-01-11 20:42:22,542 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:42:22,542 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpQCi8BW TO /root/.ansible/tmp/ansible-tmp-1578746542.52-196966715371744/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:42:22,543 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746542.52-196966715371744/ /root/.ansible/tmp/ansible-tmp-1578746542.52-196966715371744/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:42:22,553 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746542.52-196966715371744/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:42:24,090 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746542.52-196966715371744/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:24,104 p=20952 u=root |  changed: [localhost] => (item={u'subnet': u'10.20.11.0/24', u'use': u'ec2', u'az': u'b'}) => {
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1b", 
            "cidr": "10.20.11.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "b", 
        "subnet": "10.20.11.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1b", 
        "availability_zone_id": "ape1-az2", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.11.0/24", 
        "default_for_az": false, 
        "id": "subnet-0fcef4b1debcf3717", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1b", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:42:24,113 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:24,122 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746544.11-63610119186955 `" && echo ansible-tmp-1578746544.11-63610119186955="` echo /root/.ansible/tmp/ansible-tmp-1578746544.11-63610119186955 `" ) && sleep 0'
2020-01-11 20:42:24,134 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:42:24,135 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpLrXOGs TO /root/.ansible/tmp/ansible-tmp-1578746544.11-63610119186955/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:42:24,136 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746544.11-63610119186955/ /root/.ansible/tmp/ansible-tmp-1578746544.11-63610119186955/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:42:24,145 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746544.11-63610119186955/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:42:25,722 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746544.11-63610119186955/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:25,736 p=20952 u=root |  changed: [localhost] => (item={u'subnet': u'10.20.12.0/24', u'use': u'ec2', u'az': u'c'}) => {
    "ansible_loop_var": "item", 
    "changed": true, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1c", 
            "cidr": "10.20.12.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "c", 
        "subnet": "10.20.12.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1c", 
        "availability_zone_id": "ape1-az3", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.12.0/24", 
        "default_for_az": false, 
        "id": "subnet-04f2d26aa3b7d632b", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1c", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:42:25,782 p=20952 u=root |  TASK [roles/subnets : gather information about the ec2 subnets] *******************************************************************************************
2020-01-11 20:42:25,782 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:17
2020-01-11 20:42:25,799 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:25,799 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:25,808 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746545.8-67430593532881 `" && echo ansible-tmp-1578746545.8-67430593532881="` echo /root/.ansible/tmp/ansible-tmp-1578746545.8-67430593532881 `" ) && sleep 0'
2020-01-11 20:42:26,046 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:42:26,047 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpGRwG6d TO /root/.ansible/tmp/ansible-tmp-1578746545.8-67430593532881/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:42:26,048 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746545.8-67430593532881/ /root/.ansible/tmp/ansible-tmp-1578746545.8-67430593532881/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:42:26,057 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746545.8-67430593532881/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:42:26,879 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746545.8-67430593532881/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:26,895 p=20952 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "ec2"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1b", 
            "availability_zone_id": "ape1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0fcef4b1debcf3717", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
            "subnet_id": "subnet-0fcef4b1debcf3717", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1a", 
            "availability_zone_id": "ape1-az1", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a81abe1060a70c59", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
            "subnet_id": "subnet-0a81abe1060a70c59", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1c", 
            "availability_zone_id": "ape1-az3", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-04f2d26aa3b7d632b", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
            "subnet_id": "subnet-04f2d26aa3b7d632b", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:42:26,934 p=20952 u=root |  TASK [roles/subnets : gather information about the rds subnets] *******************************************************************************************
2020-01-11 20:42:26,935 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:25
2020-01-11 20:42:26,952 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:26,952 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:26,961 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746546.95-4950652060392 `" && echo ansible-tmp-1578746546.95-4950652060392="` echo /root/.ansible/tmp/ansible-tmp-1578746546.95-4950652060392 `" ) && sleep 0'
2020-01-11 20:42:26,973 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:42:26,973 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpSq6DTr TO /root/.ansible/tmp/ansible-tmp-1578746546.95-4950652060392/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:42:26,974 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746546.95-4950652060392/ /root/.ansible/tmp/ansible-tmp-1578746546.95-4950652060392/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:42:26,983 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746546.95-4950652060392/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:42:27,760 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746546.95-4950652060392/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:27,773 p=20952 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "rds"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:42:27,813 p=20952 u=root |  TASK [roles/subnets : register just the IDs for each of the subnets] **************************************************************************************
2020-01-11 20:42:27,813 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:33
2020-01-11 20:42:27,832 p=20952 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-0a81abe1060a70c59", 
            "subnet-0fcef4b1debcf3717", 
            "subnet-04f2d26aa3b7d632b"
        ]
    }, 
    "changed": false
}
2020-01-11 20:42:27,871 p=20952 u=root |  TASK [roles/gateway : ensure that there is an internet gateway] *******************************************************************************************
2020-01-11 20:42:27,872 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:4
2020-01-11 20:42:27,890 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:27,890 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:27,899 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746547.89-180881557671048 `" && echo ansible-tmp-1578746547.89-180881557671048="` echo /root/.ansible/tmp/ansible-tmp-1578746547.89-180881557671048 `" ) && sleep 0'
2020-01-11 20:42:28,148 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_igw.py
2020-01-11 20:42:28,148 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpEi4gDM TO /root/.ansible/tmp/ansible-tmp-1578746547.89-180881557671048/AnsiballZ_ec2_vpc_igw.py
2020-01-11 20:42:28,149 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746547.89-180881557671048/ /root/.ansible/tmp/ansible-tmp-1578746547.89-180881557671048/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:42:28,159 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746547.89-180881557671048/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:42:29,362 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746547.89-180881557671048/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:29,375 p=20952 u=root |  changed: [localhost] => {
    "changed": true, 
    "gateway_id": "igw-0d49fc731a1555b52", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_internet_gateway", 
                "Use": "gateway"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "tags": {
        "Environment": "M20", 
        "Name": "M20_internet_gateway", 
        "Use": "gateway"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:42:29,415 p=20952 u=root |  TASK [roles/gateway : check that we can ec2 public route through internet gateway] ************************************************************************
2020-01-11 20:42:29,415 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:15
2020-01-11 20:42:29,435 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:29,435 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:29,444 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746549.43-155043389027579 `" && echo ansible-tmp-1578746549.43-155043389027579="` echo /root/.ansible/tmp/ansible-tmp-1578746549.43-155043389027579 `" ) && sleep 0'
2020-01-11 20:42:29,708 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
2020-01-11 20:42:29,709 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpcx2JIk TO /root/.ansible/tmp/ansible-tmp-1578746549.43-155043389027579/AnsiballZ_ec2_vpc_route_table.py
2020-01-11 20:42:29,709 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746549.43-155043389027579/ /root/.ansible/tmp/ansible-tmp-1578746549.43-155043389027579/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:42:29,719 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746549.43-155043389027579/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:42:36,886 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746549.43-155043389027579/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:36,900 p=20952 u=root |  changed: [localhost] => {
    "changed": true, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "lookup": "tag", 
            "profile": null, 
            "propagating_vgw_ids": null, 
            "purge_routes": true, 
            "purge_subnets": true, 
            "purge_tags": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "route_table_id": null, 
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0d49fc731a1555b52"
                }
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-0a81abe1060a70c59", 
                "subnet-0fcef4b1debcf3717", 
                "subnet-04f2d26aa3b7d632b"
            ], 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "route_table": {
        "associations": [
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-024f474ac59b61ab1", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0fcef4b1debcf3717"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0fdb85ba9e784fdac", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0a81abe1060a70c59"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0537c9564f7e4eb84", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-04f2d26aa3b7d632b"
            }
        ], 
        "id": "rtb-048a44083232526f8", 
        "owner_id": "838988372941", 
        "propagating_vgws": [], 
        "route_table_id": "rtb-048a44083232526f8", 
        "routes": [
            {
                "destination_cidr_block": "10.20.0.0/16", 
                "gateway_id": "local", 
                "origin": "CreateRouteTable", 
                "state": "active"
            }, 
            {
                "destination_cidr_block": "0.0.0.0/0", 
                "gateway_id": "igw-0d49fc731a1555b52", 
                "origin": "CreateRoute", 
                "state": "active"
            }
        ], 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_public"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:42:36,901 p=20952 u=root |  META: ran handlers
2020-01-11 20:42:36,901 p=20952 u=root |  META: ran handlers
2020-01-11 20:42:36,909 p=20952 u=root |  PLAY [create securitygroups] ******************************************************************************************************************************
2020-01-11 20:42:36,958 p=20952 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:42:36,958 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:16
2020-01-11 20:42:36,970 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:36,970 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:36,979 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746556.97-220250556461190 `" && echo ansible-tmp-1578746556.97-220250556461190="` echo /root/.ansible/tmp/ansible-tmp-1578746556.97-220250556461190 `" ) && sleep 0'
2020-01-11 20:42:36,992 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:42:36,993 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmpw4ys0r TO /root/.ansible/tmp/ansible-tmp-1578746556.97-220250556461190/AnsiballZ_setup.py
2020-01-11 20:42:36,994 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746556.97-220250556461190/ /root/.ansible/tmp/ansible-tmp-1578746556.97-220250556461190/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:42:37,003 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746556.97-220250556461190/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:42:37,465 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746556.97-220250556461190/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:37,543 p=20952 u=root |  ok: [localhost]
2020-01-11 20:42:37,544 p=20952 u=root |  META: ran handlers
2020-01-11 20:42:37,582 p=20952 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:42:37,583 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:42:37,599 p=20952 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:42:37,600 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:42:37,608 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746557.6-235412636157570 `" && echo ansible-tmp-1578746557.6-235412636157570="` echo /root/.ansible/tmp/ansible-tmp-1578746557.6-235412636157570 `" ) && sleep 0'
2020-01-11 20:42:37,852 p=20952 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:42:37,853 p=20952 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-20952cbT5uD/tmppFFe7k TO /root/.ansible/tmp/ansible-tmp-1578746557.6-235412636157570/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:42:37,854 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746557.6-235412636157570/ /root/.ansible/tmp/ansible-tmp-1578746557.6-235412636157570/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:42:37,863 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746557.6-235412636157570/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:42:38,669 p=20952 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746557.6-235412636157570/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:42:38,682 p=20952 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": []
}
2020-01-11 20:42:38,721 p=20952 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:42:38,721 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:4
2020-01-11 20:42:38,785 p=20952 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml for localhost
2020-01-11 20:42:38,828 p=20952 u=root |  TASK [securitygroups : provision elb  80 and 443 all security group] **************************************************************************************
2020-01-11 20:42:38,828 p=20952 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml:3
2020-01-11 20:42:38,845 p=20952 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n# tasks file for roles/securitygroups\n- name: provision elb  80 and 443 all security group\n  ^ here\n"
}
2020-01-11 20:42:38,846 p=20952 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:42:38,846 p=20952 u=root |  localhost                  : ok=11   changed=4    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2020-01-11 20:46:25,783 p=21368 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:46:25,783 p=21368 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:46:25,791 p=21368 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:46:25,791 p=21368 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:46:25,791 p=21368 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:46:25,794 p=21368 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:46:25,797 p=21368 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:46:26,197 p=21368 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:46:26,205 p=21368 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:46:26,214 p=21368 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:46:26,222 p=21368 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:46:26,230 p=21368 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:46:26,293 p=21368 u=root |  PLAYBOOK: 01.vpc-subnet-sg-base.yml ***********************************************************************************************************************
2020-01-11 20:46:26,293 p=21368 u=root |  2 plays in 01.vpc-subnet-sg-base.yml
2020-01-11 20:46:26,323 p=21368 u=root |  PLAY [Create,launch and configure our basic AWS VPC] ******************************************************************************************************
2020-01-11 20:46:26,334 p=21368 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:46:26,335 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:2
2020-01-11 20:46:26,346 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:26,346 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:26,355 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746786.35-70851971137312 `" && echo ansible-tmp-1578746786.35-70851971137312="` echo /root/.ansible/tmp/ansible-tmp-1578746786.35-70851971137312 `" ) && sleep 0'
2020-01-11 20:46:26,742 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:46:26,742 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpf1NaXn TO /root/.ansible/tmp/ansible-tmp-1578746786.35-70851971137312/AnsiballZ_setup.py
2020-01-11 20:46:26,743 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746786.35-70851971137312/ /root/.ansible/tmp/ansible-tmp-1578746786.35-70851971137312/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:46:26,752 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746786.35-70851971137312/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:46:27,301 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746786.35-70851971137312/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:27,370 p=21368 u=root |  ok: [localhost]
2020-01-11 20:46:27,371 p=21368 u=root |  META: ran handlers
2020-01-11 20:46:27,411 p=21368 u=root |  TASK [roles/vpc : ensure that the VPC is present] *********************************************************************************************************
2020-01-11 20:46:27,411 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/vpc/tasks/main.yml:4
2020-01-11 20:46:27,428 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:27,428 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:27,436 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746787.43-175341099890290 `" && echo ansible-tmp-1578746787.43-175341099890290="` echo /root/.ansible/tmp/ansible-tmp-1578746787.43-175341099890290 `" ) && sleep 0'
2020-01-11 20:46:27,694 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2020-01-11 20:46:27,695 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmp4jYxXy TO /root/.ansible/tmp/ansible-tmp-1578746787.43-175341099890290/AnsiballZ_ec2_vpc_net.py
2020-01-11 20:46:27,696 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746787.43-175341099890290/ /root/.ansible/tmp/ansible-tmp-1578746787.43-175341099890290/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:46:27,705 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746787.43-175341099890290/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:46:29,312 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746787.43-175341099890290/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:29,327 p=21368 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "cidr_block": [
                "10.20.0.0/16"
            ], 
            "debug_botocore_endpoint_logs": false, 
            "dhcp_opts_id": null, 
            "dns_hostnames": true, 
            "dns_support": true, 
            "ec2_url": null, 
            "multi_ok": false, 
            "name": "M20", 
            "profile": null, 
            "purge_cidrs": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "tenancy": "default", 
            "validate_certs": true
        }
    }, 
    "vpc": {
        "cidr_block": "10.20.0.0/16", 
        "cidr_block_association_set": [
            {
                "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                "cidr_block": "10.20.0.0/16", 
                "cidr_block_state": {
                    "state": "associated"
                }
            }
        ], 
        "classic_link_enabled": false, 
        "dhcp_options_id": "dopt-f30bea9a", 
        "id": "vpc-0f5dfc0ae44286535", 
        "instance_tenancy": "default", 
        "is_default": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20"
        }
    }
}
2020-01-11 20:46:29,366 p=21368 u=root |  TASK [roles/subnets : ensure that the subnets are present] ************************************************************************************************
2020-01-11 20:46:29,366 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:4
2020-01-11 20:46:29,394 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:29,394 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:29,403 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746789.39-257049691601734 `" && echo ansible-tmp-1578746789.39-257049691601734="` echo /root/.ansible/tmp/ansible-tmp-1578746789.39-257049691601734 `" ) && sleep 0'
2020-01-11 20:46:29,647 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:46:29,648 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpeNIJLu TO /root/.ansible/tmp/ansible-tmp-1578746789.39-257049691601734/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:46:29,649 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746789.39-257049691601734/ /root/.ansible/tmp/ansible-tmp-1578746789.39-257049691601734/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:46:29,658 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746789.39-257049691601734/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:46:30,626 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746789.39-257049691601734/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:30,644 p=21368 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.10.0/24', u'use': u'ec2', u'az': u'a'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1a", 
            "cidr": "10.20.10.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "a", 
        "subnet": "10.20.10.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1a", 
        "availability_zone_id": "ape1-az1", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.10.0/24", 
        "default_for_az": false, 
        "id": "subnet-0a81abe1060a70c59", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1a", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:46:30,650 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:30,660 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746790.65-276451151210749 `" && echo ansible-tmp-1578746790.65-276451151210749="` echo /root/.ansible/tmp/ansible-tmp-1578746790.65-276451151210749 `" ) && sleep 0'
2020-01-11 20:46:30,672 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:46:30,673 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmp5mvkVc TO /root/.ansible/tmp/ansible-tmp-1578746790.65-276451151210749/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:46:30,674 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746790.65-276451151210749/ /root/.ansible/tmp/ansible-tmp-1578746790.65-276451151210749/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:46:30,682 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746790.65-276451151210749/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:46:31,628 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746790.65-276451151210749/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:31,641 p=21368 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.11.0/24', u'use': u'ec2', u'az': u'b'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1b", 
            "cidr": "10.20.11.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "b", 
        "subnet": "10.20.11.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1b", 
        "availability_zone_id": "ape1-az2", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.11.0/24", 
        "default_for_az": false, 
        "id": "subnet-0fcef4b1debcf3717", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1b", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:46:31,650 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:31,658 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746791.65-206715170327632 `" && echo ansible-tmp-1578746791.65-206715170327632="` echo /root/.ansible/tmp/ansible-tmp-1578746791.65-206715170327632 `" ) && sleep 0'
2020-01-11 20:46:31,670 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:46:31,671 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpuUjTrU TO /root/.ansible/tmp/ansible-tmp-1578746791.65-206715170327632/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:46:31,671 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746791.65-206715170327632/ /root/.ansible/tmp/ansible-tmp-1578746791.65-206715170327632/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:46:31,679 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746791.65-206715170327632/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:46:32,632 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746791.65-206715170327632/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:32,648 p=21368 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.12.0/24', u'use': u'ec2', u'az': u'c'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1c", 
            "cidr": "10.20.12.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "c", 
        "subnet": "10.20.12.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1c", 
        "availability_zone_id": "ape1-az3", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.12.0/24", 
        "default_for_az": false, 
        "id": "subnet-04f2d26aa3b7d632b", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1c", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:46:32,689 p=21368 u=root |  TASK [roles/subnets : gather information about the ec2 subnets] *******************************************************************************************
2020-01-11 20:46:32,689 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:17
2020-01-11 20:46:32,705 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:32,706 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:32,714 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746792.71-66208438412067 `" && echo ansible-tmp-1578746792.71-66208438412067="` echo /root/.ansible/tmp/ansible-tmp-1578746792.71-66208438412067 `" ) && sleep 0'
2020-01-11 20:46:32,943 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:46:32,944 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmp8boq0h TO /root/.ansible/tmp/ansible-tmp-1578746792.71-66208438412067/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:46:32,945 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746792.71-66208438412067/ /root/.ansible/tmp/ansible-tmp-1578746792.71-66208438412067/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:46:32,954 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746792.71-66208438412067/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:46:33,749 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746792.71-66208438412067/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:33,766 p=21368 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "ec2"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1b", 
            "availability_zone_id": "ape1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0fcef4b1debcf3717", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
            "subnet_id": "subnet-0fcef4b1debcf3717", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1a", 
            "availability_zone_id": "ape1-az1", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a81abe1060a70c59", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
            "subnet_id": "subnet-0a81abe1060a70c59", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1c", 
            "availability_zone_id": "ape1-az3", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-04f2d26aa3b7d632b", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
            "subnet_id": "subnet-04f2d26aa3b7d632b", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:46:33,804 p=21368 u=root |  TASK [roles/subnets : gather information about the rds subnets] *******************************************************************************************
2020-01-11 20:46:33,805 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:25
2020-01-11 20:46:33,821 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:33,822 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:33,830 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746793.82-20688394031120 `" && echo ansible-tmp-1578746793.82-20688394031120="` echo /root/.ansible/tmp/ansible-tmp-1578746793.82-20688394031120 `" ) && sleep 0'
2020-01-11 20:46:33,841 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:46:33,842 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpnp2_in TO /root/.ansible/tmp/ansible-tmp-1578746793.82-20688394031120/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:46:33,843 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746793.82-20688394031120/ /root/.ansible/tmp/ansible-tmp-1578746793.82-20688394031120/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:46:33,851 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746793.82-20688394031120/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:46:34,631 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746793.82-20688394031120/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:34,644 p=21368 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "rds"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:46:34,683 p=21368 u=root |  TASK [roles/subnets : register just the IDs for each of the subnets] **************************************************************************************
2020-01-11 20:46:34,684 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:33
2020-01-11 20:46:34,702 p=21368 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-0a81abe1060a70c59", 
            "subnet-0fcef4b1debcf3717", 
            "subnet-04f2d26aa3b7d632b"
        ]
    }, 
    "changed": false
}
2020-01-11 20:46:34,742 p=21368 u=root |  TASK [roles/gateway : ensure that there is an internet gateway] *******************************************************************************************
2020-01-11 20:46:34,742 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:4
2020-01-11 20:46:34,760 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:34,760 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:34,768 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746794.76-10502978250142 `" && echo ansible-tmp-1578746794.76-10502978250142="` echo /root/.ansible/tmp/ansible-tmp-1578746794.76-10502978250142 `" ) && sleep 0'
2020-01-11 20:46:35,008 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_igw.py
2020-01-11 20:46:35,009 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpLb3ynn TO /root/.ansible/tmp/ansible-tmp-1578746794.76-10502978250142/AnsiballZ_ec2_vpc_igw.py
2020-01-11 20:46:35,009 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746794.76-10502978250142/ /root/.ansible/tmp/ansible-tmp-1578746794.76-10502978250142/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:46:35,019 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746794.76-10502978250142/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:46:35,868 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746794.76-10502978250142/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:35,881 p=21368 u=root |  ok: [localhost] => {
    "changed": false, 
    "gateway_id": "igw-0d49fc731a1555b52", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_internet_gateway", 
                "Use": "gateway"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "tags": {
        "Environment": "M20", 
        "Name": "M20_internet_gateway", 
        "Use": "gateway"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:46:35,921 p=21368 u=root |  TASK [roles/gateway : check that we can ec2 public route through internet gateway] ************************************************************************
2020-01-11 20:46:35,921 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:15
2020-01-11 20:46:35,941 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:35,941 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:35,949 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746795.94-138579365203870 `" && echo ansible-tmp-1578746795.94-138579365203870="` echo /root/.ansible/tmp/ansible-tmp-1578746795.94-138579365203870 `" ) && sleep 0'
2020-01-11 20:46:36,211 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
2020-01-11 20:46:36,212 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpJaKoJQ TO /root/.ansible/tmp/ansible-tmp-1578746795.94-138579365203870/AnsiballZ_ec2_vpc_route_table.py
2020-01-11 20:46:36,213 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746795.94-138579365203870/ /root/.ansible/tmp/ansible-tmp-1578746795.94-138579365203870/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:46:36,222 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746795.94-138579365203870/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:46:37,599 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746795.94-138579365203870/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:37,612 p=21368 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "lookup": "tag", 
            "profile": null, 
            "propagating_vgw_ids": null, 
            "purge_routes": true, 
            "purge_subnets": true, 
            "purge_tags": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "route_table_id": null, 
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0d49fc731a1555b52"
                }
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-0a81abe1060a70c59", 
                "subnet-0fcef4b1debcf3717", 
                "subnet-04f2d26aa3b7d632b"
            ], 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "route_table": {
        "associations": [
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-024f474ac59b61ab1", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0fcef4b1debcf3717"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0fdb85ba9e784fdac", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0a81abe1060a70c59"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0537c9564f7e4eb84", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-04f2d26aa3b7d632b"
            }
        ], 
        "id": "rtb-048a44083232526f8", 
        "owner_id": "838988372941", 
        "propagating_vgws": [], 
        "route_table_id": "rtb-048a44083232526f8", 
        "routes": [
            {
                "destination_cidr_block": "10.20.0.0/16", 
                "gateway_id": "local", 
                "origin": "CreateRouteTable", 
                "state": "active"
            }, 
            {
                "destination_cidr_block": "0.0.0.0/0", 
                "gateway_id": "igw-0d49fc731a1555b52", 
                "origin": "CreateRoute", 
                "state": "active"
            }
        ], 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_public"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:46:37,613 p=21368 u=root |  META: ran handlers
2020-01-11 20:46:37,613 p=21368 u=root |  META: ran handlers
2020-01-11 20:46:37,621 p=21368 u=root |  PLAY [create securitygroups] ******************************************************************************************************************************
2020-01-11 20:46:37,669 p=21368 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:46:37,669 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:16
2020-01-11 20:46:37,681 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:37,681 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:37,689 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746797.68-184857731008582 `" && echo ansible-tmp-1578746797.68-184857731008582="` echo /root/.ansible/tmp/ansible-tmp-1578746797.68-184857731008582 `" ) && sleep 0'
2020-01-11 20:46:37,702 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:46:37,703 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpwV_bkL TO /root/.ansible/tmp/ansible-tmp-1578746797.68-184857731008582/AnsiballZ_setup.py
2020-01-11 20:46:37,703 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746797.68-184857731008582/ /root/.ansible/tmp/ansible-tmp-1578746797.68-184857731008582/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:46:37,712 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746797.68-184857731008582/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:46:38,163 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746797.68-184857731008582/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:38,236 p=21368 u=root |  ok: [localhost]
2020-01-11 20:46:38,237 p=21368 u=root |  META: ran handlers
2020-01-11 20:46:38,276 p=21368 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:46:38,276 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:46:38,293 p=21368 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:46:38,293 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:46:38,302 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746798.29-170163121766125 `" && echo ansible-tmp-1578746798.29-170163121766125="` echo /root/.ansible/tmp/ansible-tmp-1578746798.29-170163121766125 `" ) && sleep 0'
2020-01-11 20:46:38,540 p=21368 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:46:38,540 p=21368 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21368rTNsq9/tmpXlpTkG TO /root/.ansible/tmp/ansible-tmp-1578746798.29-170163121766125/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:46:38,541 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746798.29-170163121766125/ /root/.ansible/tmp/ansible-tmp-1578746798.29-170163121766125/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:46:38,550 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746798.29-170163121766125/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:46:39,343 p=21368 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746798.29-170163121766125/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:46:39,356 p=21368 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": []
}
2020-01-11 20:46:39,395 p=21368 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:46:39,395 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:4
2020-01-11 20:46:39,460 p=21368 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml for localhost
2020-01-11 20:46:39,502 p=21368 u=root |  TASK [securitygroups : provision elb  80 and 443 all security group] **************************************************************************************
2020-01-11 20:46:39,502 p=21368 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml:3
2020-01-11 20:46:39,519 p=21368 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml': line 3, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n# tasks file for roles/securitygroups\n- name: provision elb  80 and 443 all security group\n  ^ here\n"
}
2020-01-11 20:46:39,522 p=21368 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:46:39,522 p=21368 u=root |  localhost                  : ok=11   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2020-01-11 20:48:47,041 p=21782 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:48:47,042 p=21782 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:48:47,049 p=21782 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:48:47,049 p=21782 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:48:47,050 p=21782 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:48:47,053 p=21782 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:48:47,055 p=21782 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:48:47,451 p=21782 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:48:47,456 p=21782 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:48:47,461 p=21782 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:48:47,466 p=21782 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:48:47,470 p=21782 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:48:47,529 p=21782 u=root |  PLAYBOOK: 01.vpc-subnet-sg-base.yml ***********************************************************************************************************************
2020-01-11 20:48:47,529 p=21782 u=root |  2 plays in 01.vpc-subnet-sg-base.yml
2020-01-11 20:48:47,558 p=21782 u=root |  PLAY [Create,launch and configure our basic AWS VPC] ******************************************************************************************************
2020-01-11 20:48:47,570 p=21782 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:48:47,570 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:2
2020-01-11 20:48:47,581 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:47,581 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:47,589 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746927.58-216080054216583 `" && echo ansible-tmp-1578746927.58-216080054216583="` echo /root/.ansible/tmp/ansible-tmp-1578746927.58-216080054216583 `" ) && sleep 0'
2020-01-11 20:48:47,959 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:48:47,960 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpHngMnY TO /root/.ansible/tmp/ansible-tmp-1578746927.58-216080054216583/AnsiballZ_setup.py
2020-01-11 20:48:47,960 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746927.58-216080054216583/ /root/.ansible/tmp/ansible-tmp-1578746927.58-216080054216583/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:48:47,970 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746927.58-216080054216583/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:48:48,572 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746927.58-216080054216583/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:48,642 p=21782 u=root |  ok: [localhost]
2020-01-11 20:48:48,643 p=21782 u=root |  META: ran handlers
2020-01-11 20:48:48,683 p=21782 u=root |  TASK [roles/vpc : ensure that the VPC is present] *********************************************************************************************************
2020-01-11 20:48:48,683 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/vpc/tasks/main.yml:4
2020-01-11 20:48:48,700 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:48,700 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:48,708 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746928.7-118378530324136 `" && echo ansible-tmp-1578746928.7-118378530324136="` echo /root/.ansible/tmp/ansible-tmp-1578746928.7-118378530324136 `" ) && sleep 0'
2020-01-11 20:48:48,957 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2020-01-11 20:48:48,957 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmppNfVH0 TO /root/.ansible/tmp/ansible-tmp-1578746928.7-118378530324136/AnsiballZ_ec2_vpc_net.py
2020-01-11 20:48:48,958 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746928.7-118378530324136/ /root/.ansible/tmp/ansible-tmp-1578746928.7-118378530324136/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:48:48,967 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746928.7-118378530324136/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:48:50,744 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746928.7-118378530324136/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:50,758 p=21782 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "cidr_block": [
                "10.20.0.0/16"
            ], 
            "debug_botocore_endpoint_logs": false, 
            "dhcp_opts_id": null, 
            "dns_hostnames": true, 
            "dns_support": true, 
            "ec2_url": null, 
            "multi_ok": false, 
            "name": "M20", 
            "profile": null, 
            "purge_cidrs": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "tenancy": "default", 
            "validate_certs": true
        }
    }, 
    "vpc": {
        "cidr_block": "10.20.0.0/16", 
        "cidr_block_association_set": [
            {
                "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                "cidr_block": "10.20.0.0/16", 
                "cidr_block_state": {
                    "state": "associated"
                }
            }
        ], 
        "classic_link_enabled": false, 
        "dhcp_options_id": "dopt-f30bea9a", 
        "id": "vpc-0f5dfc0ae44286535", 
        "instance_tenancy": "default", 
        "is_default": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20"
        }
    }
}
2020-01-11 20:48:50,797 p=21782 u=root |  TASK [roles/subnets : ensure that the subnets are present] ************************************************************************************************
2020-01-11 20:48:50,797 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:4
2020-01-11 20:48:50,822 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:50,823 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:50,831 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746930.82-202472648170134 `" && echo ansible-tmp-1578746930.82-202472648170134="` echo /root/.ansible/tmp/ansible-tmp-1578746930.82-202472648170134 `" ) && sleep 0'
2020-01-11 20:48:51,071 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:48:51,071 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpbHccTZ TO /root/.ansible/tmp/ansible-tmp-1578746930.82-202472648170134/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:48:51,072 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746930.82-202472648170134/ /root/.ansible/tmp/ansible-tmp-1578746930.82-202472648170134/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:48:51,081 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746930.82-202472648170134/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:48:51,990 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746930.82-202472648170134/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:52,007 p=21782 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.10.0/24', u'use': u'ec2', u'az': u'a'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1a", 
            "cidr": "10.20.10.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "a", 
        "subnet": "10.20.10.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1a", 
        "availability_zone_id": "ape1-az1", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.10.0/24", 
        "default_for_az": false, 
        "id": "subnet-0a81abe1060a70c59", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1a", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:48:52,013 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:52,022 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746932.01-158338799988401 `" && echo ansible-tmp-1578746932.01-158338799988401="` echo /root/.ansible/tmp/ansible-tmp-1578746932.01-158338799988401 `" ) && sleep 0'
2020-01-11 20:48:52,033 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:48:52,033 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmp6sCOhc TO /root/.ansible/tmp/ansible-tmp-1578746932.01-158338799988401/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:48:52,034 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746932.01-158338799988401/ /root/.ansible/tmp/ansible-tmp-1578746932.01-158338799988401/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:48:52,042 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746932.01-158338799988401/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:48:52,956 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746932.01-158338799988401/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:52,970 p=21782 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.11.0/24', u'use': u'ec2', u'az': u'b'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1b", 
            "cidr": "10.20.11.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "b", 
        "subnet": "10.20.11.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1b", 
        "availability_zone_id": "ape1-az2", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.11.0/24", 
        "default_for_az": false, 
        "id": "subnet-0fcef4b1debcf3717", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1b", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:48:52,978 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:52,987 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746932.98-176205322683560 `" && echo ansible-tmp-1578746932.98-176205322683560="` echo /root/.ansible/tmp/ansible-tmp-1578746932.98-176205322683560 `" ) && sleep 0'
2020-01-11 20:48:52,998 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:48:52,999 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpE9Mm6q TO /root/.ansible/tmp/ansible-tmp-1578746932.98-176205322683560/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:48:52,999 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746932.98-176205322683560/ /root/.ansible/tmp/ansible-tmp-1578746932.98-176205322683560/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:48:53,008 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746932.98-176205322683560/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:48:53,901 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746932.98-176205322683560/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:53,917 p=21782 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.12.0/24', u'use': u'ec2', u'az': u'c'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1c", 
            "cidr": "10.20.12.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "c", 
        "subnet": "10.20.12.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1c", 
        "availability_zone_id": "ape1-az3", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.12.0/24", 
        "default_for_az": false, 
        "id": "subnet-04f2d26aa3b7d632b", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1c", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:48:53,957 p=21782 u=root |  TASK [roles/subnets : gather information about the ec2 subnets] *******************************************************************************************
2020-01-11 20:48:53,957 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:17
2020-01-11 20:48:53,973 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:53,973 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:53,982 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746933.97-51225459795248 `" && echo ansible-tmp-1578746933.97-51225459795248="` echo /root/.ansible/tmp/ansible-tmp-1578746933.97-51225459795248 `" ) && sleep 0'
2020-01-11 20:48:54,207 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:48:54,207 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpM5sf4E TO /root/.ansible/tmp/ansible-tmp-1578746933.97-51225459795248/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:48:54,208 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746933.97-51225459795248/ /root/.ansible/tmp/ansible-tmp-1578746933.97-51225459795248/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:48:54,217 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746933.97-51225459795248/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:48:55,000 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746933.97-51225459795248/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:55,017 p=21782 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "ec2"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1b", 
            "availability_zone_id": "ape1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0fcef4b1debcf3717", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
            "subnet_id": "subnet-0fcef4b1debcf3717", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1a", 
            "availability_zone_id": "ape1-az1", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a81abe1060a70c59", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
            "subnet_id": "subnet-0a81abe1060a70c59", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1c", 
            "availability_zone_id": "ape1-az3", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-04f2d26aa3b7d632b", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
            "subnet_id": "subnet-04f2d26aa3b7d632b", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:48:55,056 p=21782 u=root |  TASK [roles/subnets : gather information about the rds subnets] *******************************************************************************************
2020-01-11 20:48:55,056 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:25
2020-01-11 20:48:55,073 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:55,073 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:55,082 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746935.07-199318977415811 `" && echo ansible-tmp-1578746935.07-199318977415811="` echo /root/.ansible/tmp/ansible-tmp-1578746935.07-199318977415811 `" ) && sleep 0'
2020-01-11 20:48:55,093 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:48:55,093 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpuMWQfA TO /root/.ansible/tmp/ansible-tmp-1578746935.07-199318977415811/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:48:55,094 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746935.07-199318977415811/ /root/.ansible/tmp/ansible-tmp-1578746935.07-199318977415811/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:48:55,102 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746935.07-199318977415811/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:48:55,862 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746935.07-199318977415811/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:55,874 p=21782 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "rds"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:48:55,914 p=21782 u=root |  TASK [roles/subnets : register just the IDs for each of the subnets] **************************************************************************************
2020-01-11 20:48:55,914 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:33
2020-01-11 20:48:55,935 p=21782 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-0a81abe1060a70c59", 
            "subnet-0fcef4b1debcf3717", 
            "subnet-04f2d26aa3b7d632b"
        ]
    }, 
    "changed": false
}
2020-01-11 20:48:55,976 p=21782 u=root |  TASK [roles/gateway : ensure that there is an internet gateway] *******************************************************************************************
2020-01-11 20:48:55,976 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:4
2020-01-11 20:48:55,994 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:55,995 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:56,004 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746935.99-97112265045595 `" && echo ansible-tmp-1578746935.99-97112265045595="` echo /root/.ansible/tmp/ansible-tmp-1578746935.99-97112265045595 `" ) && sleep 0'
2020-01-11 20:48:56,239 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_igw.py
2020-01-11 20:48:56,239 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpK22nsd TO /root/.ansible/tmp/ansible-tmp-1578746935.99-97112265045595/AnsiballZ_ec2_vpc_igw.py
2020-01-11 20:48:56,240 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746935.99-97112265045595/ /root/.ansible/tmp/ansible-tmp-1578746935.99-97112265045595/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:48:56,249 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746935.99-97112265045595/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:48:57,099 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746935.99-97112265045595/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:57,112 p=21782 u=root |  ok: [localhost] => {
    "changed": false, 
    "gateway_id": "igw-0d49fc731a1555b52", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_internet_gateway", 
                "Use": "gateway"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "tags": {
        "Environment": "M20", 
        "Name": "M20_internet_gateway", 
        "Use": "gateway"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:48:57,151 p=21782 u=root |  TASK [roles/gateway : check that we can ec2 public route through internet gateway] ************************************************************************
2020-01-11 20:48:57,152 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:15
2020-01-11 20:48:57,171 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:57,172 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:57,180 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746937.17-124522802857026 `" && echo ansible-tmp-1578746937.17-124522802857026="` echo /root/.ansible/tmp/ansible-tmp-1578746937.17-124522802857026 `" ) && sleep 0'
2020-01-11 20:48:57,433 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
2020-01-11 20:48:57,433 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpDxq3kc TO /root/.ansible/tmp/ansible-tmp-1578746937.17-124522802857026/AnsiballZ_ec2_vpc_route_table.py
2020-01-11 20:48:57,434 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746937.17-124522802857026/ /root/.ansible/tmp/ansible-tmp-1578746937.17-124522802857026/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:48:57,443 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746937.17-124522802857026/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:48:58,740 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746937.17-124522802857026/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:58,754 p=21782 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "lookup": "tag", 
            "profile": null, 
            "propagating_vgw_ids": null, 
            "purge_routes": true, 
            "purge_subnets": true, 
            "purge_tags": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "route_table_id": null, 
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0d49fc731a1555b52"
                }
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-0a81abe1060a70c59", 
                "subnet-0fcef4b1debcf3717", 
                "subnet-04f2d26aa3b7d632b"
            ], 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "route_table": {
        "associations": [
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-024f474ac59b61ab1", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0fcef4b1debcf3717"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0fdb85ba9e784fdac", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0a81abe1060a70c59"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0537c9564f7e4eb84", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-04f2d26aa3b7d632b"
            }
        ], 
        "id": "rtb-048a44083232526f8", 
        "owner_id": "838988372941", 
        "propagating_vgws": [], 
        "route_table_id": "rtb-048a44083232526f8", 
        "routes": [
            {
                "destination_cidr_block": "10.20.0.0/16", 
                "gateway_id": "local", 
                "origin": "CreateRouteTable", 
                "state": "active"
            }, 
            {
                "destination_cidr_block": "0.0.0.0/0", 
                "gateway_id": "igw-0d49fc731a1555b52", 
                "origin": "CreateRoute", 
                "state": "active"
            }
        ], 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_public"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:48:58,754 p=21782 u=root |  META: ran handlers
2020-01-11 20:48:58,755 p=21782 u=root |  META: ran handlers
2020-01-11 20:48:58,762 p=21782 u=root |  PLAY [create securitygroups] ******************************************************************************************************************************
2020-01-11 20:48:58,807 p=21782 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:48:58,808 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:16
2020-01-11 20:48:58,819 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:58,819 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:58,827 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746938.82-93474656522481 `" && echo ansible-tmp-1578746938.82-93474656522481="` echo /root/.ansible/tmp/ansible-tmp-1578746938.82-93474656522481 `" ) && sleep 0'
2020-01-11 20:48:58,840 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:48:58,840 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpuhgBSg TO /root/.ansible/tmp/ansible-tmp-1578746938.82-93474656522481/AnsiballZ_setup.py
2020-01-11 20:48:58,841 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746938.82-93474656522481/ /root/.ansible/tmp/ansible-tmp-1578746938.82-93474656522481/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:48:58,849 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746938.82-93474656522481/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:48:59,301 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746938.82-93474656522481/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:48:59,372 p=21782 u=root |  ok: [localhost]
2020-01-11 20:48:59,373 p=21782 u=root |  META: ran handlers
2020-01-11 20:48:59,412 p=21782 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:48:59,412 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:48:59,429 p=21782 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:48:59,429 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:48:59,437 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578746939.43-180386901634814 `" && echo ansible-tmp-1578746939.43-180386901634814="` echo /root/.ansible/tmp/ansible-tmp-1578746939.43-180386901634814 `" ) && sleep 0'
2020-01-11 20:48:59,674 p=21782 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:48:59,675 p=21782 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-21782RLWm3L/tmpMPh8FB TO /root/.ansible/tmp/ansible-tmp-1578746939.43-180386901634814/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:48:59,675 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578746939.43-180386901634814/ /root/.ansible/tmp/ansible-tmp-1578746939.43-180386901634814/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:48:59,685 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578746939.43-180386901634814/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:49:00,425 p=21782 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578746939.43-180386901634814/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:49:00,438 p=21782 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": []
}
2020-01-11 20:49:00,478 p=21782 u=root |  TASK [securitygroups : set fact: VPC ID] ******************************************************************************************************************
2020-01-11 20:49:00,478 p=21782 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:10
2020-01-11 20:49:00,494 p=21782 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml': line 10, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n# parse the facts output and extract the VPC ID\n- name: \"set fact: VPC ID\"\n  ^ here\nThis one looks easy to fix. It seems that there is a value started\nwith a quote, and the YAML parser is expecting to see the line ended\nwith the same kind of quote. For instance:\n\n    when: \"ok\" in result.stdout\n\nCould be written as:\n\n   when: '\"ok\" in result.stdout'\n\nOr equivalently:\n\n   when: \"'ok' in result.stdout\"\n"
}
2020-01-11 20:49:00,495 p=21782 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:49:00,495 p=21782 u=root |  localhost                  : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2020-01-11 20:53:23,250 p=22229 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:53:23,251 p=22229 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:53:23,259 p=22229 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:53:23,259 p=22229 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:53:23,259 p=22229 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:53:23,262 p=22229 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:53:23,264 p=22229 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:53:23,666 p=22229 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:53:23,670 p=22229 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:53:23,674 p=22229 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:53:23,679 p=22229 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:53:23,683 p=22229 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:53:23,741 p=22229 u=root |  PLAYBOOK: 01.vpc-subnet-sg-base.yml ***********************************************************************************************************************
2020-01-11 20:53:23,742 p=22229 u=root |  2 plays in 01.vpc-subnet-sg-base.yml
2020-01-11 20:53:23,771 p=22229 u=root |  PLAY [Create,launch and configure our basic AWS VPC] ******************************************************************************************************
2020-01-11 20:53:23,783 p=22229 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:53:23,784 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:2
2020-01-11 20:53:23,794 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:23,794 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:23,803 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747203.79-90169142921315 `" && echo ansible-tmp-1578747203.79-90169142921315="` echo /root/.ansible/tmp/ansible-tmp-1578747203.79-90169142921315 `" ) && sleep 0'
2020-01-11 20:53:24,180 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:53:24,181 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpRvPBGq TO /root/.ansible/tmp/ansible-tmp-1578747203.79-90169142921315/AnsiballZ_setup.py
2020-01-11 20:53:24,182 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747203.79-90169142921315/ /root/.ansible/tmp/ansible-tmp-1578747203.79-90169142921315/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:53:24,191 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747203.79-90169142921315/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:53:24,721 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747203.79-90169142921315/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:24,792 p=22229 u=root |  ok: [localhost]
2020-01-11 20:53:24,793 p=22229 u=root |  META: ran handlers
2020-01-11 20:53:24,833 p=22229 u=root |  TASK [roles/vpc : ensure that the VPC is present] *********************************************************************************************************
2020-01-11 20:53:24,833 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/vpc/tasks/main.yml:4
2020-01-11 20:53:24,850 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:24,850 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:24,859 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747204.85-49904727489930 `" && echo ansible-tmp-1578747204.85-49904727489930="` echo /root/.ansible/tmp/ansible-tmp-1578747204.85-49904727489930 `" ) && sleep 0'
2020-01-11 20:53:25,116 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2020-01-11 20:53:25,116 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpYry7aX TO /root/.ansible/tmp/ansible-tmp-1578747204.85-49904727489930/AnsiballZ_ec2_vpc_net.py
2020-01-11 20:53:25,117 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747204.85-49904727489930/ /root/.ansible/tmp/ansible-tmp-1578747204.85-49904727489930/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:53:25,126 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747204.85-49904727489930/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:53:26,799 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747204.85-49904727489930/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:26,814 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "cidr_block": [
                "10.20.0.0/16"
            ], 
            "debug_botocore_endpoint_logs": false, 
            "dhcp_opts_id": null, 
            "dns_hostnames": true, 
            "dns_support": true, 
            "ec2_url": null, 
            "multi_ok": false, 
            "name": "M20", 
            "profile": null, 
            "purge_cidrs": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "tenancy": "default", 
            "validate_certs": true
        }
    }, 
    "vpc": {
        "cidr_block": "10.20.0.0/16", 
        "cidr_block_association_set": [
            {
                "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                "cidr_block": "10.20.0.0/16", 
                "cidr_block_state": {
                    "state": "associated"
                }
            }
        ], 
        "classic_link_enabled": false, 
        "dhcp_options_id": "dopt-f30bea9a", 
        "id": "vpc-0f5dfc0ae44286535", 
        "instance_tenancy": "default", 
        "is_default": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20"
        }
    }
}
2020-01-11 20:53:26,853 p=22229 u=root |  TASK [roles/subnets : ensure that the subnets are present] ************************************************************************************************
2020-01-11 20:53:26,853 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:4
2020-01-11 20:53:26,878 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:26,879 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:26,887 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747206.88-38797156493851 `" && echo ansible-tmp-1578747206.88-38797156493851="` echo /root/.ansible/tmp/ansible-tmp-1578747206.88-38797156493851 `" ) && sleep 0'
2020-01-11 20:53:27,131 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:53:27,132 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpL3LkbH TO /root/.ansible/tmp/ansible-tmp-1578747206.88-38797156493851/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:53:27,132 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747206.88-38797156493851/ /root/.ansible/tmp/ansible-tmp-1578747206.88-38797156493851/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:53:27,142 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747206.88-38797156493851/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:53:28,113 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747206.88-38797156493851/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:28,129 p=22229 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.10.0/24', u'use': u'ec2', u'az': u'a'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1a", 
            "cidr": "10.20.10.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "a", 
        "subnet": "10.20.10.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1a", 
        "availability_zone_id": "ape1-az1", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.10.0/24", 
        "default_for_az": false, 
        "id": "subnet-0a81abe1060a70c59", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1a", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:53:28,136 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:28,145 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747208.14-49322334950387 `" && echo ansible-tmp-1578747208.14-49322334950387="` echo /root/.ansible/tmp/ansible-tmp-1578747208.14-49322334950387 `" ) && sleep 0'
2020-01-11 20:53:28,158 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:53:28,158 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpNgHJdS TO /root/.ansible/tmp/ansible-tmp-1578747208.14-49322334950387/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:53:28,159 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747208.14-49322334950387/ /root/.ansible/tmp/ansible-tmp-1578747208.14-49322334950387/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:53:28,168 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747208.14-49322334950387/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:53:29,089 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747208.14-49322334950387/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:29,103 p=22229 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.11.0/24', u'use': u'ec2', u'az': u'b'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1b", 
            "cidr": "10.20.11.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "b", 
        "subnet": "10.20.11.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1b", 
        "availability_zone_id": "ape1-az2", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.11.0/24", 
        "default_for_az": false, 
        "id": "subnet-0fcef4b1debcf3717", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1b", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:53:29,112 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:29,120 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747209.11-57790017216359 `" && echo ansible-tmp-1578747209.11-57790017216359="` echo /root/.ansible/tmp/ansible-tmp-1578747209.11-57790017216359 `" ) && sleep 0'
2020-01-11 20:53:29,131 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:53:29,132 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpqO4Oqm TO /root/.ansible/tmp/ansible-tmp-1578747209.11-57790017216359/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:53:29,133 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747209.11-57790017216359/ /root/.ansible/tmp/ansible-tmp-1578747209.11-57790017216359/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:53:29,141 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747209.11-57790017216359/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:53:30,094 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747209.11-57790017216359/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:30,108 p=22229 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.12.0/24', u'use': u'ec2', u'az': u'c'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1c", 
            "cidr": "10.20.12.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "c", 
        "subnet": "10.20.12.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1c", 
        "availability_zone_id": "ape1-az3", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.12.0/24", 
        "default_for_az": false, 
        "id": "subnet-04f2d26aa3b7d632b", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1c", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:53:30,149 p=22229 u=root |  TASK [roles/subnets : gather information about the ec2 subnets] *******************************************************************************************
2020-01-11 20:53:30,150 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:17
2020-01-11 20:53:30,165 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:30,166 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:30,174 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747210.17-281436177243319 `" && echo ansible-tmp-1578747210.17-281436177243319="` echo /root/.ansible/tmp/ansible-tmp-1578747210.17-281436177243319 `" ) && sleep 0'
2020-01-11 20:53:30,398 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:53:30,399 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpyyTYRM TO /root/.ansible/tmp/ansible-tmp-1578747210.17-281436177243319/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:53:30,399 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747210.17-281436177243319/ /root/.ansible/tmp/ansible-tmp-1578747210.17-281436177243319/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:53:30,409 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747210.17-281436177243319/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:53:31,208 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747210.17-281436177243319/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:31,224 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "ec2"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1b", 
            "availability_zone_id": "ape1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0fcef4b1debcf3717", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
            "subnet_id": "subnet-0fcef4b1debcf3717", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1a", 
            "availability_zone_id": "ape1-az1", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a81abe1060a70c59", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
            "subnet_id": "subnet-0a81abe1060a70c59", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1c", 
            "availability_zone_id": "ape1-az3", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-04f2d26aa3b7d632b", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
            "subnet_id": "subnet-04f2d26aa3b7d632b", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:53:31,263 p=22229 u=root |  TASK [roles/subnets : gather information about the rds subnets] *******************************************************************************************
2020-01-11 20:53:31,263 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:25
2020-01-11 20:53:31,280 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:31,280 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:31,289 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747211.28-261083042469577 `" && echo ansible-tmp-1578747211.28-261083042469577="` echo /root/.ansible/tmp/ansible-tmp-1578747211.28-261083042469577 `" ) && sleep 0'
2020-01-11 20:53:31,300 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:53:31,300 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpDnMgHo TO /root/.ansible/tmp/ansible-tmp-1578747211.28-261083042469577/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:53:31,301 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747211.28-261083042469577/ /root/.ansible/tmp/ansible-tmp-1578747211.28-261083042469577/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:53:31,309 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747211.28-261083042469577/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:53:32,082 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747211.28-261083042469577/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:32,094 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "rds"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:53:32,134 p=22229 u=root |  TASK [roles/subnets : register just the IDs for each of the subnets] **************************************************************************************
2020-01-11 20:53:32,134 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:33
2020-01-11 20:53:32,155 p=22229 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-0a81abe1060a70c59", 
            "subnet-0fcef4b1debcf3717", 
            "subnet-04f2d26aa3b7d632b"
        ]
    }, 
    "changed": false
}
2020-01-11 20:53:32,196 p=22229 u=root |  TASK [roles/gateway : ensure that there is an internet gateway] *******************************************************************************************
2020-01-11 20:53:32,196 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:4
2020-01-11 20:53:32,214 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:32,214 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:32,223 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747212.21-46910294010512 `" && echo ansible-tmp-1578747212.21-46910294010512="` echo /root/.ansible/tmp/ansible-tmp-1578747212.21-46910294010512 `" ) && sleep 0'
2020-01-11 20:53:32,457 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_igw.py
2020-01-11 20:53:32,458 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpP_sk1C TO /root/.ansible/tmp/ansible-tmp-1578747212.21-46910294010512/AnsiballZ_ec2_vpc_igw.py
2020-01-11 20:53:32,458 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747212.21-46910294010512/ /root/.ansible/tmp/ansible-tmp-1578747212.21-46910294010512/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:53:32,467 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747212.21-46910294010512/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:53:33,324 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747212.21-46910294010512/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:33,337 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "gateway_id": "igw-0d49fc731a1555b52", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_internet_gateway", 
                "Use": "gateway"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "tags": {
        "Environment": "M20", 
        "Name": "M20_internet_gateway", 
        "Use": "gateway"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:53:33,377 p=22229 u=root |  TASK [roles/gateway : check that we can ec2 public route through internet gateway] ************************************************************************
2020-01-11 20:53:33,377 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:15
2020-01-11 20:53:33,397 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:33,398 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:33,406 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747213.4-88873597171734 `" && echo ansible-tmp-1578747213.4-88873597171734="` echo /root/.ansible/tmp/ansible-tmp-1578747213.4-88873597171734 `" ) && sleep 0'
2020-01-11 20:53:33,666 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
2020-01-11 20:53:33,666 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpnMm6ig TO /root/.ansible/tmp/ansible-tmp-1578747213.4-88873597171734/AnsiballZ_ec2_vpc_route_table.py
2020-01-11 20:53:33,667 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747213.4-88873597171734/ /root/.ansible/tmp/ansible-tmp-1578747213.4-88873597171734/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:53:33,676 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747213.4-88873597171734/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:53:35,030 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747213.4-88873597171734/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:35,043 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "lookup": "tag", 
            "profile": null, 
            "propagating_vgw_ids": null, 
            "purge_routes": true, 
            "purge_subnets": true, 
            "purge_tags": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "route_table_id": null, 
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0d49fc731a1555b52"
                }
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-0a81abe1060a70c59", 
                "subnet-0fcef4b1debcf3717", 
                "subnet-04f2d26aa3b7d632b"
            ], 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "route_table": {
        "associations": [
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-024f474ac59b61ab1", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0fcef4b1debcf3717"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0fdb85ba9e784fdac", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0a81abe1060a70c59"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0537c9564f7e4eb84", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-04f2d26aa3b7d632b"
            }
        ], 
        "id": "rtb-048a44083232526f8", 
        "owner_id": "838988372941", 
        "propagating_vgws": [], 
        "route_table_id": "rtb-048a44083232526f8", 
        "routes": [
            {
                "destination_cidr_block": "10.20.0.0/16", 
                "gateway_id": "local", 
                "origin": "CreateRouteTable", 
                "state": "active"
            }, 
            {
                "destination_cidr_block": "0.0.0.0/0", 
                "gateway_id": "igw-0d49fc731a1555b52", 
                "origin": "CreateRoute", 
                "state": "active"
            }
        ], 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_public"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:53:35,044 p=22229 u=root |  META: ran handlers
2020-01-11 20:53:35,045 p=22229 u=root |  META: ran handlers
2020-01-11 20:53:35,053 p=22229 u=root |  PLAY [create securitygroups] ******************************************************************************************************************************
2020-01-11 20:53:35,096 p=22229 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:53:35,096 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:16
2020-01-11 20:53:35,107 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:35,108 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:35,116 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747215.11-28698173912030 `" && echo ansible-tmp-1578747215.11-28698173912030="` echo /root/.ansible/tmp/ansible-tmp-1578747215.11-28698173912030 `" ) && sleep 0'
2020-01-11 20:53:35,129 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:53:35,130 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpS1zpg_ TO /root/.ansible/tmp/ansible-tmp-1578747215.11-28698173912030/AnsiballZ_setup.py
2020-01-11 20:53:35,131 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747215.11-28698173912030/ /root/.ansible/tmp/ansible-tmp-1578747215.11-28698173912030/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:53:35,140 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747215.11-28698173912030/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:53:35,594 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747215.11-28698173912030/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:35,666 p=22229 u=root |  ok: [localhost]
2020-01-11 20:53:35,667 p=22229 u=root |  META: ran handlers
2020-01-11 20:53:35,705 p=22229 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:53:35,706 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:53:35,723 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:35,723 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:35,732 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747215.72-45287761299854 `" && echo ansible-tmp-1578747215.72-45287761299854="` echo /root/.ansible/tmp/ansible-tmp-1578747215.72-45287761299854 `" ) && sleep 0'
2020-01-11 20:53:35,977 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:53:35,977 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpOPs47D TO /root/.ansible/tmp/ansible-tmp-1578747215.72-45287761299854/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:53:35,978 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747215.72-45287761299854/ /root/.ansible/tmp/ansible-tmp-1578747215.72-45287761299854/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:35,987 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747215.72-45287761299854/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:37,269 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747215.72-45287761299854/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:37,283 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:53:37,323 p=22229 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:53:37,324 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:53:37,341 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:37,341 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:37,349 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747217.34-168307326899944 `" && echo ansible-tmp-1578747217.34-168307326899944="` echo /root/.ansible/tmp/ansible-tmp-1578747217.34-168307326899944 `" ) && sleep 0'
2020-01-11 20:53:37,361 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:53:37,361 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpJXx0TN TO /root/.ansible/tmp/ansible-tmp-1578747217.34-168307326899944/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:53:37,362 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747217.34-168307326899944/ /root/.ansible/tmp/ansible-tmp-1578747217.34-168307326899944/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:37,370 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747217.34-168307326899944/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:38,581 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747217.34-168307326899944/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:38,596 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:53:38,636 p=22229 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:53:38,636 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:53:38,652 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:38,653 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:38,661 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747218.65-8930941618884 `" && echo ansible-tmp-1578747218.65-8930941618884="` echo /root/.ansible/tmp/ansible-tmp-1578747218.65-8930941618884 `" ) && sleep 0'
2020-01-11 20:53:38,672 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:53:38,673 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpRu0lUx TO /root/.ansible/tmp/ansible-tmp-1578747218.65-8930941618884/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:53:38,674 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747218.65-8930941618884/ /root/.ansible/tmp/ansible-tmp-1578747218.65-8930941618884/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:38,682 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747218.65-8930941618884/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:39,903 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747218.65-8930941618884/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:39,918 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:53:39,957 p=22229 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:53:39,958 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:53:39,975 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:39,975 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:39,984 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747219.97-259466011491375 `" && echo ansible-tmp-1578747219.97-259466011491375="` echo /root/.ansible/tmp/ansible-tmp-1578747219.97-259466011491375 `" ) && sleep 0'
2020-01-11 20:53:39,995 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:53:39,996 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmppxcCnO TO /root/.ansible/tmp/ansible-tmp-1578747219.97-259466011491375/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:53:39,996 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747219.97-259466011491375/ /root/.ansible/tmp/ansible-tmp-1578747219.97-259466011491375/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:40,005 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747219.97-259466011491375/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:41,211 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747219.97-259466011491375/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:41,225 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:53:41,265 p=22229 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:53:41,265 p=22229 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:53:41,286 p=22229 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:53:41,286 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:53:41,295 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747221.29-175901861045423 `" && echo ansible-tmp-1578747221.29-175901861045423="` echo /root/.ansible/tmp/ansible-tmp-1578747221.29-175901861045423 `" ) && sleep 0'
2020-01-11 20:53:41,307 p=22229 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:53:41,308 p=22229 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22229R_0M4Z/tmpBwIFyR TO /root/.ansible/tmp/ansible-tmp-1578747221.29-175901861045423/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:53:41,309 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747221.29-175901861045423/ /root/.ansible/tmp/ansible-tmp-1578747221.29-175901861045423/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:41,318 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747221.29-175901861045423/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:53:42,519 p=22229 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747221.29-175901861045423/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:53:42,533 p=22229 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:53:42,534 p=22229 u=root |  META: ran handlers
2020-01-11 20:53:42,535 p=22229 u=root |  META: ran handlers
2020-01-11 20:53:42,535 p=22229 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:53:42,536 p=22229 u=root |  localhost                  : ok=14   changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2020-01-11 20:54:12,467 p=22732 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:54:12,468 p=22732 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:54:12,476 p=22732 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:54:12,476 p=22732 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:54:12,476 p=22732 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:54:12,479 p=22732 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:54:12,481 p=22732 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:54:12,890 p=22732 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:54:12,899 p=22732 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:54:12,908 p=22732 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:54:12,916 p=22732 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:54:12,925 p=22732 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml
2020-01-11 20:54:12,989 p=22732 u=root |  PLAYBOOK: 01.vpc-subnet-sg-base.yml ***********************************************************************************************************************
2020-01-11 20:54:12,989 p=22732 u=root |  2 plays in 01.vpc-subnet-sg-base.yml
2020-01-11 20:54:13,019 p=22732 u=root |  PLAY [Create,launch and configure our basic AWS VPC] ******************************************************************************************************
2020-01-11 20:54:13,030 p=22732 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:54:13,031 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:2
2020-01-11 20:54:13,042 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:13,042 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:13,051 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747253.04-174931692077932 `" && echo ansible-tmp-1578747253.04-174931692077932="` echo /root/.ansible/tmp/ansible-tmp-1578747253.04-174931692077932 `" ) && sleep 0'
2020-01-11 20:54:13,446 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:54:13,446 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpO6fe_d TO /root/.ansible/tmp/ansible-tmp-1578747253.04-174931692077932/AnsiballZ_setup.py
2020-01-11 20:54:13,447 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747253.04-174931692077932/ /root/.ansible/tmp/ansible-tmp-1578747253.04-174931692077932/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:54:13,456 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747253.04-174931692077932/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:54:13,921 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747253.04-174931692077932/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:13,993 p=22732 u=root |  ok: [localhost]
2020-01-11 20:54:13,994 p=22732 u=root |  META: ran handlers
2020-01-11 20:54:14,034 p=22732 u=root |  TASK [roles/vpc : ensure that the VPC is present] *********************************************************************************************************
2020-01-11 20:54:14,034 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/vpc/tasks/main.yml:4
2020-01-11 20:54:14,051 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:14,051 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:14,060 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747254.05-252542721046979 `" && echo ansible-tmp-1578747254.05-252542721046979="` echo /root/.ansible/tmp/ansible-tmp-1578747254.05-252542721046979 `" ) && sleep 0'
2020-01-11 20:54:14,323 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
2020-01-11 20:54:14,323 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpyEJ7pr TO /root/.ansible/tmp/ansible-tmp-1578747254.05-252542721046979/AnsiballZ_ec2_vpc_net.py
2020-01-11 20:54:14,324 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747254.05-252542721046979/ /root/.ansible/tmp/ansible-tmp-1578747254.05-252542721046979/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:54:14,333 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747254.05-252542721046979/AnsiballZ_ec2_vpc_net.py && sleep 0'
2020-01-11 20:54:15,926 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747254.05-252542721046979/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:15,941 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "cidr_block": [
                "10.20.0.0/16"
            ], 
            "debug_botocore_endpoint_logs": false, 
            "dhcp_opts_id": null, 
            "dns_hostnames": true, 
            "dns_support": true, 
            "ec2_url": null, 
            "multi_ok": false, 
            "name": "M20", 
            "profile": null, 
            "purge_cidrs": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "tenancy": "default", 
            "validate_certs": true
        }
    }, 
    "vpc": {
        "cidr_block": "10.20.0.0/16", 
        "cidr_block_association_set": [
            {
                "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                "cidr_block": "10.20.0.0/16", 
                "cidr_block_state": {
                    "state": "associated"
                }
            }
        ], 
        "classic_link_enabled": false, 
        "dhcp_options_id": "dopt-f30bea9a", 
        "id": "vpc-0f5dfc0ae44286535", 
        "instance_tenancy": "default", 
        "is_default": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20"
        }
    }
}
2020-01-11 20:54:15,980 p=22732 u=root |  TASK [roles/subnets : ensure that the subnets are present] ************************************************************************************************
2020-01-11 20:54:15,981 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:4
2020-01-11 20:54:16,008 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:16,008 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:16,017 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747256.01-223418690132051 `" && echo ansible-tmp-1578747256.01-223418690132051="` echo /root/.ansible/tmp/ansible-tmp-1578747256.01-223418690132051 `" ) && sleep 0'
2020-01-11 20:54:16,272 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:54:16,273 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpb2kzyZ TO /root/.ansible/tmp/ansible-tmp-1578747256.01-223418690132051/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:54:16,274 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747256.01-223418690132051/ /root/.ansible/tmp/ansible-tmp-1578747256.01-223418690132051/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:54:16,283 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747256.01-223418690132051/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:54:17,193 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747256.01-223418690132051/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:17,209 p=22732 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.10.0/24', u'use': u'ec2', u'az': u'a'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1a", 
            "cidr": "10.20.10.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "a", 
        "subnet": "10.20.10.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1a", 
        "availability_zone_id": "ape1-az1", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.10.0/24", 
        "default_for_az": false, 
        "id": "subnet-0a81abe1060a70c59", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1a", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:54:17,216 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:17,225 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747257.22-240611637070390 `" && echo ansible-tmp-1578747257.22-240611637070390="` echo /root/.ansible/tmp/ansible-tmp-1578747257.22-240611637070390 `" ) && sleep 0'
2020-01-11 20:54:17,238 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:54:17,238 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpWVyOyy TO /root/.ansible/tmp/ansible-tmp-1578747257.22-240611637070390/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:54:17,239 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747257.22-240611637070390/ /root/.ansible/tmp/ansible-tmp-1578747257.22-240611637070390/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:54:17,248 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747257.22-240611637070390/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:54:18,201 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747257.22-240611637070390/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:18,215 p=22732 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.11.0/24', u'use': u'ec2', u'az': u'b'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1b", 
            "cidr": "10.20.11.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "b", 
        "subnet": "10.20.11.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1b", 
        "availability_zone_id": "ape1-az2", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.11.0/24", 
        "default_for_az": false, 
        "id": "subnet-0fcef4b1debcf3717", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1b", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:54:18,224 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:18,234 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747258.22-199112779768677 `" && echo ansible-tmp-1578747258.22-199112779768677="` echo /root/.ansible/tmp/ansible-tmp-1578747258.22-199112779768677 `" ) && sleep 0'
2020-01-11 20:54:18,246 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
2020-01-11 20:54:18,247 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpz9Pb3x TO /root/.ansible/tmp/ansible-tmp-1578747258.22-199112779768677/AnsiballZ_ec2_vpc_subnet.py
2020-01-11 20:54:18,247 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747258.22-199112779768677/ /root/.ansible/tmp/ansible-tmp-1578747258.22-199112779768677/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:54:18,255 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747258.22-199112779768677/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
2020-01-11 20:54:19,168 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747258.22-199112779768677/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:19,182 p=22732 u=root |  ok: [localhost] => (item={u'subnet': u'10.20.12.0/24', u'use': u'ec2', u'az': u'c'}) => {
    "ansible_loop_var": "item", 
    "changed": false, 
    "invocation": {
        "module_args": {
            "assign_instances_ipv6": false, 
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "az": "ap-east-1c", 
            "cidr": "10.20.12.0/24", 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "ipv6_cidr": "", 
            "map_public": false, 
            "profile": null, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535", 
            "wait": true, 
            "wait_timeout": 300
        }
    }, 
    "item": {
        "az": "c", 
        "subnet": "10.20.12.0/24", 
        "use": "ec2"
    }, 
    "subnet": {
        "assign_ipv6_address_on_creation": false, 
        "availability_zone": "ap-east-1c", 
        "availability_zone_id": "ape1-az3", 
        "available_ip_address_count": 251, 
        "cidr_block": "10.20.12.0/24", 
        "default_for_az": false, 
        "id": "subnet-04f2d26aa3b7d632b", 
        "ipv6_association_id": "", 
        "ipv6_cidr_block": "", 
        "ipv6_cidr_block_association_set": [], 
        "map_public_ip_on_launch": false, 
        "owner_id": "838988372941", 
        "state": "available", 
        "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_ap-east-1c", 
            "Use": "ec2"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:54:19,225 p=22732 u=root |  TASK [roles/subnets : gather information about the ec2 subnets] *******************************************************************************************
2020-01-11 20:54:19,225 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:17
2020-01-11 20:54:19,242 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:19,242 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:19,250 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747259.24-92571214339330 `" && echo ansible-tmp-1578747259.24-92571214339330="` echo /root/.ansible/tmp/ansible-tmp-1578747259.24-92571214339330 `" ) && sleep 0'
2020-01-11 20:54:19,479 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:54:19,480 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpcMk23S TO /root/.ansible/tmp/ansible-tmp-1578747259.24-92571214339330/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:54:19,480 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747259.24-92571214339330/ /root/.ansible/tmp/ansible-tmp-1578747259.24-92571214339330/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:54:19,489 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747259.24-92571214339330/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:54:20,329 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747259.24-92571214339330/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:20,346 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "ec2"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": [
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1b", 
            "availability_zone_id": "ape1-az2", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.11.0/24", 
            "default_for_az": false, 
            "id": "subnet-0fcef4b1debcf3717", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0fcef4b1debcf3717", 
            "subnet_id": "subnet-0fcef4b1debcf3717", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1b", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1a", 
            "availability_zone_id": "ape1-az1", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.10.0/24", 
            "default_for_az": false, 
            "id": "subnet-0a81abe1060a70c59", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-0a81abe1060a70c59", 
            "subnet_id": "subnet-0a81abe1060a70c59", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1a", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }, 
        {
            "assign_ipv6_address_on_creation": false, 
            "availability_zone": "ap-east-1c", 
            "availability_zone_id": "ape1-az3", 
            "available_ip_address_count": 251, 
            "cidr_block": "10.20.12.0/24", 
            "default_for_az": false, 
            "id": "subnet-04f2d26aa3b7d632b", 
            "ipv6_cidr_block_association_set": [], 
            "map_public_ip_on_launch": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "subnet_arn": "arn:aws:ec2:ap-east-1:838988372941:subnet/subnet-04f2d26aa3b7d632b", 
            "subnet_id": "subnet-04f2d26aa3b7d632b", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_ap-east-1c", 
                "Use": "ec2"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:54:20,385 p=22732 u=root |  TASK [roles/subnets : gather information about the rds subnets] *******************************************************************************************
2020-01-11 20:54:20,385 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:25
2020-01-11 20:54:20,402 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:20,403 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:20,411 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747260.4-228352724078720 `" && echo ansible-tmp-1578747260.4-228352724078720="` echo /root/.ansible/tmp/ansible-tmp-1578747260.4-228352724078720 `" ) && sleep 0'
2020-01-11 20:54:20,422 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:54:20,423 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpNT_V2A TO /root/.ansible/tmp/ansible-tmp-1578747260.4-228352724078720/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:54:20,424 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747260.4-228352724078720/ /root/.ansible/tmp/ansible-tmp-1578747260.4-228352724078720/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:54:20,432 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747260.4-228352724078720/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:54:21,229 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747260.4-228352724078720/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:21,242 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Environment": "M20", 
                "tag:Use": "rds"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:54:21,282 p=22732 u=root |  TASK [roles/subnets : register just the IDs for each of the subnets] **************************************************************************************
2020-01-11 20:54:21,283 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/subnets/tasks/main.yml:33
2020-01-11 20:54:21,301 p=22732 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": [
            "subnet-0a81abe1060a70c59", 
            "subnet-0fcef4b1debcf3717", 
            "subnet-04f2d26aa3b7d632b"
        ]
    }, 
    "changed": false
}
2020-01-11 20:54:21,341 p=22732 u=root |  TASK [roles/gateway : ensure that there is an internet gateway] *******************************************************************************************
2020-01-11 20:54:21,341 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:4
2020-01-11 20:54:21,359 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:21,359 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:21,368 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747261.36-21259478481853 `" && echo ansible-tmp-1578747261.36-21259478481853="` echo /root/.ansible/tmp/ansible-tmp-1578747261.36-21259478481853 `" ) && sleep 0'
2020-01-11 20:54:21,611 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_igw.py
2020-01-11 20:54:21,611 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpje90xJ TO /root/.ansible/tmp/ansible-tmp-1578747261.36-21259478481853/AnsiballZ_ec2_vpc_igw.py
2020-01-11 20:54:21,612 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747261.36-21259478481853/ /root/.ansible/tmp/ansible-tmp-1578747261.36-21259478481853/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:54:21,621 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747261.36-21259478481853/AnsiballZ_ec2_vpc_igw.py && sleep 0'
2020-01-11 20:54:22,480 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747261.36-21259478481853/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:22,493 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "gateway_id": "igw-0d49fc731a1555b52", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_internet_gateway", 
                "Use": "gateway"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "tags": {
        "Environment": "M20", 
        "Name": "M20_internet_gateway", 
        "Use": "gateway"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:54:22,533 p=22732 u=root |  TASK [roles/gateway : check that we can ec2 public route through internet gateway] ************************************************************************
2020-01-11 20:54:22,533 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/gateway/tasks/main.yml:15
2020-01-11 20:54:22,553 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:22,553 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:22,562 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747262.55-257098603730238 `" && echo ansible-tmp-1578747262.55-257098603730238="` echo /root/.ansible/tmp/ansible-tmp-1578747262.55-257098603730238 `" ) && sleep 0'
2020-01-11 20:54:22,826 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
2020-01-11 20:54:22,826 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmp5vTtKl TO /root/.ansible/tmp/ansible-tmp-1578747262.55-257098603730238/AnsiballZ_ec2_vpc_route_table.py
2020-01-11 20:54:22,827 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747262.55-257098603730238/ /root/.ansible/tmp/ansible-tmp-1578747262.55-257098603730238/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:54:22,836 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747262.55-257098603730238/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
2020-01-11 20:54:24,178 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747262.55-257098603730238/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:24,192 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "lookup": "tag", 
            "profile": null, 
            "propagating_vgw_ids": null, 
            "purge_routes": true, 
            "purge_subnets": true, 
            "purge_tags": false, 
            "region": "ap-east-1", 
            "resource_tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "route_table_id": null, 
            "routes": [
                {
                    "destination_cidr_block": "0.0.0.0/0", 
                    "gateway_id": "igw-0d49fc731a1555b52"
                }
            ], 
            "security_token": null, 
            "state": "present", 
            "subnets": [
                "subnet-0a81abe1060a70c59", 
                "subnet-0fcef4b1debcf3717", 
                "subnet-04f2d26aa3b7d632b"
            ], 
            "tags": {
                "Environment": "M20", 
                "Name": "M20_ec2_public"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "route_table": {
        "associations": [
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-024f474ac59b61ab1", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0fcef4b1debcf3717"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0fdb85ba9e784fdac", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-0a81abe1060a70c59"
            }, 
            {
                "main": false, 
                "route_table_association_id": "rtbassoc-0537c9564f7e4eb84", 
                "route_table_id": "rtb-048a44083232526f8", 
                "subnet_id": "subnet-04f2d26aa3b7d632b"
            }
        ], 
        "id": "rtb-048a44083232526f8", 
        "owner_id": "838988372941", 
        "propagating_vgws": [], 
        "route_table_id": "rtb-048a44083232526f8", 
        "routes": [
            {
                "destination_cidr_block": "10.20.0.0/16", 
                "gateway_id": "local", 
                "origin": "CreateRouteTable", 
                "state": "active"
            }, 
            {
                "destination_cidr_block": "0.0.0.0/0", 
                "gateway_id": "igw-0d49fc731a1555b52", 
                "origin": "CreateRoute", 
                "state": "active"
            }
        ], 
        "tags": {
            "Environment": "M20", 
            "Name": "M20_ec2_public"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:54:24,193 p=22732 u=root |  META: ran handlers
2020-01-11 20:54:24,193 p=22732 u=root |  META: ran handlers
2020-01-11 20:54:24,201 p=22732 u=root |  PLAY [create securitygroups] ******************************************************************************************************************************
2020-01-11 20:54:24,249 p=22732 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:54:24,250 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/01.vpc-subnet-sg-base.yml:16
2020-01-11 20:54:24,261 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:24,261 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:24,270 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747264.26-3466872495890 `" && echo ansible-tmp-1578747264.26-3466872495890="` echo /root/.ansible/tmp/ansible-tmp-1578747264.26-3466872495890 `" ) && sleep 0'
2020-01-11 20:54:24,283 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:54:24,283 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpvkCF0h TO /root/.ansible/tmp/ansible-tmp-1578747264.26-3466872495890/AnsiballZ_setup.py
2020-01-11 20:54:24,284 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747264.26-3466872495890/ /root/.ansible/tmp/ansible-tmp-1578747264.26-3466872495890/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:54:24,293 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747264.26-3466872495890/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:54:24,920 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747264.26-3466872495890/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:24,993 p=22732 u=root |  ok: [localhost]
2020-01-11 20:54:24,994 p=22732 u=root |  META: ran handlers
2020-01-11 20:54:25,033 p=22732 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:54:25,034 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:54:25,051 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:25,051 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:25,060 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747265.05-143707525945440 `" && echo ansible-tmp-1578747265.05-143707525945440="` echo /root/.ansible/tmp/ansible-tmp-1578747265.05-143707525945440 `" ) && sleep 0'
2020-01-11 20:54:25,301 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:54:25,301 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpTIxv3x TO /root/.ansible/tmp/ansible-tmp-1578747265.05-143707525945440/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:54:25,302 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747265.05-143707525945440/ /root/.ansible/tmp/ansible-tmp-1578747265.05-143707525945440/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:25,312 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747265.05-143707525945440/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:26,679 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747265.05-143707525945440/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:26,693 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:54:26,733 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:26,733 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:4
2020-01-11 20:54:26,797 p=22732 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml for localhost
2020-01-11 20:54:26,839 p=22732 u=root |  TASK [securitygroups : provision elb  80 and 443 all security group] **************************************************************************************
2020-01-11 20:54:26,839 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/ng-80-443-all.yml:3
2020-01-11 20:54:26,857 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:26,858 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:26,866 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747266.86-20527582396329 `" && echo ansible-tmp-1578747266.86-20527582396329="` echo /root/.ansible/tmp/ansible-tmp-1578747266.86-20527582396329 `" ) && sleep 0'
2020-01-11 20:54:27,181 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-11 20:54:27,181 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpBossWy TO /root/.ansible/tmp/ansible-tmp-1578747266.86-20527582396329/AnsiballZ_ec2_group.py
2020-01-11 20:54:27,182 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747266.86-20527582396329/ /root/.ansible/tmp/ansible-tmp-1578747266.86-20527582396329/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:27,192 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747266.86-20527582396329/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:32,892 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747266.86-20527582396329/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:32,909 p=22732 u=root |  changed: [localhost] => {
    "changed": true, 
    "description": "opens port 80 443 to the world", 
    "group_id": "sg-0e584c1f8c10325ab", 
    "group_name": "M20-ng-80-443-all", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port 80 443 to the world", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M20-ng-80-443-all", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "rules": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "80", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 80", 
                    "to_port": "80"
                }, 
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "443", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 443", 
                    "to_port": "443"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 80, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 80"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 80, 
            "user_id_group_pairs": []
        }, 
        {
            "from_port": 443, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 443"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 443, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M20-ng-80-443-all", 
        "Name": "M20-ng-80-443-all"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:54:32,949 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:32,949 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:7
2020-01-11 20:54:32,965 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:33,005 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:33,005 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:10
2020-01-11 20:54:33,023 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:33,063 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:33,063 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:13
2020-01-11 20:54:33,081 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:33,120 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:33,121 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:16
2020-01-11 20:54:33,137 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:33,177 p=22732 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:54:33,177 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:54:33,194 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:33,194 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:33,203 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747273.19-144838807856525 `" && echo ansible-tmp-1578747273.19-144838807856525="` echo /root/.ansible/tmp/ansible-tmp-1578747273.19-144838807856525 `" ) && sleep 0'
2020-01-11 20:54:33,215 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:54:33,215 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpOFe15E TO /root/.ansible/tmp/ansible-tmp-1578747273.19-144838807856525/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:54:33,216 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747273.19-144838807856525/ /root/.ansible/tmp/ansible-tmp-1578747273.19-144838807856525/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:33,225 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747273.19-144838807856525/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:34,459 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747273.19-144838807856525/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:34,473 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:54:34,512 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:34,513 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:4
2020-01-11 20:54:34,530 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:34,570 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:34,570 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:7
2020-01-11 20:54:34,628 p=22732 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/merchant-8081.yml for localhost
2020-01-11 20:54:34,670 p=22732 u=root |  TASK [securitygroups : provision merchant  8081 all security group] ***************************************************************************************
2020-01-11 20:54:34,671 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/merchant-8081.yml:3
2020-01-11 20:54:34,689 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:34,689 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:34,698 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747274.69-201525604212322 `" && echo ansible-tmp-1578747274.69-201525604212322="` echo /root/.ansible/tmp/ansible-tmp-1578747274.69-201525604212322 `" ) && sleep 0'
2020-01-11 20:54:34,710 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-11 20:54:34,711 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpncsrUq TO /root/.ansible/tmp/ansible-tmp-1578747274.69-201525604212322/AnsiballZ_ec2_group.py
2020-01-11 20:54:34,711 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747274.69-201525604212322/ /root/.ansible/tmp/ansible-tmp-1578747274.69-201525604212322/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:34,721 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747274.69-201525604212322/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:40,241 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747274.69-201525604212322/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:40,256 p=22732 u=root |  changed: [localhost] => {
    "changed": true, 
    "description": "opens port 8081 to the world", 
    "group_id": "sg-06ac1466b623c31bb", 
    "group_name": "M20-merchant-8081", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port 8081 to the world", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M20-merchant-8081", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "rules": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "from_port": "8081", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 8081", 
                    "to_port": "8081"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 8081, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "description": "allow all on port 8081"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 8081, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M20-merchant-8081", 
        "Name": "M20-merchant-8081"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:54:40,296 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:40,296 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:10
2020-01-11 20:54:40,312 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:40,351 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:40,352 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:13
2020-01-11 20:54:40,373 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:40,415 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:40,415 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:16
2020-01-11 20:54:40,432 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:40,472 p=22732 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:54:40,472 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:54:40,490 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:40,490 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:40,499 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747280.49-121427124606807 `" && echo ansible-tmp-1578747280.49-121427124606807="` echo /root/.ansible/tmp/ansible-tmp-1578747280.49-121427124606807 `" ) && sleep 0'
2020-01-11 20:54:40,510 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:54:40,511 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpC0BvGp TO /root/.ansible/tmp/ansible-tmp-1578747280.49-121427124606807/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:54:40,512 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747280.49-121427124606807/ /root/.ansible/tmp/ansible-tmp-1578747280.49-121427124606807/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:40,521 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747280.49-121427124606807/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:41,782 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747280.49-121427124606807/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:41,797 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:54:41,837 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:41,837 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:4
2020-01-11 20:54:41,854 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:41,894 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:41,894 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:7
2020-01-11 20:54:41,910 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:41,950 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:41,950 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:10
2020-01-11 20:54:42,011 p=22732 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/agnet-acl.yml for localhost
2020-01-11 20:54:42,053 p=22732 u=root |  TASK [securitygroups : provision agnet acl 7880 7881 7882 all security group] *****************************************************************************
2020-01-11 20:54:42,054 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/agnet-acl.yml:3
2020-01-11 20:54:42,072 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:42,072 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:42,081 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747282.07-222725834402271 `" && echo ansible-tmp-1578747282.07-222725834402271="` echo /root/.ansible/tmp/ansible-tmp-1578747282.07-222725834402271 `" ) && sleep 0'
2020-01-11 20:54:42,094 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-11 20:54:42,094 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpO7cQ5x TO /root/.ansible/tmp/ansible-tmp-1578747282.07-222725834402271/AnsiballZ_ec2_group.py
2020-01-11 20:54:42,095 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747282.07-222725834402271/ /root/.ansible/tmp/ansible-tmp-1578747282.07-222725834402271/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:42,104 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747282.07-222725834402271/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:47,669 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747282.07-222725834402271/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:47,687 p=22732 u=root |  changed: [localhost] => {
    "changed": true, 
    "description": "opens port 7880 7881 7882 to the world", 
    "group_id": "sg-022652d5bf12d8fa8", 
    "group_name": "M20-agent-acl", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port 7880 7881 7882 to the world", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M20-agent-acl", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "rules": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "from_port": "7880", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7880", 
                    "to_port": "7880"
                }, 
                {
                    "from_port": "7881", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7881", 
                    "to_port": "7881"
                }, 
                {
                    "from_port": "7882", 
                    "proto": "tcp", 
                    "rule_desc": "allow all on port 7882", 
                    "to_port": "7882"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 7880, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0", 
                    "description": "allow all on port 7880"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 7880, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M20-agent-acl", 
        "Name": "M20-agent-acl"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:54:47,726 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:47,727 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:13
2020-01-11 20:54:47,743 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:47,782 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:47,782 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:16
2020-01-11 20:54:47,800 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:47,840 p=22732 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:54:47,840 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:54:47,858 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:47,858 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:47,867 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747287.86-135025721490062 `" && echo ansible-tmp-1578747287.86-135025721490062="` echo /root/.ansible/tmp/ansible-tmp-1578747287.86-135025721490062 `" ) && sleep 0'
2020-01-11 20:54:47,878 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:54:47,879 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpIBarFz TO /root/.ansible/tmp/ansible-tmp-1578747287.86-135025721490062/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:54:47,880 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747287.86-135025721490062/ /root/.ansible/tmp/ansible-tmp-1578747287.86-135025721490062/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:47,889 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747287.86-135025721490062/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:49,148 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747287.86-135025721490062/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:49,163 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:54:49,202 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:49,202 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:4
2020-01-11 20:54:49,219 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:49,258 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:49,259 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:7
2020-01-11 20:54:49,274 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:49,313 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:49,313 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:10
2020-01-11 20:54:49,330 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:49,369 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:49,369 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:13
2020-01-11 20:54:49,434 p=22732 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/docker-manager-2375.yml for localhost
2020-01-11 20:54:49,476 p=22732 u=root |  TASK [securitygroups : provision private 18083 port security group] ***************************************************************************************
2020-01-11 20:54:49,476 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/docker-manager-2375.yml:3
2020-01-11 20:54:49,496 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:49,496 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:49,505 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747289.5-149063615344117 `" && echo ansible-tmp-1578747289.5-149063615344117="` echo /root/.ansible/tmp/ansible-tmp-1578747289.5-149063615344117 `" ) && sleep 0'
2020-01-11 20:54:49,518 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-11 20:54:49,519 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmp6F5DEi TO /root/.ansible/tmp/ansible-tmp-1578747289.5-149063615344117/AnsiballZ_ec2_group.py
2020-01-11 20:54:49,520 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747289.5-149063615344117/ /root/.ansible/tmp/ansible-tmp-1578747289.5-149063615344117/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:49,529 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747289.5-149063615344117/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:55,043 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747289.5-149063615344117/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:55,060 p=22732 u=root |  changed: [localhost] => {
    "changed": true, 
    "description": "opens port 2375 to the user", 
    "group_id": "sg-01340203ba589fcc5", 
    "group_name": "M20-docker-manager", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens port 2375 to the user", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M20-docker-manager", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "rules": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "from_port": "2375", 
                    "proto": "tcp", 
                    "rule_desc": "private allow all on port 2375", 
                    "to_port": "2375"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "ip_permissions": [
        {
            "from_port": 2375, 
            "ip_protocol": "tcp", 
            "ip_ranges": [
                {
                    "cidr_ip": "154.197.29.34/32", 
                    "description": "private allow all on port 2375"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "to_port": 2375, 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M20-docker-manager", 
        "Name": "M20-docker-manager"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:54:55,099 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:55,100 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:16
2020-01-11 20:54:55,116 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:55,156 p=22732 u=root |  TASK [securitygroups : VPC facts] *************************************************************************************************************************
2020-01-11 20:54:55,157 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:54:55,174 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:55,175 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:55,183 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747295.17-105258854750031 `" && echo ansible-tmp-1578747295.17-105258854750031="` echo /root/.ansible/tmp/ansible-tmp-1578747295.17-105258854750031 `" ) && sleep 0'
2020-01-11 20:54:55,195 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:54:55,196 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpF6jF8M TO /root/.ansible/tmp/ansible-tmp-1578747295.17-105258854750031/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:54:55,197 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747295.17-105258854750031/ /root/.ansible/tmp/ansible-tmp-1578747295.17-105258854750031/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:55,205 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747295.17-105258854750031/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:54:56,456 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747295.17-105258854750031/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:54:56,470 p=22732 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:54:56,509 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:56,509 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:4
2020-01-11 20:54:56,526 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:56,566 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:56,566 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:7
2020-01-11 20:54:56,583 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:56,623 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:56,623 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:10
2020-01-11 20:54:56,639 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:56,678 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:56,679 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:13
2020-01-11 20:54:56,696 p=22732 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:54:56,736 p=22732 u=root |  TASK [securitygroups : include_tasks] *********************************************************************************************************************
2020-01-11 20:54:56,736 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/main.yml:16
2020-01-11 20:54:56,794 p=22732 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/all.yml for localhost
2020-01-11 20:54:56,836 p=22732 u=root |  TASK [securitygroups : provision vpc ec2 netwokr  all security group] *************************************************************************************
2020-01-11 20:54:56,837 p=22732 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/securitygroups/tasks/all.yml:3
2020-01-11 20:54:56,857 p=22732 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:54:56,857 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:54:56,866 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747296.86-159876366340618 `" && echo ansible-tmp-1578747296.86-159876366340618="` echo /root/.ansible/tmp/ansible-tmp-1578747296.86-159876366340618 `" ) && sleep 0'
2020-01-11 20:54:56,878 p=22732 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group.py
2020-01-11 20:54:56,878 p=22732 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-22732kY4n6N/tmpymT2jr TO /root/.ansible/tmp/ansible-tmp-1578747296.86-159876366340618/AnsiballZ_ec2_group.py
2020-01-11 20:54:56,879 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747296.86-159876366340618/ /root/.ansible/tmp/ansible-tmp-1578747296.86-159876366340618/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:54:56,888 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747296.86-159876366340618/AnsiballZ_ec2_group.py && sleep 0'
2020-01-11 20:55:02,344 p=22732 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747296.86-159876366340618/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:02,360 p=22732 u=root |  changed: [localhost] => {
    "changed": true, 
    "description": "opens all ports to the world", 
    "group_id": "sg-0c2c096258071c925", 
    "group_name": "M20-all", 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "description": "opens all ports to the world", 
            "ec2_url": null, 
            "group_id": null, 
            "name": "M20-all", 
            "profile": null, 
            "purge_rules": true, 
            "purge_rules_egress": true, 
            "purge_tags": true, 
            "region": "ap-east-1", 
            "rules": [
                {
                    "cidr_ip": "10.20.0.0/16", 
                    "proto": "all", 
                    "rule_desc": "private ec2 allow all on ports"
                }
            ], 
            "rules_egress": null, 
            "security_token": null, 
            "state": "present", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "validate_certs": true, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    }, 
    "ip_permissions": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "10.20.0.0/16", 
                    "description": "private ec2 allow all on ports"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "ip_permissions_egress": [
        {
            "ip_protocol": "-1", 
            "ip_ranges": [
                {
                    "cidr_ip": "0.0.0.0/0"
                }
            ], 
            "ipv6_ranges": [], 
            "prefix_list_ids": [], 
            "user_id_group_pairs": []
        }
    ], 
    "owner_id": "838988372941", 
    "tags": {
        "Environment": "M20-all", 
        "Name": "M20-all"
    }, 
    "vpc_id": "vpc-0f5dfc0ae44286535"
}
2020-01-11 20:55:02,361 p=22732 u=root |  META: ran handlers
2020-01-11 20:55:02,361 p=22732 u=root |  META: ran handlers
2020-01-11 20:55:02,362 p=22732 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:55:02,362 p=22732 u=root |  localhost                  : ok=24   changed=5    unreachable=0    failed=0    skipped=20   rescued=0    ignored=0   
2020-01-11 20:55:14,637 p=23413 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:55:14,637 p=23413 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:55:14,645 p=23413 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:55:14,645 p=23413 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:55:14,645 p=23413 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:55:14,648 p=23413 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:55:14,650 p=23413 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:55:14,900 p=23413 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:55:15,062 p=23413 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:55:15,072 p=23413 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:55:15,081 p=23413 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:55:15,090 p=23413 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:55:15,100 p=23413 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:55:15,162 p=23413 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 20:55:15,162 p=23413 u=root |  1 plays in 03.ec2.yml
2020-01-11 20:55:15,192 p=23413 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 20:55:15,221 p=23413 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:55:15,221 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 20:55:15,233 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:15,233 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:15,242 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747315.23-250454588782940 `" && echo ansible-tmp-1578747315.23-250454588782940="` echo /root/.ansible/tmp/ansible-tmp-1578747315.23-250454588782940 `" ) && sleep 0'
2020-01-11 20:55:15,639 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:55:15,639 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmpMfbhaM TO /root/.ansible/tmp/ansible-tmp-1578747315.23-250454588782940/AnsiballZ_setup.py
2020-01-11 20:55:15,640 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747315.23-250454588782940/ /root/.ansible/tmp/ansible-tmp-1578747315.23-250454588782940/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:55:15,649 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747315.23-250454588782940/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:55:16,133 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747315.23-250454588782940/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:16,204 p=23413 u=root |  ok: [localhost]
2020-01-11 20:55:16,205 p=23413 u=root |  META: ran handlers
2020-01-11 20:55:16,246 p=23413 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 20:55:16,246 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 20:55:16,263 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:16,263 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:16,272 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747316.26-229194403312500 `" && echo ansible-tmp-1578747316.26-229194403312500="` echo /root/.ansible/tmp/ansible-tmp-1578747316.26-229194403312500 `" ) && sleep 0'
2020-01-11 20:55:16,522 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 20:55:16,522 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmpnLwonR TO /root/.ansible/tmp/ansible-tmp-1578747316.26-229194403312500/AnsiballZ_ec2_key.py
2020-01-11 20:55:16,523 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747316.26-229194403312500/ /root/.ansible/tmp/ansible-tmp-1578747316.26-229194403312500/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:55:16,533 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747316.26-229194403312500/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:55:17,536 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747316.26-229194403312500/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:17,551 p=23413 u=root |  changed: [localhost] => {
    "changed": true, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh", 
        "private_key": "-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAh3Idw1GB45ODHSuet1ZU6NfqL6mbIjJIkV2jJJJxRcPb1mU3TM3J7lC/n2nT\nOs0Ygt6oLTfJ5Tz2GLu/DG96ciVUxEZqM+DNQwaE6G3D+eqwHtYkUDYts8W1UwrW3xiwxQFt+zN2\nQJfWQr2uLwPuTdJZtFSCTMqkYly3PiMjHhfglnu3oTPg/h/qD0Ntc2/Ic5sQzBhUZMZSak7nBAcV\n0SpMdWjER2cFCwqy9Wr4jONDqL5Gx8IY17Ps73+cS/DitthopEWVnNgy8ObVNawiTH4AqUF5SjIM\ntBnjeB7gwdwVQf4FUIpy7C3EM1MeFYltkdrg5+bJgeYmlIezAywQAQIDAQABAoIBAGgGB7/DcKt0\n1mTn5FzQLCQr94sliqTH0535OVvUMLSxCLzvPXp6LlUepRzsrLLjY6jXEniv+RpbKHK0drU5ROQ3\nsZOQtO4k/+AzOI4+Bx6A1UTJmFgWVCFWfb1KfN4Y22Jih7I+wto3AvJ9NTKcpUAVhpmNsgkCNR/q\nLz3ExKrN8E6s9ZT865yS6C/wdsEe2SvPOToj1JllAejQ0wJuFeP/GQtb1XoUvGUCdZ7+DrxyGuZW\nOOAmHdQGfodCYLGydkxlWQTFshv1WnEitqV0UjZ0wilHjztcnS/TbpH+J+31YCfxzU/EMSgqCTOO\nsn2WtG4jZU0ZxGAc9sRbYZEd0wECgYEA2X4g9cNvVbruPzKH3ZWbHuNdr9Xke/H4BpAdPBbOVVZ8\nFmxAI5BcWLy1woHlBZziMIygSgy4RgtmnTtrWEuAWHtX46fS7M48a1GV5URtiMNeO/HYIfGPb/Oo\nlt5A7QEvpGJk1isPHIGNuxyjZ/0QWdUVzgsLfGGi17pRTRRlcfECgYEAn200e53xyYEEsSjeYMlP\nah7vIjPBKOZQU5/0QjjsUOEHWGFL+3eZ8mOWY7C/H53X/gPyfqN5cZTD01A0EHf8+7MVcGwcM3D9\nrO2HonRRuvkUfpLQKjEnAvXVZbLsMuQnIgluliht3rE+udLKzL4fPFSfQY+eTlebwaEetmSIbxEC\ngYA6n53AwOIEqLNJQ5SNrKK4S67YE35Xzlv9YOEQblFFfV9LJ/iN3X6WyJ7xg9O4lJX/YhhefVk6\nQB5zqS2BCjDZKL4C9hyLifeNMduGhdBEeeyvmbuZQqRYF8RMjjHP8G7oD0GA3PBgzabnVYvSHstG\ne4I6HI4HA8ZCAc2iSioh8QKBgQCVhzueZfmNYXEhKI/Kf4X4pqLrlVcqITpd9LyIEBO1mBnnjvpR\nFVBSw40eW3wnD0iyeslKddFF8p3o6GSsvZ2OBd2p3/xjUyrasr5wZGDz2QKb5N9Rc2B/qktIY5Sd\n9tetWONb+vdx0xRd/ZMwjXGGiGgGecmk+Q6hgZjowUolwQKBgDjyME2y8DxLhyRA8Jd/Wgp6eXr0\nAd+obvk3ol61FguA8rRBUsQiryUOA91Yl4Ohhm3DyoNohb1hMsm3wJXCbPZNLVrdGPvOY6TWKp5F\nyBAhb2YM67a9uogiwaxIqbLtk6retuZzZlvNisf9/cfYvioHEzAETxZEVcmfmnhBxmj7\n-----END RSA PRIVATE KEY-----"
    }, 
    "msg": "key pair created"
}
2020-01-11 20:55:17,590 p=23413 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 20:55:17,591 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 20:55:17,607 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:17,607 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:17,615 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747317.61-164827731893294 `" && echo ansible-tmp-1578747317.61-164827731893294="` echo /root/.ansible/tmp/ansible-tmp-1578747317.61-164827731893294 `" ) && sleep 0'
2020-01-11 20:55:17,831 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:55:17,831 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmpoU3bxt TO /root/.ansible/tmp/ansible-tmp-1578747317.61-164827731893294/AnsiballZ_stat.py
2020-01-11 20:55:17,832 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747317.61-164827731893294/ /root/.ansible/tmp/ansible-tmp-1578747317.61-164827731893294/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:17,842 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747317.61-164827731893294/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:17,946 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747317.61-164827731893294/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:17,962 p=23413 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578484375.395159, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578484375.395159, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 63, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:55:18,001 p=23413 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:55:18,001 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 20:55:18,021 p=23413 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:55:18,063 p=23413 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 20:55:18,063 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 20:55:18,082 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:18,082 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:18,091 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527 `" && echo ansible-tmp-1578747318.08-262495035140527="` echo /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527 `" ) && sleep 0'
2020-01-11 20:55:18,104 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:55:18,105 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmpkjK3yi TO /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/AnsiballZ_stat.py
2020-01-11 20:55:18,105 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/ /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:18,114 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:18,209 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmp8oL7OW TO /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/source
2020-01-11 20:55:18,210 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/ /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/source && sleep 0'
2020-01-11 20:55:18,435 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/copy.py
2020-01-11 20:55:18,435 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmpRpZEdk TO /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/AnsiballZ_copy.py
2020-01-11 20:55:18,436 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/ /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/AnsiballZ_copy.py && sleep 0'
2020-01-11 20:55:18,445 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/AnsiballZ_copy.py && sleep 0'
2020-01-11 20:55:18,542 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:18,555 p=23413 u=root |  changed: [localhost] => {
    "changed": true, 
    "checksum": "57af85dd2a9a323b8dc012f2c72e074533c49cd4", 
    "dest": "/home/centos/aws-project/.keys/m20-ssh", 
    "diff": [], 
    "gid": 0, 
    "group": "root", 
    "invocation": {
        "module_args": {
            "_original_basename": "tmp8oL7OW", 
            "attributes": null, 
            "backup": false, 
            "checksum": "57af85dd2a9a323b8dc012f2c72e074533c49cd4", 
            "content": null, 
            "delimiter": null, 
            "dest": "/home/centos/aws-project/.keys/m20-ssh", 
            "directory_mode": null, 
            "follow": false, 
            "force": true, 
            "group": null, 
            "local_follow": null, 
            "mode": "0600", 
            "owner": null, 
            "regexp": null, 
            "remote_src": null, 
            "selevel": null, 
            "serole": null, 
            "setype": null, 
            "seuser": null, 
            "src": "/root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/source", 
            "unsafe_writes": null, 
            "validate": null
        }
    }, 
    "md5sum": "051037f788dea1c3b0f8f534cb83c347", 
    "mode": "0600", 
    "owner": "root", 
    "size": 1670, 
    "src": "/root/.ansible/tmp/ansible-tmp-1578747318.08-262495035140527/source", 
    "state": "file", 
    "uid": 0
}
2020-01-11 20:55:18,595 p=23413 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 20:55:18,595 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 20:55:18,611 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:18,611 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:18,620 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747318.61-254204835200830 `" && echo ansible-tmp-1578747318.61-254204835200830="` echo /root/.ansible/tmp/ansible-tmp-1578747318.61-254204835200830 `" ) && sleep 0'
2020-01-11 20:55:18,631 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:55:18,632 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmp5aZi7m TO /root/.ansible/tmp/ansible-tmp-1578747318.61-254204835200830/AnsiballZ_stat.py
2020-01-11 20:55:18,632 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747318.61-254204835200830/ /root/.ansible/tmp/ansible-tmp-1578747318.61-254204835200830/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:18,641 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747318.61-254204835200830/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:18,743 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747318.61-254204835200830/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:18,760 p=23413 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:55:18,800 p=23413 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:55:18,801 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 20:55:18,817 p=23413 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:55:18,856 p=23413 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 20:55:18,856 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 20:55:18,872 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:18,873 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:18,881 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747318.87-74749388909514 `" && echo ansible-tmp-1578747318.87-74749388909514="` echo /root/.ansible/tmp/ansible-tmp-1578747318.87-74749388909514 `" ) && sleep 0'
2020-01-11 20:55:18,893 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:55:18,893 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmpLHtZDw TO /root/.ansible/tmp/ansible-tmp-1578747318.87-74749388909514/AnsiballZ_stat.py
2020-01-11 20:55:18,894 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747318.87-74749388909514/ /root/.ansible/tmp/ansible-tmp-1578747318.87-74749388909514/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:18,903 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747318.87-74749388909514/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:19,012 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747318.87-74749388909514/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:19,028 p=23413 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578646251.3385913, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:55:19,068 p=23413 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 20:55:19,068 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 20:55:19,085 p=23413 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:55:19,125 p=23413 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 20:55:19,125 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 20:55:19,141 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:19,142 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:19,150 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747319.14-5793157806876 `" && echo ansible-tmp-1578747319.14-5793157806876="` echo /root/.ansible/tmp/ansible-tmp-1578747319.14-5793157806876 `" ) && sleep 0'
2020-01-11 20:55:19,162 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:55:19,162 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmp7lp6pA TO /root/.ansible/tmp/ansible-tmp-1578747319.14-5793157806876/AnsiballZ_stat.py
2020-01-11 20:55:19,163 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747319.14-5793157806876/ /root/.ansible/tmp/ansible-tmp-1578747319.14-5793157806876/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:19,172 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747319.14-5793157806876/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:55:19,280 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747319.14-5793157806876/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:19,296 p=23413 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578485506.985569, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:55:19,336 p=23413 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 20:55:19,336 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 20:55:19,353 p=23413 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:55:19,393 p=23413 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 20:55:19,394 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:55:19,409 p=23413 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:55:19,410 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:55:19,419 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747319.41-179103987655988 `" && echo ansible-tmp-1578747319.41-179103987655988="` echo /root/.ansible/tmp/ansible-tmp-1578747319.41-179103987655988 `" ) && sleep 0'
2020-01-11 20:55:19,657 p=23413 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:55:19,657 p=23413 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23413_yvT1Y/tmpb3BUbf TO /root/.ansible/tmp/ansible-tmp-1578747319.41-179103987655988/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:55:19,658 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747319.41-179103987655988/ /root/.ansible/tmp/ansible-tmp-1578747319.41-179103987655988/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:55:19,667 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747319.41-179103987655988/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:55:20,456 p=23413 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747319.41-179103987655988/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:55:20,468 p=23413 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": []
}
2020-01-11 20:55:20,508 p=23413 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 20:55:20,508 p=23413 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:10
2020-01-11 20:55:20,525 p=23413 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml': line 10, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n# parse the facts output and extract the VPC ID\n- name: \"set fact: VPC ID\"\n  ^ here\nThis one looks easy to fix. It seems that there is a value started\nwith a quote, and the YAML parser is expecting to see the line ended\nwith the same kind of quote. For instance:\n\n    when: \"ok\" in result.stdout\n\nCould be written as:\n\n   when: '\"ok\" in result.stdout'\n\nOr equivalently:\n\n   when: \"'ok' in result.stdout\"\n"
}
2020-01-11 20:55:20,527 p=23413 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:55:20,527 p=23413 u=root |  localhost                  : ok=8    changed=2    unreachable=0    failed=1    skipped=4    rescued=0    ignored=0   
2020-01-11 20:56:21,058 p=23682 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:56:21,058 p=23682 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:56:21,066 p=23682 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:56:21,066 p=23682 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:56:21,066 p=23682 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:56:21,070 p=23682 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:56:21,072 p=23682 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:56:21,324 p=23682 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:56:21,479 p=23682 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:56:21,489 p=23682 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:56:21,498 p=23682 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:56:21,508 p=23682 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:56:21,517 p=23682 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:56:21,581 p=23682 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 20:56:21,581 p=23682 u=root |  1 plays in 03.ec2.yml
2020-01-11 20:56:21,610 p=23682 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 20:56:21,638 p=23682 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:56:21,639 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 20:56:21,650 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:21,651 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:21,659 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747381.65-118159057775714 `" && echo ansible-tmp-1578747381.65-118159057775714="` echo /root/.ansible/tmp/ansible-tmp-1578747381.65-118159057775714 `" ) && sleep 0'
2020-01-11 20:56:22,053 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:56:22,054 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpfPLCjw TO /root/.ansible/tmp/ansible-tmp-1578747381.65-118159057775714/AnsiballZ_setup.py
2020-01-11 20:56:22,055 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747381.65-118159057775714/ /root/.ansible/tmp/ansible-tmp-1578747381.65-118159057775714/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:56:22,064 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747381.65-118159057775714/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:56:22,546 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747381.65-118159057775714/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:22,617 p=23682 u=root |  ok: [localhost]
2020-01-11 20:56:22,618 p=23682 u=root |  META: ran handlers
2020-01-11 20:56:22,659 p=23682 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 20:56:22,659 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 20:56:22,675 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:22,676 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:22,685 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747382.68-26638542719034 `" && echo ansible-tmp-1578747382.68-26638542719034="` echo /root/.ansible/tmp/ansible-tmp-1578747382.68-26638542719034 `" ) && sleep 0'
2020-01-11 20:56:22,927 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 20:56:22,928 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpHLB3IO TO /root/.ansible/tmp/ansible-tmp-1578747382.68-26638542719034/AnsiballZ_ec2_key.py
2020-01-11 20:56:22,929 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747382.68-26638542719034/ /root/.ansible/tmp/ansible-tmp-1578747382.68-26638542719034/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:56:22,938 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747382.68-26638542719034/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:56:23,754 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747382.68-26638542719034/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:23,768 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 20:56:23,808 p=23682 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 20:56:23,808 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 20:56:23,825 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:23,825 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:23,834 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747383.82-36059890455967 `" && echo ansible-tmp-1578747383.82-36059890455967="` echo /root/.ansible/tmp/ansible-tmp-1578747383.82-36059890455967 `" ) && sleep 0'
2020-01-11 20:56:24,057 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:56:24,057 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmp2Avxqw TO /root/.ansible/tmp/ansible-tmp-1578747383.82-36059890455967/AnsiballZ_stat.py
2020-01-11 20:56:24,058 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747383.82-36059890455967/ /root/.ansible/tmp/ansible-tmp-1578747383.82-36059890455967/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:24,068 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747383.82-36059890455967/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:24,177 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747383.82-36059890455967/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:24,194 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:56:24,233 p=23682 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:56:24,233 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 20:56:24,252 p=23682 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:56:24,293 p=23682 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 20:56:24,293 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 20:56:24,310 p=23682 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:56:24,350 p=23682 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 20:56:24,350 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 20:56:24,366 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:24,366 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:24,375 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747384.37-158383709470601 `" && echo ansible-tmp-1578747384.37-158383709470601="` echo /root/.ansible/tmp/ansible-tmp-1578747384.37-158383709470601 `" ) && sleep 0'
2020-01-11 20:56:24,387 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:56:24,388 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpl0WdKn TO /root/.ansible/tmp/ansible-tmp-1578747384.37-158383709470601/AnsiballZ_stat.py
2020-01-11 20:56:24,389 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747384.37-158383709470601/ /root/.ansible/tmp/ansible-tmp-1578747384.37-158383709470601/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:24,398 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747384.37-158383709470601/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:24,504 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747384.37-158383709470601/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:24,522 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:56:24,562 p=23682 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:56:24,563 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 20:56:24,580 p=23682 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:56:24,620 p=23682 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 20:56:24,620 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 20:56:24,637 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:24,638 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:24,646 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747384.64-186895599520979 `" && echo ansible-tmp-1578747384.64-186895599520979="` echo /root/.ansible/tmp/ansible-tmp-1578747384.64-186895599520979 `" ) && sleep 0'
2020-01-11 20:56:24,658 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:56:24,659 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpl9sZyx TO /root/.ansible/tmp/ansible-tmp-1578747384.64-186895599520979/AnsiballZ_stat.py
2020-01-11 20:56:24,660 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747384.64-186895599520979/ /root/.ansible/tmp/ansible-tmp-1578747384.64-186895599520979/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:24,669 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747384.64-186895599520979/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:24,778 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747384.64-186895599520979/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:24,795 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:56:24,834 p=23682 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 20:56:24,834 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 20:56:24,851 p=23682 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:56:24,892 p=23682 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 20:56:24,892 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 20:56:24,908 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:24,909 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:24,918 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747384.91-244018468365626 `" && echo ansible-tmp-1578747384.91-244018468365626="` echo /root/.ansible/tmp/ansible-tmp-1578747384.91-244018468365626 `" ) && sleep 0'
2020-01-11 20:56:24,930 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:56:24,931 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmp8UNwAR TO /root/.ansible/tmp/ansible-tmp-1578747384.91-244018468365626/AnsiballZ_stat.py
2020-01-11 20:56:24,932 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747384.91-244018468365626/ /root/.ansible/tmp/ansible-tmp-1578747384.91-244018468365626/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:24,941 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747384.91-244018468365626/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:56:25,051 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747384.91-244018468365626/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:25,066 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:56:25,106 p=23682 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 20:56:25,106 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 20:56:25,123 p=23682 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:56:25,164 p=23682 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 20:56:25,164 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:56:25,180 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:25,181 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:25,190 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747385.18-161582229985676 `" && echo ansible-tmp-1578747385.18-161582229985676="` echo /root/.ansible/tmp/ansible-tmp-1578747385.18-161582229985676 `" ) && sleep 0'
2020-01-11 20:56:25,434 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:56:25,434 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpymSudy TO /root/.ansible/tmp/ansible-tmp-1578747385.18-161582229985676/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:56:25,435 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747385.18-161582229985676/ /root/.ansible/tmp/ansible-tmp-1578747385.18-161582229985676/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:56:25,444 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747385.18-161582229985676/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:56:26,738 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747385.18-161582229985676/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:26,753 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:56:26,793 p=23682 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 20:56:26,793 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 20:56:26,811 p=23682 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 20:56:26,850 p=23682 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 20:56:26,850 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 20:56:26,867 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:26,867 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:26,876 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747386.87-270186980964675 `" && echo ansible-tmp-1578747386.87-270186980964675="` echo /root/.ansible/tmp/ansible-tmp-1578747386.87-270186980964675 `" ) && sleep 0'
2020-01-11 20:56:27,114 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:56:27,114 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpsdYXB6 TO /root/.ansible/tmp/ansible-tmp-1578747386.87-270186980964675/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:56:27,115 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747386.87-270186980964675/ /root/.ansible/tmp/ansible-tmp-1578747386.87-270186980964675/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:56:27,125 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747386.87-270186980964675/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:56:27,844 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747386.87-270186980964675/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:27,857 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:56:27,897 p=23682 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 20:56:27,897 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 20:56:27,916 p=23682 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 20:56:27,956 p=23682 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 20:56:27,956 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 20:56:27,973 p=23682 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:56:28,013 p=23682 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 20:56:28,013 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 20:56:28,092 p=23682 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 20:56:28,139 p=23682 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 20:56:28,139 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 20:56:28,157 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:28,157 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:28,166 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747388.16-239789289428006 `" && echo ansible-tmp-1578747388.16-239789289428006="` echo /root/.ansible/tmp/ansible-tmp-1578747388.16-239789289428006 `" ) && sleep 0'
2020-01-11 20:56:28,400 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 20:56:28,400 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpxyZMcd TO /root/.ansible/tmp/ansible-tmp-1578747388.16-239789289428006/AnsiballZ_ec2_group_facts.py
2020-01-11 20:56:28,401 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747388.16-239789289428006/ /root/.ansible/tmp/ansible-tmp-1578747388.16-239789289428006/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 20:56:28,411 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747388.16-239789289428006/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 20:56:29,257 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747388.16-239789289428006/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:29,273 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:56:29,312 p=23682 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 20:56:29,312 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 20:56:29,342 p=23682 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 20:56:29,382 p=23682 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 20:56:29,382 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 20:56:29,400 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:29,400 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:29,409 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747389.4-19131721575448 `" && echo ansible-tmp-1578747389.4-19131721575448="` echo /root/.ansible/tmp/ansible-tmp-1578747389.4-19131721575448 `" ) && sleep 0'
2020-01-11 20:56:29,422 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 20:56:29,422 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpPZGBrB TO /root/.ansible/tmp/ansible-tmp-1578747389.4-19131721575448/AnsiballZ_ec2_group_facts.py
2020-01-11 20:56:29,423 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747389.4-19131721575448/ /root/.ansible/tmp/ansible-tmp-1578747389.4-19131721575448/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 20:56:29,433 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747389.4-19131721575448/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 20:56:30,237 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747389.4-19131721575448/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:30,251 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agnet-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": []
}
2020-01-11 20:56:30,291 p=23682 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 20:56:30,292 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 20:56:30,347 p=23682 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 20:56:30,347 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 20:56:30,365 p=23682 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:56:30,365 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:56:30,374 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747390.36-21370514014384 `" && echo ansible-tmp-1578747390.36-21370514014384="` echo /root/.ansible/tmp/ansible-tmp-1578747390.36-21370514014384 `" ) && sleep 0'
2020-01-11 20:56:30,387 p=23682 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 20:56:30,388 p=23682 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-23682hXXKNq/tmpuUcTL5 TO /root/.ansible/tmp/ansible-tmp-1578747390.36-21370514014384/AnsiballZ_ec2_group_facts.py
2020-01-11 20:56:30,389 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747390.36-21370514014384/ /root/.ansible/tmp/ansible-tmp-1578747390.36-21370514014384/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 20:56:30,398 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747390.36-21370514014384/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 20:56:31,220 p=23682 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747390.36-21370514014384/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:56:31,233 p=23682 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager-2375"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": []
}
2020-01-11 20:56:31,273 p=23682 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 20:56:31,273 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 20:56:31,327 p=23682 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 20:56:31,327 p=23682 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 20:56:31,341 p=23682 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "'sg_all' is undefined"
}
2020-01-11 20:56:31,343 p=23682 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:56:31,343 p=23682 u=root |  localhost                  : ok=15   changed=0    unreachable=0    failed=1    skipped=8    rescued=0    ignored=0   
2020-01-11 20:57:27,384 p=24037 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 20:57:27,384 p=24037 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 20:57:27,392 p=24037 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:57:27,392 p=24037 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:57:27,393 p=24037 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 20:57:27,396 p=24037 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 20:57:27,398 p=24037 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 20:57:27,640 p=24037 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:57:27,792 p=24037 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:57:27,800 p=24037 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:57:27,809 p=24037 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:57:27,816 p=24037 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 20:57:27,825 p=24037 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 20:57:27,885 p=24037 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 20:57:27,885 p=24037 u=root |  1 plays in 03.ec2.yml
2020-01-11 20:57:27,914 p=24037 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 20:57:27,940 p=24037 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 20:57:27,941 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 20:57:27,952 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:27,952 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:27,961 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747447.95-108366769141329 `" && echo ansible-tmp-1578747447.95-108366769141329="` echo /root/.ansible/tmp/ansible-tmp-1578747447.95-108366769141329 `" ) && sleep 0'
2020-01-11 20:57:28,343 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 20:57:28,343 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpJDlw7l TO /root/.ansible/tmp/ansible-tmp-1578747447.95-108366769141329/AnsiballZ_setup.py
2020-01-11 20:57:28,344 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747447.95-108366769141329/ /root/.ansible/tmp/ansible-tmp-1578747447.95-108366769141329/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:57:28,353 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747447.95-108366769141329/AnsiballZ_setup.py && sleep 0'
2020-01-11 20:57:28,979 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747447.95-108366769141329/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:29,050 p=24037 u=root |  ok: [localhost]
2020-01-11 20:57:29,051 p=24037 u=root |  META: ran handlers
2020-01-11 20:57:29,091 p=24037 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 20:57:29,091 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 20:57:29,107 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:29,107 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:29,115 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747449.11-74954034949173 `" && echo ansible-tmp-1578747449.11-74954034949173="` echo /root/.ansible/tmp/ansible-tmp-1578747449.11-74954034949173 `" ) && sleep 0'
2020-01-11 20:57:29,355 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 20:57:29,356 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpCJxH2t TO /root/.ansible/tmp/ansible-tmp-1578747449.11-74954034949173/AnsiballZ_ec2_key.py
2020-01-11 20:57:29,356 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747449.11-74954034949173/ /root/.ansible/tmp/ansible-tmp-1578747449.11-74954034949173/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:57:29,365 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747449.11-74954034949173/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:57:30,312 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747449.11-74954034949173/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:30,324 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 20:57:30,364 p=24037 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 20:57:30,364 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 20:57:30,380 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:30,381 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:30,389 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747450.38-257023222201808 `" && echo ansible-tmp-1578747450.38-257023222201808="` echo /root/.ansible/tmp/ansible-tmp-1578747450.38-257023222201808 `" ) && sleep 0'
2020-01-11 20:57:30,600 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:30,600 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpOqr730 TO /root/.ansible/tmp/ansible-tmp-1578747450.38-257023222201808/AnsiballZ_stat.py
2020-01-11 20:57:30,601 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747450.38-257023222201808/ /root/.ansible/tmp/ansible-tmp-1578747450.38-257023222201808/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:30,610 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747450.38-257023222201808/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:30,713 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747450.38-257023222201808/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:30,730 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:30,769 p=24037 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:57:30,769 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 20:57:30,786 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:30,827 p=24037 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 20:57:30,827 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 20:57:30,846 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:30,887 p=24037 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 20:57:30,888 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 20:57:30,903 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:30,903 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:30,911 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747450.9-26975083030020 `" && echo ansible-tmp-1578747450.9-26975083030020="` echo /root/.ansible/tmp/ansible-tmp-1578747450.9-26975083030020 `" ) && sleep 0'
2020-01-11 20:57:30,923 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:30,923 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpfzLfWP TO /root/.ansible/tmp/ansible-tmp-1578747450.9-26975083030020/AnsiballZ_stat.py
2020-01-11 20:57:30,924 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747450.9-26975083030020/ /root/.ansible/tmp/ansible-tmp-1578747450.9-26975083030020/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:30,932 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747450.9-26975083030020/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:31,035 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747450.9-26975083030020/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:31,050 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:31,090 p=24037 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:57:31,090 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 20:57:31,106 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:31,146 p=24037 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 20:57:31,146 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 20:57:31,163 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:31,163 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:31,171 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747451.16-251913418195559 `" && echo ansible-tmp-1578747451.16-251913418195559="` echo /root/.ansible/tmp/ansible-tmp-1578747451.16-251913418195559 `" ) && sleep 0'
2020-01-11 20:57:31,183 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:31,183 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpaVGhwa TO /root/.ansible/tmp/ansible-tmp-1578747451.16-251913418195559/AnsiballZ_stat.py
2020-01-11 20:57:31,184 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747451.16-251913418195559/ /root/.ansible/tmp/ansible-tmp-1578747451.16-251913418195559/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:31,192 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747451.16-251913418195559/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:31,299 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747451.16-251913418195559/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:31,315 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:31,354 p=24037 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 20:57:31,354 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 20:57:31,371 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:31,411 p=24037 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 20:57:31,411 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 20:57:31,427 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:31,427 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:31,436 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747451.43-275848565344683 `" && echo ansible-tmp-1578747451.43-275848565344683="` echo /root/.ansible/tmp/ansible-tmp-1578747451.43-275848565344683 `" ) && sleep 0'
2020-01-11 20:57:31,448 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:31,449 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpaDBD7G TO /root/.ansible/tmp/ansible-tmp-1578747451.43-275848565344683/AnsiballZ_stat.py
2020-01-11 20:57:31,449 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747451.43-275848565344683/ /root/.ansible/tmp/ansible-tmp-1578747451.43-275848565344683/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:31,459 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747451.43-275848565344683/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:31,565 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747451.43-275848565344683/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:31,580 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:31,620 p=24037 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 20:57:31,620 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 20:57:31,637 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:31,677 p=24037 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 20:57:31,677 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:57:31,694 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:31,694 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:31,702 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747451.69-60790940236784 `" && echo ansible-tmp-1578747451.69-60790940236784="` echo /root/.ansible/tmp/ansible-tmp-1578747451.69-60790940236784 `" ) && sleep 0'
2020-01-11 20:57:31,943 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:57:31,943 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpjHkYWh TO /root/.ansible/tmp/ansible-tmp-1578747451.69-60790940236784/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:57:31,944 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747451.69-60790940236784/ /root/.ansible/tmp/ansible-tmp-1578747451.69-60790940236784/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:57:31,953 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747451.69-60790940236784/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:57:33,203 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747451.69-60790940236784/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:33,218 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:57:33,257 p=24037 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 20:57:33,258 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 20:57:33,276 p=24037 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 20:57:33,315 p=24037 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 20:57:33,315 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 20:57:33,332 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:33,332 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:33,340 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747453.33-51969614366610 `" && echo ansible-tmp-1578747453.33-51969614366610="` echo /root/.ansible/tmp/ansible-tmp-1578747453.33-51969614366610 `" ) && sleep 0'
2020-01-11 20:57:33,572 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:57:33,573 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpj3ZRMU TO /root/.ansible/tmp/ansible-tmp-1578747453.33-51969614366610/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:57:33,574 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747453.33-51969614366610/ /root/.ansible/tmp/ansible-tmp-1578747453.33-51969614366610/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:57:33,583 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747453.33-51969614366610/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:57:34,252 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747453.33-51969614366610/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:34,265 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:57:34,305 p=24037 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 20:57:34,305 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 20:57:34,323 p=24037 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 20:57:34,363 p=24037 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 20:57:34,363 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 20:57:34,379 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:34,380 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:34,388 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747454.38-186414529391000 `" && echo ansible-tmp-1578747454.38-186414529391000="` echo /root/.ansible/tmp/ansible-tmp-1578747454.38-186414529391000 `" ) && sleep 0'
2020-01-11 20:57:34,399 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 20:57:34,400 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmp36PVa5 TO /root/.ansible/tmp/ansible-tmp-1578747454.38-186414529391000/AnsiballZ_ec2_key.py
2020-01-11 20:57:34,401 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747454.38-186414529391000/ /root/.ansible/tmp/ansible-tmp-1578747454.38-186414529391000/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:57:34,409 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747454.38-186414529391000/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:57:35,197 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747454.38-186414529391000/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:35,211 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 20:57:35,252 p=24037 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 20:57:35,252 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 20:57:35,267 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:35,267 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:35,275 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747455.27-200403624823776 `" && echo ansible-tmp-1578747455.27-200403624823776="` echo /root/.ansible/tmp/ansible-tmp-1578747455.27-200403624823776 `" ) && sleep 0'
2020-01-11 20:57:35,287 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:35,287 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpdEXKO5 TO /root/.ansible/tmp/ansible-tmp-1578747455.27-200403624823776/AnsiballZ_stat.py
2020-01-11 20:57:35,288 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747455.27-200403624823776/ /root/.ansible/tmp/ansible-tmp-1578747455.27-200403624823776/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:35,296 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747455.27-200403624823776/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:35,399 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747455.27-200403624823776/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:35,414 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:35,453 p=24037 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:57:35,453 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 20:57:35,470 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:35,510 p=24037 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 20:57:35,510 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 20:57:35,526 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:35,566 p=24037 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 20:57:35,566 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 20:57:35,587 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:35,588 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:35,597 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747455.59-15207910460856 `" && echo ansible-tmp-1578747455.59-15207910460856="` echo /root/.ansible/tmp/ansible-tmp-1578747455.59-15207910460856 `" ) && sleep 0'
2020-01-11 20:57:35,609 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:35,609 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpqf_vGT TO /root/.ansible/tmp/ansible-tmp-1578747455.59-15207910460856/AnsiballZ_stat.py
2020-01-11 20:57:35,610 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747455.59-15207910460856/ /root/.ansible/tmp/ansible-tmp-1578747455.59-15207910460856/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:35,619 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747455.59-15207910460856/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:35,723 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747455.59-15207910460856/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:35,738 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:35,781 p=24037 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:57:35,781 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 20:57:35,799 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:35,839 p=24037 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 20:57:35,839 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 20:57:35,854 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:35,854 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:35,863 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747455.85-121263841487479 `" && echo ansible-tmp-1578747455.85-121263841487479="` echo /root/.ansible/tmp/ansible-tmp-1578747455.85-121263841487479 `" ) && sleep 0'
2020-01-11 20:57:35,874 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:35,874 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpWezDg8 TO /root/.ansible/tmp/ansible-tmp-1578747455.85-121263841487479/AnsiballZ_stat.py
2020-01-11 20:57:35,875 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747455.85-121263841487479/ /root/.ansible/tmp/ansible-tmp-1578747455.85-121263841487479/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:35,884 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747455.85-121263841487479/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:35,992 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747455.85-121263841487479/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:36,010 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:36,051 p=24037 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 20:57:36,051 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 20:57:36,067 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:36,107 p=24037 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 20:57:36,107 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 20:57:36,123 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:36,124 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:36,132 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747456.12-196597358083015 `" && echo ansible-tmp-1578747456.12-196597358083015="` echo /root/.ansible/tmp/ansible-tmp-1578747456.12-196597358083015 `" ) && sleep 0'
2020-01-11 20:57:36,144 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:36,144 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmp3WgV5p TO /root/.ansible/tmp/ansible-tmp-1578747456.12-196597358083015/AnsiballZ_stat.py
2020-01-11 20:57:36,145 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747456.12-196597358083015/ /root/.ansible/tmp/ansible-tmp-1578747456.12-196597358083015/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:36,153 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747456.12-196597358083015/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:36,259 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747456.12-196597358083015/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:36,274 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:36,314 p=24037 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 20:57:36,315 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 20:57:36,332 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:36,372 p=24037 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 20:57:36,372 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:57:36,388 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:36,389 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:36,397 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747456.39-2783493969381 `" && echo ansible-tmp-1578747456.39-2783493969381="` echo /root/.ansible/tmp/ansible-tmp-1578747456.39-2783493969381 `" ) && sleep 0'
2020-01-11 20:57:36,408 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:57:36,409 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmp3_ORwm TO /root/.ansible/tmp/ansible-tmp-1578747456.39-2783493969381/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:57:36,410 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747456.39-2783493969381/ /root/.ansible/tmp/ansible-tmp-1578747456.39-2783493969381/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:57:36,417 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747456.39-2783493969381/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:57:37,618 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747456.39-2783493969381/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:37,633 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:57:37,672 p=24037 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 20:57:37,673 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 20:57:37,689 p=24037 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 20:57:37,729 p=24037 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 20:57:37,729 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 20:57:37,745 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:37,746 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:37,754 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747457.75-215421688048224 `" && echo ansible-tmp-1578747457.75-215421688048224="` echo /root/.ansible/tmp/ansible-tmp-1578747457.75-215421688048224 `" ) && sleep 0'
2020-01-11 20:57:37,765 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:57:37,766 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpjbIEam TO /root/.ansible/tmp/ansible-tmp-1578747457.75-215421688048224/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:57:37,767 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747457.75-215421688048224/ /root/.ansible/tmp/ansible-tmp-1578747457.75-215421688048224/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:57:37,775 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747457.75-215421688048224/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:57:38,443 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747457.75-215421688048224/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:38,456 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:57:38,494 p=24037 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 20:57:38,495 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 20:57:38,513 p=24037 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 20:57:38,553 p=24037 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 20:57:38,553 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 20:57:38,570 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:38,570 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:38,579 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747458.57-57319729891676 `" && echo ansible-tmp-1578747458.57-57319729891676="` echo /root/.ansible/tmp/ansible-tmp-1578747458.57-57319729891676 `" ) && sleep 0'
2020-01-11 20:57:38,591 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 20:57:38,592 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpvK6Gea TO /root/.ansible/tmp/ansible-tmp-1578747458.57-57319729891676/AnsiballZ_ec2_key.py
2020-01-11 20:57:38,592 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747458.57-57319729891676/ /root/.ansible/tmp/ansible-tmp-1578747458.57-57319729891676/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:57:38,601 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747458.57-57319729891676/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 20:57:39,382 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747458.57-57319729891676/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:39,395 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 20:57:39,435 p=24037 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 20:57:39,436 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 20:57:39,451 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:39,451 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:39,460 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747459.45-158440034337408 `" && echo ansible-tmp-1578747459.45-158440034337408="` echo /root/.ansible/tmp/ansible-tmp-1578747459.45-158440034337408 `" ) && sleep 0'
2020-01-11 20:57:39,471 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:39,472 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpbWmwaN TO /root/.ansible/tmp/ansible-tmp-1578747459.45-158440034337408/AnsiballZ_stat.py
2020-01-11 20:57:39,472 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747459.45-158440034337408/ /root/.ansible/tmp/ansible-tmp-1578747459.45-158440034337408/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:39,481 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747459.45-158440034337408/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:39,583 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747459.45-158440034337408/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:39,599 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:39,639 p=24037 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:57:39,639 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 20:57:39,656 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:39,695 p=24037 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 20:57:39,696 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 20:57:39,713 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:39,753 p=24037 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 20:57:39,753 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 20:57:39,769 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:39,769 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:39,778 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747459.77-131800585513185 `" && echo ansible-tmp-1578747459.77-131800585513185="` echo /root/.ansible/tmp/ansible-tmp-1578747459.77-131800585513185 `" ) && sleep 0'
2020-01-11 20:57:39,790 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:39,791 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmp3YwMdX TO /root/.ansible/tmp/ansible-tmp-1578747459.77-131800585513185/AnsiballZ_stat.py
2020-01-11 20:57:39,792 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747459.77-131800585513185/ /root/.ansible/tmp/ansible-tmp-1578747459.77-131800585513185/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:39,800 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747459.77-131800585513185/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:39,904 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747459.77-131800585513185/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:39,919 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:39,959 p=24037 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 20:57:39,959 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 20:57:39,981 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:40,025 p=24037 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 20:57:40,025 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 20:57:40,041 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:40,041 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:40,050 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747460.04-13737116929418 `" && echo ansible-tmp-1578747460.04-13737116929418="` echo /root/.ansible/tmp/ansible-tmp-1578747460.04-13737116929418 `" ) && sleep 0'
2020-01-11 20:57:40,061 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:40,062 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpWycah8 TO /root/.ansible/tmp/ansible-tmp-1578747460.04-13737116929418/AnsiballZ_stat.py
2020-01-11 20:57:40,063 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747460.04-13737116929418/ /root/.ansible/tmp/ansible-tmp-1578747460.04-13737116929418/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:40,072 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747460.04-13737116929418/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:40,180 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747460.04-13737116929418/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:40,196 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:40,235 p=24037 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 20:57:40,236 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 20:57:40,254 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:40,294 p=24037 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 20:57:40,294 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 20:57:40,310 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:40,310 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:40,319 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747460.31-258794746163197 `" && echo ansible-tmp-1578747460.31-258794746163197="` echo /root/.ansible/tmp/ansible-tmp-1578747460.31-258794746163197 `" ) && sleep 0'
2020-01-11 20:57:40,330 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 20:57:40,330 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpSlcu0V TO /root/.ansible/tmp/ansible-tmp-1578747460.31-258794746163197/AnsiballZ_stat.py
2020-01-11 20:57:40,331 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747460.31-258794746163197/ /root/.ansible/tmp/ansible-tmp-1578747460.31-258794746163197/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:40,340 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747460.31-258794746163197/AnsiballZ_stat.py && sleep 0'
2020-01-11 20:57:40,446 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747460.31-258794746163197/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:40,462 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 20:57:40,502 p=24037 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 20:57:40,502 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 20:57:40,519 p=24037 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 20:57:40,559 p=24037 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 20:57:40,559 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 20:57:40,575 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:40,576 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:40,584 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747460.58-208235942040722 `" && echo ansible-tmp-1578747460.58-208235942040722="` echo /root/.ansible/tmp/ansible-tmp-1578747460.58-208235942040722 `" ) && sleep 0'
2020-01-11 20:57:40,596 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 20:57:40,597 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpKnP5Vz TO /root/.ansible/tmp/ansible-tmp-1578747460.58-208235942040722/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 20:57:40,598 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747460.58-208235942040722/ /root/.ansible/tmp/ansible-tmp-1578747460.58-208235942040722/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:57:40,606 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747460.58-208235942040722/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 20:57:41,904 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747460.58-208235942040722/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:41,919 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 20:57:41,960 p=24037 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 20:57:41,960 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 20:57:41,979 p=24037 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 20:57:42,019 p=24037 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 20:57:42,020 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 20:57:42,037 p=24037 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 20:57:42,037 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 20:57:42,046 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747462.04-9234785738226 `" && echo ansible-tmp-1578747462.04-9234785738226="` echo /root/.ansible/tmp/ansible-tmp-1578747462.04-9234785738226 `" ) && sleep 0'
2020-01-11 20:57:42,059 p=24037 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 20:57:42,060 p=24037 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-24037zEIlr9/tmpXvrn7u TO /root/.ansible/tmp/ansible-tmp-1578747462.04-9234785738226/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 20:57:42,060 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747462.04-9234785738226/ /root/.ansible/tmp/ansible-tmp-1578747462.04-9234785738226/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:57:42,070 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747462.04-9234785738226/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 20:57:42,825 p=24037 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747462.04-9234785738226/ > /dev/null 2>&1 && sleep 0'
2020-01-11 20:57:42,839 p=24037 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 20:57:42,879 p=24037 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 20:57:42,880 p=24037 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 20:57:42,899 p=24037 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 20:57:42,900 p=24037 u=root |  META: ran handlers
2020-01-11 20:57:42,901 p=24037 u=root |  META: ran handlers
2020-01-11 20:57:42,902 p=24037 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 20:57:42,902 p=24037 u=root |  localhost                  : ok=28   changed=0    unreachable=0    failed=0    skipped=15   rescued=0    ignored=0   
2020-01-11 21:04:55,621 p=24714 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:04:55,621 p=24714 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:04:55,629 p=24714 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:04:55,629 p=24714 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:04:55,630 p=24714 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:04:55,633 p=24714 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:04:55,635 p=24714 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:04:55,885 p=24714 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:04:56,041 p=24714 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:04:56,050 p=24714 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:04:56,059 p=24714 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:04:56,069 p=24714 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:04:56,078 p=24714 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:04:56,140 p=24714 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:04:56,140 p=24714 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:04:56,169 p=24714 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:04:56,197 p=24714 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:04:56,198 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:04:56,209 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:04:56,209 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:04:56,218 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747896.21-157257357683165 `" && echo ansible-tmp-1578747896.21-157257357683165="` echo /root/.ansible/tmp/ansible-tmp-1578747896.21-157257357683165 `" ) && sleep 0'
2020-01-11 21:04:56,603 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:04:56,604 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpF5cRxm TO /root/.ansible/tmp/ansible-tmp-1578747896.21-157257357683165/AnsiballZ_setup.py
2020-01-11 21:04:56,605 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747896.21-157257357683165/ /root/.ansible/tmp/ansible-tmp-1578747896.21-157257357683165/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:04:56,614 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747896.21-157257357683165/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:04:57,077 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747896.21-157257357683165/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:04:57,148 p=24714 u=root |  ok: [localhost]
2020-01-11 21:04:57,149 p=24714 u=root |  META: ran handlers
2020-01-11 21:04:57,189 p=24714 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:04:57,190 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:04:57,206 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:04:57,206 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:04:57,215 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747897.21-218566820752085 `" && echo ansible-tmp-1578747897.21-218566820752085="` echo /root/.ansible/tmp/ansible-tmp-1578747897.21-218566820752085 `" ) && sleep 0'
2020-01-11 21:04:57,453 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:04:57,453 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpU76LIP TO /root/.ansible/tmp/ansible-tmp-1578747897.21-218566820752085/AnsiballZ_ec2_key.py
2020-01-11 21:04:57,454 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747897.21-218566820752085/ /root/.ansible/tmp/ansible-tmp-1578747897.21-218566820752085/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:04:57,464 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747897.21-218566820752085/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:04:58,270 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747897.21-218566820752085/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:04:58,284 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:04:58,323 p=24714 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:04:58,323 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:04:58,340 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:04:58,340 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:04:58,348 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747898.34-32732554029899 `" && echo ansible-tmp-1578747898.34-32732554029899="` echo /root/.ansible/tmp/ansible-tmp-1578747898.34-32732554029899 `" ) && sleep 0'
2020-01-11 21:04:58,562 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:04:58,562 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpA9p_Av TO /root/.ansible/tmp/ansible-tmp-1578747898.34-32732554029899/AnsiballZ_stat.py
2020-01-11 21:04:58,563 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747898.34-32732554029899/ /root/.ansible/tmp/ansible-tmp-1578747898.34-32732554029899/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:58,572 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747898.34-32732554029899/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:58,677 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747898.34-32732554029899/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:04:58,693 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:04:58,732 p=24714 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:04:58,732 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:04:58,752 p=24714 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:04:58,793 p=24714 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:04:58,794 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:04:58,810 p=24714 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:04:58,849 p=24714 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:04:58,849 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:04:58,864 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:04:58,865 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:04:58,873 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747898.86-77090828325606 `" && echo ansible-tmp-1578747898.86-77090828325606="` echo /root/.ansible/tmp/ansible-tmp-1578747898.86-77090828325606 `" ) && sleep 0'
2020-01-11 21:04:58,885 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:04:58,885 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmp8hULFR TO /root/.ansible/tmp/ansible-tmp-1578747898.86-77090828325606/AnsiballZ_stat.py
2020-01-11 21:04:58,886 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747898.86-77090828325606/ /root/.ansible/tmp/ansible-tmp-1578747898.86-77090828325606/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:58,895 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747898.86-77090828325606/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:58,997 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747898.86-77090828325606/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:04:59,012 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:04:59,052 p=24714 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:04:59,052 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:04:59,069 p=24714 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:04:59,108 p=24714 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:04:59,108 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:04:59,124 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:04:59,125 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:04:59,133 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747899.12-12276343901711 `" && echo ansible-tmp-1578747899.12-12276343901711="` echo /root/.ansible/tmp/ansible-tmp-1578747899.12-12276343901711 `" ) && sleep 0'
2020-01-11 21:04:59,144 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:04:59,144 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpBCDrWU TO /root/.ansible/tmp/ansible-tmp-1578747899.12-12276343901711/AnsiballZ_stat.py
2020-01-11 21:04:59,145 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747899.12-12276343901711/ /root/.ansible/tmp/ansible-tmp-1578747899.12-12276343901711/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:59,153 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747899.12-12276343901711/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:59,259 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747899.12-12276343901711/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:04:59,275 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:04:59,314 p=24714 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:04:59,314 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:04:59,331 p=24714 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:04:59,371 p=24714 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:04:59,371 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:04:59,387 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:04:59,387 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:04:59,396 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747899.39-217792755001469 `" && echo ansible-tmp-1578747899.39-217792755001469="` echo /root/.ansible/tmp/ansible-tmp-1578747899.39-217792755001469 `" ) && sleep 0'
2020-01-11 21:04:59,407 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:04:59,408 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpx_Iwjq TO /root/.ansible/tmp/ansible-tmp-1578747899.39-217792755001469/AnsiballZ_stat.py
2020-01-11 21:04:59,408 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747899.39-217792755001469/ /root/.ansible/tmp/ansible-tmp-1578747899.39-217792755001469/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:59,416 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747899.39-217792755001469/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:04:59,525 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747899.39-217792755001469/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:04:59,541 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:04:59,580 p=24714 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:04:59,581 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:04:59,597 p=24714 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:04:59,637 p=24714 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:04:59,637 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:04:59,653 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:04:59,654 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:04:59,662 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747899.65-66195078160646 `" && echo ansible-tmp-1578747899.65-66195078160646="` echo /root/.ansible/tmp/ansible-tmp-1578747899.65-66195078160646 `" ) && sleep 0'
2020-01-11 21:04:59,906 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:04:59,906 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmp5dj7lt TO /root/.ansible/tmp/ansible-tmp-1578747899.65-66195078160646/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:04:59,907 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747899.65-66195078160646/ /root/.ansible/tmp/ansible-tmp-1578747899.65-66195078160646/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:04:59,917 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747899.65-66195078160646/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:05:01,226 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747899.65-66195078160646/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:05:01,241 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:05:01,281 p=24714 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:05:01,281 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:05:01,299 p=24714 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:05:01,338 p=24714 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:05:01,338 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:05:01,354 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:05:01,355 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:05:01,363 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747901.35-162555990516268 `" && echo ansible-tmp-1578747901.35-162555990516268="` echo /root/.ansible/tmp/ansible-tmp-1578747901.35-162555990516268 `" ) && sleep 0'
2020-01-11 21:05:01,612 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:05:01,613 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmplo1hV8 TO /root/.ansible/tmp/ansible-tmp-1578747901.35-162555990516268/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:05:01,614 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747901.35-162555990516268/ /root/.ansible/tmp/ansible-tmp-1578747901.35-162555990516268/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:05:01,624 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747901.35-162555990516268/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:05:02,365 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747901.35-162555990516268/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:05:02,378 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:05:02,417 p=24714 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:05:02,417 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:05:02,436 p=24714 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:05:02,475 p=24714 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:05:02,476 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:05:02,492 p=24714 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:05:02,532 p=24714 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:05:02,532 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:05:02,609 p=24714 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:05:02,656 p=24714 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:05:02,656 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:05:02,674 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:05:02,674 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:05:02,683 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747902.67-61469482381341 `" && echo ansible-tmp-1578747902.67-61469482381341="` echo /root/.ansible/tmp/ansible-tmp-1578747902.67-61469482381341 `" ) && sleep 0'
2020-01-11 21:05:02,919 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:05:02,920 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpMxypvK TO /root/.ansible/tmp/ansible-tmp-1578747902.67-61469482381341/AnsiballZ_ec2_group_facts.py
2020-01-11 21:05:02,920 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747902.67-61469482381341/ /root/.ansible/tmp/ansible-tmp-1578747902.67-61469482381341/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:05:02,930 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747902.67-61469482381341/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:05:03,779 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747902.67-61469482381341/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:05:03,794 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:05:03,833 p=24714 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:05:03,833 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:05:03,863 p=24714 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:05:03,904 p=24714 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:05:03,904 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:05:03,922 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:05:03,922 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:05:03,931 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747903.92-95101675996682 `" && echo ansible-tmp-1578747903.92-95101675996682="` echo /root/.ansible/tmp/ansible-tmp-1578747903.92-95101675996682 `" ) && sleep 0'
2020-01-11 21:05:03,942 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:05:03,943 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpS9uvPb TO /root/.ansible/tmp/ansible-tmp-1578747903.92-95101675996682/AnsiballZ_ec2_group_facts.py
2020-01-11 21:05:03,944 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747903.92-95101675996682/ /root/.ansible/tmp/ansible-tmp-1578747903.92-95101675996682/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:05:03,952 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747903.92-95101675996682/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:05:04,749 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747903.92-95101675996682/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:05:04,762 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agnet-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": []
}
2020-01-11 21:05:04,802 p=24714 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:05:04,802 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:05:04,856 p=24714 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:05:04,856 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:05:04,873 p=24714 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:05:04,873 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:05:04,882 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578747904.87-34761381055174 `" && echo ansible-tmp-1578747904.87-34761381055174="` echo /root/.ansible/tmp/ansible-tmp-1578747904.87-34761381055174 `" ) && sleep 0'
2020-01-11 21:05:04,894 p=24714 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:05:04,895 p=24714 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-247145HnIiF/tmpuZDaqD TO /root/.ansible/tmp/ansible-tmp-1578747904.87-34761381055174/AnsiballZ_ec2_group_facts.py
2020-01-11 21:05:04,896 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578747904.87-34761381055174/ /root/.ansible/tmp/ansible-tmp-1578747904.87-34761381055174/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:05:04,905 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578747904.87-34761381055174/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:05:05,739 p=24714 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578747904.87-34761381055174/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:05:05,752 p=24714 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager-2375"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": []
}
2020-01-11 21:05:05,792 p=24714 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:05:05,792 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:05:05,846 p=24714 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:05:05,846 p=24714 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 21:05:05,861 p=24714 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "'sg_all' is undefined"
}
2020-01-11 21:05:05,862 p=24714 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:05:05,862 p=24714 u=root |  localhost                  : ok=15   changed=0    unreachable=0    failed=1    skipped=8    rescued=0    ignored=0   
2020-01-11 21:10:57,527 p=25082 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:10:57,527 p=25082 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:10:57,535 p=25082 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:10:57,536 p=25082 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:10:57,536 p=25082 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:10:57,539 p=25082 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:10:57,541 p=25082 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:10:57,785 p=25082 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:10:57,939 p=25082 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:10:57,948 p=25082 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:10:57,958 p=25082 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:10:57,967 p=25082 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:10:57,976 p=25082 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:10:58,039 p=25082 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:10:58,040 p=25082 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:10:58,069 p=25082 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:10:58,098 p=25082 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:10:58,098 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:10:58,110 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:10:58,110 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:10:58,118 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748258.11-192304855116690 `" && echo ansible-tmp-1578748258.11-192304855116690="` echo /root/.ansible/tmp/ansible-tmp-1578748258.11-192304855116690 `" ) && sleep 0'
2020-01-11 21:10:58,508 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:10:58,509 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmph1Nylr TO /root/.ansible/tmp/ansible-tmp-1578748258.11-192304855116690/AnsiballZ_setup.py
2020-01-11 21:10:58,510 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748258.11-192304855116690/ /root/.ansible/tmp/ansible-tmp-1578748258.11-192304855116690/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:10:58,519 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748258.11-192304855116690/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:10:59,057 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748258.11-192304855116690/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:10:59,129 p=25082 u=root |  ok: [localhost]
2020-01-11 21:10:59,130 p=25082 u=root |  META: ran handlers
2020-01-11 21:10:59,171 p=25082 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:10:59,171 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:10:59,188 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:10:59,188 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:10:59,197 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748259.19-239148858805943 `" && echo ansible-tmp-1578748259.19-239148858805943="` echo /root/.ansible/tmp/ansible-tmp-1578748259.19-239148858805943 `" ) && sleep 0'
2020-01-11 21:10:59,441 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:10:59,441 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpD58erz TO /root/.ansible/tmp/ansible-tmp-1578748259.19-239148858805943/AnsiballZ_ec2_key.py
2020-01-11 21:10:59,442 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748259.19-239148858805943/ /root/.ansible/tmp/ansible-tmp-1578748259.19-239148858805943/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:10:59,452 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748259.19-239148858805943/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:11:00,430 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748259.19-239148858805943/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:00,443 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:11:00,483 p=25082 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:11:00,483 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:11:00,499 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:00,499 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:00,508 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748260.5-59158324998650 `" && echo ansible-tmp-1578748260.5-59158324998650="` echo /root/.ansible/tmp/ansible-tmp-1578748260.5-59158324998650 `" ) && sleep 0'
2020-01-11 21:11:00,725 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:11:00,726 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpz1GNEM TO /root/.ansible/tmp/ansible-tmp-1578748260.5-59158324998650/AnsiballZ_stat.py
2020-01-11 21:11:00,726 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748260.5-59158324998650/ /root/.ansible/tmp/ansible-tmp-1578748260.5-59158324998650/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:00,736 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748260.5-59158324998650/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:00,839 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748260.5-59158324998650/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:00,855 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:11:00,895 p=25082 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:11:00,895 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:11:00,915 p=25082 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:11:00,956 p=25082 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:11:00,957 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:11:00,973 p=25082 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:11:01,013 p=25082 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:11:01,014 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:11:01,030 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:01,030 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:01,039 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748261.03-236509444338919 `" && echo ansible-tmp-1578748261.03-236509444338919="` echo /root/.ansible/tmp/ansible-tmp-1578748261.03-236509444338919 `" ) && sleep 0'
2020-01-11 21:11:01,051 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:11:01,051 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpGOIgQd TO /root/.ansible/tmp/ansible-tmp-1578748261.03-236509444338919/AnsiballZ_stat.py
2020-01-11 21:11:01,052 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748261.03-236509444338919/ /root/.ansible/tmp/ansible-tmp-1578748261.03-236509444338919/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:01,061 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748261.03-236509444338919/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:01,166 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748261.03-236509444338919/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:01,182 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:11:01,223 p=25082 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:11:01,223 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:11:01,239 p=25082 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:11:01,279 p=25082 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:11:01,279 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:11:01,296 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:01,296 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:01,305 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748261.3-277038928623321 `" && echo ansible-tmp-1578748261.3-277038928623321="` echo /root/.ansible/tmp/ansible-tmp-1578748261.3-277038928623321 `" ) && sleep 0'
2020-01-11 21:11:01,318 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:11:01,318 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpVtFXlj TO /root/.ansible/tmp/ansible-tmp-1578748261.3-277038928623321/AnsiballZ_stat.py
2020-01-11 21:11:01,319 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748261.3-277038928623321/ /root/.ansible/tmp/ansible-tmp-1578748261.3-277038928623321/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:01,328 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748261.3-277038928623321/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:01,439 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748261.3-277038928623321/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:01,456 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:11:01,496 p=25082 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:11:01,496 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:11:01,513 p=25082 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:11:01,553 p=25082 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:11:01,554 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:11:01,570 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:01,570 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:01,579 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748261.57-113615495536052 `" && echo ansible-tmp-1578748261.57-113615495536052="` echo /root/.ansible/tmp/ansible-tmp-1578748261.57-113615495536052 `" ) && sleep 0'
2020-01-11 21:11:01,591 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:11:01,592 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpFbJjaT TO /root/.ansible/tmp/ansible-tmp-1578748261.57-113615495536052/AnsiballZ_stat.py
2020-01-11 21:11:01,592 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748261.57-113615495536052/ /root/.ansible/tmp/ansible-tmp-1578748261.57-113615495536052/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:01,602 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748261.57-113615495536052/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:11:01,713 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748261.57-113615495536052/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:01,729 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:11:01,769 p=25082 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:11:01,770 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:11:01,787 p=25082 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:11:01,827 p=25082 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:11:01,828 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:11:01,845 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:01,845 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:01,854 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748261.84-169102605779659 `" && echo ansible-tmp-1578748261.84-169102605779659="` echo /root/.ansible/tmp/ansible-tmp-1578748261.84-169102605779659 `" ) && sleep 0'
2020-01-11 21:11:02,102 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:11:02,102 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpLcKQyK TO /root/.ansible/tmp/ansible-tmp-1578748261.84-169102605779659/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:11:02,103 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748261.84-169102605779659/ /root/.ansible/tmp/ansible-tmp-1578748261.84-169102605779659/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:11:02,112 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748261.84-169102605779659/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:11:03,454 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748261.84-169102605779659/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:03,469 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:11:03,509 p=25082 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:11:03,509 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:11:03,527 p=25082 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:11:03,567 p=25082 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:11:03,567 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:11:03,584 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:03,585 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:03,594 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748263.58-236906959346268 `" && echo ansible-tmp-1578748263.58-236906959346268="` echo /root/.ansible/tmp/ansible-tmp-1578748263.58-236906959346268 `" ) && sleep 0'
2020-01-11 21:11:03,838 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:11:03,839 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpLat7aM TO /root/.ansible/tmp/ansible-tmp-1578748263.58-236906959346268/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:11:03,840 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748263.58-236906959346268/ /root/.ansible/tmp/ansible-tmp-1578748263.58-236906959346268/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:11:03,849 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748263.58-236906959346268/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:11:04,591 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748263.58-236906959346268/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:04,603 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:11:04,643 p=25082 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:11:04,644 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:11:04,662 p=25082 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:11:04,702 p=25082 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:11:04,702 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:11:04,719 p=25082 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:11:04,759 p=25082 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:11:04,759 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:11:04,837 p=25082 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:11:04,884 p=25082 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:11:04,884 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:11:04,902 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:04,903 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:04,912 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748264.9-236640988497232 `" && echo ansible-tmp-1578748264.9-236640988497232="` echo /root/.ansible/tmp/ansible-tmp-1578748264.9-236640988497232 `" ) && sleep 0'
2020-01-11 21:11:05,150 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:11:05,150 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpFHmKUV TO /root/.ansible/tmp/ansible-tmp-1578748264.9-236640988497232/AnsiballZ_ec2_group_facts.py
2020-01-11 21:11:05,151 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748264.9-236640988497232/ /root/.ansible/tmp/ansible-tmp-1578748264.9-236640988497232/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:11:05,160 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748264.9-236640988497232/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:11:05,994 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748264.9-236640988497232/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:06,010 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:11:06,050 p=25082 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:11:06,050 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:11:06,081 p=25082 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:11:06,122 p=25082 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:11:06,122 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:11:06,140 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:06,140 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:06,149 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748266.14-180424927626826 `" && echo ansible-tmp-1578748266.14-180424927626826="` echo /root/.ansible/tmp/ansible-tmp-1578748266.14-180424927626826 `" ) && sleep 0'
2020-01-11 21:11:06,162 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:11:06,163 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpploQsp TO /root/.ansible/tmp/ansible-tmp-1578748266.14-180424927626826/AnsiballZ_ec2_group_facts.py
2020-01-11 21:11:06,164 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748266.14-180424927626826/ /root/.ansible/tmp/ansible-tmp-1578748266.14-180424927626826/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:11:06,173 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748266.14-180424927626826/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:11:06,987 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748266.14-180424927626826/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:07,000 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agnet-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": []
}
2020-01-11 21:11:07,040 p=25082 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:11:07,040 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:11:07,095 p=25082 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:11:07,095 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:11:07,113 p=25082 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:11:07,113 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:11:07,122 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748267.11-244776144279766 `" && echo ansible-tmp-1578748267.11-244776144279766="` echo /root/.ansible/tmp/ansible-tmp-1578748267.11-244776144279766 `" ) && sleep 0'
2020-01-11 21:11:07,135 p=25082 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:11:07,135 p=25082 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-250826OaBCE/tmpORf557 TO /root/.ansible/tmp/ansible-tmp-1578748267.11-244776144279766/AnsiballZ_ec2_group_facts.py
2020-01-11 21:11:07,136 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748267.11-244776144279766/ /root/.ansible/tmp/ansible-tmp-1578748267.11-244776144279766/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:11:07,145 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748267.11-244776144279766/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:11:07,937 p=25082 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748267.11-244776144279766/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:11:07,952 p=25082 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:11:07,992 p=25082 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:11:07,992 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:11:08,021 p=25082 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:11:08,062 p=25082 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:11:08,062 p=25082 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 21:11:08,077 p=25082 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "'sg_all' is undefined"
}
2020-01-11 21:11:08,079 p=25082 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:11:08,079 p=25082 u=root |  localhost                  : ok=16   changed=0    unreachable=0    failed=1    skipped=7    rescued=0    ignored=0   
2020-01-11 21:12:16,697 p=25442 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:12:16,698 p=25442 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:12:16,706 p=25442 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:12:16,706 p=25442 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:12:16,706 p=25442 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:12:16,709 p=25442 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:12:16,711 p=25442 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:12:16,954 p=25442 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:12:17,110 p=25442 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:12:17,120 p=25442 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:12:17,129 p=25442 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:12:17,139 p=25442 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:12:17,148 p=25442 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:12:17,212 p=25442 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:12:17,212 p=25442 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:12:17,242 p=25442 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:12:17,270 p=25442 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:12:17,271 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:12:17,282 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:17,282 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:17,291 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748337.28-79915424931570 `" && echo ansible-tmp-1578748337.28-79915424931570="` echo /root/.ansible/tmp/ansible-tmp-1578748337.28-79915424931570 `" ) && sleep 0'
2020-01-11 21:12:17,676 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:12:17,677 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpJR4Iyq TO /root/.ansible/tmp/ansible-tmp-1578748337.28-79915424931570/AnsiballZ_setup.py
2020-01-11 21:12:17,678 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748337.28-79915424931570/ /root/.ansible/tmp/ansible-tmp-1578748337.28-79915424931570/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:12:17,687 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748337.28-79915424931570/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:12:18,154 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748337.28-79915424931570/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:18,224 p=25442 u=root |  ok: [localhost]
2020-01-11 21:12:18,225 p=25442 u=root |  META: ran handlers
2020-01-11 21:12:18,265 p=25442 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:12:18,265 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:12:18,281 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:18,281 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:18,290 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748338.28-172230109488479 `" && echo ansible-tmp-1578748338.28-172230109488479="` echo /root/.ansible/tmp/ansible-tmp-1578748338.28-172230109488479 `" ) && sleep 0'
2020-01-11 21:12:18,532 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:12:18,532 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpRX_QfW TO /root/.ansible/tmp/ansible-tmp-1578748338.28-172230109488479/AnsiballZ_ec2_key.py
2020-01-11 21:12:18,533 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748338.28-172230109488479/ /root/.ansible/tmp/ansible-tmp-1578748338.28-172230109488479/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:12:18,543 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748338.28-172230109488479/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:12:19,507 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748338.28-172230109488479/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:19,520 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:12:19,559 p=25442 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:12:19,560 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:12:19,576 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:19,576 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:19,585 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748339.58-124025165015240 `" && echo ansible-tmp-1578748339.58-124025165015240="` echo /root/.ansible/tmp/ansible-tmp-1578748339.58-124025165015240 `" ) && sleep 0'
2020-01-11 21:12:19,800 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:12:19,801 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpTKZO1_ TO /root/.ansible/tmp/ansible-tmp-1578748339.58-124025165015240/AnsiballZ_stat.py
2020-01-11 21:12:19,801 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748339.58-124025165015240/ /root/.ansible/tmp/ansible-tmp-1578748339.58-124025165015240/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:19,811 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748339.58-124025165015240/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:19,915 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748339.58-124025165015240/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:19,932 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:12:19,970 p=25442 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:12:19,971 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:12:19,990 p=25442 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:12:20,032 p=25442 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:12:20,032 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:12:20,048 p=25442 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:12:20,088 p=25442 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:12:20,089 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:12:20,104 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:20,104 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:20,113 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748340.1-229576177403472 `" && echo ansible-tmp-1578748340.1-229576177403472="` echo /root/.ansible/tmp/ansible-tmp-1578748340.1-229576177403472 `" ) && sleep 0'
2020-01-11 21:12:20,124 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:12:20,125 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmprsGahm TO /root/.ansible/tmp/ansible-tmp-1578748340.1-229576177403472/AnsiballZ_stat.py
2020-01-11 21:12:20,125 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748340.1-229576177403472/ /root/.ansible/tmp/ansible-tmp-1578748340.1-229576177403472/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:20,134 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748340.1-229576177403472/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:20,239 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748340.1-229576177403472/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:20,255 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:12:20,295 p=25442 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:12:20,295 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:12:20,311 p=25442 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:12:20,351 p=25442 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:12:20,351 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:12:20,368 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:20,368 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:20,377 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748340.37-264031390451921 `" && echo ansible-tmp-1578748340.37-264031390451921="` echo /root/.ansible/tmp/ansible-tmp-1578748340.37-264031390451921 `" ) && sleep 0'
2020-01-11 21:12:20,388 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:12:20,389 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpy22rzK TO /root/.ansible/tmp/ansible-tmp-1578748340.37-264031390451921/AnsiballZ_stat.py
2020-01-11 21:12:20,390 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748340.37-264031390451921/ /root/.ansible/tmp/ansible-tmp-1578748340.37-264031390451921/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:20,398 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748340.37-264031390451921/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:20,504 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748340.37-264031390451921/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:20,520 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:12:20,559 p=25442 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:12:20,559 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:12:20,577 p=25442 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:12:20,617 p=25442 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:12:20,617 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:12:20,633 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:20,633 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:20,642 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748340.63-208415487740842 `" && echo ansible-tmp-1578748340.63-208415487740842="` echo /root/.ansible/tmp/ansible-tmp-1578748340.63-208415487740842 `" ) && sleep 0'
2020-01-11 21:12:20,654 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:12:20,655 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpPRJVCb TO /root/.ansible/tmp/ansible-tmp-1578748340.63-208415487740842/AnsiballZ_stat.py
2020-01-11 21:12:20,655 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748340.63-208415487740842/ /root/.ansible/tmp/ansible-tmp-1578748340.63-208415487740842/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:20,664 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748340.63-208415487740842/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:12:20,773 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748340.63-208415487740842/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:20,788 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:12:20,828 p=25442 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:12:20,828 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:12:20,846 p=25442 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:12:20,885 p=25442 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:12:20,886 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:12:20,902 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:20,903 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:20,912 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748340.9-174505009412496 `" && echo ansible-tmp-1578748340.9-174505009412496="` echo /root/.ansible/tmp/ansible-tmp-1578748340.9-174505009412496 `" ) && sleep 0'
2020-01-11 21:12:21,156 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:12:21,157 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpr67j8q TO /root/.ansible/tmp/ansible-tmp-1578748340.9-174505009412496/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:12:21,157 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748340.9-174505009412496/ /root/.ansible/tmp/ansible-tmp-1578748340.9-174505009412496/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:12:21,167 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748340.9-174505009412496/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:12:22,395 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748340.9-174505009412496/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:22,409 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:12:22,449 p=25442 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:12:22,449 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:12:22,467 p=25442 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:12:22,506 p=25442 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:12:22,506 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:12:22,522 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:22,522 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:22,531 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748342.52-218973464107856 `" && echo ansible-tmp-1578748342.52-218973464107856="` echo /root/.ansible/tmp/ansible-tmp-1578748342.52-218973464107856 `" ) && sleep 0'
2020-01-11 21:12:22,768 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:12:22,768 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpYKirMF TO /root/.ansible/tmp/ansible-tmp-1578748342.52-218973464107856/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:12:22,769 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748342.52-218973464107856/ /root/.ansible/tmp/ansible-tmp-1578748342.52-218973464107856/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:12:22,779 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748342.52-218973464107856/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:12:23,461 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748342.52-218973464107856/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:23,473 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:12:23,513 p=25442 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:12:23,513 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:12:23,531 p=25442 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:12:23,572 p=25442 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:12:23,572 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:12:23,588 p=25442 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:12:23,628 p=25442 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:12:23,628 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:12:23,704 p=25442 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:12:23,750 p=25442 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:12:23,751 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:12:23,768 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:23,768 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:23,777 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748343.77-127718909749292 `" && echo ansible-tmp-1578748343.77-127718909749292="` echo /root/.ansible/tmp/ansible-tmp-1578748343.77-127718909749292 `" ) && sleep 0'
2020-01-11 21:12:24,010 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:12:24,010 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpsPuAt4 TO /root/.ansible/tmp/ansible-tmp-1578748343.77-127718909749292/AnsiballZ_ec2_group_facts.py
2020-01-11 21:12:24,011 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748343.77-127718909749292/ /root/.ansible/tmp/ansible-tmp-1578748343.77-127718909749292/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:12:24,020 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748343.77-127718909749292/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:12:24,804 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748343.77-127718909749292/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:24,819 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:12:24,858 p=25442 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:12:24,858 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:12:24,887 p=25442 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:12:24,928 p=25442 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:12:24,928 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:12:24,946 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:24,947 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:24,955 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748344.95-57808349628953 `" && echo ansible-tmp-1578748344.95-57808349628953="` echo /root/.ansible/tmp/ansible-tmp-1578748344.95-57808349628953 `" ) && sleep 0'
2020-01-11 21:12:24,967 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:12:24,968 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpRjE7BS TO /root/.ansible/tmp/ansible-tmp-1578748344.95-57808349628953/AnsiballZ_ec2_group_facts.py
2020-01-11 21:12:24,969 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748344.95-57808349628953/ /root/.ansible/tmp/ansible-tmp-1578748344.95-57808349628953/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:12:24,977 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748344.95-57808349628953/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:12:25,766 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748344.95-57808349628953/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:25,781 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:12:25,820 p=25442 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:12:25,820 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:12:25,848 p=25442 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:12:25,890 p=25442 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:12:25,890 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:12:25,909 p=25442 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:12:25,909 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:12:25,918 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748345.91-60891083286566 `" && echo ansible-tmp-1578748345.91-60891083286566="` echo /root/.ansible/tmp/ansible-tmp-1578748345.91-60891083286566 `" ) && sleep 0'
2020-01-11 21:12:25,930 p=25442 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:12:25,931 p=25442 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-2544225gRi3/tmpzCusNC TO /root/.ansible/tmp/ansible-tmp-1578748345.91-60891083286566/AnsiballZ_ec2_group_facts.py
2020-01-11 21:12:25,932 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748345.91-60891083286566/ /root/.ansible/tmp/ansible-tmp-1578748345.91-60891083286566/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:12:25,941 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748345.91-60891083286566/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:12:26,748 p=25442 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748345.91-60891083286566/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:12:26,763 p=25442 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:12:26,802 p=25442 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:12:26,803 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:12:26,829 p=25442 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:12:26,870 p=25442 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:12:26,870 p=25442 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 21:12:26,884 p=25442 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "'sg_all' is undefined"
}
2020-01-11 21:12:26,886 p=25442 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:12:26,887 p=25442 u=root |  localhost                  : ok=17   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:21:41,339 p=25836 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:21:41,339 p=25836 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:21:41,347 p=25836 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:21:41,347 p=25836 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:21:41,348 p=25836 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:21:41,351 p=25836 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:21:41,353 p=25836 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:21:41,601 p=25836 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:21:41,753 p=25836 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:21:41,763 p=25836 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:21:41,772 p=25836 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:21:41,782 p=25836 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:21:41,791 p=25836 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:21:41,853 p=25836 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:21:41,853 p=25836 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:21:41,883 p=25836 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:21:41,911 p=25836 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:21:41,912 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:21:41,923 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:41,923 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:41,932 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748901.92-259492644726880 `" && echo ansible-tmp-1578748901.92-259492644726880="` echo /root/.ansible/tmp/ansible-tmp-1578748901.92-259492644726880 `" ) && sleep 0'
2020-01-11 21:21:42,322 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:21:42,322 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpovC8Vh TO /root/.ansible/tmp/ansible-tmp-1578748901.92-259492644726880/AnsiballZ_setup.py
2020-01-11 21:21:42,323 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748901.92-259492644726880/ /root/.ansible/tmp/ansible-tmp-1578748901.92-259492644726880/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:21:42,332 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748901.92-259492644726880/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:21:42,795 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748901.92-259492644726880/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:42,866 p=25836 u=root |  ok: [localhost]
2020-01-11 21:21:42,867 p=25836 u=root |  META: ran handlers
2020-01-11 21:21:42,908 p=25836 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:21:42,908 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:21:42,924 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:42,925 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:42,933 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748902.92-232842800665850 `" && echo ansible-tmp-1578748902.92-232842800665850="` echo /root/.ansible/tmp/ansible-tmp-1578748902.92-232842800665850 `" ) && sleep 0'
2020-01-11 21:21:43,176 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:21:43,176 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpHBne7G TO /root/.ansible/tmp/ansible-tmp-1578748902.92-232842800665850/AnsiballZ_ec2_key.py
2020-01-11 21:21:43,177 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748902.92-232842800665850/ /root/.ansible/tmp/ansible-tmp-1578748902.92-232842800665850/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:21:43,186 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748902.92-232842800665850/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:21:44,056 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748902.92-232842800665850/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:44,070 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:21:44,109 p=25836 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:21:44,109 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:21:44,126 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:44,126 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:44,135 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748904.13-173293248634454 `" && echo ansible-tmp-1578748904.13-173293248634454="` echo /root/.ansible/tmp/ansible-tmp-1578748904.13-173293248634454 `" ) && sleep 0'
2020-01-11 21:21:44,359 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:21:44,360 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpGrscoC TO /root/.ansible/tmp/ansible-tmp-1578748904.13-173293248634454/AnsiballZ_stat.py
2020-01-11 21:21:44,361 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748904.13-173293248634454/ /root/.ansible/tmp/ansible-tmp-1578748904.13-173293248634454/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:44,370 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748904.13-173293248634454/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:44,477 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748904.13-173293248634454/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:44,493 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:21:44,531 p=25836 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:21:44,532 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:21:44,550 p=25836 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:21:44,592 p=25836 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:21:44,592 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:21:44,608 p=25836 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:21:44,648 p=25836 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:21:44,648 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:21:44,663 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:44,664 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:44,672 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748904.66-127473037982725 `" && echo ansible-tmp-1578748904.66-127473037982725="` echo /root/.ansible/tmp/ansible-tmp-1578748904.66-127473037982725 `" ) && sleep 0'
2020-01-11 21:21:44,683 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:21:44,684 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmp4aw_R_ TO /root/.ansible/tmp/ansible-tmp-1578748904.66-127473037982725/AnsiballZ_stat.py
2020-01-11 21:21:44,685 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748904.66-127473037982725/ /root/.ansible/tmp/ansible-tmp-1578748904.66-127473037982725/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:44,694 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748904.66-127473037982725/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:44,799 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748904.66-127473037982725/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:44,814 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:21:44,854 p=25836 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:21:44,855 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:21:44,871 p=25836 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:21:44,910 p=25836 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:21:44,910 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:21:44,927 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:44,927 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:44,936 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748904.93-220817253933203 `" && echo ansible-tmp-1578748904.93-220817253933203="` echo /root/.ansible/tmp/ansible-tmp-1578748904.93-220817253933203 `" ) && sleep 0'
2020-01-11 21:21:44,948 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:21:44,949 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmp_4ZfeD TO /root/.ansible/tmp/ansible-tmp-1578748904.93-220817253933203/AnsiballZ_stat.py
2020-01-11 21:21:44,950 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748904.93-220817253933203/ /root/.ansible/tmp/ansible-tmp-1578748904.93-220817253933203/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:44,959 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748904.93-220817253933203/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:45,073 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748904.93-220817253933203/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:45,091 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:21:45,130 p=25836 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:21:45,130 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:21:45,148 p=25836 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:21:45,187 p=25836 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:21:45,187 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:21:45,203 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:45,203 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:45,212 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748905.2-210681700353939 `" && echo ansible-tmp-1578748905.2-210681700353939="` echo /root/.ansible/tmp/ansible-tmp-1578748905.2-210681700353939 `" ) && sleep 0'
2020-01-11 21:21:45,224 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:21:45,224 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpOJDyfK TO /root/.ansible/tmp/ansible-tmp-1578748905.2-210681700353939/AnsiballZ_stat.py
2020-01-11 21:21:45,225 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748905.2-210681700353939/ /root/.ansible/tmp/ansible-tmp-1578748905.2-210681700353939/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:45,234 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748905.2-210681700353939/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:21:45,340 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748905.2-210681700353939/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:45,356 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:21:45,395 p=25836 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:21:45,396 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:21:45,413 p=25836 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:21:45,453 p=25836 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:21:45,453 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:21:45,469 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:45,470 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:45,478 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748905.47-245419509449451 `" && echo ansible-tmp-1578748905.47-245419509449451="` echo /root/.ansible/tmp/ansible-tmp-1578748905.47-245419509449451 `" ) && sleep 0'
2020-01-11 21:21:45,716 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:21:45,716 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpXysfN_ TO /root/.ansible/tmp/ansible-tmp-1578748905.47-245419509449451/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:21:45,717 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748905.47-245419509449451/ /root/.ansible/tmp/ansible-tmp-1578748905.47-245419509449451/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:21:45,726 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748905.47-245419509449451/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:21:47,042 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748905.47-245419509449451/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:47,057 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:21:47,096 p=25836 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:21:47,097 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:21:47,115 p=25836 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:21:47,154 p=25836 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:21:47,154 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:21:47,170 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:47,170 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:47,179 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748907.17-243366936900569 `" && echo ansible-tmp-1578748907.17-243366936900569="` echo /root/.ansible/tmp/ansible-tmp-1578748907.17-243366936900569 `" ) && sleep 0'
2020-01-11 21:21:47,427 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:21:47,427 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpbSoA1Z TO /root/.ansible/tmp/ansible-tmp-1578748907.17-243366936900569/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:21:47,428 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748907.17-243366936900569/ /root/.ansible/tmp/ansible-tmp-1578748907.17-243366936900569/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:21:47,437 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748907.17-243366936900569/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:21:48,164 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748907.17-243366936900569/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:48,176 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:21:48,216 p=25836 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:21:48,216 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:21:48,235 p=25836 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:21:48,275 p=25836 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:21:48,275 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:21:48,292 p=25836 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:21:48,331 p=25836 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:21:48,332 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:21:48,409 p=25836 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:21:48,456 p=25836 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:21:48,456 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:21:48,473 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:48,474 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:48,483 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748908.47-41888369302246 `" && echo ansible-tmp-1578748908.47-41888369302246="` echo /root/.ansible/tmp/ansible-tmp-1578748908.47-41888369302246 `" ) && sleep 0'
2020-01-11 21:21:48,722 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:21:48,723 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpFAzKXX TO /root/.ansible/tmp/ansible-tmp-1578748908.47-41888369302246/AnsiballZ_ec2_group_facts.py
2020-01-11 21:21:48,724 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748908.47-41888369302246/ /root/.ansible/tmp/ansible-tmp-1578748908.47-41888369302246/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:21:48,733 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748908.47-41888369302246/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:21:49,561 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748908.47-41888369302246/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:49,577 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:21:49,616 p=25836 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:21:49,616 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:21:49,646 p=25836 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:21:49,686 p=25836 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:21:49,686 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:21:49,704 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:49,704 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:49,713 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748909.7-178973190213557 `" && echo ansible-tmp-1578748909.7-178973190213557="` echo /root/.ansible/tmp/ansible-tmp-1578748909.7-178973190213557 `" ) && sleep 0'
2020-01-11 21:21:49,724 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:21:49,725 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpbgq4Om TO /root/.ansible/tmp/ansible-tmp-1578748909.7-178973190213557/AnsiballZ_ec2_group_facts.py
2020-01-11 21:21:49,726 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748909.7-178973190213557/ /root/.ansible/tmp/ansible-tmp-1578748909.7-178973190213557/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:21:49,735 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748909.7-178973190213557/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:21:50,525 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748909.7-178973190213557/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:50,540 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:21:50,579 p=25836 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:21:50,579 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:21:50,607 p=25836 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:21:50,647 p=25836 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:21:50,647 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:21:50,666 p=25836 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:21:50,666 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:21:50,675 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578748910.67-255811172118112 `" && echo ansible-tmp-1578748910.67-255811172118112="` echo /root/.ansible/tmp/ansible-tmp-1578748910.67-255811172118112 `" ) && sleep 0'
2020-01-11 21:21:50,688 p=25836 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:21:50,688 p=25836 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-25836Q3gngz/tmpAGjteJ TO /root/.ansible/tmp/ansible-tmp-1578748910.67-255811172118112/AnsiballZ_ec2_group_facts.py
2020-01-11 21:21:50,689 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578748910.67-255811172118112/ /root/.ansible/tmp/ansible-tmp-1578748910.67-255811172118112/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:21:50,699 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578748910.67-255811172118112/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:21:51,512 p=25836 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578748910.67-255811172118112/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:21:51,527 p=25836 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:21:51,566 p=25836 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:21:51,567 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:21:51,595 p=25836 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:21:51,636 p=25836 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:21:51,636 p=25836 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:39
2020-01-11 21:21:51,650 p=25836 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "'dict object' has no attribute 'security_groups'"
}
2020-01-11 21:21:51,652 p=25836 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:21:51,652 p=25836 u=root |  localhost                  : ok=17   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:24:35,560 p=26194 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:24:35,560 p=26194 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:24:35,568 p=26194 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:24:35,568 p=26194 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:24:35,568 p=26194 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:24:35,571 p=26194 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:24:35,574 p=26194 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:24:35,823 p=26194 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:24:35,976 p=26194 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:24:35,985 p=26194 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:24:35,994 p=26194 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:24:36,004 p=26194 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:24:36,013 p=26194 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:24:36,077 p=26194 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:24:36,077 p=26194 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:24:36,107 p=26194 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:24:36,134 p=26194 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:24:36,135 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:24:36,146 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:36,147 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:36,156 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749076.15-205566543419979 `" && echo ansible-tmp-1578749076.15-205566543419979="` echo /root/.ansible/tmp/ansible-tmp-1578749076.15-205566543419979 `" ) && sleep 0'
2020-01-11 21:24:36,548 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:24:36,549 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpSWuneJ TO /root/.ansible/tmp/ansible-tmp-1578749076.15-205566543419979/AnsiballZ_setup.py
2020-01-11 21:24:36,550 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749076.15-205566543419979/ /root/.ansible/tmp/ansible-tmp-1578749076.15-205566543419979/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:24:36,559 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749076.15-205566543419979/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:24:37,027 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749076.15-205566543419979/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:37,098 p=26194 u=root |  ok: [localhost]
2020-01-11 21:24:37,099 p=26194 u=root |  META: ran handlers
2020-01-11 21:24:37,139 p=26194 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:24:37,140 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:24:37,156 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:37,156 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:37,165 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749077.16-119404098455057 `" && echo ansible-tmp-1578749077.16-119404098455057="` echo /root/.ansible/tmp/ansible-tmp-1578749077.16-119404098455057 `" ) && sleep 0'
2020-01-11 21:24:37,408 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:24:37,409 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpuuTVjf TO /root/.ansible/tmp/ansible-tmp-1578749077.16-119404098455057/AnsiballZ_ec2_key.py
2020-01-11 21:24:37,410 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749077.16-119404098455057/ /root/.ansible/tmp/ansible-tmp-1578749077.16-119404098455057/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:24:37,419 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749077.16-119404098455057/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:24:38,417 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749077.16-119404098455057/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:38,430 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:24:38,469 p=26194 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:24:38,469 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:24:38,486 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:38,486 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:38,494 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749078.49-19425901907258 `" && echo ansible-tmp-1578749078.49-19425901907258="` echo /root/.ansible/tmp/ansible-tmp-1578749078.49-19425901907258 `" ) && sleep 0'
2020-01-11 21:24:38,713 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:24:38,713 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpYJAgmF TO /root/.ansible/tmp/ansible-tmp-1578749078.49-19425901907258/AnsiballZ_stat.py
2020-01-11 21:24:38,714 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749078.49-19425901907258/ /root/.ansible/tmp/ansible-tmp-1578749078.49-19425901907258/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:38,723 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749078.49-19425901907258/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:38,828 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749078.49-19425901907258/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:38,844 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:24:38,883 p=26194 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:24:38,883 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:24:38,903 p=26194 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:24:38,944 p=26194 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:24:38,944 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:24:38,960 p=26194 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:24:39,000 p=26194 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:24:39,000 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:24:39,016 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:39,016 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:39,025 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749079.02-162526036666827 `" && echo ansible-tmp-1578749079.02-162526036666827="` echo /root/.ansible/tmp/ansible-tmp-1578749079.02-162526036666827 `" ) && sleep 0'
2020-01-11 21:24:39,037 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:24:39,038 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpV5W2q4 TO /root/.ansible/tmp/ansible-tmp-1578749079.02-162526036666827/AnsiballZ_stat.py
2020-01-11 21:24:39,038 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749079.02-162526036666827/ /root/.ansible/tmp/ansible-tmp-1578749079.02-162526036666827/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:39,048 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749079.02-162526036666827/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:39,152 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749079.02-162526036666827/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:39,168 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:24:39,208 p=26194 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:24:39,208 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:24:39,225 p=26194 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:24:39,264 p=26194 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:24:39,264 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:24:39,281 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:39,281 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:39,290 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749079.28-82287176580232 `" && echo ansible-tmp-1578749079.28-82287176580232="` echo /root/.ansible/tmp/ansible-tmp-1578749079.28-82287176580232 `" ) && sleep 0'
2020-01-11 21:24:39,302 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:24:39,303 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpXarZou TO /root/.ansible/tmp/ansible-tmp-1578749079.28-82287176580232/AnsiballZ_stat.py
2020-01-11 21:24:39,303 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749079.28-82287176580232/ /root/.ansible/tmp/ansible-tmp-1578749079.28-82287176580232/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:39,312 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749079.28-82287176580232/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:39,420 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749079.28-82287176580232/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:39,436 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:24:39,476 p=26194 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:24:39,476 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:24:39,493 p=26194 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:24:39,533 p=26194 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:24:39,533 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:24:39,549 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:39,550 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:39,559 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749079.55-215254938874473 `" && echo ansible-tmp-1578749079.55-215254938874473="` echo /root/.ansible/tmp/ansible-tmp-1578749079.55-215254938874473 `" ) && sleep 0'
2020-01-11 21:24:39,570 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:24:39,571 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmp3zP9cN TO /root/.ansible/tmp/ansible-tmp-1578749079.55-215254938874473/AnsiballZ_stat.py
2020-01-11 21:24:39,572 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749079.55-215254938874473/ /root/.ansible/tmp/ansible-tmp-1578749079.55-215254938874473/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:39,580 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749079.55-215254938874473/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:24:39,691 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749079.55-215254938874473/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:39,707 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:24:39,747 p=26194 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:24:39,747 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:24:39,765 p=26194 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:24:39,805 p=26194 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:24:39,805 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:24:39,822 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:39,822 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:39,831 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749079.82-60067192525490 `" && echo ansible-tmp-1578749079.82-60067192525490="` echo /root/.ansible/tmp/ansible-tmp-1578749079.82-60067192525490 `" ) && sleep 0'
2020-01-11 21:24:40,075 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:24:40,075 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpgJQB99 TO /root/.ansible/tmp/ansible-tmp-1578749079.82-60067192525490/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:24:40,076 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749079.82-60067192525490/ /root/.ansible/tmp/ansible-tmp-1578749079.82-60067192525490/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:24:40,086 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749079.82-60067192525490/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:24:41,406 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749079.82-60067192525490/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:41,421 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:24:41,460 p=26194 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:24:41,461 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:24:41,478 p=26194 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:24:41,518 p=26194 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:24:41,518 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:24:41,535 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:41,535 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:41,544 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749081.53-265964307318338 `" && echo ansible-tmp-1578749081.53-265964307318338="` echo /root/.ansible/tmp/ansible-tmp-1578749081.53-265964307318338 `" ) && sleep 0'
2020-01-11 21:24:41,784 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:24:41,785 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmp2Eo5WE TO /root/.ansible/tmp/ansible-tmp-1578749081.53-265964307318338/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:24:41,785 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749081.53-265964307318338/ /root/.ansible/tmp/ansible-tmp-1578749081.53-265964307318338/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:24:41,795 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749081.53-265964307318338/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:24:42,510 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749081.53-265964307318338/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:42,523 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:24:42,563 p=26194 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:24:42,563 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:24:42,582 p=26194 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:24:42,622 p=26194 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:24:42,622 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:24:42,638 p=26194 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:24:42,678 p=26194 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:24:42,678 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:24:42,756 p=26194 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:24:42,803 p=26194 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:24:42,803 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:24:42,821 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:42,821 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:42,830 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749082.82-272555492964049 `" && echo ansible-tmp-1578749082.82-272555492964049="` echo /root/.ansible/tmp/ansible-tmp-1578749082.82-272555492964049 `" ) && sleep 0'
2020-01-11 21:24:43,066 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:24:43,066 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmp5KbeU4 TO /root/.ansible/tmp/ansible-tmp-1578749082.82-272555492964049/AnsiballZ_ec2_group_facts.py
2020-01-11 21:24:43,067 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749082.82-272555492964049/ /root/.ansible/tmp/ansible-tmp-1578749082.82-272555492964049/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:43,076 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749082.82-272555492964049/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:43,918 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749082.82-272555492964049/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:43,934 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:24:43,974 p=26194 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:24:43,974 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:24:44,004 p=26194 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:24:44,046 p=26194 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:24:44,046 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:24:44,065 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:44,065 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:44,074 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749084.06-228623193178031 `" && echo ansible-tmp-1578749084.06-228623193178031="` echo /root/.ansible/tmp/ansible-tmp-1578749084.06-228623193178031 `" ) && sleep 0'
2020-01-11 21:24:44,088 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:24:44,088 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpEEjNy3 TO /root/.ansible/tmp/ansible-tmp-1578749084.06-228623193178031/AnsiballZ_ec2_group_facts.py
2020-01-11 21:24:44,089 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749084.06-228623193178031/ /root/.ansible/tmp/ansible-tmp-1578749084.06-228623193178031/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:44,099 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749084.06-228623193178031/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:44,934 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749084.06-228623193178031/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:44,950 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:24:44,990 p=26194 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:24:44,990 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:24:45,028 p=26194 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:24:45,070 p=26194 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:24:45,070 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:24:45,089 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:45,089 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:45,098 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749085.09-49938917877076 `" && echo ansible-tmp-1578749085.09-49938917877076="` echo /root/.ansible/tmp/ansible-tmp-1578749085.09-49938917877076 `" ) && sleep 0'
2020-01-11 21:24:45,111 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:24:45,111 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpn1meC0 TO /root/.ansible/tmp/ansible-tmp-1578749085.09-49938917877076/AnsiballZ_ec2_group_facts.py
2020-01-11 21:24:45,112 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749085.09-49938917877076/ /root/.ansible/tmp/ansible-tmp-1578749085.09-49938917877076/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:45,121 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749085.09-49938917877076/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:45,955 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749085.09-49938917877076/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:45,971 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:24:46,011 p=26194 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:24:46,011 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:24:46,038 p=26194 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:24:46,079 p=26194 u=root |  TASK [ec2 : Get all SG ID] ********************************************************************************************************************************
2020-01-11 21:24:46,079 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 21:24:46,097 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:46,097 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:46,106 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749086.1-135809614102975 `" && echo ansible-tmp-1578749086.1-135809614102975="` echo /root/.ansible/tmp/ansible-tmp-1578749086.1-135809614102975 `" ) && sleep 0'
2020-01-11 21:24:46,117 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:24:46,117 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpcbr6cK TO /root/.ansible/tmp/ansible-tmp-1578749086.1-135809614102975/AnsiballZ_ec2_group_facts.py
2020-01-11 21:24:46,118 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749086.1-135809614102975/ /root/.ansible/tmp/ansible-tmp-1578749086.1-135809614102975/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:46,127 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749086.1-135809614102975/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:46,940 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749086.1-135809614102975/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:46,955 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:24:46,995 p=26194 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:24:46,995 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:45
2020-01-11 21:24:47,022 p=26194 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:24:47,063 p=26194 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-11 21:24:47,063 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:50
2020-01-11 21:24:47,081 p=26194 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:24:47,081 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:24:47,090 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749087.08-2349784781792 `" && echo ansible-tmp-1578749087.08-2349784781792="` echo /root/.ansible/tmp/ansible-tmp-1578749087.08-2349784781792 `" ) && sleep 0'
2020-01-11 21:24:47,103 p=26194 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:24:47,103 p=26194 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26194Z4GbVk/tmpMuriya TO /root/.ansible/tmp/ansible-tmp-1578749087.08-2349784781792/AnsiballZ_ec2_group_facts.py
2020-01-11 21:24:47,104 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749087.08-2349784781792/ /root/.ansible/tmp/ansible-tmp-1578749087.08-2349784781792/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:47,113 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749087.08-2349784781792/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:24:47,916 p=26194 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749087.08-2349784781792/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:24:47,934 p=26194 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-merchant-8081"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8081 to the world", 
            "group_id": "sg-06ac1466b623c31bb", 
            "group_name": "M20-merchant-8081", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:24:47,973 p=26194 u=root |  TASK [ec2 : list of other the security group id.] *********************************************************************************************************
2020-01-11 21:24:47,973 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:56
2020-01-11 21:24:48,005 p=26194 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8081 to the world', u'tags': {u'Environment': u'M20-merchant-8081', u'Name': u'M20-merchant-8081'}, u'group_name': u'M20-merchant-8081', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-06ac1466b623c31bb', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-06ac1466b623c31bb"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8081 to the world", 
        "group_id": "sg-06ac1466b623c31bb", 
        "group_name": "M20-merchant-8081", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-merchant-8081", 
            "Name": "M20-merchant-8081"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:24:48,046 p=26194 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 21:24:48,047 p=26194 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:61
2020-01-11 21:24:48,074 p=26194 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml': line 61, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 21:24:48,076 p=26194 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:24:48,076 p=26194 u=root |  localhost                  : ok=21   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:27:38,302 p=26609 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:27:38,302 p=26609 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:27:38,310 p=26609 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:27:38,310 p=26609 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:27:38,310 p=26609 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:27:38,314 p=26609 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:27:38,316 p=26609 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:27:38,560 p=26609 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:27:38,715 p=26609 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:27:38,724 p=26609 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:27:38,734 p=26609 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:27:38,744 p=26609 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:27:38,753 p=26609 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:27:38,815 p=26609 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:27:38,815 p=26609 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:27:38,846 p=26609 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:27:38,874 p=26609 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:27:38,875 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:27:38,887 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:38,887 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:38,896 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749258.89-116904531388995 `" && echo ansible-tmp-1578749258.89-116904531388995="` echo /root/.ansible/tmp/ansible-tmp-1578749258.89-116904531388995 `" ) && sleep 0'
2020-01-11 21:27:39,288 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:27:39,289 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmpfHGsNy TO /root/.ansible/tmp/ansible-tmp-1578749258.89-116904531388995/AnsiballZ_setup.py
2020-01-11 21:27:39,290 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749258.89-116904531388995/ /root/.ansible/tmp/ansible-tmp-1578749258.89-116904531388995/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:27:39,299 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749258.89-116904531388995/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:27:39,807 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749258.89-116904531388995/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:39,877 p=26609 u=root |  ok: [localhost]
2020-01-11 21:27:39,878 p=26609 u=root |  META: ran handlers
2020-01-11 21:27:39,918 p=26609 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:27:39,918 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:27:39,935 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:39,935 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:39,943 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749259.93-278415333791475 `" && echo ansible-tmp-1578749259.93-278415333791475="` echo /root/.ansible/tmp/ansible-tmp-1578749259.93-278415333791475 `" ) && sleep 0'
2020-01-11 21:27:40,182 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:27:40,182 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmp_FtH4S TO /root/.ansible/tmp/ansible-tmp-1578749259.93-278415333791475/AnsiballZ_ec2_key.py
2020-01-11 21:27:40,183 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749259.93-278415333791475/ /root/.ansible/tmp/ansible-tmp-1578749259.93-278415333791475/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:27:40,192 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749259.93-278415333791475/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:27:41,178 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749259.93-278415333791475/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:41,191 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:27:41,230 p=26609 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:27:41,230 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:27:41,246 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:41,247 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:41,255 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749261.25-147493851942705 `" && echo ansible-tmp-1578749261.25-147493851942705="` echo /root/.ansible/tmp/ansible-tmp-1578749261.25-147493851942705 `" ) && sleep 0'
2020-01-11 21:27:41,477 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:27:41,477 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmp74chV2 TO /root/.ansible/tmp/ansible-tmp-1578749261.25-147493851942705/AnsiballZ_stat.py
2020-01-11 21:27:41,478 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749261.25-147493851942705/ /root/.ansible/tmp/ansible-tmp-1578749261.25-147493851942705/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:41,487 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749261.25-147493851942705/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:41,592 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749261.25-147493851942705/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:41,609 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:27:41,647 p=26609 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:27:41,648 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:27:41,666 p=26609 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:27:41,708 p=26609 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:27:41,708 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:27:41,725 p=26609 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:27:41,765 p=26609 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:27:41,765 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:27:41,780 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:41,781 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:41,789 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749261.78-82620290319759 `" && echo ansible-tmp-1578749261.78-82620290319759="` echo /root/.ansible/tmp/ansible-tmp-1578749261.78-82620290319759 `" ) && sleep 0'
2020-01-11 21:27:41,802 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:27:41,802 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmpOQrHum TO /root/.ansible/tmp/ansible-tmp-1578749261.78-82620290319759/AnsiballZ_stat.py
2020-01-11 21:27:41,803 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749261.78-82620290319759/ /root/.ansible/tmp/ansible-tmp-1578749261.78-82620290319759/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:41,812 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749261.78-82620290319759/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:41,917 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749261.78-82620290319759/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:41,933 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:27:41,973 p=26609 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:27:41,973 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:27:41,989 p=26609 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:27:42,029 p=26609 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:27:42,029 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:27:42,046 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:42,047 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:42,056 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749262.05-78705183811827 `" && echo ansible-tmp-1578749262.05-78705183811827="` echo /root/.ansible/tmp/ansible-tmp-1578749262.05-78705183811827 `" ) && sleep 0'
2020-01-11 21:27:42,069 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:27:42,069 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmp1nzHJd TO /root/.ansible/tmp/ansible-tmp-1578749262.05-78705183811827/AnsiballZ_stat.py
2020-01-11 21:27:42,070 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749262.05-78705183811827/ /root/.ansible/tmp/ansible-tmp-1578749262.05-78705183811827/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:42,079 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749262.05-78705183811827/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:42,189 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749262.05-78705183811827/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:42,205 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:27:42,244 p=26609 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:27:42,244 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:27:42,262 p=26609 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:27:42,301 p=26609 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:27:42,302 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:27:42,317 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:42,318 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:42,327 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749262.32-265030285026323 `" && echo ansible-tmp-1578749262.32-265030285026323="` echo /root/.ansible/tmp/ansible-tmp-1578749262.32-265030285026323 `" ) && sleep 0'
2020-01-11 21:27:42,339 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:27:42,340 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmp8coeal TO /root/.ansible/tmp/ansible-tmp-1578749262.32-265030285026323/AnsiballZ_stat.py
2020-01-11 21:27:42,340 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749262.32-265030285026323/ /root/.ansible/tmp/ansible-tmp-1578749262.32-265030285026323/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:42,349 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749262.32-265030285026323/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:27:42,457 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749262.32-265030285026323/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:42,472 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:27:42,512 p=26609 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:27:42,512 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:27:42,529 p=26609 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:27:42,569 p=26609 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:27:42,569 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:27:42,586 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:42,586 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:42,595 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749262.59-128211010108989 `" && echo ansible-tmp-1578749262.59-128211010108989="` echo /root/.ansible/tmp/ansible-tmp-1578749262.59-128211010108989 `" ) && sleep 0'
2020-01-11 21:27:42,840 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:27:42,841 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmptocwl4 TO /root/.ansible/tmp/ansible-tmp-1578749262.59-128211010108989/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:27:42,841 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749262.59-128211010108989/ /root/.ansible/tmp/ansible-tmp-1578749262.59-128211010108989/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:27:42,850 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749262.59-128211010108989/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:27:44,198 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749262.59-128211010108989/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:44,214 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:27:44,254 p=26609 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:27:44,254 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:27:44,272 p=26609 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:27:44,312 p=26609 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:27:44,312 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:27:44,329 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:44,329 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:44,338 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749264.33-139136220990349 `" && echo ansible-tmp-1578749264.33-139136220990349="` echo /root/.ansible/tmp/ansible-tmp-1578749264.33-139136220990349 `" ) && sleep 0'
2020-01-11 21:27:44,582 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:27:44,583 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmpke1uqJ TO /root/.ansible/tmp/ansible-tmp-1578749264.33-139136220990349/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:27:44,583 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749264.33-139136220990349/ /root/.ansible/tmp/ansible-tmp-1578749264.33-139136220990349/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:27:44,593 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749264.33-139136220990349/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:27:45,323 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749264.33-139136220990349/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:45,336 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:27:45,376 p=26609 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:27:45,376 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:27:45,395 p=26609 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:27:45,435 p=26609 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:27:45,435 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:27:45,451 p=26609 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:27:45,491 p=26609 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:27:45,491 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:27:45,570 p=26609 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:27:45,617 p=26609 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:27:45,617 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:27:45,635 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:45,635 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:45,644 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749265.63-3889099322249 `" && echo ansible-tmp-1578749265.63-3889099322249="` echo /root/.ansible/tmp/ansible-tmp-1578749265.63-3889099322249 `" ) && sleep 0'
2020-01-11 21:27:45,885 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:27:45,886 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmpDhALi_ TO /root/.ansible/tmp/ansible-tmp-1578749265.63-3889099322249/AnsiballZ_ec2_group_facts.py
2020-01-11 21:27:45,886 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749265.63-3889099322249/ /root/.ansible/tmp/ansible-tmp-1578749265.63-3889099322249/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:45,896 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749265.63-3889099322249/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:46,730 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749265.63-3889099322249/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:46,746 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:27:46,786 p=26609 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:27:46,786 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:27:46,816 p=26609 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:27:46,857 p=26609 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:27:46,857 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:27:46,875 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:46,876 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:46,885 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749266.88-236682233469491 `" && echo ansible-tmp-1578749266.88-236682233469491="` echo /root/.ansible/tmp/ansible-tmp-1578749266.88-236682233469491 `" ) && sleep 0'
2020-01-11 21:27:46,897 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:27:46,897 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmpFaH6Zg TO /root/.ansible/tmp/ansible-tmp-1578749266.88-236682233469491/AnsiballZ_ec2_group_facts.py
2020-01-11 21:27:46,898 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749266.88-236682233469491/ /root/.ansible/tmp/ansible-tmp-1578749266.88-236682233469491/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:46,907 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749266.88-236682233469491/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:47,768 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749266.88-236682233469491/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:47,783 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:27:47,822 p=26609 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:27:47,823 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:27:47,853 p=26609 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:27:47,893 p=26609 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:27:47,893 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:27:47,911 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:47,912 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:47,921 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749267.91-102659596512700 `" && echo ansible-tmp-1578749267.91-102659596512700="` echo /root/.ansible/tmp/ansible-tmp-1578749267.91-102659596512700 `" ) && sleep 0'
2020-01-11 21:27:47,933 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:27:47,934 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmpeNsGp7 TO /root/.ansible/tmp/ansible-tmp-1578749267.91-102659596512700/AnsiballZ_ec2_group_facts.py
2020-01-11 21:27:47,934 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749267.91-102659596512700/ /root/.ansible/tmp/ansible-tmp-1578749267.91-102659596512700/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:47,944 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749267.91-102659596512700/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:48,750 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749267.91-102659596512700/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:48,765 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:27:48,804 p=26609 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:27:48,805 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:27:48,832 p=26609 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:27:48,873 p=26609 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 21:27:48,873 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:39
2020-01-11 21:27:48,890 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:48,891 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:48,900 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749268.89-77136097945245 `" && echo ansible-tmp-1578749268.89-77136097945245="` echo /root/.ansible/tmp/ansible-tmp-1578749268.89-77136097945245 `" ) && sleep 0'
2020-01-11 21:27:48,912 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:27:48,913 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmp_5MUMR TO /root/.ansible/tmp/ansible-tmp-1578749268.89-77136097945245/AnsiballZ_ec2_group_facts.py
2020-01-11 21:27:48,914 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749268.89-77136097945245/ /root/.ansible/tmp/ansible-tmp-1578749268.89-77136097945245/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:48,923 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749268.89-77136097945245/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:49,726 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749268.89-77136097945245/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:49,741 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:27:49,780 p=26609 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:27:49,781 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:46
2020-01-11 21:27:49,807 p=26609 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:27:49,847 p=26609 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-11 21:27:49,847 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:51
2020-01-11 21:27:49,864 p=26609 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:27:49,865 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:27:49,873 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749269.86-248156414157045 `" && echo ansible-tmp-1578749269.86-248156414157045="` echo /root/.ansible/tmp/ansible-tmp-1578749269.86-248156414157045 `" ) && sleep 0'
2020-01-11 21:27:49,885 p=26609 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:27:49,885 p=26609 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-26609jVi_4c/tmpSqO0Bg TO /root/.ansible/tmp/ansible-tmp-1578749269.86-248156414157045/AnsiballZ_ec2_group_facts.py
2020-01-11 21:27:49,886 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749269.86-248156414157045/ /root/.ansible/tmp/ansible-tmp-1578749269.86-248156414157045/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:49,894 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749269.86-248156414157045/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:27:50,704 p=26609 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749269.86-248156414157045/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:27:50,719 p=26609 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-merchant-8081"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8081 to the world", 
            "group_id": "sg-06ac1466b623c31bb", 
            "group_name": "M20-merchant-8081", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:27:50,758 p=26609 u=root |  TASK [ec2 : list of other the security group id.] *********************************************************************************************************
2020-01-11 21:27:50,759 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:57
2020-01-11 21:27:50,791 p=26609 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8081 to the world', u'tags': {u'Environment': u'M20-merchant-8081', u'Name': u'M20-merchant-8081'}, u'group_name': u'M20-merchant-8081', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-06ac1466b623c31bb', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-06ac1466b623c31bb"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8081 to the world", 
        "group_id": "sg-06ac1466b623c31bb", 
        "group_name": "M20-merchant-8081", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-merchant-8081", 
            "Name": "M20-merchant-8081"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:27:50,831 p=26609 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 21:27:50,831 p=26609 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:62
2020-01-11 21:27:50,858 p=26609 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml': line 62, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 21:27:50,860 p=26609 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:27:50,860 p=26609 u=root |  localhost                  : ok=21   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:34:28,582 p=27034 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:34:28,582 p=27034 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:34:28,590 p=27034 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:34:28,590 p=27034 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:34:28,590 p=27034 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:34:28,593 p=27034 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:34:28,596 p=27034 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:34:28,846 p=27034 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:34:29,002 p=27034 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:34:29,012 p=27034 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:34:29,021 p=27034 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:34:29,031 p=27034 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:34:29,040 p=27034 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:34:29,103 p=27034 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:34:29,103 p=27034 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:34:29,133 p=27034 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:34:29,162 p=27034 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:34:29,162 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:34:29,174 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:29,174 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:29,183 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749669.17-65759936770822 `" && echo ansible-tmp-1578749669.17-65759936770822="` echo /root/.ansible/tmp/ansible-tmp-1578749669.17-65759936770822 `" ) && sleep 0'
2020-01-11 21:34:29,575 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:34:29,576 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpx5Q2ma TO /root/.ansible/tmp/ansible-tmp-1578749669.17-65759936770822/AnsiballZ_setup.py
2020-01-11 21:34:29,577 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749669.17-65759936770822/ /root/.ansible/tmp/ansible-tmp-1578749669.17-65759936770822/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:34:29,586 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749669.17-65759936770822/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:34:30,156 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749669.17-65759936770822/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:30,227 p=27034 u=root |  ok: [localhost]
2020-01-11 21:34:30,228 p=27034 u=root |  META: ran handlers
2020-01-11 21:34:30,268 p=27034 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:34:30,268 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:34:30,285 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:30,285 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:30,294 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749670.28-219202269757103 `" && echo ansible-tmp-1578749670.28-219202269757103="` echo /root/.ansible/tmp/ansible-tmp-1578749670.28-219202269757103 `" ) && sleep 0'
2020-01-11 21:34:30,532 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:34:30,532 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpZu_QZq TO /root/.ansible/tmp/ansible-tmp-1578749670.28-219202269757103/AnsiballZ_ec2_key.py
2020-01-11 21:34:30,533 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749670.28-219202269757103/ /root/.ansible/tmp/ansible-tmp-1578749670.28-219202269757103/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:34:30,542 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749670.28-219202269757103/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:34:31,345 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749670.28-219202269757103/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:31,358 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:34:31,397 p=27034 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:34:31,398 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:34:31,414 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:31,414 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:31,423 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749671.41-69190739859920 `" && echo ansible-tmp-1578749671.41-69190739859920="` echo /root/.ansible/tmp/ansible-tmp-1578749671.41-69190739859920 `" ) && sleep 0'
2020-01-11 21:34:31,640 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:34:31,641 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpkglsKI TO /root/.ansible/tmp/ansible-tmp-1578749671.41-69190739859920/AnsiballZ_stat.py
2020-01-11 21:34:31,642 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749671.41-69190739859920/ /root/.ansible/tmp/ansible-tmp-1578749671.41-69190739859920/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:31,651 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749671.41-69190739859920/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:31,755 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749671.41-69190739859920/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:31,771 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:34:31,810 p=27034 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:34:31,810 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:34:31,830 p=27034 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:34:31,871 p=27034 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:34:31,871 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:34:31,887 p=27034 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:34:31,927 p=27034 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:34:31,928 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:34:31,944 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:31,944 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:31,953 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749671.94-276237475115540 `" && echo ansible-tmp-1578749671.94-276237475115540="` echo /root/.ansible/tmp/ansible-tmp-1578749671.94-276237475115540 `" ) && sleep 0'
2020-01-11 21:34:31,965 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:34:31,966 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpo2mvgx TO /root/.ansible/tmp/ansible-tmp-1578749671.94-276237475115540/AnsiballZ_stat.py
2020-01-11 21:34:31,966 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749671.94-276237475115540/ /root/.ansible/tmp/ansible-tmp-1578749671.94-276237475115540/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:31,975 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749671.94-276237475115540/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:32,079 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749671.94-276237475115540/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:32,095 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:34:32,135 p=27034 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:34:32,135 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:34:32,152 p=27034 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:34:32,191 p=27034 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:34:32,192 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:34:32,208 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:32,208 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:32,217 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749672.21-206572299768047 `" && echo ansible-tmp-1578749672.21-206572299768047="` echo /root/.ansible/tmp/ansible-tmp-1578749672.21-206572299768047 `" ) && sleep 0'
2020-01-11 21:34:32,229 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:34:32,229 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpYSh3lt TO /root/.ansible/tmp/ansible-tmp-1578749672.21-206572299768047/AnsiballZ_stat.py
2020-01-11 21:34:32,230 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749672.21-206572299768047/ /root/.ansible/tmp/ansible-tmp-1578749672.21-206572299768047/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:32,239 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749672.21-206572299768047/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:32,346 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749672.21-206572299768047/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:32,361 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:34:32,400 p=27034 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:34:32,401 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:34:32,418 p=27034 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:34:32,458 p=27034 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:34:32,458 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:34:32,474 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:32,474 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:32,483 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749672.47-176146913103328 `" && echo ansible-tmp-1578749672.47-176146913103328="` echo /root/.ansible/tmp/ansible-tmp-1578749672.47-176146913103328 `" ) && sleep 0'
2020-01-11 21:34:32,494 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:34:32,495 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmp2yzoCH TO /root/.ansible/tmp/ansible-tmp-1578749672.47-176146913103328/AnsiballZ_stat.py
2020-01-11 21:34:32,496 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749672.47-176146913103328/ /root/.ansible/tmp/ansible-tmp-1578749672.47-176146913103328/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:32,504 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749672.47-176146913103328/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:34:32,613 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749672.47-176146913103328/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:32,629 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:34:32,669 p=27034 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:34:32,669 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:34:32,686 p=27034 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:34:32,726 p=27034 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:34:32,726 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:34:32,743 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:32,743 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:32,752 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749672.74-213601804309461 `" && echo ansible-tmp-1578749672.74-213601804309461="` echo /root/.ansible/tmp/ansible-tmp-1578749672.74-213601804309461 `" ) && sleep 0'
2020-01-11 21:34:32,994 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:34:32,995 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpeTn6OZ TO /root/.ansible/tmp/ansible-tmp-1578749672.74-213601804309461/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:34:32,996 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749672.74-213601804309461/ /root/.ansible/tmp/ansible-tmp-1578749672.74-213601804309461/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:34:33,005 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749672.74-213601804309461/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:34:34,295 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749672.74-213601804309461/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:34,310 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:34:34,349 p=27034 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:34:34,350 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:34:34,367 p=27034 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:34:34,406 p=27034 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:34:34,406 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:34:34,422 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:34,423 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:34,431 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749674.42-265482449276912 `" && echo ansible-tmp-1578749674.42-265482449276912="` echo /root/.ansible/tmp/ansible-tmp-1578749674.42-265482449276912 `" ) && sleep 0'
2020-01-11 21:34:34,670 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:34:34,671 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmp4WAcFq TO /root/.ansible/tmp/ansible-tmp-1578749674.42-265482449276912/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:34:34,671 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749674.42-265482449276912/ /root/.ansible/tmp/ansible-tmp-1578749674.42-265482449276912/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:34:34,681 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749674.42-265482449276912/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:34:35,384 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749674.42-265482449276912/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:35,398 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:34:35,437 p=27034 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:34:35,437 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:34:35,456 p=27034 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:34:35,495 p=27034 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:34:35,495 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:34:35,511 p=27034 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:34:35,551 p=27034 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:34:35,551 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:34:35,629 p=27034 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:34:35,676 p=27034 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:34:35,676 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:34:35,694 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:35,694 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:35,703 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749675.69-161481780435113 `" && echo ansible-tmp-1578749675.69-161481780435113="` echo /root/.ansible/tmp/ansible-tmp-1578749675.69-161481780435113 `" ) && sleep 0'
2020-01-11 21:34:35,939 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:34:35,939 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpU1ZBWy TO /root/.ansible/tmp/ansible-tmp-1578749675.69-161481780435113/AnsiballZ_ec2_group_facts.py
2020-01-11 21:34:35,940 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749675.69-161481780435113/ /root/.ansible/tmp/ansible-tmp-1578749675.69-161481780435113/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:35,949 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749675.69-161481780435113/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:36,768 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749675.69-161481780435113/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:36,783 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:34:36,823 p=27034 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:34:36,823 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:34:36,850 p=27034 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:34:36,891 p=27034 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:34:36,892 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:34:36,910 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:36,910 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:36,919 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749676.91-169228897859485 `" && echo ansible-tmp-1578749676.91-169228897859485="` echo /root/.ansible/tmp/ansible-tmp-1578749676.91-169228897859485 `" ) && sleep 0'
2020-01-11 21:34:36,931 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:34:36,931 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpxONmUB TO /root/.ansible/tmp/ansible-tmp-1578749676.91-169228897859485/AnsiballZ_ec2_group_facts.py
2020-01-11 21:34:36,932 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749676.91-169228897859485/ /root/.ansible/tmp/ansible-tmp-1578749676.91-169228897859485/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:36,941 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749676.91-169228897859485/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:37,730 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749676.91-169228897859485/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:37,746 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:34:37,785 p=27034 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:34:37,785 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:34:37,813 p=27034 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:34:37,853 p=27034 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:34:37,853 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:34:37,871 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:37,871 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:37,880 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749677.87-246065326664952 `" && echo ansible-tmp-1578749677.87-246065326664952="` echo /root/.ansible/tmp/ansible-tmp-1578749677.87-246065326664952 `" ) && sleep 0'
2020-01-11 21:34:37,891 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:34:37,892 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpPDSErI TO /root/.ansible/tmp/ansible-tmp-1578749677.87-246065326664952/AnsiballZ_ec2_group_facts.py
2020-01-11 21:34:37,893 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749677.87-246065326664952/ /root/.ansible/tmp/ansible-tmp-1578749677.87-246065326664952/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:37,901 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749677.87-246065326664952/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:38,701 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749677.87-246065326664952/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:38,717 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:34:38,756 p=27034 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:34:38,756 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:34:38,784 p=27034 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:34:38,824 p=27034 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 21:34:38,824 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:39
2020-01-11 21:34:38,842 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:38,842 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:38,850 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749678.84-276814082349832 `" && echo ansible-tmp-1578749678.84-276814082349832="` echo /root/.ansible/tmp/ansible-tmp-1578749678.84-276814082349832 `" ) && sleep 0'
2020-01-11 21:34:38,862 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:34:38,862 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmp_OkJoc TO /root/.ansible/tmp/ansible-tmp-1578749678.84-276814082349832/AnsiballZ_ec2_group_facts.py
2020-01-11 21:34:38,863 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749678.84-276814082349832/ /root/.ansible/tmp/ansible-tmp-1578749678.84-276814082349832/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:38,872 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749678.84-276814082349832/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:39,672 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749678.84-276814082349832/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:39,687 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:34:39,727 p=27034 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:34:39,727 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:46
2020-01-11 21:34:39,753 p=27034 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:34:39,793 p=27034 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-11 21:34:39,793 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:51
2020-01-11 21:34:39,811 p=27034 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:34:39,811 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:34:39,820 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749679.81-185032993755062 `" && echo ansible-tmp-1578749679.81-185032993755062="` echo /root/.ansible/tmp/ansible-tmp-1578749679.81-185032993755062 `" ) && sleep 0'
2020-01-11 21:34:39,832 p=27034 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:34:39,833 p=27034 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27034sTjwXA/tmpqNyhb3 TO /root/.ansible/tmp/ansible-tmp-1578749679.81-185032993755062/AnsiballZ_ec2_group_facts.py
2020-01-11 21:34:39,834 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749679.81-185032993755062/ /root/.ansible/tmp/ansible-tmp-1578749679.81-185032993755062/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:39,842 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749679.81-185032993755062/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:34:40,659 p=27034 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749679.81-185032993755062/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:34:40,675 p=27034 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-merchant-8081"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8081 to the world", 
            "group_id": "sg-06ac1466b623c31bb", 
            "group_name": "M20-merchant-8081", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:34:40,714 p=27034 u=root |  TASK [ec2 : list of other the security group id.] *********************************************************************************************************
2020-01-11 21:34:40,714 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:57
2020-01-11 21:34:40,747 p=27034 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8081 to the world', u'tags': {u'Environment': u'M20-merchant-8081', u'Name': u'M20-merchant-8081'}, u'group_name': u'M20-merchant-8081', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-06ac1466b623c31bb', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-06ac1466b623c31bb"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8081 to the world", 
        "group_id": "sg-06ac1466b623c31bb", 
        "group_name": "M20-merchant-8081", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-merchant-8081", 
            "Name": "M20-merchant-8081"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:34:40,787 p=27034 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 21:34:40,787 p=27034 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:62
2020-01-11 21:34:40,814 p=27034 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml': line 62, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 21:34:40,816 p=27034 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:34:40,816 p=27034 u=root |  localhost                  : ok=21   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:36:15,828 p=27447 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:36:15,828 p=27447 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:36:15,836 p=27447 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:36:15,836 p=27447 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:36:15,836 p=27447 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:36:15,840 p=27447 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:36:15,842 p=27447 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:36:16,096 p=27447 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:36:16,248 p=27447 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:36:16,258 p=27447 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:36:16,268 p=27447 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:36:16,277 p=27447 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:36:16,287 p=27447 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:36:16,350 p=27447 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:36:16,350 p=27447 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:36:16,380 p=27447 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:36:16,408 p=27447 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:36:16,408 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:36:16,420 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:16,420 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:16,429 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749776.42-28507747890245 `" && echo ansible-tmp-1578749776.42-28507747890245="` echo /root/.ansible/tmp/ansible-tmp-1578749776.42-28507747890245 `" ) && sleep 0'
2020-01-11 21:36:16,826 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:36:16,827 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpD0vMr4 TO /root/.ansible/tmp/ansible-tmp-1578749776.42-28507747890245/AnsiballZ_setup.py
2020-01-11 21:36:16,828 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749776.42-28507747890245/ /root/.ansible/tmp/ansible-tmp-1578749776.42-28507747890245/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:36:16,837 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749776.42-28507747890245/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:36:17,314 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749776.42-28507747890245/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:17,386 p=27447 u=root |  ok: [localhost]
2020-01-11 21:36:17,387 p=27447 u=root |  META: ran handlers
2020-01-11 21:36:17,428 p=27447 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:36:17,428 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:36:17,445 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:17,445 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:17,454 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749777.44-26003548584014 `" && echo ansible-tmp-1578749777.44-26003548584014="` echo /root/.ansible/tmp/ansible-tmp-1578749777.44-26003548584014 `" ) && sleep 0'
2020-01-11 21:36:17,700 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:36:17,701 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmplFq7zu TO /root/.ansible/tmp/ansible-tmp-1578749777.44-26003548584014/AnsiballZ_ec2_key.py
2020-01-11 21:36:17,702 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749777.44-26003548584014/ /root/.ansible/tmp/ansible-tmp-1578749777.44-26003548584014/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:36:17,711 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749777.44-26003548584014/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:36:18,524 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749777.44-26003548584014/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:18,538 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:36:18,577 p=27447 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:36:18,577 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:36:18,594 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:18,594 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:18,603 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749778.59-181237420510147 `" && echo ansible-tmp-1578749778.59-181237420510147="` echo /root/.ansible/tmp/ansible-tmp-1578749778.59-181237420510147 `" ) && sleep 0'
2020-01-11 21:36:18,822 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:36:18,822 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmp4MujXl TO /root/.ansible/tmp/ansible-tmp-1578749778.59-181237420510147/AnsiballZ_stat.py
2020-01-11 21:36:18,823 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749778.59-181237420510147/ /root/.ansible/tmp/ansible-tmp-1578749778.59-181237420510147/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:18,833 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749778.59-181237420510147/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:18,939 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749778.59-181237420510147/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:18,956 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:36:18,995 p=27447 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:36:18,995 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:36:19,015 p=27447 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:36:19,057 p=27447 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:36:19,057 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:36:19,073 p=27447 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:36:19,114 p=27447 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:36:19,114 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:36:19,130 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:19,130 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:19,139 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749779.13-264782076256957 `" && echo ansible-tmp-1578749779.13-264782076256957="` echo /root/.ansible/tmp/ansible-tmp-1578749779.13-264782076256957 `" ) && sleep 0'
2020-01-11 21:36:19,153 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:36:19,153 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpL8euR7 TO /root/.ansible/tmp/ansible-tmp-1578749779.13-264782076256957/AnsiballZ_stat.py
2020-01-11 21:36:19,154 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749779.13-264782076256957/ /root/.ansible/tmp/ansible-tmp-1578749779.13-264782076256957/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:19,163 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749779.13-264782076256957/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:19,271 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749779.13-264782076256957/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:19,287 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:36:19,328 p=27447 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:36:19,328 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:36:19,345 p=27447 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:36:19,384 p=27447 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:36:19,385 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:36:19,401 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:19,401 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:19,410 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749779.4-209384174416899 `" && echo ansible-tmp-1578749779.4-209384174416899="` echo /root/.ansible/tmp/ansible-tmp-1578749779.4-209384174416899 `" ) && sleep 0'
2020-01-11 21:36:19,423 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:36:19,423 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpxc2Suc TO /root/.ansible/tmp/ansible-tmp-1578749779.4-209384174416899/AnsiballZ_stat.py
2020-01-11 21:36:19,424 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749779.4-209384174416899/ /root/.ansible/tmp/ansible-tmp-1578749779.4-209384174416899/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:19,433 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749779.4-209384174416899/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:19,543 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749779.4-209384174416899/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:19,562 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:36:19,602 p=27447 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:36:19,602 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:36:19,619 p=27447 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:36:19,660 p=27447 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:36:19,660 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:36:19,676 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:19,677 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:19,685 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749779.68-46295383189347 `" && echo ansible-tmp-1578749779.68-46295383189347="` echo /root/.ansible/tmp/ansible-tmp-1578749779.68-46295383189347 `" ) && sleep 0'
2020-01-11 21:36:19,698 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:36:19,698 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpsBxUn1 TO /root/.ansible/tmp/ansible-tmp-1578749779.68-46295383189347/AnsiballZ_stat.py
2020-01-11 21:36:19,699 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749779.68-46295383189347/ /root/.ansible/tmp/ansible-tmp-1578749779.68-46295383189347/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:19,708 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749779.68-46295383189347/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:36:19,818 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749779.68-46295383189347/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:19,833 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:36:19,873 p=27447 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:36:19,873 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:36:19,891 p=27447 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:36:19,931 p=27447 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:36:19,931 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:36:19,948 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:19,948 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:19,957 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749779.95-183454706244566 `" && echo ansible-tmp-1578749779.95-183454706244566="` echo /root/.ansible/tmp/ansible-tmp-1578749779.95-183454706244566 `" ) && sleep 0'
2020-01-11 21:36:20,207 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:36:20,208 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpC0FTiV TO /root/.ansible/tmp/ansible-tmp-1578749779.95-183454706244566/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:36:20,209 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749779.95-183454706244566/ /root/.ansible/tmp/ansible-tmp-1578749779.95-183454706244566/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:36:20,218 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749779.95-183454706244566/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:36:21,513 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749779.95-183454706244566/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:21,527 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:36:21,568 p=27447 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:36:21,568 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:36:21,586 p=27447 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:36:21,625 p=27447 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:36:21,625 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:36:21,642 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:21,642 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:21,651 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749781.64-157204470679499 `" && echo ansible-tmp-1578749781.64-157204470679499="` echo /root/.ansible/tmp/ansible-tmp-1578749781.64-157204470679499 `" ) && sleep 0'
2020-01-11 21:36:21,895 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:36:21,895 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmp0_gpCs TO /root/.ansible/tmp/ansible-tmp-1578749781.64-157204470679499/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:36:21,896 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749781.64-157204470679499/ /root/.ansible/tmp/ansible-tmp-1578749781.64-157204470679499/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:36:21,906 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749781.64-157204470679499/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:36:22,599 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749781.64-157204470679499/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:22,612 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:36:22,653 p=27447 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:36:22,653 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:36:22,672 p=27447 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:36:22,712 p=27447 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:36:22,712 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:36:22,729 p=27447 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:36:22,769 p=27447 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:36:22,769 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:36:22,848 p=27447 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:36:22,896 p=27447 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:36:22,896 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:36:22,914 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:22,914 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:22,923 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749782.91-81847985625744 `" && echo ansible-tmp-1578749782.91-81847985625744="` echo /root/.ansible/tmp/ansible-tmp-1578749782.91-81847985625744 `" ) && sleep 0'
2020-01-11 21:36:23,165 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:36:23,166 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpH2FSZv TO /root/.ansible/tmp/ansible-tmp-1578749782.91-81847985625744/AnsiballZ_ec2_group_facts.py
2020-01-11 21:36:23,166 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749782.91-81847985625744/ /root/.ansible/tmp/ansible-tmp-1578749782.91-81847985625744/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:23,176 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749782.91-81847985625744/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:23,971 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749782.91-81847985625744/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:23,986 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:36:24,028 p=27447 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:36:24,028 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:36:24,055 p=27447 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:36:24,096 p=27447 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:36:24,096 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:36:24,114 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:24,115 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:24,124 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749784.11-192985568849955 `" && echo ansible-tmp-1578749784.11-192985568849955="` echo /root/.ansible/tmp/ansible-tmp-1578749784.11-192985568849955 `" ) && sleep 0'
2020-01-11 21:36:24,136 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:36:24,137 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmppEaeys TO /root/.ansible/tmp/ansible-tmp-1578749784.11-192985568849955/AnsiballZ_ec2_group_facts.py
2020-01-11 21:36:24,138 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749784.11-192985568849955/ /root/.ansible/tmp/ansible-tmp-1578749784.11-192985568849955/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:24,147 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749784.11-192985568849955/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:24,941 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749784.11-192985568849955/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:24,957 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:36:24,996 p=27447 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:36:24,996 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:36:25,024 p=27447 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:36:25,064 p=27447 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:36:25,065 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:36:25,082 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:25,083 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:25,092 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749785.08-185710443045074 `" && echo ansible-tmp-1578749785.08-185710443045074="` echo /root/.ansible/tmp/ansible-tmp-1578749785.08-185710443045074 `" ) && sleep 0'
2020-01-11 21:36:25,104 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:36:25,104 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpg3_Fti TO /root/.ansible/tmp/ansible-tmp-1578749785.08-185710443045074/AnsiballZ_ec2_group_facts.py
2020-01-11 21:36:25,105 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749785.08-185710443045074/ /root/.ansible/tmp/ansible-tmp-1578749785.08-185710443045074/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:25,114 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749785.08-185710443045074/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:25,914 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749785.08-185710443045074/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:25,929 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:36:25,969 p=27447 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:36:25,969 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:36:25,997 p=27447 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:36:26,037 p=27447 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 21:36:26,037 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:39
2020-01-11 21:36:26,055 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:26,055 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:26,064 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749786.05-136026082169223 `" && echo ansible-tmp-1578749786.05-136026082169223="` echo /root/.ansible/tmp/ansible-tmp-1578749786.05-136026082169223 `" ) && sleep 0'
2020-01-11 21:36:26,076 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:36:26,077 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpLFkRUD TO /root/.ansible/tmp/ansible-tmp-1578749786.05-136026082169223/AnsiballZ_ec2_group_facts.py
2020-01-11 21:36:26,078 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749786.05-136026082169223/ /root/.ansible/tmp/ansible-tmp-1578749786.05-136026082169223/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:26,087 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749786.05-136026082169223/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:26,902 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749786.05-136026082169223/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:26,917 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:36:26,957 p=27447 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:36:26,957 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:46
2020-01-11 21:36:26,984 p=27447 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:36:27,024 p=27447 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-11 21:36:27,025 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:51
2020-01-11 21:36:27,042 p=27447 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:36:27,042 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:36:27,051 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578749787.04-13212829026258 `" && echo ansible-tmp-1578749787.04-13212829026258="` echo /root/.ansible/tmp/ansible-tmp-1578749787.04-13212829026258 `" ) && sleep 0'
2020-01-11 21:36:27,063 p=27447 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:36:27,063 p=27447 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27447FTNvv0/tmpEcKQ_c TO /root/.ansible/tmp/ansible-tmp-1578749787.04-13212829026258/AnsiballZ_ec2_group_facts.py
2020-01-11 21:36:27,064 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578749787.04-13212829026258/ /root/.ansible/tmp/ansible-tmp-1578749787.04-13212829026258/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:27,073 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578749787.04-13212829026258/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:36:27,890 p=27447 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578749787.04-13212829026258/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:36:27,905 p=27447 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-merchant-8081"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8081 to the world", 
            "group_id": "sg-06ac1466b623c31bb", 
            "group_name": "M20-merchant-8081", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:36:27,945 p=27447 u=root |  TASK [ec2 : list of other the security group id.] *********************************************************************************************************
2020-01-11 21:36:27,945 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:57
2020-01-11 21:36:27,978 p=27447 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8081 to the world', u'tags': {u'Environment': u'M20-merchant-8081', u'Name': u'M20-merchant-8081'}, u'group_name': u'M20-merchant-8081', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-06ac1466b623c31bb', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-06ac1466b623c31bb"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8081 to the world", 
        "group_id": "sg-06ac1466b623c31bb", 
        "group_name": "M20-merchant-8081", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-merchant-8081", 
            "Name": "M20-merchant-8081"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:36:28,018 p=27447 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 21:36:28,018 p=27447 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:62
2020-01-11 21:36:28,045 p=27447 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml': line 62, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 21:36:28,047 p=27447 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:36:28,047 p=27447 u=root |  localhost                  : ok=21   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:47:56,824 p=27899 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:47:56,825 p=27899 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:47:56,833 p=27899 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:47:56,833 p=27899 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:47:56,833 p=27899 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:47:56,836 p=27899 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:47:56,838 p=27899 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:47:57,088 p=27899 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:47:57,240 p=27899 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:47:57,250 p=27899 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:47:57,260 p=27899 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:47:57,269 p=27899 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:47:57,278 p=27899 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:47:57,341 p=27899 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:47:57,341 p=27899 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:47:57,371 p=27899 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:47:57,399 p=27899 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:47:57,400 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:47:57,412 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:47:57,412 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:47:57,421 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750477.41-264977970020007 `" && echo ansible-tmp-1578750477.41-264977970020007="` echo /root/.ansible/tmp/ansible-tmp-1578750477.41-264977970020007 `" ) && sleep 0'
2020-01-11 21:47:57,815 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:47:57,816 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmparTl4R TO /root/.ansible/tmp/ansible-tmp-1578750477.41-264977970020007/AnsiballZ_setup.py
2020-01-11 21:47:57,816 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750477.41-264977970020007/ /root/.ansible/tmp/ansible-tmp-1578750477.41-264977970020007/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:47:57,826 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750477.41-264977970020007/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:47:58,294 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750477.41-264977970020007/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:47:58,365 p=27899 u=root |  ok: [localhost]
2020-01-11 21:47:58,366 p=27899 u=root |  META: ran handlers
2020-01-11 21:47:58,406 p=27899 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:47:58,406 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:47:58,423 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:47:58,423 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:47:58,432 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750478.42-161783976745146 `" && echo ansible-tmp-1578750478.42-161783976745146="` echo /root/.ansible/tmp/ansible-tmp-1578750478.42-161783976745146 `" ) && sleep 0'
2020-01-11 21:47:58,676 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:47:58,676 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpLX5FS9 TO /root/.ansible/tmp/ansible-tmp-1578750478.42-161783976745146/AnsiballZ_ec2_key.py
2020-01-11 21:47:58,677 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750478.42-161783976745146/ /root/.ansible/tmp/ansible-tmp-1578750478.42-161783976745146/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:47:58,686 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750478.42-161783976745146/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:47:59,539 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750478.42-161783976745146/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:47:59,552 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:47:59,591 p=27899 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:47:59,592 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:47:59,608 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:47:59,608 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:47:59,617 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750479.61-230976157397876 `" && echo ansible-tmp-1578750479.61-230976157397876="` echo /root/.ansible/tmp/ansible-tmp-1578750479.61-230976157397876 `" ) && sleep 0'
2020-01-11 21:47:59,841 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:47:59,842 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpV8YUxS TO /root/.ansible/tmp/ansible-tmp-1578750479.61-230976157397876/AnsiballZ_stat.py
2020-01-11 21:47:59,843 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750479.61-230976157397876/ /root/.ansible/tmp/ansible-tmp-1578750479.61-230976157397876/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:47:59,852 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750479.61-230976157397876/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:47:59,960 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750479.61-230976157397876/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:47:59,976 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:48:00,016 p=27899 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:48:00,016 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:48:00,037 p=27899 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:48:00,079 p=27899 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:48:00,080 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:48:00,096 p=27899 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:48:00,137 p=27899 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:48:00,137 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:48:00,153 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:00,153 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:00,162 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750480.15-157083180824993 `" && echo ansible-tmp-1578750480.15-157083180824993="` echo /root/.ansible/tmp/ansible-tmp-1578750480.15-157083180824993 `" ) && sleep 0'
2020-01-11 21:48:00,175 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:48:00,175 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpvtsB5R TO /root/.ansible/tmp/ansible-tmp-1578750480.15-157083180824993/AnsiballZ_stat.py
2020-01-11 21:48:00,176 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750480.15-157083180824993/ /root/.ansible/tmp/ansible-tmp-1578750480.15-157083180824993/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:48:00,185 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750480.15-157083180824993/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:48:00,290 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750480.15-157083180824993/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:00,307 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:48:00,347 p=27899 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:48:00,347 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:48:00,364 p=27899 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:48:00,403 p=27899 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:48:00,404 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:48:00,420 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:00,420 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:00,429 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750480.42-199269747701683 `" && echo ansible-tmp-1578750480.42-199269747701683="` echo /root/.ansible/tmp/ansible-tmp-1578750480.42-199269747701683 `" ) && sleep 0'
2020-01-11 21:48:00,441 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:48:00,441 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpO5qg7f TO /root/.ansible/tmp/ansible-tmp-1578750480.42-199269747701683/AnsiballZ_stat.py
2020-01-11 21:48:00,442 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750480.42-199269747701683/ /root/.ansible/tmp/ansible-tmp-1578750480.42-199269747701683/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:48:00,452 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750480.42-199269747701683/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:48:00,562 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750480.42-199269747701683/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:00,578 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:48:00,617 p=27899 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:48:00,617 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:48:00,635 p=27899 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:48:00,675 p=27899 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:48:00,675 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:48:00,692 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:00,692 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:00,701 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750480.69-279529265303030 `" && echo ansible-tmp-1578750480.69-279529265303030="` echo /root/.ansible/tmp/ansible-tmp-1578750480.69-279529265303030 `" ) && sleep 0'
2020-01-11 21:48:00,714 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:48:00,714 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpbAF_1P TO /root/.ansible/tmp/ansible-tmp-1578750480.69-279529265303030/AnsiballZ_stat.py
2020-01-11 21:48:00,715 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750480.69-279529265303030/ /root/.ansible/tmp/ansible-tmp-1578750480.69-279529265303030/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:48:00,724 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750480.69-279529265303030/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:48:00,836 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750480.69-279529265303030/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:00,852 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:48:00,892 p=27899 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:48:00,893 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:48:00,910 p=27899 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:48:00,950 p=27899 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:48:00,950 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:48:00,967 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:00,967 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:00,976 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750480.97-30981467054024 `" && echo ansible-tmp-1578750480.97-30981467054024="` echo /root/.ansible/tmp/ansible-tmp-1578750480.97-30981467054024 `" ) && sleep 0'
2020-01-11 21:48:01,223 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:48:01,223 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpW6Vrol TO /root/.ansible/tmp/ansible-tmp-1578750480.97-30981467054024/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:48:01,224 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750480.97-30981467054024/ /root/.ansible/tmp/ansible-tmp-1578750480.97-30981467054024/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:48:01,233 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750480.97-30981467054024/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:48:02,548 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750480.97-30981467054024/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:02,565 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:48:02,604 p=27899 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:48:02,605 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:48:02,623 p=27899 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:48:02,662 p=27899 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:48:02,662 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:48:02,679 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:02,679 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:02,688 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750482.68-40695301492221 `" && echo ansible-tmp-1578750482.68-40695301492221="` echo /root/.ansible/tmp/ansible-tmp-1578750482.68-40695301492221 `" ) && sleep 0'
2020-01-11 21:48:02,927 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:48:02,927 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmp4vlmVW TO /root/.ansible/tmp/ansible-tmp-1578750482.68-40695301492221/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:48:02,928 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750482.68-40695301492221/ /root/.ansible/tmp/ansible-tmp-1578750482.68-40695301492221/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:48:02,937 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750482.68-40695301492221/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:48:03,663 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750482.68-40695301492221/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:03,676 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:48:03,716 p=27899 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:48:03,716 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:48:03,734 p=27899 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:48:03,774 p=27899 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:48:03,774 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:48:03,791 p=27899 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:48:03,831 p=27899 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:48:03,831 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:48:03,908 p=27899 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:48:03,955 p=27899 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:48:03,955 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:48:03,973 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:03,974 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:03,983 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750483.97-61909135979420 `" && echo ansible-tmp-1578750483.97-61909135979420="` echo /root/.ansible/tmp/ansible-tmp-1578750483.97-61909135979420 `" ) && sleep 0'
2020-01-11 21:48:04,222 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:48:04,223 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmp1Tiglc TO /root/.ansible/tmp/ansible-tmp-1578750483.97-61909135979420/AnsiballZ_ec2_group_facts.py
2020-01-11 21:48:04,223 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750483.97-61909135979420/ /root/.ansible/tmp/ansible-tmp-1578750483.97-61909135979420/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:04,232 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750483.97-61909135979420/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:05,083 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750483.97-61909135979420/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:05,099 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:48:05,138 p=27899 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:48:05,138 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:48:05,167 p=27899 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:48:05,207 p=27899 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:48:05,208 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:48:05,226 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:05,226 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:05,235 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750485.23-159340430204917 `" && echo ansible-tmp-1578750485.23-159340430204917="` echo /root/.ansible/tmp/ansible-tmp-1578750485.23-159340430204917 `" ) && sleep 0'
2020-01-11 21:48:05,246 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:48:05,246 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmp6Tjlrf TO /root/.ansible/tmp/ansible-tmp-1578750485.23-159340430204917/AnsiballZ_ec2_group_facts.py
2020-01-11 21:48:05,247 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750485.23-159340430204917/ /root/.ansible/tmp/ansible-tmp-1578750485.23-159340430204917/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:05,255 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750485.23-159340430204917/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:06,083 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750485.23-159340430204917/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:06,100 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:48:06,139 p=27899 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:48:06,139 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:48:06,167 p=27899 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:48:06,208 p=27899 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:48:06,209 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:48:06,226 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:06,226 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:06,235 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750486.23-201517698756626 `" && echo ansible-tmp-1578750486.23-201517698756626="` echo /root/.ansible/tmp/ansible-tmp-1578750486.23-201517698756626 `" ) && sleep 0'
2020-01-11 21:48:06,247 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:48:06,247 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpembt29 TO /root/.ansible/tmp/ansible-tmp-1578750486.23-201517698756626/AnsiballZ_ec2_group_facts.py
2020-01-11 21:48:06,248 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750486.23-201517698756626/ /root/.ansible/tmp/ansible-tmp-1578750486.23-201517698756626/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:06,257 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750486.23-201517698756626/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:07,038 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750486.23-201517698756626/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:07,053 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:48:07,093 p=27899 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:48:07,093 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:48:07,120 p=27899 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:48:07,160 p=27899 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 21:48:07,161 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 21:48:07,178 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:07,178 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:07,187 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750487.18-163181009758597 `" && echo ansible-tmp-1578750487.18-163181009758597="` echo /root/.ansible/tmp/ansible-tmp-1578750487.18-163181009758597 `" ) && sleep 0'
2020-01-11 21:48:07,198 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:48:07,199 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpQhnxc3 TO /root/.ansible/tmp/ansible-tmp-1578750487.18-163181009758597/AnsiballZ_ec2_group_facts.py
2020-01-11 21:48:07,200 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750487.18-163181009758597/ /root/.ansible/tmp/ansible-tmp-1578750487.18-163181009758597/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:07,208 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750487.18-163181009758597/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:07,998 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750487.18-163181009758597/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:08,013 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:48:08,053 p=27899 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:48:08,053 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:45
2020-01-11 21:48:08,080 p=27899 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:48:08,120 p=27899 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-11 21:48:08,120 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:50
2020-01-11 21:48:08,137 p=27899 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:48:08,138 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:48:08,146 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750488.14-216434960741473 `" && echo ansible-tmp-1578750488.14-216434960741473="` echo /root/.ansible/tmp/ansible-tmp-1578750488.14-216434960741473 `" ) && sleep 0'
2020-01-11 21:48:08,158 p=27899 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:48:08,158 p=27899 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-27899o7HXWQ/tmpKYIEJT TO /root/.ansible/tmp/ansible-tmp-1578750488.14-216434960741473/AnsiballZ_ec2_group_facts.py
2020-01-11 21:48:08,159 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750488.14-216434960741473/ /root/.ansible/tmp/ansible-tmp-1578750488.14-216434960741473/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:08,168 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750488.14-216434960741473/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:48:08,986 p=27899 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750488.14-216434960741473/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:48:09,001 p=27899 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-merchant-8081"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8081 to the world", 
            "group_id": "sg-06ac1466b623c31bb", 
            "group_name": "M20-merchant-8081", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:48:09,040 p=27899 u=root |  TASK [ec2 : list of other the security group id.] *********************************************************************************************************
2020-01-11 21:48:09,040 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:56
2020-01-11 21:48:09,073 p=27899 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8081 to the world', u'tags': {u'Environment': u'M20-merchant-8081', u'Name': u'M20-merchant-8081'}, u'group_name': u'M20-merchant-8081', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-06ac1466b623c31bb', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-06ac1466b623c31bb"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8081 to the world", 
        "group_id": "sg-06ac1466b623c31bb", 
        "group_name": "M20-merchant-8081", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-merchant-8081", 
            "Name": "M20-merchant-8081"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:48:09,113 p=27899 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 21:48:09,113 p=27899 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:61
2020-01-11 21:48:09,137 p=27899 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml': line 61, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 21:48:09,142 p=27899 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:48:09,142 p=27899 u=root |  localhost                  : ok=21   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:55:05,643 p=28325 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:55:05,643 p=28325 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:55:05,651 p=28325 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:55:05,651 p=28325 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:55:05,652 p=28325 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:55:05,655 p=28325 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:55:05,657 p=28325 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:55:05,901 p=28325 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:55:06,052 p=28325 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:55:06,061 p=28325 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:55:06,071 p=28325 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:55:06,080 p=28325 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:55:06,090 p=28325 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:55:06,153 p=28325 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:55:06,153 p=28325 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:55:06,183 p=28325 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:55:06,211 p=28325 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:55:06,212 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:55:06,223 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:06,224 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:06,232 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750906.22-27098085347560 `" && echo ansible-tmp-1578750906.22-27098085347560="` echo /root/.ansible/tmp/ansible-tmp-1578750906.22-27098085347560 `" ) && sleep 0'
2020-01-11 21:55:06,621 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:55:06,621 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpuz_TWW TO /root/.ansible/tmp/ansible-tmp-1578750906.22-27098085347560/AnsiballZ_setup.py
2020-01-11 21:55:06,622 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750906.22-27098085347560/ /root/.ansible/tmp/ansible-tmp-1578750906.22-27098085347560/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:55:06,631 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750906.22-27098085347560/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:55:07,219 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750906.22-27098085347560/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:07,291 p=28325 u=root |  ok: [localhost]
2020-01-11 21:55:07,292 p=28325 u=root |  META: ran handlers
2020-01-11 21:55:07,333 p=28325 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:55:07,333 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:55:07,350 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:07,350 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:07,359 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750907.35-256059129837434 `" && echo ansible-tmp-1578750907.35-256059129837434="` echo /root/.ansible/tmp/ansible-tmp-1578750907.35-256059129837434 `" ) && sleep 0'
2020-01-11 21:55:07,602 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:55:07,602 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpxV2v4V TO /root/.ansible/tmp/ansible-tmp-1578750907.35-256059129837434/AnsiballZ_ec2_key.py
2020-01-11 21:55:07,603 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750907.35-256059129837434/ /root/.ansible/tmp/ansible-tmp-1578750907.35-256059129837434/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:55:07,612 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750907.35-256059129837434/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:55:08,570 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750907.35-256059129837434/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:08,583 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:55:08,623 p=28325 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:55:08,623 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:55:08,639 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:08,639 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:08,648 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750908.64-226733273222538 `" && echo ansible-tmp-1578750908.64-226733273222538="` echo /root/.ansible/tmp/ansible-tmp-1578750908.64-226733273222538 `" ) && sleep 0'
2020-01-11 21:55:08,864 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:55:08,864 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmp6HTjeT TO /root/.ansible/tmp/ansible-tmp-1578750908.64-226733273222538/AnsiballZ_stat.py
2020-01-11 21:55:08,865 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750908.64-226733273222538/ /root/.ansible/tmp/ansible-tmp-1578750908.64-226733273222538/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:08,874 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750908.64-226733273222538/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:08,978 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750908.64-226733273222538/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:08,995 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:55:09,034 p=28325 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:55:09,034 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:55:09,053 p=28325 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:55:09,095 p=28325 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:55:09,095 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:55:09,112 p=28325 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:55:09,151 p=28325 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:55:09,152 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:55:09,167 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:09,167 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:09,176 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750909.17-114460683664049 `" && echo ansible-tmp-1578750909.17-114460683664049="` echo /root/.ansible/tmp/ansible-tmp-1578750909.17-114460683664049 `" ) && sleep 0'
2020-01-11 21:55:09,188 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:55:09,188 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpj9gdTt TO /root/.ansible/tmp/ansible-tmp-1578750909.17-114460683664049/AnsiballZ_stat.py
2020-01-11 21:55:09,189 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750909.17-114460683664049/ /root/.ansible/tmp/ansible-tmp-1578750909.17-114460683664049/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:09,198 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750909.17-114460683664049/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:09,303 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750909.17-114460683664049/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:09,319 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:55:09,359 p=28325 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:55:09,359 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:55:09,375 p=28325 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:55:09,415 p=28325 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:55:09,415 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:55:09,432 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:09,432 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:09,441 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750909.43-133886849851209 `" && echo ansible-tmp-1578750909.43-133886849851209="` echo /root/.ansible/tmp/ansible-tmp-1578750909.43-133886849851209 `" ) && sleep 0'
2020-01-11 21:55:09,452 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:55:09,453 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpBOIF6e TO /root/.ansible/tmp/ansible-tmp-1578750909.43-133886849851209/AnsiballZ_stat.py
2020-01-11 21:55:09,453 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750909.43-133886849851209/ /root/.ansible/tmp/ansible-tmp-1578750909.43-133886849851209/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:09,462 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750909.43-133886849851209/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:09,570 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750909.43-133886849851209/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:09,586 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:55:09,626 p=28325 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:55:09,626 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:55:09,643 p=28325 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:55:09,683 p=28325 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:55:09,683 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:55:09,699 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:09,699 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:09,708 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750909.7-192035708520614 `" && echo ansible-tmp-1578750909.7-192035708520614="` echo /root/.ansible/tmp/ansible-tmp-1578750909.7-192035708520614 `" ) && sleep 0'
2020-01-11 21:55:09,719 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:55:09,720 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpIg8ld_ TO /root/.ansible/tmp/ansible-tmp-1578750909.7-192035708520614/AnsiballZ_stat.py
2020-01-11 21:55:09,721 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750909.7-192035708520614/ /root/.ansible/tmp/ansible-tmp-1578750909.7-192035708520614/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:09,729 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750909.7-192035708520614/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:55:09,837 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750909.7-192035708520614/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:09,852 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:55:09,892 p=28325 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:55:09,892 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:55:09,910 p=28325 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:55:09,950 p=28325 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:55:09,950 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:55:09,967 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:09,967 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:09,976 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750909.97-225472547579189 `" && echo ansible-tmp-1578750909.97-225472547579189="` echo /root/.ansible/tmp/ansible-tmp-1578750909.97-225472547579189 `" ) && sleep 0'
2020-01-11 21:55:10,219 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:55:10,220 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpj_Kn5H TO /root/.ansible/tmp/ansible-tmp-1578750909.97-225472547579189/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:55:10,221 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750909.97-225472547579189/ /root/.ansible/tmp/ansible-tmp-1578750909.97-225472547579189/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:55:10,230 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750909.97-225472547579189/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:55:11,571 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750909.97-225472547579189/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:11,585 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:55:11,625 p=28325 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:55:11,625 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:55:11,644 p=28325 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:55:11,683 p=28325 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:55:11,683 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:55:11,700 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:11,700 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:11,709 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750911.7-131827786327065 `" && echo ansible-tmp-1578750911.7-131827786327065="` echo /root/.ansible/tmp/ansible-tmp-1578750911.7-131827786327065 `" ) && sleep 0'
2020-01-11 21:55:11,952 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:55:11,953 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpHjWnPo TO /root/.ansible/tmp/ansible-tmp-1578750911.7-131827786327065/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:55:11,953 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750911.7-131827786327065/ /root/.ansible/tmp/ansible-tmp-1578750911.7-131827786327065/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:55:11,963 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750911.7-131827786327065/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:55:12,871 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750911.7-131827786327065/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:12,884 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:55:12,925 p=28325 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:55:12,925 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:55:12,944 p=28325 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:55:12,984 p=28325 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:55:12,984 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:55:13,001 p=28325 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:55:13,041 p=28325 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:55:13,041 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 21:55:13,120 p=28325 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 21:55:13,168 p=28325 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:55:13,168 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 21:55:13,186 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:13,186 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:13,195 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750913.19-259215325306744 `" && echo ansible-tmp-1578750913.19-259215325306744="` echo /root/.ansible/tmp/ansible-tmp-1578750913.19-259215325306744 `" ) && sleep 0'
2020-01-11 21:55:13,433 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:55:13,434 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmprW_249 TO /root/.ansible/tmp/ansible-tmp-1578750913.19-259215325306744/AnsiballZ_ec2_group_facts.py
2020-01-11 21:55:13,435 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750913.19-259215325306744/ /root/.ansible/tmp/ansible-tmp-1578750913.19-259215325306744/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:13,444 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750913.19-259215325306744/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:14,267 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750913.19-259215325306744/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:14,284 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:55:14,324 p=28325 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:55:14,324 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 21:55:14,352 p=28325 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:55:14,393 p=28325 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:55:14,394 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 21:55:14,412 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:14,413 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:14,422 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750914.41-125003990688926 `" && echo ansible-tmp-1578750914.41-125003990688926="` echo /root/.ansible/tmp/ansible-tmp-1578750914.41-125003990688926 `" ) && sleep 0'
2020-01-11 21:55:14,434 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:55:14,435 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpVs1kiX TO /root/.ansible/tmp/ansible-tmp-1578750914.41-125003990688926/AnsiballZ_ec2_group_facts.py
2020-01-11 21:55:14,436 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750914.41-125003990688926/ /root/.ansible/tmp/ansible-tmp-1578750914.41-125003990688926/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:14,445 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750914.41-125003990688926/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:15,273 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750914.41-125003990688926/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:15,289 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:55:15,329 p=28325 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:55:15,329 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 21:55:15,357 p=28325 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:55:15,397 p=28325 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:55:15,397 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 21:55:15,415 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:15,416 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:15,425 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750915.42-47331004063160 `" && echo ansible-tmp-1578750915.42-47331004063160="` echo /root/.ansible/tmp/ansible-tmp-1578750915.42-47331004063160 `" ) && sleep 0'
2020-01-11 21:55:15,437 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:55:15,438 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpX67ObQ TO /root/.ansible/tmp/ansible-tmp-1578750915.42-47331004063160/AnsiballZ_ec2_group_facts.py
2020-01-11 21:55:15,439 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750915.42-47331004063160/ /root/.ansible/tmp/ansible-tmp-1578750915.42-47331004063160/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:15,448 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750915.42-47331004063160/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:16,268 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750915.42-47331004063160/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:16,282 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:55:16,322 p=28325 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:55:16,322 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 21:55:16,349 p=28325 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:55:16,391 p=28325 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 21:55:16,391 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 21:55:16,409 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:16,409 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:16,418 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750916.41-78125486137806 `" && echo ansible-tmp-1578750916.41-78125486137806="` echo /root/.ansible/tmp/ansible-tmp-1578750916.41-78125486137806 `" ) && sleep 0'
2020-01-11 21:55:16,430 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:55:16,430 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpRBe7kf TO /root/.ansible/tmp/ansible-tmp-1578750916.41-78125486137806/AnsiballZ_ec2_group_facts.py
2020-01-11 21:55:16,431 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750916.41-78125486137806/ /root/.ansible/tmp/ansible-tmp-1578750916.41-78125486137806/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:16,440 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750916.41-78125486137806/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:17,245 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750916.41-78125486137806/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:17,260 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:55:17,300 p=28325 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:55:17,300 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:45
2020-01-11 21:55:17,326 p=28325 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:55:17,366 p=28325 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-11 21:55:17,366 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:50
2020-01-11 21:55:17,384 p=28325 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:55:17,384 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:55:17,393 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578750917.38-35061835448024 `" && echo ansible-tmp-1578750917.38-35061835448024="` echo /root/.ansible/tmp/ansible-tmp-1578750917.38-35061835448024 `" ) && sleep 0'
2020-01-11 21:55:17,405 p=28325 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:55:17,405 p=28325 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-28325doaTlE/tmpVydVtC TO /root/.ansible/tmp/ansible-tmp-1578750917.38-35061835448024/AnsiballZ_ec2_group_facts.py
2020-01-11 21:55:17,406 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578750917.38-35061835448024/ /root/.ansible/tmp/ansible-tmp-1578750917.38-35061835448024/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:17,415 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578750917.38-35061835448024/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:55:18,215 p=28325 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578750917.38-35061835448024/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:55:18,231 p=28325 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-merchant-8081"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8081 to the world", 
            "group_id": "sg-06ac1466b623c31bb", 
            "group_name": "M20-merchant-8081", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:55:18,270 p=28325 u=root |  TASK [ec2 : list of other the security group id.] *********************************************************************************************************
2020-01-11 21:55:18,270 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:56
2020-01-11 21:55:18,303 p=28325 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8081 to the world', u'tags': {u'Environment': u'M20-merchant-8081', u'Name': u'M20-merchant-8081'}, u'group_name': u'M20-merchant-8081', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-06ac1466b623c31bb', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-06ac1466b623c31bb"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8081 to the world", 
        "group_id": "sg-06ac1466b623c31bb", 
        "group_name": "M20-merchant-8081", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-merchant-8081", 
            "Name": "M20-merchant-8081"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:55:18,343 p=28325 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 21:55:18,344 p=28325 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:61
2020-01-11 21:55:18,367 p=28325 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml': line 61, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 21:55:18,372 p=28325 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:55:18,372 p=28325 u=root |  localhost                  : ok=21   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
2020-01-11 21:59:11,252 p=28743 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 21:59:11,252 p=28743 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 21:59:11,260 p=28743 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:59:11,260 p=28743 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:59:11,261 p=28743 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 21:59:11,264 p=28743 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 21:59:11,266 p=28743 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 21:59:11,513 p=28743 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:59:11,666 p=28743 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:59:11,675 p=28743 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 21:59:11,685 p=28743 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 21:59:11,747 p=28743 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 21:59:11,747 p=28743 u=root |  1 plays in 03.ec2.yml
2020-01-11 21:59:11,777 p=28743 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 21:59:11,799 p=28743 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 21:59:11,800 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 21:59:11,810 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:11,811 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:11,820 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751151.81-49968912743507 `" && echo ansible-tmp-1578751151.81-49968912743507="` echo /root/.ansible/tmp/ansible-tmp-1578751151.81-49968912743507 `" ) && sleep 0'
2020-01-11 21:59:12,199 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 21:59:12,200 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmpvB5Vu0 TO /root/.ansible/tmp/ansible-tmp-1578751151.81-49968912743507/AnsiballZ_setup.py
2020-01-11 21:59:12,201 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751151.81-49968912743507/ /root/.ansible/tmp/ansible-tmp-1578751151.81-49968912743507/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:59:12,210 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751151.81-49968912743507/AnsiballZ_setup.py && sleep 0'
2020-01-11 21:59:12,869 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751151.81-49968912743507/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:12,939 p=28743 u=root |  ok: [localhost]
2020-01-11 21:59:12,940 p=28743 u=root |  META: ran handlers
2020-01-11 21:59:12,981 p=28743 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 21:59:12,981 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 21:59:12,997 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:12,997 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:13,006 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751153.0-61376511796971 `" && echo ansible-tmp-1578751153.0-61376511796971="` echo /root/.ansible/tmp/ansible-tmp-1578751153.0-61376511796971 `" ) && sleep 0'
2020-01-11 21:59:13,252 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 21:59:13,253 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmp7s6K5P TO /root/.ansible/tmp/ansible-tmp-1578751153.0-61376511796971/AnsiballZ_ec2_key.py
2020-01-11 21:59:13,253 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751153.0-61376511796971/ /root/.ansible/tmp/ansible-tmp-1578751153.0-61376511796971/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:59:13,263 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751153.0-61376511796971/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 21:59:14,272 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751153.0-61376511796971/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:14,286 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 21:59:14,325 p=28743 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 21:59:14,325 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 21:59:14,342 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:14,342 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:14,351 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751154.34-228416085797929 `" && echo ansible-tmp-1578751154.34-228416085797929="` echo /root/.ansible/tmp/ansible-tmp-1578751154.34-228416085797929 `" ) && sleep 0'
2020-01-11 21:59:14,574 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:59:14,574 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmpoKiuFk TO /root/.ansible/tmp/ansible-tmp-1578751154.34-228416085797929/AnsiballZ_stat.py
2020-01-11 21:59:14,575 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751154.34-228416085797929/ /root/.ansible/tmp/ansible-tmp-1578751154.34-228416085797929/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:14,585 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751154.34-228416085797929/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:14,692 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751154.34-228416085797929/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:14,710 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:59:14,749 p=28743 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:59:14,749 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 21:59:14,766 p=28743 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:59:14,807 p=28743 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 21:59:14,807 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 21:59:14,823 p=28743 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:59:14,863 p=28743 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 21:59:14,863 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 21:59:14,882 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:14,883 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:14,892 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751154.88-20661935734669 `" && echo ansible-tmp-1578751154.88-20661935734669="` echo /root/.ansible/tmp/ansible-tmp-1578751154.88-20661935734669 `" ) && sleep 0'
2020-01-11 21:59:14,904 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:59:14,905 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmpW5PATR TO /root/.ansible/tmp/ansible-tmp-1578751154.88-20661935734669/AnsiballZ_stat.py
2020-01-11 21:59:14,905 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751154.88-20661935734669/ /root/.ansible/tmp/ansible-tmp-1578751154.88-20661935734669/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:14,914 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751154.88-20661935734669/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:15,021 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751154.88-20661935734669/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:15,038 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:59:15,080 p=28743 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 21:59:15,081 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 21:59:15,098 p=28743 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:59:15,138 p=28743 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 21:59:15,138 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 21:59:15,154 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:15,154 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:15,163 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751155.15-65894361401936 `" && echo ansible-tmp-1578751155.15-65894361401936="` echo /root/.ansible/tmp/ansible-tmp-1578751155.15-65894361401936 `" ) && sleep 0'
2020-01-11 21:59:15,175 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:59:15,176 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmpEWreGE TO /root/.ansible/tmp/ansible-tmp-1578751155.15-65894361401936/AnsiballZ_stat.py
2020-01-11 21:59:15,176 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751155.15-65894361401936/ /root/.ansible/tmp/ansible-tmp-1578751155.15-65894361401936/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:15,185 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751155.15-65894361401936/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:15,295 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751155.15-65894361401936/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:15,311 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:59:15,350 p=28743 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 21:59:15,350 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 21:59:15,369 p=28743 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:59:15,408 p=28743 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 21:59:15,408 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 21:59:15,424 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:15,424 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:15,433 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751155.42-113249060377160 `" && echo ansible-tmp-1578751155.42-113249060377160="` echo /root/.ansible/tmp/ansible-tmp-1578751155.42-113249060377160 `" ) && sleep 0'
2020-01-11 21:59:15,445 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 21:59:15,445 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmp4enN5h TO /root/.ansible/tmp/ansible-tmp-1578751155.42-113249060377160/AnsiballZ_stat.py
2020-01-11 21:59:15,446 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751155.42-113249060377160/ /root/.ansible/tmp/ansible-tmp-1578751155.42-113249060377160/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:15,455 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751155.42-113249060377160/AnsiballZ_stat.py && sleep 0'
2020-01-11 21:59:15,565 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751155.42-113249060377160/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:15,580 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 21:59:15,620 p=28743 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 21:59:15,621 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 21:59:15,638 p=28743 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 21:59:15,678 p=28743 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 21:59:15,679 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 21:59:15,695 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:15,695 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:15,704 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751155.69-188418477239003 `" && echo ansible-tmp-1578751155.69-188418477239003="` echo /root/.ansible/tmp/ansible-tmp-1578751155.69-188418477239003 `" ) && sleep 0'
2020-01-11 21:59:15,944 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 21:59:15,944 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmplkiRFa TO /root/.ansible/tmp/ansible-tmp-1578751155.69-188418477239003/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 21:59:15,945 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751155.69-188418477239003/ /root/.ansible/tmp/ansible-tmp-1578751155.69-188418477239003/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:59:15,955 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751155.69-188418477239003/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 21:59:17,256 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751155.69-188418477239003/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:17,271 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:59:17,311 p=28743 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 21:59:17,311 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 21:59:17,329 p=28743 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 21:59:17,369 p=28743 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 21:59:17,369 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 21:59:17,386 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:17,386 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:17,395 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751157.39-267861539264749 `" && echo ansible-tmp-1578751157.39-267861539264749="` echo /root/.ansible/tmp/ansible-tmp-1578751157.39-267861539264749 `" ) && sleep 0'
2020-01-11 21:59:17,646 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 21:59:17,647 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmpvtwnay TO /root/.ansible/tmp/ansible-tmp-1578751157.39-267861539264749/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 21:59:17,647 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751157.39-267861539264749/ /root/.ansible/tmp/ansible-tmp-1578751157.39-267861539264749/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:59:17,657 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751157.39-267861539264749/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 21:59:18,376 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751157.39-267861539264749/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:18,390 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 21:59:18,429 p=28743 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 21:59:18,429 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 21:59:18,448 p=28743 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 21:59:18,488 p=28743 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 21:59:18,488 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 21:59:18,563 p=28743 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml for localhost
2020-01-11 21:59:18,613 p=28743 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 21:59:18,613 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:2
2020-01-11 21:59:18,630 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:18,631 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:18,639 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751158.63-15515673492721 `" && echo ansible-tmp-1578751158.63-15515673492721="` echo /root/.ansible/tmp/ansible-tmp-1578751158.63-15515673492721 `" ) && sleep 0'
2020-01-11 21:59:18,877 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:59:18,877 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmpDAEGnS TO /root/.ansible/tmp/ansible-tmp-1578751158.63-15515673492721/AnsiballZ_ec2_group_facts.py
2020-01-11 21:59:18,878 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751158.63-15515673492721/ /root/.ansible/tmp/ansible-tmp-1578751158.63-15515673492721/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:18,888 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751158.63-15515673492721/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:19,732 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751158.63-15515673492721/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:19,748 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:59:19,787 p=28743 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 21:59:19,788 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:9
2020-01-11 21:59:19,819 p=28743 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:59:19,859 p=28743 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 21:59:19,859 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:14
2020-01-11 21:59:19,877 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:19,878 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:19,887 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751159.88-243955646994488 `" && echo ansible-tmp-1578751159.88-243955646994488="` echo /root/.ansible/tmp/ansible-tmp-1578751159.88-243955646994488 `" ) && sleep 0'
2020-01-11 21:59:19,899 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:59:19,899 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmphQTXyn TO /root/.ansible/tmp/ansible-tmp-1578751159.88-243955646994488/AnsiballZ_ec2_group_facts.py
2020-01-11 21:59:19,900 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751159.88-243955646994488/ /root/.ansible/tmp/ansible-tmp-1578751159.88-243955646994488/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:19,909 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751159.88-243955646994488/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:20,728 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751159.88-243955646994488/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:20,743 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:59:20,782 p=28743 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 21:59:20,782 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:21
2020-01-11 21:59:20,810 p=28743 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:59:20,851 p=28743 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 21:59:20,851 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:26
2020-01-11 21:59:20,869 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:20,869 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:20,878 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751160.87-150233128848120 `" && echo ansible-tmp-1578751160.87-150233128848120="` echo /root/.ansible/tmp/ansible-tmp-1578751160.87-150233128848120 `" ) && sleep 0'
2020-01-11 21:59:20,890 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:59:20,891 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmpONp2HB TO /root/.ansible/tmp/ansible-tmp-1578751160.87-150233128848120/AnsiballZ_ec2_group_facts.py
2020-01-11 21:59:20,891 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751160.87-150233128848120/ /root/.ansible/tmp/ansible-tmp-1578751160.87-150233128848120/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:20,900 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751160.87-150233128848120/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:21,707 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751160.87-150233128848120/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:21,722 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:59:21,761 p=28743 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 21:59:21,762 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:33
2020-01-11 21:59:21,789 p=28743 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:59:21,830 p=28743 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 21:59:21,830 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:39
2020-01-11 21:59:21,847 p=28743 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 21:59:21,848 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 21:59:21,857 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751161.85-89072374800032 `" && echo ansible-tmp-1578751161.85-89072374800032="` echo /root/.ansible/tmp/ansible-tmp-1578751161.85-89072374800032 `" ) && sleep 0'
2020-01-11 21:59:21,869 p=28743 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 21:59:21,870 p=28743 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-287432oAzbS/tmppZXtGa TO /root/.ansible/tmp/ansible-tmp-1578751161.85-89072374800032/AnsiballZ_ec2_group_facts.py
2020-01-11 21:59:21,870 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751161.85-89072374800032/ /root/.ansible/tmp/ansible-tmp-1578751161.85-89072374800032/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:21,879 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751161.85-89072374800032/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 21:59:22,682 p=28743 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751161.85-89072374800032/ > /dev/null 2>&1 && sleep 0'
2020-01-11 21:59:22,697 p=28743 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 21:59:22,736 p=28743 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 21:59:22,737 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:46
2020-01-11 21:59:22,763 p=28743 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 21:59:22,802 p=28743 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 21:59:22,802 p=28743 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:51
2020-01-11 21:59:22,822 p=28743 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 1\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml': line 51, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 21:59:22,824 p=28743 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 21:59:22,824 p=28743 u=root |  localhost                  : ok=19   changed=0    unreachable=0    failed=1    skipped=5    rescued=0    ignored=0   
2020-01-11 22:01:33,256 p=29139 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 22:01:33,257 p=29139 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 22:01:33,265 p=29139 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 22:01:33,265 p=29139 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 22:01:33,265 p=29139 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 22:01:33,268 p=29139 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 22:01:33,270 p=29139 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 22:01:33,520 p=29139 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 22:01:33,678 p=29139 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 22:01:33,688 p=29139 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 22:01:33,698 p=29139 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 22:01:33,762 p=29139 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 22:01:33,762 p=29139 u=root |  1 plays in 03.ec2.yml
2020-01-11 22:01:33,792 p=29139 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 22:01:33,814 p=29139 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 22:01:33,815 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 22:01:33,826 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:33,826 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:33,834 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751293.83-201995712298548 `" && echo ansible-tmp-1578751293.83-201995712298548="` echo /root/.ansible/tmp/ansible-tmp-1578751293.83-201995712298548 `" ) && sleep 0'
2020-01-11 22:01:34,213 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 22:01:34,213 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpSWxi29 TO /root/.ansible/tmp/ansible-tmp-1578751293.83-201995712298548/AnsiballZ_setup.py
2020-01-11 22:01:34,214 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751293.83-201995712298548/ /root/.ansible/tmp/ansible-tmp-1578751293.83-201995712298548/AnsiballZ_setup.py && sleep 0'
2020-01-11 22:01:34,223 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751293.83-201995712298548/AnsiballZ_setup.py && sleep 0'
2020-01-11 22:01:34,694 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751293.83-201995712298548/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:34,765 p=29139 u=root |  ok: [localhost]
2020-01-11 22:01:34,766 p=29139 u=root |  META: ran handlers
2020-01-11 22:01:34,807 p=29139 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 22:01:34,807 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 22:01:34,823 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:34,824 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:34,832 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751294.82-26696211562159 `" && echo ansible-tmp-1578751294.82-26696211562159="` echo /root/.ansible/tmp/ansible-tmp-1578751294.82-26696211562159 `" ) && sleep 0'
2020-01-11 22:01:35,077 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 22:01:35,077 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpqgeDyV TO /root/.ansible/tmp/ansible-tmp-1578751294.82-26696211562159/AnsiballZ_ec2_key.py
2020-01-11 22:01:35,078 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751294.82-26696211562159/ /root/.ansible/tmp/ansible-tmp-1578751294.82-26696211562159/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 22:01:35,087 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751294.82-26696211562159/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 22:01:35,916 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751294.82-26696211562159/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:35,929 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 22:01:35,968 p=29139 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 22:01:35,969 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 22:01:35,985 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:35,985 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:35,994 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751295.98-51408366814502 `" && echo ansible-tmp-1578751295.98-51408366814502="` echo /root/.ansible/tmp/ansible-tmp-1578751295.98-51408366814502 `" ) && sleep 0'
2020-01-11 22:01:36,210 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 22:01:36,210 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpJS_Ce8 TO /root/.ansible/tmp/ansible-tmp-1578751295.98-51408366814502/AnsiballZ_stat.py
2020-01-11 22:01:36,211 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751295.98-51408366814502/ /root/.ansible/tmp/ansible-tmp-1578751295.98-51408366814502/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:36,220 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751295.98-51408366814502/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:36,324 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751295.98-51408366814502/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:36,340 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 22:01:36,379 p=29139 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 22:01:36,379 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 22:01:36,397 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 22:01:36,437 p=29139 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 22:01:36,437 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 22:01:36,453 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 22:01:36,493 p=29139 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 22:01:36,493 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 22:01:36,512 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:36,512 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:36,521 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751296.51-220765053725732 `" && echo ansible-tmp-1578751296.51-220765053725732="` echo /root/.ansible/tmp/ansible-tmp-1578751296.51-220765053725732 `" ) && sleep 0'
2020-01-11 22:01:36,533 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 22:01:36,533 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpJS45Ol TO /root/.ansible/tmp/ansible-tmp-1578751296.51-220765053725732/AnsiballZ_stat.py
2020-01-11 22:01:36,534 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751296.51-220765053725732/ /root/.ansible/tmp/ansible-tmp-1578751296.51-220765053725732/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:36,543 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751296.51-220765053725732/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:36,645 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751296.51-220765053725732/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:36,660 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 22:01:36,702 p=29139 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 22:01:36,702 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 22:01:36,720 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 22:01:36,760 p=29139 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 22:01:36,760 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 22:01:36,775 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:36,776 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:36,785 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751296.78-56077482768118 `" && echo ansible-tmp-1578751296.78-56077482768118="` echo /root/.ansible/tmp/ansible-tmp-1578751296.78-56077482768118 `" ) && sleep 0'
2020-01-11 22:01:36,796 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 22:01:36,797 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpCLeZ5u TO /root/.ansible/tmp/ansible-tmp-1578751296.78-56077482768118/AnsiballZ_stat.py
2020-01-11 22:01:36,798 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751296.78-56077482768118/ /root/.ansible/tmp/ansible-tmp-1578751296.78-56077482768118/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:36,807 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751296.78-56077482768118/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:36,916 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751296.78-56077482768118/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:36,931 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 22:01:36,971 p=29139 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 22:01:36,971 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 22:01:36,989 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 22:01:37,028 p=29139 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 22:01:37,028 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 22:01:37,044 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:37,045 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:37,054 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751297.04-162767679360463 `" && echo ansible-tmp-1578751297.04-162767679360463="` echo /root/.ansible/tmp/ansible-tmp-1578751297.04-162767679360463 `" ) && sleep 0'
2020-01-11 22:01:37,066 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 22:01:37,066 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpno5_GS TO /root/.ansible/tmp/ansible-tmp-1578751297.04-162767679360463/AnsiballZ_stat.py
2020-01-11 22:01:37,067 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751297.04-162767679360463/ /root/.ansible/tmp/ansible-tmp-1578751297.04-162767679360463/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:37,076 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751297.04-162767679360463/AnsiballZ_stat.py && sleep 0'
2020-01-11 22:01:37,184 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751297.04-162767679360463/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:37,199 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 22:01:37,238 p=29139 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 22:01:37,239 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 22:01:37,256 p=29139 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 22:01:37,296 p=29139 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 22:01:37,296 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 22:01:37,313 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:37,313 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:37,322 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751297.31-260232789196777 `" && echo ansible-tmp-1578751297.31-260232789196777="` echo /root/.ansible/tmp/ansible-tmp-1578751297.31-260232789196777 `" ) && sleep 0'
2020-01-11 22:01:37,558 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 22:01:37,558 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmp1GZdiz TO /root/.ansible/tmp/ansible-tmp-1578751297.31-260232789196777/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 22:01:37,559 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751297.31-260232789196777/ /root/.ansible/tmp/ansible-tmp-1578751297.31-260232789196777/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 22:01:37,569 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751297.31-260232789196777/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 22:01:38,797 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751297.31-260232789196777/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:38,812 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 22:01:38,852 p=29139 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 22:01:38,852 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 22:01:38,870 p=29139 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 22:01:38,909 p=29139 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 22:01:38,909 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 22:01:38,926 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:38,926 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:38,935 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751298.93-8351325629406 `" && echo ansible-tmp-1578751298.93-8351325629406="` echo /root/.ansible/tmp/ansible-tmp-1578751298.93-8351325629406 `" ) && sleep 0'
2020-01-11 22:01:39,173 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 22:01:39,174 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpXVhIUM TO /root/.ansible/tmp/ansible-tmp-1578751298.93-8351325629406/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 22:01:39,175 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751298.93-8351325629406/ /root/.ansible/tmp/ansible-tmp-1578751298.93-8351325629406/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 22:01:39,184 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751298.93-8351325629406/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 22:01:39,877 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751298.93-8351325629406/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:39,891 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 22:01:39,930 p=29139 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 22:01:39,930 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 22:01:39,949 p=29139 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 22:01:39,988 p=29139 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 22:01:39,989 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 22:01:40,064 p=29139 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml for localhost
2020-01-11 22:01:40,113 p=29139 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 22:01:40,114 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:2
2020-01-11 22:01:40,131 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:40,132 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:40,141 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751300.13-256656723189954 `" && echo ansible-tmp-1578751300.13-256656723189954="` echo /root/.ansible/tmp/ansible-tmp-1578751300.13-256656723189954 `" ) && sleep 0'
2020-01-11 22:01:40,379 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 22:01:40,380 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpwWYOyX TO /root/.ansible/tmp/ansible-tmp-1578751300.13-256656723189954/AnsiballZ_ec2_group_facts.py
2020-01-11 22:01:40,380 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751300.13-256656723189954/ /root/.ansible/tmp/ansible-tmp-1578751300.13-256656723189954/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:40,390 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751300.13-256656723189954/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:41,197 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751300.13-256656723189954/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:41,213 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 22:01:41,253 p=29139 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 22:01:41,253 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:9
2020-01-11 22:01:41,283 p=29139 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 22:01:41,323 p=29139 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 22:01:41,323 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:14
2020-01-11 22:01:41,342 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:41,342 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:41,351 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751301.34-10181379191962 `" && echo ansible-tmp-1578751301.34-10181379191962="` echo /root/.ansible/tmp/ansible-tmp-1578751301.34-10181379191962 `" ) && sleep 0'
2020-01-11 22:01:41,364 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 22:01:41,364 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpfeAyCd TO /root/.ansible/tmp/ansible-tmp-1578751301.34-10181379191962/AnsiballZ_ec2_group_facts.py
2020-01-11 22:01:41,365 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751301.34-10181379191962/ /root/.ansible/tmp/ansible-tmp-1578751301.34-10181379191962/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:41,374 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751301.34-10181379191962/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:42,179 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751301.34-10181379191962/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:42,194 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 22:01:42,233 p=29139 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 22:01:42,233 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:21
2020-01-11 22:01:42,261 p=29139 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 22:01:42,303 p=29139 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 22:01:42,303 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:26
2020-01-11 22:01:42,321 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:42,322 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:42,330 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751302.32-219733720066841 `" && echo ansible-tmp-1578751302.32-219733720066841="` echo /root/.ansible/tmp/ansible-tmp-1578751302.32-219733720066841 `" ) && sleep 0'
2020-01-11 22:01:42,342 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 22:01:42,343 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpWhvsXE TO /root/.ansible/tmp/ansible-tmp-1578751302.32-219733720066841/AnsiballZ_ec2_group_facts.py
2020-01-11 22:01:42,344 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751302.32-219733720066841/ /root/.ansible/tmp/ansible-tmp-1578751302.32-219733720066841/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:42,352 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751302.32-219733720066841/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:43,140 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751302.32-219733720066841/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:43,155 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 22:01:43,195 p=29139 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 22:01:43,195 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:33
2020-01-11 22:01:43,223 p=29139 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 22:01:43,265 p=29139 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 22:01:43,265 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:39
2020-01-11 22:01:43,283 p=29139 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 22:01:43,284 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 22:01:43,292 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578751303.28-19021443707107 `" && echo ansible-tmp-1578751303.28-19021443707107="` echo /root/.ansible/tmp/ansible-tmp-1578751303.28-19021443707107 `" ) && sleep 0'
2020-01-11 22:01:43,305 p=29139 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 22:01:43,305 p=29139 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29139DmoHAO/tmpUW6eKT TO /root/.ansible/tmp/ansible-tmp-1578751303.28-19021443707107/AnsiballZ_ec2_group_facts.py
2020-01-11 22:01:43,306 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578751303.28-19021443707107/ /root/.ansible/tmp/ansible-tmp-1578751303.28-19021443707107/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:43,315 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578751303.28-19021443707107/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 22:01:44,144 p=29139 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578751303.28-19021443707107/ > /dev/null 2>&1 && sleep 0'
2020-01-11 22:01:44,159 p=29139 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 22:01:44,199 p=29139 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 22:01:44,199 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:46
2020-01-11 22:01:44,226 p=29139 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 22:01:44,268 p=29139 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 22:01:44,268 p=29139 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml:51
2020-01-11 22:01:44,289 p=29139 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 1\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances.yml': line 51, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 22:01:44,290 p=29139 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 22:01:44,291 p=29139 u=root |  localhost                  : ok=19   changed=0    unreachable=0    failed=1    skipped=5    rescued=0    ignored=0   
2020-01-11 23:08:22,417 p=29689 u=root |  ansible-playbook 2.8.4
  config file = /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg
  configured module search path = [u'/root/.ansible/plugins/modules', u'/usr/share/ansible/plugins/modules']
  ansible python module location = /usr/lib/python2.7/site-packages/ansible
  executable location = /bin/ansible-playbook
  python version = 2.7.5 (default, Aug  7 2019, 00:51:29) [GCC 4.8.5 20150623 (Red Hat 4.8.5-39)]
2020-01-11 23:08:22,417 p=29689 u=root |  Using /home/centos/aws-project/001.aws-hk-base-ec2/ansible.cfg as config file
2020-01-11 23:08:22,425 p=29689 u=root |  host_list declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 23:08:22,425 p=29689 u=root |  script declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 23:08:22,425 p=29689 u=root |  auto declined parsing /etc/ansible/hosts as it did not pass it's verify_file() method
2020-01-11 23:08:22,428 p=29689 u=root |  Parsed /etc/ansible/hosts inventory source with ini plugin
2020-01-11 23:08:22,430 p=29689 u=root |   [WARNING]: provided hosts list is empty, only localhost is available. Note that the implicit localhost does not match 'all'

2020-01-11 23:08:22,672 p=29689 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 23:08:22,827 p=29689 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 23:08:22,837 p=29689 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 23:08:22,847 p=29689 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 23:08:22,856 p=29689 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml
2020-01-11 23:08:22,866 p=29689 u=root |  statically imported: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml
2020-01-11 23:08:22,929 p=29689 u=root |  PLAYBOOK: 03.ec2.yml **************************************************************************************************************************************
2020-01-11 23:08:22,929 p=29689 u=root |  1 plays in 03.ec2.yml
2020-01-11 23:08:22,959 p=29689 u=root |  PLAY [Create ec2 instance] ********************************************************************************************************************************
2020-01-11 23:08:22,987 p=29689 u=root |  TASK [Gathering Facts] ************************************************************************************************************************************
2020-01-11 23:08:22,988 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/03.ec2.yml:2
2020-01-11 23:08:23,000 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:23,000 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:23,008 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755303.0-185137932444914 `" && echo ansible-tmp-1578755303.0-185137932444914="` echo /root/.ansible/tmp/ansible-tmp-1578755303.0-185137932444914 `" ) && sleep 0'
2020-01-11 23:08:23,394 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/system/setup.py
2020-01-11 23:08:23,395 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpFFy4Ge TO /root/.ansible/tmp/ansible-tmp-1578755303.0-185137932444914/AnsiballZ_setup.py
2020-01-11 23:08:23,396 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755303.0-185137932444914/ /root/.ansible/tmp/ansible-tmp-1578755303.0-185137932444914/AnsiballZ_setup.py && sleep 0'
2020-01-11 23:08:23,405 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755303.0-185137932444914/AnsiballZ_setup.py && sleep 0'
2020-01-11 23:08:24,034 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755303.0-185137932444914/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:24,106 p=29689 u=root |  ok: [localhost]
2020-01-11 23:08:24,107 p=29689 u=root |  META: ran handlers
2020-01-11 23:08:24,148 p=29689 u=root |  TASK [ec2 : Create a new EC2 key] *************************************************************************************************************************
2020-01-11 23:08:24,148 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:2
2020-01-11 23:08:24,164 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:24,165 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:24,173 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755304.16-88928218037791 `" && echo ansible-tmp-1578755304.16-88928218037791="` echo /root/.ansible/tmp/ansible-tmp-1578755304.16-88928218037791 `" ) && sleep 0'
2020-01-11 23:08:24,416 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_key.py
2020-01-11 23:08:24,417 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpoT48iJ TO /root/.ansible/tmp/ansible-tmp-1578755304.16-88928218037791/AnsiballZ_ec2_key.py
2020-01-11 23:08:24,418 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755304.16-88928218037791/ /root/.ansible/tmp/ansible-tmp-1578755304.16-88928218037791/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 23:08:24,427 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755304.16-88928218037791/AnsiballZ_ec2_key.py && sleep 0'
2020-01-11 23:08:25,421 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755304.16-88928218037791/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:25,434 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "force": true, 
            "key_material": null, 
            "name": "m20-ssh", 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "state": "present", 
            "validate_certs": true, 
            "wait": false, 
            "wait_timeout": 300
        }
    }, 
    "key": {
        "fingerprint": "22:7f:6c:bd:30:f9:ac:7f:6b:0a:3d:e5:4d:9d:c5:e1:23:32:f2:cd", 
        "name": "m20-ssh"
    }, 
    "msg": "key pair already exists"
}
2020-01-11 23:08:25,474 p=29689 u=root |  TASK [ec2 : Check directory exists or not.] ***************************************************************************************************************
2020-01-11 23:08:25,474 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:8
2020-01-11 23:08:25,490 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:25,491 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:25,499 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755305.49-124765840409350 `" && echo ansible-tmp-1578755305.49-124765840409350="` echo /root/.ansible/tmp/ansible-tmp-1578755305.49-124765840409350 `" ) && sleep 0'
2020-01-11 23:08:25,722 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 23:08:25,722 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmp2QMly9 TO /root/.ansible/tmp/ansible-tmp-1578755305.49-124765840409350/AnsiballZ_stat.py
2020-01-11 23:08:25,723 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755305.49-124765840409350/ /root/.ansible/tmp/ansible-tmp-1578755305.49-124765840409350/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:25,732 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755305.49-124765840409350/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:25,835 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755305.49-124765840409350/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:25,852 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.keys"
        }
    }, 
    "stat": {
        "atime": 1578639412.2112997, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578747318.53309, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 55283898, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0755", 
        "mtime": 1578747318.53309, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.keys", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 78, 
        "uid": 0, 
        "version": "18446744072294406511", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 23:08:25,891 p=29689 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 23:08:25,892 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:12
2020-01-11 23:08:25,910 p=29689 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 23:08:25,952 p=29689 u=root |  TASK [ec2 : Save private key] *****************************************************************************************************************************
2020-01-11 23:08:25,952 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:16
2020-01-11 23:08:25,968 p=29689 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 23:08:26,008 p=29689 u=root |  TASK [ec2 : Check directory  inventory exists or not.] ****************************************************************************************************
2020-01-11 23:08:26,008 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:20
2020-01-11 23:08:26,025 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:26,025 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:26,034 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755306.02-90982006508774 `" && echo ansible-tmp-1578755306.02-90982006508774="` echo /root/.ansible/tmp/ansible-tmp-1578755306.02-90982006508774 `" ) && sleep 0'
2020-01-11 23:08:26,046 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 23:08:26,047 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmp37DWsa TO /root/.ansible/tmp/ansible-tmp-1578755306.02-90982006508774/AnsiballZ_stat.py
2020-01-11 23:08:26,047 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755306.02-90982006508774/ /root/.ansible/tmp/ansible-tmp-1578755306.02-90982006508774/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:26,057 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755306.02-90982006508774/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:26,162 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755306.02-90982006508774/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:26,178 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory"
        }
    }, 
    "stat": {
        "atime": 1578665101.8300586, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 0, 
        "charset": "binary", 
        "ctime": 1578665083.4391654, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 8431931, 
        "isblk": false, 
        "ischr": false, 
        "isdir": true, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": false, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "inode/directory", 
        "mode": "0775", 
        "mtime": 1578665083.4391654, 
        "nlink": 2, 
        "path": "/home/centos/aws-project/.inventory", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 110, 
        "uid": 0, 
        "version": "1188421216", 
        "wgrp": true, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 23:08:26,218 p=29689 u=root |  TASK [ec2 : Make private key Dir] *************************************************************************************************************************
2020-01-11 23:08:26,218 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:24
2020-01-11 23:08:26,234 p=29689 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 23:08:26,273 p=29689 u=root |  TASK [ec2 : Check File exists or not] *********************************************************************************************************************
2020-01-11 23:08:26,274 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:28
2020-01-11 23:08:26,290 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:26,290 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:26,299 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755306.29-119951278040844 `" && echo ansible-tmp-1578755306.29-119951278040844="` echo /root/.ansible/tmp/ansible-tmp-1578755306.29-119951278040844 `" ) && sleep 0'
2020-01-11 23:08:26,310 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 23:08:26,311 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpgrL8JY TO /root/.ansible/tmp/ansible-tmp-1578755306.29-119951278040844/AnsiballZ_stat.py
2020-01-11 23:08:26,312 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755306.29-119951278040844/ /root/.ansible/tmp/ansible-tmp-1578755306.29-119951278040844/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:26,320 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755306.29-119951278040844/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:26,426 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755306.29-119951278040844/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:26,442 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_hosts"
        }
    }, 
    "stat": {
        "atime": 1578747318.9920874, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "17f80526764e5dd0c5182f8a27f96afaeee75d11", 
        "ctime": 1578485457.4528575, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4935998, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.4518576, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_hosts", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 420, 
        "uid": 0, 
        "version": "627431758", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 23:08:26,482 p=29689 u=root |  TASK [ec2 : Create file if does not exist] ****************************************************************************************************************
2020-01-11 23:08:26,482 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:32
2020-01-11 23:08:26,498 p=29689 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 23:08:26,538 p=29689 u=root |  TASK [ec2 : Check instances File exists or not] ***********************************************************************************************************
2020-01-11 23:08:26,538 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:36
2020-01-11 23:08:26,554 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:26,554 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:26,563 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755306.55-158342906215475 `" && echo ansible-tmp-1578755306.55-158342906215475="` echo /root/.ansible/tmp/ansible-tmp-1578755306.55-158342906215475 `" ) && sleep 0'
2020-01-11 23:08:26,574 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/files/stat.py
2020-01-11 23:08:26,575 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpz8Ew6H TO /root/.ansible/tmp/ansible-tmp-1578755306.55-158342906215475/AnsiballZ_stat.py
2020-01-11 23:08:26,576 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755306.55-158342906215475/ /root/.ansible/tmp/ansible-tmp-1578755306.55-158342906215475/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:26,583 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755306.55-158342906215475/AnsiballZ_stat.py && sleep 0'
2020-01-11 23:08:26,689 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755306.55-158342906215475/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:26,704 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "checksum_algorithm": "sha1", 
            "follow": false, 
            "get_attributes": true, 
            "get_checksum": true, 
            "get_md5": null, 
            "get_mime": true, 
            "path": "/home/centos/aws-project/.inventory/hk_instances"
        }
    }, 
    "stat": {
        "atime": 1578747319.259086, 
        "attr_flags": "", 
        "attributes": [], 
        "block_size": 4096, 
        "blocks": 8, 
        "charset": "us-ascii", 
        "checksum": "312216b66cac1e2b55fdc69bd18e359496e65de8", 
        "ctime": 1578485457.714856, 
        "dev": 51713, 
        "device_type": 0, 
        "executable": true, 
        "exists": true, 
        "gid": 0, 
        "gr_name": "root", 
        "inode": 4939104, 
        "isblk": false, 
        "ischr": false, 
        "isdir": false, 
        "isfifo": false, 
        "isgid": false, 
        "islnk": false, 
        "isreg": true, 
        "issock": false, 
        "isuid": false, 
        "mimetype": "text/plain", 
        "mode": "0755", 
        "mtime": 1578485457.714856, 
        "nlink": 1, 
        "path": "/home/centos/aws-project/.inventory/hk_instances", 
        "pw_name": "root", 
        "readable": true, 
        "rgrp": true, 
        "roth": true, 
        "rusr": true, 
        "size": 513, 
        "uid": 0, 
        "version": "1240002102", 
        "wgrp": false, 
        "woth": false, 
        "writeable": true, 
        "wusr": true, 
        "xgrp": true, 
        "xoth": true, 
        "xusr": true
    }
}
2020-01-11 23:08:26,744 p=29689 u=root |  TASK [ec2 : Create instances file if does not exist] ******************************************************************************************************
2020-01-11 23:08:26,744 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/creata_keys.yml:40
2020-01-11 23:08:26,761 p=29689 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 23:08:26,802 p=29689 u=root |  TASK [ec2 : VPC facts] ************************************************************************************************************************************
2020-01-11 23:08:26,802 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:3
2020-01-11 23:08:26,818 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:26,818 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:26,827 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755306.82-143628183060935 `" && echo ansible-tmp-1578755306.82-143628183060935="` echo /root/.ansible/tmp/ansible-tmp-1578755306.82-143628183060935 `" ) && sleep 0'
2020-01-11 23:08:27,063 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net_facts.py
2020-01-11 23:08:27,064 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpLO0nq0 TO /root/.ansible/tmp/ansible-tmp-1578755306.82-143628183060935/AnsiballZ_ec2_vpc_net_facts.py
2020-01-11 23:08:27,065 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755306.82-143628183060935/ /root/.ansible/tmp/ansible-tmp-1578755306.82-143628183060935/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 23:08:27,074 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755306.82-143628183060935/AnsiballZ_ec2_vpc_net_facts.py && sleep 0'
2020-01-11 23:08:28,386 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755306.82-143628183060935/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:28,400 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Name": "M20"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true, 
            "vpc_ids": []
        }
    }, 
    "vpcs": [
        {
            "cidr_block": "10.20.0.0/16", 
            "cidr_block_association_set": [
                {
                    "association_id": "vpc-cidr-assoc-0653c160d35194f1e", 
                    "cidr_block": "10.20.0.0/16", 
                    "cidr_block_state": {
                        "state": "associated"
                    }
                }
            ], 
            "classic_link_dns_supported": false, 
            "classic_link_enabled": false, 
            "dhcp_options_id": "dopt-f30bea9a", 
            "enable_dns_hostnames": true, 
            "enable_dns_support": true, 
            "id": "vpc-0f5dfc0ae44286535", 
            "instance_tenancy": "default", 
            "is_default": false, 
            "owner_id": "838988372941", 
            "state": "available", 
            "tags": {
                "Environment": "M20", 
                "Name": "M20"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 23:08:28,440 p=29689 u=root |  TASK [ec2 : set fact: VPC ID] *****************************************************************************************************************************
2020-01-11 23:08:28,440 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:11
2020-01-11 23:08:28,457 p=29689 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }, 
    "changed": false
}
2020-01-11 23:08:28,496 p=29689 u=root |  TASK [ec2 : VPC subnet facts] *****************************************************************************************************************************
2020-01-11 23:08:28,496 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:16
2020-01-11 23:08:28,513 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:28,513 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:28,522 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755308.51-32934829962182 `" && echo ansible-tmp-1578755308.51-32934829962182="` echo /root/.ansible/tmp/ansible-tmp-1578755308.51-32934829962182 `" ) && sleep 0'
2020-01-11 23:08:28,767 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet_facts.py
2020-01-11 23:08:28,767 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpSmV1dN TO /root/.ansible/tmp/ansible-tmp-1578755308.51-32934829962182/AnsiballZ_ec2_vpc_subnet_facts.py
2020-01-11 23:08:28,768 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755308.51-32934829962182/ /root/.ansible/tmp/ansible-tmp-1578755308.51-32934829962182/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 23:08:28,777 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755308.51-32934829962182/AnsiballZ_ec2_vpc_subnet_facts.py && sleep 0'
2020-01-11 23:08:29,490 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755308.51-32934829962182/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:29,503 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "tag:Use": "ec2", 
                "vpc-id": "vpc-0f5dfc0ae44286535"
            }, 
            "profile": null, 
            "region": null, 
            "security_token": null, 
            "subnet_ids": [], 
            "validate_certs": true
        }
    }, 
    "subnets": []
}
2020-01-11 23:08:29,543 p=29689 u=root |  TASK [ec2 : register just the IDs for each of the groups] *************************************************************************************************
2020-01-11 23:08:29,543 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/vpc_subnet_facts.yml:23
2020-01-11 23:08:29,561 p=29689 u=root |  ok: [localhost] => {
    "ansible_facts": {
        "subnet_ec2_ids": []
    }, 
    "changed": false
}
2020-01-11 23:08:29,601 p=29689 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 23:08:29,602 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:5
2020-01-11 23:08:29,618 p=29689 u=root |  skipping: [localhost] => {
    "changed": false, 
    "skip_reason": "Conditional result was False"
}
2020-01-11 23:08:29,658 p=29689 u=root |  TASK [ec2 : include_tasks] ********************************************************************************************************************************
2020-01-11 23:08:29,659 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/main.yml:8
2020-01-11 23:08:29,737 p=29689 u=root |  included: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml for localhost
2020-01-11 23:08:29,784 p=29689 u=root |  TASK [ec2 : Get NG SG ID] *********************************************************************************************************************************
2020-01-11 23:08:29,784 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:2
2020-01-11 23:08:29,801 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:29,802 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:29,810 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755309.8-182076088831693 `" && echo ansible-tmp-1578755309.8-182076088831693="` echo /root/.ansible/tmp/ansible-tmp-1578755309.8-182076088831693 `" ) && sleep 0'
2020-01-11 23:08:30,048 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 23:08:30,049 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpAre2QG TO /root/.ansible/tmp/ansible-tmp-1578755309.8-182076088831693/AnsiballZ_ec2_group_facts.py
2020-01-11 23:08:30,049 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755309.8-182076088831693/ /root/.ansible/tmp/ansible-tmp-1578755309.8-182076088831693/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:30,059 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755309.8-182076088831693/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:30,857 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755309.8-182076088831693/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:30,873 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-ng-80-443-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 80 443 to the world", 
            "group_id": "sg-0e584c1f8c10325ab", 
            "group_name": "M20-ng-80-443-all", 
            "ip_permissions": [
                {
                    "from_port": 80, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 80"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 80, 
                    "user_id_group_pairs": []
                }, 
                {
                    "from_port": 443, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 443"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 443, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-ng-80-443-all", 
                "Name": "M20-ng-80-443-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 23:08:30,913 p=29689 u=root |  TASK [ec2 : list of ng the security group id.] ************************************************************************************************************
2020-01-11 23:08:30,913 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:9
2020-01-11 23:08:30,941 p=29689 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 80, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 80, u'ip_ranges': [{u'description': u'allow all on port 80', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}, {u'from_port': 443, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 443, u'ip_ranges': [{u'description': u'allow all on port 443', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 80 443 to the world', u'tags': {u'Environment': u'M20-ng-80-443-all', u'Name': u'M20-ng-80-443-all'}, u'group_name': u'M20-ng-80-443-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0e584c1f8c10325ab', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_ng_id": "sg-0e584c1f8c10325ab"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 80 443 to the world", 
        "group_id": "sg-0e584c1f8c10325ab", 
        "group_name": "M20-ng-80-443-all", 
        "ip_permissions": [
            {
                "from_port": 80, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 80"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 80, 
                "user_id_group_pairs": []
            }, 
            {
                "from_port": 443, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 443"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 443, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-ng-80-443-all", 
            "Name": "M20-ng-80-443-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 23:08:30,983 p=29689 u=root |  TASK [ec2 : Get agent acl SG ID] **************************************************************************************************************************
2020-01-11 23:08:30,983 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:14
2020-01-11 23:08:31,001 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:31,001 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:31,010 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755311.0-68244804022231 `" && echo ansible-tmp-1578755311.0-68244804022231="` echo /root/.ansible/tmp/ansible-tmp-1578755311.0-68244804022231 `" ) && sleep 0'
2020-01-11 23:08:31,023 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 23:08:31,023 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpxH_iqo TO /root/.ansible/tmp/ansible-tmp-1578755311.0-68244804022231/AnsiballZ_ec2_group_facts.py
2020-01-11 23:08:31,024 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755311.0-68244804022231/ /root/.ansible/tmp/ansible-tmp-1578755311.0-68244804022231/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:31,034 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755311.0-68244804022231/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:31,828 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755311.0-68244804022231/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:31,843 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-agent-acl"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 7880 7881 7882 to the world", 
            "group_id": "sg-022652d5bf12d8fa8", 
            "group_name": "M20-agent-acl", 
            "ip_permissions": [
                {
                    "from_port": 7880, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0", 
                            "description": "allow all on port 7880"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 7880, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-agent-acl", 
                "Name": "M20-agent-acl"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 23:08:31,881 p=29689 u=root |  TASK [ec2 : list of agent acl the security group id.] *****************************************************************************************************
2020-01-11 23:08:31,881 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:21
2020-01-11 23:08:31,908 p=29689 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 7880, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 7880, u'ip_ranges': [{u'description': u'allow all on port 7880', u'cidr_ip': u'0.0.0.0/0'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 7880 7881 7882 to the world', u'tags': {u'Environment': u'M20-agent-acl', u'Name': u'M20-agent-acl'}, u'group_name': u'M20-agent-acl', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-022652d5bf12d8fa8', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_agent_acl_id": "sg-022652d5bf12d8fa8"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 7880 7881 7882 to the world", 
        "group_id": "sg-022652d5bf12d8fa8", 
        "group_name": "M20-agent-acl", 
        "ip_permissions": [
            {
                "from_port": 7880, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0", 
                        "description": "allow all on port 7880"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 7880, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-agent-acl", 
            "Name": "M20-agent-acl"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 23:08:31,949 p=29689 u=root |  TASK [ec2 : Get docker manager SG ID] *********************************************************************************************************************
2020-01-11 23:08:31,949 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:26
2020-01-11 23:08:31,967 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:31,967 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:31,976 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755311.97-177316732303450 `" && echo ansible-tmp-1578755311.97-177316732303450="` echo /root/.ansible/tmp/ansible-tmp-1578755311.97-177316732303450 `" ) && sleep 0'
2020-01-11 23:08:31,989 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 23:08:31,989 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpZGJVg7 TO /root/.ansible/tmp/ansible-tmp-1578755311.97-177316732303450/AnsiballZ_ec2_group_facts.py
2020-01-11 23:08:31,990 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755311.97-177316732303450/ /root/.ansible/tmp/ansible-tmp-1578755311.97-177316732303450/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:31,999 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755311.97-177316732303450/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:32,824 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755311.97-177316732303450/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:32,838 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-docker-manager"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 2375 to the user", 
            "group_id": "sg-01340203ba589fcc5", 
            "group_name": "M20-docker-manager", 
            "ip_permissions": [
                {
                    "from_port": 2375, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "private allow all on port 2375"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 2375, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-docker-manager", 
                "Name": "M20-docker-manager"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 23:08:32,878 p=29689 u=root |  TASK [ec2 : list of docker manager the security group id.] ************************************************************************************************
2020-01-11 23:08:32,878 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:33
2020-01-11 23:08:32,908 p=29689 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 2375, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 2375, u'ip_ranges': [{u'description': u'private allow all on port 2375', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 2375 to the user', u'tags': {u'Environment': u'M20-docker-manager', u'Name': u'M20-docker-manager'}, u'group_name': u'M20-docker-manager', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-01340203ba589fcc5', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_docker_manager_id": "sg-01340203ba589fcc5"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 2375 to the user", 
        "group_id": "sg-01340203ba589fcc5", 
        "group_name": "M20-docker-manager", 
        "ip_permissions": [
            {
                "from_port": 2375, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "private allow all on port 2375"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 2375, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-docker-manager", 
            "Name": "M20-docker-manager"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 23:08:32,950 p=29689 u=root |  TASK [ec2 : Get ALL SG ID] ********************************************************************************************************************************
2020-01-11 23:08:32,950 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:38
2020-01-11 23:08:32,967 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:32,967 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:32,976 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755312.97-156263198265726 `" && echo ansible-tmp-1578755312.97-156263198265726="` echo /root/.ansible/tmp/ansible-tmp-1578755312.97-156263198265726 `" ) && sleep 0'
2020-01-11 23:08:32,988 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 23:08:32,988 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpvcwP2U TO /root/.ansible/tmp/ansible-tmp-1578755312.97-156263198265726/AnsiballZ_ec2_group_facts.py
2020-01-11 23:08:32,989 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755312.97-156263198265726/ /root/.ansible/tmp/ansible-tmp-1578755312.97-156263198265726/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:32,998 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755312.97-156263198265726/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:33,781 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755312.97-156263198265726/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:33,795 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-all"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens all ports to the world", 
            "group_id": "sg-0c2c096258071c925", 
            "group_name": "M20-all", 
            "ip_permissions": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "10.20.0.0/16", 
                            "description": "private ec2 allow all on ports"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-all", 
                "Name": "M20-all"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 23:08:33,835 p=29689 u=root |  TASK [ec2 : list of all the security group id.] ***********************************************************************************************************
2020-01-11 23:08:33,835 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:45
2020-01-11 23:08:33,861 p=29689 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'description': u'private ec2 allow all on ports', u'cidr_ip': u'10.20.0.0/16'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'description': u'opens all ports to the world', u'tags': {u'Environment': u'M20-all', u'Name': u'M20-all'}, u'group_name': u'M20-all', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-0c2c096258071c925', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_all_id": "sg-0c2c096258071c925"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens all ports to the world", 
        "group_id": "sg-0c2c096258071c925", 
        "group_name": "M20-all", 
        "ip_permissions": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "10.20.0.0/16", 
                        "description": "private ec2 allow all on ports"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-all", 
            "Name": "M20-all"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 23:08:33,901 p=29689 u=root |  TASK [ec2 : ec2_group_facts] ******************************************************************************************************************************
2020-01-11 23:08:33,902 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:50
2020-01-11 23:08:33,919 p=29689 u=root |  <127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: root
2020-01-11 23:08:33,919 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'echo ~root && sleep 0'
2020-01-11 23:08:33,928 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /root/.ansible/tmp/ansible-tmp-1578755313.92-138746011083800 `" && echo ansible-tmp-1578755313.92-138746011083800="` echo /root/.ansible/tmp/ansible-tmp-1578755313.92-138746011083800 `" ) && sleep 0'
2020-01-11 23:08:33,938 p=29689 u=root |  Using module file /usr/lib/python2.7/site-packages/ansible/modules/cloud/amazon/ec2_group_facts.py
2020-01-11 23:08:33,939 p=29689 u=root |  <127.0.0.1> PUT /root/.ansible/tmp/ansible-local-29689os46YP/tmpCPNBW3 TO /root/.ansible/tmp/ansible-tmp-1578755313.92-138746011083800/AnsiballZ_ec2_group_facts.py
2020-01-11 23:08:33,940 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'chmod u+x /root/.ansible/tmp/ansible-tmp-1578755313.92-138746011083800/ /root/.ansible/tmp/ansible-tmp-1578755313.92-138746011083800/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:33,948 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c '/usr/bin/python2 /root/.ansible/tmp/ansible-tmp-1578755313.92-138746011083800/AnsiballZ_ec2_group_facts.py && sleep 0'
2020-01-11 23:08:34,743 p=29689 u=root |  <127.0.0.1> EXEC /bin/sh -c 'rm -f -r /root/.ansible/tmp/ansible-tmp-1578755313.92-138746011083800/ > /dev/null 2>&1 && sleep 0'
2020-01-11 23:08:34,758 p=29689 u=root |  ok: [localhost] => {
    "changed": false, 
    "invocation": {
        "module_args": {
            "aws_access_key": null, 
            "aws_secret_key": null, 
            "debug_botocore_endpoint_logs": false, 
            "ec2_url": null, 
            "filters": {
                "group-name": "M20-merchant-8081"
            }, 
            "profile": null, 
            "region": "ap-east-1", 
            "security_token": null, 
            "validate_certs": true
        }
    }, 
    "security_groups": [
        {
            "description": "opens port 8081 to the world", 
            "group_id": "sg-06ac1466b623c31bb", 
            "group_name": "M20-merchant-8081", 
            "ip_permissions": [
                {
                    "from_port": 8081, 
                    "ip_protocol": "tcp", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "154.197.29.34/32", 
                            "description": "allow all on port 8081"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "to_port": 8081, 
                    "user_id_group_pairs": []
                }
            ], 
            "ip_permissions_egress": [
                {
                    "ip_protocol": "-1", 
                    "ip_ranges": [
                        {
                            "cidr_ip": "0.0.0.0/0"
                        }
                    ], 
                    "ipv6_ranges": [], 
                    "prefix_list_ids": [], 
                    "user_id_group_pairs": []
                }
            ], 
            "owner_id": "838988372941", 
            "tags": {
                "Environment": "M20-merchant-8081", 
                "Name": "M20-merchant-8081"
            }, 
            "vpc_id": "vpc-0f5dfc0ae44286535"
        }
    ]
}
2020-01-11 23:08:34,798 p=29689 u=root |  TASK [ec2 : list of other the security group id.] *********************************************************************************************************
2020-01-11 23:08:34,798 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:56
2020-01-11 23:08:34,832 p=29689 u=root |  ok: [localhost] => (item={u'ip_permissions': [{u'from_port': 8081, u'ip_protocol': u'tcp', u'ipv6_ranges': [], u'to_port': 8081, u'ip_ranges': [{u'description': u'allow all on port 8081', u'cidr_ip': u'154.197.29.34/32'}], u'user_id_group_pairs': [], u'prefix_list_ids': []}], u'description': u'opens port 8081 to the world', u'tags': {u'Environment': u'M20-merchant-8081', u'Name': u'M20-merchant-8081'}, u'group_name': u'M20-merchant-8081', u'vpc_id': u'vpc-0f5dfc0ae44286535', u'group_id': u'sg-06ac1466b623c31bb', u'ip_permissions_egress': [{u'user_id_group_pairs': [], u'ipv6_ranges': [], u'ip_ranges': [{u'cidr_ip': u'0.0.0.0/0'}], u'ip_protocol': u'-1', u'prefix_list_ids': []}], u'owner_id': u'838988372941'}) => {
    "ansible_facts": {
        "sg_other_id": "sg-06ac1466b623c31bb"
    }, 
    "ansible_loop_var": "item", 
    "changed": false, 
    "item": {
        "description": "opens port 8081 to the world", 
        "group_id": "sg-06ac1466b623c31bb", 
        "group_name": "M20-merchant-8081", 
        "ip_permissions": [
            {
                "from_port": 8081, 
                "ip_protocol": "tcp", 
                "ip_ranges": [
                    {
                        "cidr_ip": "154.197.29.34/32", 
                        "description": "allow all on port 8081"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "to_port": 8081, 
                "user_id_group_pairs": []
            }
        ], 
        "ip_permissions_egress": [
            {
                "ip_protocol": "-1", 
                "ip_ranges": [
                    {
                        "cidr_ip": "0.0.0.0/0"
                    }
                ], 
                "ipv6_ranges": [], 
                "prefix_list_ids": [], 
                "user_id_group_pairs": []
            }
        ], 
        "owner_id": "838988372941", 
        "tags": {
            "Environment": "M20-merchant-8081", 
            "Name": "M20-merchant-8081"
        }, 
        "vpc_id": "vpc-0f5dfc0ae44286535"
    }
}
2020-01-11 23:08:34,872 p=29689 u=root |  TASK [ec2 : Provision ec2 instance] ***********************************************************************************************************************
2020-01-11 23:08:34,872 p=29689 u=root |  task path: /home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml:61
2020-01-11 23:08:34,899 p=29689 u=root |  fatal: [localhost]: FAILED! => {
    "msg": "The task includes an option with an undefined variable. The error was: list object has no element 0\n\nThe error appears to be in '/home/centos/aws-project/001.aws-hk-base-ec2/roles/ec2/tasks/instances_other_sg.yml': line 61, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: \"Provision ec2 instance\"\n  ^ here\n"
}
2020-01-11 23:08:34,900 p=29689 u=root |  PLAY RECAP ************************************************************************************************************************************************
2020-01-11 23:08:34,901 p=29689 u=root |  localhost                  : ok=21   changed=0    unreachable=0    failed=1    skipped=6    rescued=0    ignored=0   
